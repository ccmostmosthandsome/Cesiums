!function(I,C){"object"==typeof exports&&"object"==typeof module?module.exports=C(require("Cesium")):"function"==typeof define&&define.amd?define(["Cesium"],C):"object"==typeof exports?exports.Cesiums=C(require("Cesium")):I.Cesiums=C(I.Cesium)}(window,function(__WEBPACK_EXTERNAL_MODULE__0__){return function(I){var C={};function g(Q){if(C[Q])return C[Q].exports;var i=C[Q]={i:Q,l:!1,exports:{}};return I[Q].call(i.exports,i,i.exports,g),i.l=!0,i.exports}return g.m=I,g.c=C,g.d=function(I,C,Q){g.o(I,C)||Object.defineProperty(I,C,{enumerable:!0,get:Q})},g.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},g.t=function(I,C){if(1&C&&(I=g(I)),8&C)return I;if(4&C&&"object"==typeof I&&I&&I.__esModule)return I;var Q=Object.create(null);if(g.r(Q),Object.defineProperty(Q,"default",{enumerable:!0,value:I}),2&C&&"string"!=typeof I)for(var i in I)g.d(Q,i,function(C){return I[C]}.bind(null,i));return Q},g.n=function(I){var C=I&&I.__esModule?function(){return I.default}:function(){return I};return g.d(C,"a",C),C},g.o=function(I,C){return Object.prototype.hasOwnProperty.call(I,C)},g.p="/dist",g(g.s=21)}([function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJDZXNpdW1cIj8yN2MzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXzsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\nvar fillOptions = exports.fillOptions = function fillOptions(options, defaultOptions) {\n    options = options || {};\n    var option = void 0;\n    for (option in defaultOptions) {\n        if (options[option] === undefined) {\n            options[option] = clone(defaultOptions[option]);\n        }\n    }\n};\n\nvar copyOptions = exports.copyOptions = function copyOptions(options, defaultOptions) {\n    var newOptions = clone(options),\n        option = void 0;\n    for (option in defaultOptions) {\n        if (newOptions[option] === undefined) {\n            newOptions[option] = clone(defaultOptions[option]);\n        }\n    }\n    return newOptions;\n};\n\nvar clone = exports.clone = function clone(from, to) {\n    if (from == null || (typeof from === "undefined" ? "undefined" : _typeof(from)) != "object") return from;\n    if (from.constructor != Object && from.constructor != Array) return from;\n    if (from.constructor == Date || from.constructor == RegExp || from.constructor == Function || from.constructor == String || from.constructor == Number || from.constructor == Boolean) return new from.constructor(from);\n\n    to = to || new from.constructor();\n\n    for (var name in from) {\n        to[name] = typeof to[name] == "undefined" ? clone(from[name], null) : to[name];\n    }\n\n    return to;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvdXRpbC91dGlsLmpzPzkxYTQiXSwibmFtZXMiOlsiZmlsbE9wdGlvbnMiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJvcHRpb24iLCJ1bmRlZmluZWQiLCJjbG9uZSIsImNvcHlPcHRpb25zIiwibmV3T3B0aW9ucyIsImZyb20iLCJ0byIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiQXJyYXkiLCJEYXRlIiwiUmVnRXhwIiwiRnVuY3Rpb24iLCJTdHJpbmciLCJOdW1iZXIiLCJCb29sZWFuIiwibmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxJQUFNQSxvQ0FBYyxTQUFkQSxXQUFjLENBQUNDLE9BQUQsRUFBVUMsY0FBVixFQUE2QjtBQUNwREQsY0FBVUEsV0FBVyxFQUFyQjtBQUNBLFFBQUlFLGVBQUo7QUFDQSxTQUFLQSxNQUFMLElBQWVELGNBQWYsRUFBK0I7QUFDM0IsWUFBSUQsUUFBUUUsTUFBUixNQUFvQkMsU0FBeEIsRUFBbUM7QUFDL0JILG9CQUFRRSxNQUFSLElBQWtCRSxNQUFNSCxlQUFlQyxNQUFmLENBQU4sQ0FBbEI7QUFDSDtBQUNKO0FBQ0osQ0FSTTs7QUFVQSxJQUFNRyxvQ0FBYyxTQUFkQSxXQUFjLENBQUNMLE9BQUQsRUFBVUMsY0FBVixFQUE2QjtBQUNwRCxRQUFJSyxhQUFhRixNQUFNSixPQUFOLENBQWpCO0FBQUEsUUFBaUNFLGVBQWpDO0FBQ0EsU0FBS0EsTUFBTCxJQUFlRCxjQUFmLEVBQStCO0FBQzNCLFlBQUlLLFdBQVdKLE1BQVgsTUFBdUJDLFNBQTNCLEVBQXNDO0FBQ2xDRyx1QkFBV0osTUFBWCxJQUFxQkUsTUFBTUgsZUFBZUMsTUFBZixDQUFOLENBQXJCO0FBQ0g7QUFDSjtBQUNELFdBQU9JLFVBQVA7QUFDSCxDQVJNOztBQVVBLElBQU1GLHdCQUFRLFNBQVJBLEtBQVEsQ0FBQ0csSUFBRCxFQUFPQyxFQUFQLEVBQWM7QUFDL0IsUUFBSUQsUUFBUSxJQUFSLElBQWdCLFFBQU9BLElBQVAseUNBQU9BLElBQVAsTUFBZSxRQUFuQyxFQUE2QyxPQUFPQSxJQUFQO0FBQzdDLFFBQUlBLEtBQUtFLFdBQUwsSUFBb0JDLE1BQXBCLElBQThCSCxLQUFLRSxXQUFMLElBQW9CRSxLQUF0RCxFQUE2RCxPQUFPSixJQUFQO0FBQzdELFFBQUlBLEtBQUtFLFdBQUwsSUFBb0JHLElBQXBCLElBQTRCTCxLQUFLRSxXQUFMLElBQW9CSSxNQUFoRCxJQUEwRE4sS0FBS0UsV0FBTCxJQUFvQkssUUFBOUUsSUFDQVAsS0FBS0UsV0FBTCxJQUFvQk0sTUFEcEIsSUFDOEJSLEtBQUtFLFdBQUwsSUFBb0JPLE1BRGxELElBQzREVCxLQUFLRSxXQUFMLElBQW9CUSxPQURwRixFQUVJLE9BQU8sSUFBSVYsS0FBS0UsV0FBVCxDQUFxQkYsSUFBckIsQ0FBUDs7QUFFSkMsU0FBS0EsTUFBTSxJQUFJRCxLQUFLRSxXQUFULEVBQVg7O0FBRUEsU0FBSyxJQUFJUyxJQUFULElBQWlCWCxJQUFqQixFQUF1QjtBQUNuQkMsV0FBR1UsSUFBSCxJQUFXLE9BQU9WLEdBQUdVLElBQUgsQ0FBUCxJQUFtQixXQUFuQixHQUFpQ2QsTUFBTUcsS0FBS1csSUFBTCxDQUFOLEVBQWtCLElBQWxCLENBQWpDLEdBQTJEVixHQUFHVSxJQUFILENBQXRFO0FBQ0g7O0FBRUQsV0FBT1YsRUFBUDtBQUNILENBZE0iLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBmaWxsT3B0aW9ucyA9IChvcHRpb25zLCBkZWZhdWx0T3B0aW9ucykgPT4ge1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICBsZXQgb3B0aW9uO1xyXG4gICAgZm9yIChvcHRpb24gaW4gZGVmYXVsdE9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9uc1tvcHRpb25dID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb3B0aW9uc1tvcHRpb25dID0gY2xvbmUoZGVmYXVsdE9wdGlvbnNbb3B0aW9uXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29weU9wdGlvbnMgPSAob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpID0+IHtcclxuICAgIGxldCBuZXdPcHRpb25zID0gY2xvbmUob3B0aW9ucyksIG9wdGlvbjtcclxuICAgIGZvciAob3B0aW9uIGluIGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG5ld09wdGlvbnNbb3B0aW9uXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG5ld09wdGlvbnNbb3B0aW9uXSA9IGNsb25lKGRlZmF1bHRPcHRpb25zW29wdGlvbl0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdPcHRpb25zO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2xvbmUgPSAoZnJvbSwgdG8pID0+IHtcclxuICAgIGlmIChmcm9tID09IG51bGwgfHwgdHlwZW9mIGZyb20gIT0gXCJvYmplY3RcIikgcmV0dXJuIGZyb207XHJcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciAhPSBPYmplY3QgJiYgZnJvbS5jb25zdHJ1Y3RvciAhPSBBcnJheSkgcmV0dXJuIGZyb207XHJcbiAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciA9PSBEYXRlIHx8IGZyb20uY29uc3RydWN0b3IgPT0gUmVnRXhwIHx8IGZyb20uY29uc3RydWN0b3IgPT0gRnVuY3Rpb24gfHxcclxuICAgICAgICBmcm9tLmNvbnN0cnVjdG9yID09IFN0cmluZyB8fCBmcm9tLmNvbnN0cnVjdG9yID09IE51bWJlciB8fCBmcm9tLmNvbnN0cnVjdG9yID09IEJvb2xlYW4pXHJcbiAgICAgICAgcmV0dXJuIG5ldyBmcm9tLmNvbnN0cnVjdG9yKGZyb20pO1xyXG5cclxuICAgIHRvID0gdG8gfHwgbmV3IGZyb20uY29uc3RydWN0b3IoKTtcclxuXHJcbiAgICBmb3IgKGxldCBuYW1lIGluIGZyb20pIHtcclxuICAgICAgICB0b1tuYW1lXSA9IHR5cGVvZiB0b1tuYW1lXSA9PSBcInVuZGVmaW5lZFwiID8gY2xvbmUoZnJvbVtuYW1lXSwgbnVsbCkgOiB0b1tuYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.dragHalfBillboard = exports.dragBillboard = exports.defaultBillboard = exports.defaultPolylineOptions = exports.defaultEllipseOptions = exports.defaultCircleOptions = exports.defaultExtentOptions = exports.defaultPolygonOptions = exports.defaultSurfaceOptions = exports.defaultShapeOptions = exports.defaultPickStrategy = exports.ellipsoid = undefined;\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _util = __webpack_require__(1);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar ellipsoid = exports.ellipsoid = Cesium.Ellipsoid.WGS84;\n\nvar material = Cesium.Material.fromType(Cesium.Material.ColorType);\nmaterial.uniforms.color = new Cesium.Color(1.0, 1.0, 0.0, 0.5);\n\nvar defaultPickStrategy = exports.defaultPickStrategy = function defaultPickStrategy(position, viewer) {\n    return viewer.scene.camera.pickEllipsoid(position);\n};\n\nvar defaultShapeOptions = exports.defaultShapeOptions = {\n    ellipsoid: Cesium.Ellipsoid.WGS84,\n    textureRotationAngle: 0.0,\n    height: 0.0,\n    asynchronous: true,\n    show: true,\n    debugShowBoundingVolume: false,\n    strategy: {\n        pickStrategy: defaultPickStrategy\n    }\n};\n\nvar defaultSurfaceOptions = exports.defaultSurfaceOptions = (0, _util.copyOptions)(defaultShapeOptions, {\n    appearance: new Cesium.EllipsoidSurfaceAppearance({\n        aboveGround: false\n    }),\n    material: material,\n    granularity: Math.PI / 180.0,\n    strategy: {\n        pickStrategy: defaultPickStrategy\n    }\n});\n\nvar defaultPolygonOptions = exports.defaultPolygonOptions = (0, _util.copyOptions)(defaultShapeOptions, {});\nvar defaultExtentOptions = exports.defaultExtentOptions = (0, _util.copyOptions)(defaultShapeOptions, {});\nvar defaultCircleOptions = exports.defaultCircleOptions = (0, _util.copyOptions)(defaultShapeOptions, {});\nvar defaultEllipseOptions = exports.defaultEllipseOptions = (0, _util.copyOptions)(defaultSurfaceOptions, { rotation: 0 });\n\nvar defaultPolylineOptions = exports.defaultPolylineOptions = (0, _util.copyOptions)(defaultShapeOptions, {\n    width: 5,\n    geodesic: true,\n    granularity: 10000,\n    appearance: new Cesium.PolylineMaterialAppearance({\n        aboveGround: false\n    }),\n    material: material\n});\n\nvar defaultBillboard = exports.defaultBillboard = {\n    iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",\n    shiftX: 0,\n    shiftY: 0,\n    strategy: {\n        pickStrategy: defaultPickStrategy\n    }\n};\n\nvar dragBillboard = exports.dragBillboard = {\n    iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",\n    shiftX: 0,\n    shiftY: 0\n};\n\nvar dragHalfBillboard = exports.dragHalfBillboard = {\n    iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABCklEQVQoU5XRMUiEcBTH8e8/iBQMAoXAULBRqTWwGxvaagi3GxqjpragMWhrKhobbpOG2hoaL6G18MYTlIRAIUjQCDKU7mhwqDd/Hvze7wn+MWJi67qeA1aBZWAeeAfGwJMQ4qNxLf6Bm8A2sAEsAq/APXAD3DULE7wG7AF9YOZXsi9gAFwKIR5bXJZlX5KkU2Cp44SXqqqOZFketDjLsgNVVc+A2Q78mef5oaZp5y2O43jXMIwTQO/AaZIkx6ZpXrU4DMOebdv7gNeR2R+NRheO4wxbHEWRlKbpjuu6W0AP0Jp0wDAIgltd168ty6qmPfu+LxdFsQ6sAAvAG/CsKMqD53nltOe/PvEbmPRTDApQ3d8AAAAASUVORK5CYII=",\n    shiftX: 0,\n    shiftY: 0\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvY29uc3RhbnQvRGVmYXVsdFZhbHVlLmpzPzY3NzQiXSwibmFtZXMiOlsiQ2VzaXVtIiwiZWxsaXBzb2lkIiwiRWxsaXBzb2lkIiwiV0dTODQiLCJtYXRlcmlhbCIsIk1hdGVyaWFsIiwiZnJvbVR5cGUiLCJDb2xvclR5cGUiLCJ1bmlmb3JtcyIsImNvbG9yIiwiQ29sb3IiLCJkZWZhdWx0UGlja1N0cmF0ZWd5IiwicG9zaXRpb24iLCJ2aWV3ZXIiLCJzY2VuZSIsImNhbWVyYSIsInBpY2tFbGxpcHNvaWQiLCJkZWZhdWx0U2hhcGVPcHRpb25zIiwidGV4dHVyZVJvdGF0aW9uQW5nbGUiLCJoZWlnaHQiLCJhc3luY2hyb25vdXMiLCJzaG93IiwiZGVidWdTaG93Qm91bmRpbmdWb2x1bWUiLCJzdHJhdGVneSIsInBpY2tTdHJhdGVneSIsImRlZmF1bHRTdXJmYWNlT3B0aW9ucyIsImFwcGVhcmFuY2UiLCJFbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZSIsImFib3ZlR3JvdW5kIiwiZ3JhbnVsYXJpdHkiLCJNYXRoIiwiUEkiLCJkZWZhdWx0UG9seWdvbk9wdGlvbnMiLCJkZWZhdWx0RXh0ZW50T3B0aW9ucyIsImRlZmF1bHRDaXJjbGVPcHRpb25zIiwiZGVmYXVsdEVsbGlwc2VPcHRpb25zIiwicm90YXRpb24iLCJkZWZhdWx0UG9seWxpbmVPcHRpb25zIiwid2lkdGgiLCJnZW9kZXNpYyIsIlBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlIiwiZGVmYXVsdEJpbGxib2FyZCIsImljb25VcmwiLCJzaGlmdFgiLCJzaGlmdFkiLCJkcmFnQmlsbGJvYXJkIiwiZHJhZ0hhbGZCaWxsYm9hcmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7QUFDWjs7OztBQUVPLElBQU1DLGdDQUFZRCxPQUFPRSxTQUFQLENBQWlCQyxLQUFuQzs7QUFFUCxJQUFJQyxXQUFXSixPQUFPSyxRQUFQLENBQWdCQyxRQUFoQixDQUF5Qk4sT0FBT0ssUUFBUCxDQUFnQkUsU0FBekMsQ0FBZjtBQUNBSCxTQUFTSSxRQUFULENBQWtCQyxLQUFsQixHQUEwQixJQUFJVCxPQUFPVSxLQUFYLENBQWlCLEdBQWpCLEVBQXNCLEdBQXRCLEVBQTJCLEdBQTNCLEVBQWdDLEdBQWhDLENBQTFCOztBQUVPLElBQU1DLG9EQUFzQixTQUF0QkEsbUJBQXNCLENBQUNDLFFBQUQsRUFBV0MsTUFBWCxFQUFzQjtBQUNyRCxXQUFPQSxPQUFPQyxLQUFQLENBQWFDLE1BQWIsQ0FBb0JDLGFBQXBCLENBQWtDSixRQUFsQyxDQUFQO0FBQ0gsQ0FGTTs7QUFJQSxJQUFNSyxvREFBc0I7QUFDL0JoQixlQUFXRCxPQUFPRSxTQUFQLENBQWlCQyxLQURHO0FBRS9CZSwwQkFBc0IsR0FGUztBQUcvQkMsWUFBUSxHQUh1QjtBQUkvQkMsa0JBQWMsSUFKaUI7QUFLL0JDLFVBQU0sSUFMeUI7QUFNL0JDLDZCQUF5QixLQU5NO0FBTy9CQyxjQUFVO0FBQ05DLHNCQUFjYjtBQURSO0FBUHFCLENBQTVCOztBQVlBLElBQU1jLHdEQUF3Qix1QkFBWVIsbUJBQVosRUFBaUM7QUFDbEVTLGdCQUFZLElBQUkxQixPQUFPMkIsMEJBQVgsQ0FBc0M7QUFDOUNDLHFCQUFhO0FBRGlDLEtBQXRDLENBRHNEO0FBSWxFeEIsY0FBVUEsUUFKd0Q7QUFLbEV5QixpQkFBYUMsS0FBS0MsRUFBTCxHQUFVLEtBTDJDO0FBTWxFUixjQUFVO0FBQ05DLHNCQUFjYjtBQURSO0FBTndELENBQWpDLENBQTlCOztBQVdBLElBQU1xQix3REFBd0IsdUJBQVlmLG1CQUFaLEVBQWlDLEVBQWpDLENBQTlCO0FBQ0EsSUFBT2dCLHNEQUF1Qix1QkFBWWhCLG1CQUFaLEVBQWlDLEVBQWpDLENBQTlCO0FBQ0EsSUFBT2lCLHNEQUF1Qix1QkFBWWpCLG1CQUFaLEVBQWlDLEVBQWpDLENBQTlCO0FBQ0EsSUFBT2tCLHdEQUF3Qix1QkFBWVYscUJBQVosRUFBbUMsRUFBQ1csVUFBVSxDQUFYLEVBQW5DLENBQS9COztBQUVBLElBQU9DLDBEQUF5Qix1QkFBWXBCLG1CQUFaLEVBQWlDO0FBQ3BFcUIsV0FBTyxDQUQ2RDtBQUVwRUMsY0FBVSxJQUYwRDtBQUdwRVYsaUJBQWEsS0FIdUQ7QUFJcEVILGdCQUFZLElBQUkxQixPQUFPd0MsMEJBQVgsQ0FBc0M7QUFDOUNaLHFCQUFhO0FBRGlDLEtBQXRDLENBSndEO0FBT3BFeEIsY0FBVUE7QUFQMEQsQ0FBakMsQ0FBaEM7O0FBVUEsSUFBTXFDLDhDQUFtQjtBQUM1QkMsYUFBUyw0a0JBRG1CO0FBRTVCQyxZQUFRLENBRm9CO0FBRzVCQyxZQUFRLENBSG9CO0FBSTVCckIsY0FBVTtBQUNOQyxzQkFBY2I7QUFEUjtBQUprQixDQUF6Qjs7QUFTQSxJQUFNa0Msd0NBQWdCO0FBQ3pCSCxhQUFTLDRrQkFEZ0I7QUFFekJDLFlBQVEsQ0FGaUI7QUFHekJDLFlBQVE7QUFIaUIsQ0FBdEI7O0FBTUEsSUFBTUUsZ0RBQW9CO0FBQzdCSixhQUFTLHdjQURvQjtBQUU3QkMsWUFBUSxDQUZxQjtBQUc3QkMsWUFBUTtBQUhxQixDQUExQiIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiXHJcblxyXG5leHBvcnQgY29uc3QgZWxsaXBzb2lkID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NDtcclxuXHJcbnZhciBtYXRlcmlhbCA9IENlc2l1bS5NYXRlcmlhbC5mcm9tVHlwZShDZXNpdW0uTWF0ZXJpYWwuQ29sb3JUeXBlKTtcclxubWF0ZXJpYWwudW5pZm9ybXMuY29sb3IgPSBuZXcgQ2VzaXVtLkNvbG9yKDEuMCwgMS4wLCAwLjAsIDAuNSk7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdFBpY2tTdHJhdGVneSA9IChwb3NpdGlvbiwgdmlld2VyKSA9PiB7XHJcbiAgICByZXR1cm4gdmlld2VyLnNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRTaGFwZU9wdGlvbnMgPSB7XHJcbiAgICBlbGxpcHNvaWQ6IENlc2l1bS5FbGxpcHNvaWQuV0dTODQsXHJcbiAgICB0ZXh0dXJlUm90YXRpb25BbmdsZTogMC4wLFxyXG4gICAgaGVpZ2h0OiAwLjAsXHJcbiAgICBhc3luY2hyb25vdXM6IHRydWUsXHJcbiAgICBzaG93OiB0cnVlLFxyXG4gICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWU6IGZhbHNlLFxyXG4gICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICBwaWNrU3RyYXRlZ3k6IGRlZmF1bHRQaWNrU3RyYXRlZ3lcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRTdXJmYWNlT3B0aW9ucyA9IGNvcHlPcHRpb25zKGRlZmF1bHRTaGFwZU9wdGlvbnMsIHtcclxuICAgIGFwcGVhcmFuY2U6IG5ldyBDZXNpdW0uRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2Uoe1xyXG4gICAgICAgIGFib3ZlR3JvdW5kOiBmYWxzZVxyXG4gICAgfSksXHJcbiAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXHJcbiAgICBncmFudWxhcml0eTogTWF0aC5QSSAvIDE4MC4wLFxyXG4gICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICBwaWNrU3RyYXRlZ3k6IGRlZmF1bHRQaWNrU3RyYXRlZ3lcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdFBvbHlnb25PcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG5leHBvcnQgY29uc3QgIGRlZmF1bHRFeHRlbnRPcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG5leHBvcnQgY29uc3QgIGRlZmF1bHRDaXJjbGVPcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG5leHBvcnQgY29uc3QgIGRlZmF1bHRFbGxpcHNlT3B0aW9ucyA9IGNvcHlPcHRpb25zKGRlZmF1bHRTdXJmYWNlT3B0aW9ucywge3JvdGF0aW9uOiAwfSk7XHJcblxyXG5leHBvcnQgY29uc3QgIGRlZmF1bHRQb2x5bGluZU9wdGlvbnMgPSBjb3B5T3B0aW9ucyhkZWZhdWx0U2hhcGVPcHRpb25zLCB7XHJcbiAgICB3aWR0aDogNSxcclxuICAgIGdlb2Rlc2ljOiB0cnVlLFxyXG4gICAgZ3JhbnVsYXJpdHk6IDEwMDAwLFxyXG4gICAgYXBwZWFyYW5jZTogbmV3IENlc2l1bS5Qb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSh7XHJcbiAgICAgICAgYWJvdmVHcm91bmQ6IGZhbHNlXHJcbiAgICB9KSxcclxuICAgIG1hdGVyaWFsOiBtYXRlcmlhbFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0QmlsbGJvYXJkID0ge1xyXG4gICAgaWNvblVybDogXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFzQUFBQUxDQVlBQUFDcHJIY21BQUFCYkVsRVFWUW9VMk5rSUFFd3d0UjZlbnF5YzNKeTZqRXpNeXY5Ly8rZmw1R1I4ZlBmdjMvdmZmLysvZEwyN2R0L2d0U0JGWU1VY25Cd2VQajQrQVJZVzF1N2NIRnhpWC85K3ZYbDBhTkg5MnpkdW5YRGp4OC9kb0EwZ0JWN2VYbVorL3I2WmpvNE9NUisvLzZkQ1dZYk96djd2MzM3OWkzZXZuMzc5RzNidHAwRUszWjNkNDl0YW1wcS8vNzl1L1QvLy84WmZ2MzZ4ZkQ3OTIrR2YvLytNYkN3c0R5ZE9IRmk1YzZkT3hlREZUczVPZVYwZEhUMHZYcjFpdlhMbDI4TWYvLytnWHVialkzdDkvVHAwNHIyN2RzM0Jhell5c29xc2FxcXR1WDc5MTlTNklIejdkdlhaek5uVHFrNWR1ellmTEJpWTJOakcyZG50Mnc3Tzlld2YvLyt3ZDM4L3ovRHY3MTd0Njg2ZXZUQTFMTm56eDRCSzNad2NPQjQ5ZXBWaUtPanU3K05qWXNOSHgrL3lLZFBIOTRjUHJ6M3lJRURPemVLaVltdE9YRGd3QTk0T012SXlIQisvLzdkK3YvLy83b01EQXdDREF3TUh4Z1pHUzl6Y25JZWZmTGt5WGQ0T0JNYmlRREhVNkFNKzkxaE1RQUFBQUJKUlU1RXJrSmdnZz09XCIsXHJcbiAgICBzaGlmdFg6IDAsXHJcbiAgICBzaGlmdFk6IDAsXHJcbiAgICBzdHJhdGVneToge1xyXG4gICAgICAgIHBpY2tTdHJhdGVneTogZGVmYXVsdFBpY2tTdHJhdGVneVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZHJhZ0JpbGxib2FyZCA9IHtcclxuICAgIGljb25Vcmw6IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBc0FBQUFMQ0FZQUFBQ3BySGNtQUFBQmJFbEVRVlFvVTJOa0lBRXd3dFI2ZW5xeWMzSnk2akV6TXl2OS8vK2ZsNUdSOGZQZnYzL3ZmZi8rL2RMMjdkdC9ndFNCRllNVWNuQndlUGo0K0FSWVcxdTdjSEZ4aVgvOSt2WGwwYU5IOTJ6ZHVuWERqeDgvZG9BMGdCVjdlWG1aKy9yNlpqbzRPTVIrLy82ZENXWWJPenY3djMzNzlpM2V2bjM3OUczYnRwMEVLM1ozZDQ5dGFtcHEvLzc5dS9ULy8vOFpmdjM2eGZENzkyK0dmLy8rTWJDd3NEeWRPSEZpNWM2ZE94ZURGVHM1T2VWMGRIVDB2WHIxaXZYTGwyOE1mLy8rZ1h1YmpZM3Q5L1RwMDRyMjdkczNCYXpZeXNvcXNhcXF0dVg3OTE5UzZJSHo3ZHZYWnpOblRxazVkdXpZZkxCaVkyTmpHMmRudDJ3N085ZXdmLy8rd2QzOC96L0R2NzE3dDY4NmV2VEExTE5ueng0QkszWndjT0I0OWVwVmlLT2p1NytOallzTkh4Ky95S2RQSDk0Y1ByejN5SUVET3plS2lZbXRPWERnd0E5NE9Ndkl5SEIrLy83ZCt2Ly8vN29NREF3Q0RBd01IeGdaR1M5emNuSWVmZkxreVhkNE9CTWJpUURIVTZBTSs5MWhNUUFBQUFCSlJVNUVya0pnZ2c9PVwiLFxyXG4gICAgc2hpZnRYOiAwLFxyXG4gICAgc2hpZnRZOiAwXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkcmFnSGFsZkJpbGxib2FyZCA9IHtcclxuICAgIGljb25Vcmw6IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBc0FBQUFMQ0FZQUFBQ3BySGNtQUFBQkNrbEVRVlFvVTVYUk1VaUVjQlRIOGU4L2lCUU1Bb1hBVUxCUnFUV3dHeHZhYWdpM0d4cWpwcmFnTVdocktob2JicE9HMmhvYUw2RzE4TVlUbElSQUlValFDREtVN21od3FEZC9IdnplN3duK01XSmk2N3FlQTFhQlpXQWVlQWZHd0pNUTRxTnhMZjZCbThBMnNBRXNBcS9BUFhBRDNEVUxFN3dHN0FGOVlPWlhzaTlnQUZ3S0lSNWJYSlpsWDVLa1UyQ3A0NFNYcXFxT1pGa2V0RGpMc2dOVlZjK0EyUTc4bWVmNW9hWnA1eTJPNDNqWE1Jd1RRTy9BYVpJa3g2WnBYclU0RE1PZWJkdjdnTmVSMlIrTlJoZU80d3hiSEVXUmxLYnBqdXU2VzBBUDBKcDB3REFJZ2x0ZDE2OHR5NnFtUGZ1K0x4ZEZzUTZzQUF2QUcvQ3NLTXFENTNubHRPZS9QdkVibVBSVERBcFEzZDhBQUFBQVNVVk9SSzVDWUlJPVwiLFxyXG4gICAgc2hpZnRYOiAwLFxyXG4gICAgc2hpZnRZOiAwXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.ChoiceHelper = exports.DrawHelperV2 = exports.DrawHelper = exports.cesium1_50Patch = exports.Settings = exports.OfficialUtils = exports.BuildingHightlightBuilder = exports.EditableEntity = exports.DazzlingLabelEntity = exports.EventType = exports.EventSystemInstance = exports.Cartesian3s = exports.Cameras = exports.__dirpath = undefined;\n\nvar _Cameras = __webpack_require__(22);\n\nObject.defineProperty(exports, "Cameras", {\n    enumerable: true,\n    get: function get() {\n        return _Cameras.Cameras;\n    }\n});\n\nvar _Cartesian3s = __webpack_require__(13);\n\nObject.defineProperty(exports, "Cartesian3s", {\n    enumerable: true,\n    get: function get() {\n        return _Cartesian3s.Cartesian3s;\n    }\n});\n\nvar _EventSystem = __webpack_require__(14);\n\nObject.defineProperty(exports, "EventSystemInstance", {\n    enumerable: true,\n    get: function get() {\n        return _EventSystem.EventSystemInstance;\n    }\n});\nObject.defineProperty(exports, "EventType", {\n    enumerable: true,\n    get: function get() {\n        return _EventSystem.EventType;\n    }\n});\n\nvar _DazzlingLabelEntity = __webpack_require__(25);\n\nObject.defineProperty(exports, "DazzlingLabelEntity", {\n    enumerable: true,\n    get: function get() {\n        return _DazzlingLabelEntity.DazzlingLabelEntity;\n    }\n});\n\nvar _EditableEntity = __webpack_require__(27);\n\nObject.defineProperty(exports, "EditableEntity", {\n    enumerable: true,\n    get: function get() {\n        return _EditableEntity.EditableEntity;\n    }\n});\n\nvar _BuildingHightlightBuilder = __webpack_require__(28);\n\nObject.defineProperty(exports, "BuildingHightlightBuilder", {\n    enumerable: true,\n    get: function get() {\n        return _BuildingHightlightBuilder.BuildingHightlightBuilder;\n    }\n});\n\nvar _Settings = __webpack_require__(15);\n\nObject.defineProperty(exports, "Settings", {\n    enumerable: true,\n    get: function get() {\n        return _Settings.Settings;\n    }\n});\n\nvar _Patchs = __webpack_require__(29);\n\nObject.defineProperty(exports, "cesium1_50Patch", {\n    enumerable: true,\n    get: function get() {\n        return _Patchs.cesium1_50Patch;\n    }\n});\n\nvar _DrawHelperV = __webpack_require__(30);\n\nObject.defineProperty(exports, "DrawHelperV2", {\n    enumerable: true,\n    get: function get() {\n        return _DrawHelperV.DrawHelper;\n    }\n});\n\nvar _ChoiceHelper = __webpack_require__(39);\n\nObject.defineProperty(exports, "ChoiceHelper", {\n    enumerable: true,\n    get: function get() {\n        return _ChoiceHelper.ChoiceHelper;\n    }\n});\n\n__webpack_require__(40);\n\nvar _OfficialUtils = __webpack_require__(12);\n\nvar officialUtils = _interopRequireWildcard(_OfficialUtils);\n\nvar _DrawHelper = __webpack_require__(41);\n\nvar drawHelper = _interopRequireWildcard(_DrawHelper);\n\n__webpack_require__(43);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar __dirpath = exports.__dirpath = getPathDir();\n\n/**\r\n * 用于组织管理输出,打包输出的内容依赖此文件的输出\r\n */\n/**Scene*/\n\n\n/**Util**/\nvar OfficialUtils = exports.OfficialUtils = officialUtils;\n\n/**Widgets**/\n\n\n/*ThirdParty*/\nvar DrawHelper = exports.DrawHelper = drawHelper;\n\n//遍历script 获取src路径\nfunction getPathDir() {\n    var scriptSrc = "";\n    var nodeList = document.querySelectorAll("script");\n    for (var i = 0; i < nodeList.length; i++) {\n        if (/Cesiums[^\\/]*$/.test(nodeList.item(i).src)) {\n            scriptSrc = nodeList.item(i).src;\n            break;\n        }\n    }\n\n    return scriptSrc.match(/(.+)\\/(Cesiums.js.*|Cesiums.min.js)/)[1];\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6WyJDYW1lcmFzIiwiQ2FydGVzaWFuM3MiLCJFdmVudFN5c3RlbUluc3RhbmNlIiwiRXZlbnRUeXBlIiwiRGF6emxpbmdMYWJlbEVudGl0eSIsIkVkaXRhYmxlRW50aXR5IiwiQnVpbGRpbmdIaWdodGxpZ2h0QnVpbGRlciIsIlNldHRpbmdzIiwiY2VzaXVtMV81MFBhdGNoIiwiRHJhd0hlbHBlciIsIkNob2ljZUhlbHBlciIsIm9mZmljaWFsVXRpbHMiLCJkcmF3SGVscGVyIiwiX19kaXJwYXRoIiwiZ2V0UGF0aERpciIsIk9mZmljaWFsVXRpbHMiLCJzY3JpcHRTcmMiLCJub2RlTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJ0ZXN0IiwiaXRlbSIsInNyYyIsIm1hdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7d0JBTVFBLE87Ozs7Ozs7Ozs0QkFJQUMsVzs7Ozs7Ozs7OzRCQUNBQyxtQjs7Ozs7OzRCQUFvQkMsUzs7Ozs7Ozs7O29DQUlwQkMsbUI7Ozs7Ozs7OzsrQkFDQUMsYzs7Ozs7Ozs7OzBDQUNBQyx5Qjs7Ozs7Ozs7O3lCQVFBQyxROzs7Ozs7Ozs7dUJBQ0FDLGU7Ozs7Ozs7Ozs0QkFPQUMsVTs7Ozs7Ozs7OzZCQUVBQyxZOzs7O0FBNUJSOztBQWNBOztJQUFZQyxhOztBQVNaOztJQUFZQyxVOztBQU9aOzs7O0FBckNPLElBQU1DLGdDQUFZQyxZQUFsQjs7QUFFUDs7O0FBR0E7OztBQWVBO0FBRU8sSUFBTUMsd0NBQWdCSixhQUF0Qjs7QUFFUDs7O0FBS0E7QUFFTyxJQUFNRixrQ0FBYUcsVUFBbkI7O0FBVVA7QUFDQSxTQUFTRSxVQUFULEdBQXNCO0FBQ2xCLFFBQUlFLFlBQVksRUFBaEI7QUFDQSxRQUFJQyxXQUFXQyxTQUFTQyxnQkFBVCxDQUEwQixRQUExQixDQUFmO0FBQ0EsU0FBSSxJQUFJQyxJQUFJLENBQVosRUFBZUEsSUFBR0gsU0FBU0ksTUFBM0IsRUFBa0NELEdBQWxDLEVBQXNDO0FBQ2xDLFlBQUcsaUJBQWlCRSxJQUFqQixDQUFzQkwsU0FBU00sSUFBVCxDQUFjSCxDQUFkLEVBQWlCSSxHQUF2QyxDQUFILEVBQStDO0FBQzNDUix3QkFBWUMsU0FBU00sSUFBVCxDQUFjSCxDQUFkLEVBQWlCSSxHQUE3QjtBQUNBO0FBQ0g7QUFDSjs7QUFFRCxXQUFPUixVQUFVUyxLQUFWLENBQWdCLHFDQUFoQixFQUF1RCxDQUF2RCxDQUFQO0FBQ0giLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBfX2RpcnBhdGggPSBnZXRQYXRoRGlyKCk7XHJcblxyXG4vKipcclxuICog55So5LqO57uE57uH566h55CG6L6T5Ye6LOaJk+WMhei+k+WHuueahOWGheWuueS+nei1luatpOaWh+S7tueahOi+k+WHulxyXG4gKi9cclxuLyoqU2NlbmUqL1xyXG5leHBvcnQge0NhbWVyYXN9IGZyb20gXCIuL1NjZW5lL0NhbWVyYXNcIlxyXG5pbXBvcnQgXCIuL1NjZW5lL0NhbWVyYXMuY3NzXCJcclxuXHJcbi8qKkNvcmUqL1xyXG5leHBvcnQge0NhcnRlc2lhbjNzfSBmcm9tIFwiLi9Db3JlL0NhcnRlc2lhbjNzXCJcclxuZXhwb3J0IHtFdmVudFN5c3RlbUluc3RhbmNlLEV2ZW50VHlwZX0gZnJvbSBcIi4vQ29yZS9FdmVudFN5c3RlbVwiXHJcblxyXG5cclxuLyoqRGF0YVNvdXJjZXMqL1xyXG5leHBvcnQge0RhenpsaW5nTGFiZWxFbnRpdHl9IGZyb20gXCIuL0RhdGFTb3VyY2VzL0RhenpsaW5nTGFiZWxFbnRpdHlcIlxyXG5leHBvcnQge0VkaXRhYmxlRW50aXR5fSBmcm9tIFwiLi9EYXRhU291cmNlcy9FZGl0YWJsZUVudGl0eVwiXHJcbmV4cG9ydCB7QnVpbGRpbmdIaWdodGxpZ2h0QnVpbGRlcn0gZnJvbSBcIi4vRGF0YVNvdXJjZXMvQnVpbGRpbmdIaWdodGxpZ2h0QnVpbGRlclwiXHJcblxyXG5cclxuLyoqVXRpbCoqL1xyXG5pbXBvcnQgKiBhcyBvZmZpY2lhbFV0aWxzIGZyb20gXCIuL1V0aWwvT2ZmaWNpYWxVdGlsc1wiO1xyXG5leHBvcnQgY29uc3QgT2ZmaWNpYWxVdGlscyA9IG9mZmljaWFsVXRpbHM7XHJcblxyXG4vKipXaWRnZXRzKiovXHJcbmV4cG9ydCB7U2V0dGluZ3N9IGZyb20gIFwiLi9XaWRnZXRzL1NldHRpbmdzXCI7XHJcbmV4cG9ydCB7Y2VzaXVtMV81MFBhdGNofSBmcm9tICBcIi4vV2lkZ2V0cy9QYXRjaHNcIjtcclxuXHJcblxyXG4vKlRoaXJkUGFydHkqL1xyXG5pbXBvcnQgKiBhcyBkcmF3SGVscGVyIGZyb20gXCIuL1RoaXJkUGFydHkvRHJhd0hlbHBlclwiO1xyXG5leHBvcnQgY29uc3QgRHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcblxyXG5leHBvcnQge0RyYXdIZWxwZXIgYXMgRHJhd0hlbHBlclYyfSBmcm9tIFwiLi9UaGlyZFBhcnR5L0RyYXdIZWxwZXJWMi9EcmF3SGVscGVyVjJcIlxyXG5cclxuZXhwb3J0IHtDaG9pY2VIZWxwZXJ9IGZyb20gXCIuL1RoaXJkUGFydHkvQ2hvaWNlSGVscGVyXCJcclxuXHJcbmltcG9ydCBcIi4vVGhpcmRQYXJ0eS9EcmF3SGVscGVyLmNzc1wiXHJcblxyXG5cclxuXHJcbi8v6YGN5Y6Gc2NyaXB0IOiOt+WPlnNyY+i3r+W+hFxyXG5mdW5jdGlvbiBnZXRQYXRoRGlyKCkge1xyXG4gICAgbGV0IHNjcmlwdFNyYyA9IFwiXCI7XHJcbiAgICBsZXQgbm9kZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaTwgbm9kZUxpc3QubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgaWYoL0Nlc2l1bXNbXlxcL10qJC8udGVzdChub2RlTGlzdC5pdGVtKGkpLnNyYykpe1xyXG4gICAgICAgICAgICBzY3JpcHRTcmMgPSBub2RlTGlzdC5pdGVtKGkpLnNyYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzY3JpcHRTcmMubWF0Y2goLyguKylcXC8oQ2VzaXVtcy5qcy4qfENlc2l1bXMubWluLmpzKS8pWzFdO1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nvar setListener = exports.setListener = function setListener(primitive, type, callback) {\n    primitive[type] = callback;\n};\n\nvar removeListener = exports.removeListener = function removeListener(primitive, type) {\n    delete primitive[type];\n};\n\n/**\r\n * 给对象设置监听器\r\n * @param element\r\n */\nvar enhanceWithListeners = exports.enhanceWithListeners = function enhanceWithListeners(element) {\n    element._listeners = {};\n\n    element.addListener = function (name, callback) {\n        this._listeners[name] = this._listeners[name] || [];\n        this._listeners[name].push(callback);\n        return this._listeners[name].length;\n    };\n\n    element.executeListeners = function (event, defaultCallback) {\n        if (this._listeners[event.name] && this._listeners[event.name].length > 0) {\n            var index = 0;\n            for (; index < this._listeners[event.name].length; index++) {\n                this._listeners[event.name][index](event);\n            }\n        } else {\n            if (defaultCallback) {\n                defaultCallback(event);\n            }\n        }\n    };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvdXRpbC9FdmVudEhlbHBlci5qcz85NTM0Il0sIm5hbWVzIjpbInNldExpc3RlbmVyIiwicHJpbWl0aXZlIiwidHlwZSIsImNhbGxiYWNrIiwicmVtb3ZlTGlzdGVuZXIiLCJlbmhhbmNlV2l0aExpc3RlbmVycyIsImVsZW1lbnQiLCJfbGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJuYW1lIiwicHVzaCIsImxlbmd0aCIsImV4ZWN1dGVMaXN0ZW5lcnMiLCJldmVudCIsImRlZmF1bHRDYWxsYmFjayIsImluZGV4Il0sIm1hcHBpbmdzIjoiOzs7OztBQUFPLElBQU1BLG9DQUFjLFNBQWRBLFdBQWMsQ0FBQ0MsU0FBRCxFQUFZQyxJQUFaLEVBQWtCQyxRQUFsQixFQUErQjtBQUN0REYsY0FBVUMsSUFBVixJQUFrQkMsUUFBbEI7QUFDSCxDQUZNOztBQUlBLElBQU1DLDBDQUFpQixTQUFqQkEsY0FBaUIsQ0FBQ0gsU0FBRCxFQUFZQyxJQUFaLEVBQXFCO0FBQy9DLFdBQU9ELFVBQVVDLElBQVYsQ0FBUDtBQUNILENBRk07O0FBSVA7Ozs7QUFJTyxJQUFNRyxzREFBdUIsU0FBdkJBLG9CQUF1QixDQUFDQyxPQUFELEVBQWE7QUFDN0NBLFlBQVFDLFVBQVIsR0FBcUIsRUFBckI7O0FBRUFELFlBQVFFLFdBQVIsR0FBc0IsVUFBVUMsSUFBVixFQUFnQk4sUUFBaEIsRUFBMEI7QUFDNUMsYUFBS0ksVUFBTCxDQUFnQkUsSUFBaEIsSUFBeUIsS0FBS0YsVUFBTCxDQUFnQkUsSUFBaEIsS0FBeUIsRUFBbEQ7QUFDQSxhQUFLRixVQUFMLENBQWdCRSxJQUFoQixFQUFzQkMsSUFBdEIsQ0FBMkJQLFFBQTNCO0FBQ0EsZUFBTyxLQUFLSSxVQUFMLENBQWdCRSxJQUFoQixFQUFzQkUsTUFBN0I7QUFDSCxLQUpEOztBQU1BTCxZQUFRTSxnQkFBUixHQUEyQixVQUFVQyxLQUFWLEVBQWlCQyxlQUFqQixFQUFrQztBQUN6RCxZQUFJLEtBQUtQLFVBQUwsQ0FBZ0JNLE1BQU1KLElBQXRCLEtBQStCLEtBQUtGLFVBQUwsQ0FBZ0JNLE1BQU1KLElBQXRCLEVBQTRCRSxNQUE1QixHQUFxQyxDQUF4RSxFQUEyRTtBQUN2RSxnQkFBSUksUUFBUSxDQUFaO0FBQ0EsbUJBQU9BLFFBQVEsS0FBS1IsVUFBTCxDQUFnQk0sTUFBTUosSUFBdEIsRUFBNEJFLE1BQTNDLEVBQW1ESSxPQUFuRCxFQUE0RDtBQUN4RCxxQkFBS1IsVUFBTCxDQUFnQk0sTUFBTUosSUFBdEIsRUFBNEJNLEtBQTVCLEVBQW1DRixLQUFuQztBQUNIO0FBQ0osU0FMRCxNQUtPO0FBQ0gsZ0JBQUlDLGVBQUosRUFBcUI7QUFDakJBLGdDQUFnQkQsS0FBaEI7QUFDSDtBQUNKO0FBQ0osS0FYRDtBQVlILENBckJNIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0TGlzdGVuZXIgPSAocHJpbWl0aXZlLCB0eXBlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgcHJpbWl0aXZlW3R5cGVdID0gY2FsbGJhY2s7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVMaXN0ZW5lciA9IChwcmltaXRpdmUsIHR5cGUpID0+IHtcclxuICAgIGRlbGV0ZSBwcmltaXRpdmVbdHlwZV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnu5nlr7nosaHorr7nva7nm5HlkKzlmahcclxuICogQHBhcmFtIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCBlbmhhbmNlV2l0aExpc3RlbmVycyA9IChlbGVtZW50KSA9PiB7XHJcbiAgICBlbGVtZW50Ll9saXN0ZW5lcnMgPSB7fTtcclxuXHJcbiAgICBlbGVtZW50LmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdID0gKHRoaXMuX2xpc3RlbmVyc1tuYW1lXSB8fCBbXSk7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcnNbbmFtZV0ubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGVsZW1lbnQuZXhlY3V0ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCwgZGVmYXVsdENhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tldmVudC5uYW1lXSAmJiB0aGlzLl9saXN0ZW5lcnNbZXZlbnQubmFtZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKDsgaW5kZXggPCB0aGlzLl9saXN0ZW5lcnNbZXZlbnQubmFtZV0ubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnQubmFtZV1baW5kZXhdKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkZWZhdWx0Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRDYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.BillboardGroup = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _EditableBillboard = __webpack_require__(17);\n\nvar _ = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar BillboardGroup = exports.BillboardGroup = function () {\n    function BillboardGroup(drawHelper, options) {\n        _classCallCheck(this, BillboardGroup);\n\n        this._drawHelper = drawHelper;\n        this._scene = drawHelper._scene;\n\n        this._options = (0, _util.copyOptions)(options, _DefaultValue.defaultBillboard);\n\n        // create one common billboard collection for all billboards\n        var b = new Cesium.BillboardCollection();\n        this._scene.primitives.add(b);\n        this._billboards = b;\n        // keep an ordered list of billboards\n        this._orderedBillboards = [];\n        this._evnetSystem = _.EventSystemInstance.getInstance();\n    }\n\n    _createClass(BillboardGroup, [{\n        key: "createBillboard",\n        value: function createBillboard(position, callbacks) {\n            var _this = this;\n\n            var editableBillboard = new _EditableBillboard.EditableBillboard({\n                show: true,\n                position: position,\n                pixelOffset: new Cesium.Cartesian2(this._options.shiftX, this._options.shiftY),\n                eyeOffset: new Cesium.Cartesian3(0.0, 0.0, 0.0),\n                horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n                verticalOrigin: Cesium.VerticalOrigin.CENTER,\n                scale: 1.0,\n                image: this._options.iconUrl,\n                color: new Cesium.Color(1.0, 1.0, 1.0, 1.0)\n            }, this, this._drawHelper._viewer);\n\n            var billboard = this._billboards.add(editableBillboard);\n\n            // if editable\n            if (callbacks) {\n                var screenSpaceCameraController = this._scene.screenSpaceCameraController;\n\n                var enableRotation = function enableRotation(enable) {\n                    screenSpaceCameraController.enableRotate = enable;\n                };\n\n                var getIndex = function getIndex() {\n                    // find index\n                    var i = void 0,\n                        I = 0;\n                    for (i = 0, I = _this._orderedBillboards.length; i < I && _this._orderedBillboards[i] != billboard; ++i) {}\n                    return i;\n                };\n\n                if (callbacks.dragHandlers) {\n                    this._evnetSystem.onDragStart(editableBillboard, function (position) {\n                        _this._evnetSystem.enableDrawRotation(false);\n                        callbacks.dragHandlers.onDragStart && callbacks.dragHandlers.onDragStart(getIndex(), _this._scene.camera.pickEllipsoid(position, _DefaultValue.ellipsoid));\n                    });\n\n                    this._evnetSystem.onDrag(editableBillboard, function (position) {\n                        var _3dPosition = _this._scene.camera.pickEllipsoid(position, _DefaultValue.ellipsoid);\n                        billboard.position = _3dPosition;\n                        // find index\n                        for (var i = 0, I = _this._orderedBillboards.length; i < I && _this._orderedBillboards[i] != billboard; ++i) {}\n                        callbacks.dragHandlers.onDrag && callbacks.dragHandlers.onDrag(getIndex(), _3dPosition);\n                    });\n\n                    this._evnetSystem.onDragEnd(editableBillboard, function (position) {\n                        _this._evnetSystem.enableDrawRotation(true);\n                        var _3dPosition = _this._scene.camera.pickEllipsoid(position, _DefaultValue.ellipsoid);\n                        callbacks.dragHandlers.onDragEnd && callbacks.dragHandlers.onDragEnd(getIndex(), _3dPosition);\n                    });\n\n                    // setListener(billboard, \'leftDown\', (position) => {//TODO 接入eventSystem\n                    //     // TODO - start the drag handlers here\n                    //     // create handlers for mouseOut and leftUp for the billboard and a mouseMove\n                    //     const onDrag = (position) => {\n                    //         billboard.position = position;\n                    //         // find index\n                    //         for (var i = 0, I = this._orderedBillboards.length; i < I && this._orderedBillboards[i] != billboard; ++i) ;\n                    //         callbacks.dragHandlers.onDrag && callbacks.dragHandlers.onDrag(getIndex(), position);\n                    //     }\n                    //\n                    //     const onDragEnd = (position) => {\n                    //         handler.destroy();\n                    //         enableRotation(true);\n                    //         callbacks.dragHandlers.onDragEnd && callbacks.dragHandlers.onDragEnd(getIndex(), position);\n                    //     }\n                    //\n                    //     var handler = new Cesium.ScreenSpaceEventHandler(this._scene.canvas);\n                    //\n                    //     handler.setInputAction((movement) => {\n                    //         var cartesian = this._scene.camera.pickEllipsoid(movement.endPosition, ellipsoid);\n                    //         if (cartesian) {\n                    //             onDrag(cartesian);\n                    //         } else {\n                    //             onDragEnd(cartesian);\n                    //         }\n                    //     }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n                    //\n                    //     handler.setInputAction((movement) => {\n                    //         onDragEnd(this._scene.camera.pickEllipsoid(movement.position, ellipsoid));\n                    //     }, Cesium.ScreenSpaceEventType.LEFT_UP);\n                    //\n                    //     enableRotation(false);\n                    //\n                    //     callbacks.dragHandlers.onDragStart && callbacks.dragHandlers.onDragStart(getIndex(), this._scene.camera.pickEllipsoid(position, ellipsoid));\n                    // });\n                }\n                if (callbacks.onDoubleClick) {\n                    // setListener(billboard, \'leftDoubleClick\', (position) => {\n                    //     callbacks.onDoubleClick(getIndex());\n                    // });\n                    this._evnetSystem.onLeftDoubleClick(billboard, function () {\n                        callbacks.onDoubleClick(getIndex());\n                    });\n                }\n                if (callbacks.onClick) {\n                    // setListener(billboard, \'leftClick\', (position) => {\n                    //     callbacks.onClick(getIndex());\n                    // });\n                    this._evnetSystem.onLeftClick(editableBillboard, function () {\n                        callbacks.onClick(getIndex());\n                    });\n                }\n                if (callbacks.tooltip) {\n                    // setListener(billboard, \'mouseMove\', (position) => {\n                    //     this._drawHelper._tooltip.showAt(position, callbacks.tooltip());\n                    // });\n                    // setListener(billboard, \'mouseOut\', (position) => {\n                    //     this._drawHelper._tooltip.setVisible(false);\n                    // });\n                    this._evnetSystem.onMouseMove(editableBillboard, function (position) {\n                        _this._drawHelper._tooltip.showAt(position, callbacks.tooltip());\n                    });\n\n                    this._evnetSystem.onMouseMoveOut(editableBillboard, function (position) {\n                        _this._drawHelper._tooltip.setVisible(false);\n                    });\n                }\n            }\n\n            return billboard;\n        }\n    }, {\n        key: "insertBillboard",\n        value: function insertBillboard(index, position, callbacks) {\n            this._orderedBillboards.splice(index, 0, this.createBillboard(position, callbacks));\n        }\n    }, {\n        key: "addBillboard",\n        value: function addBillboard(position, callbacks) {\n            this._orderedBillboards.push(this.createBillboard(position, callbacks));\n        }\n    }, {\n        key: "addBillboards",\n        value: function addBillboards(positions, callbacks) {\n            var index = 0;\n            for (; index < positions.length; index++) {\n                this.addBillboard(positions[index], callbacks);\n            }\n        }\n    }, {\n        key: "updateBillboardsPositions",\n        value: function updateBillboardsPositions(positions) {\n            var index = 0;\n            for (; index < positions.length; index++) {\n                this.getBillboard(index).position = positions[index];\n            }\n        }\n    }, {\n        key: "countBillboards",\n        value: function countBillboards() {\n            return this._orderedBillboards.length;\n        }\n    }, {\n        key: "getBillboard",\n        value: function getBillboard(index) {\n            return this._orderedBillboards[index];\n        }\n    }, {\n        key: "removeBillboard",\n        value: function removeBillboard(index) {\n            this._billboards.remove(this.getBillboard(index));\n            this._orderedBillboards.splice(index, 1);\n        }\n    }, {\n        key: "remove",\n        value: function remove() {\n            this._billboards = this._billboards && this._billboards.removeAll() && this._billboards.destroy();\n        }\n    }, {\n        key: "setOnTop",\n        value: function setOnTop() {\n            this._scene.primitives.raiseToTop(this._billboards);\n        }\n    }]);\n\n    return BillboardGroup;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0JpbGxib2FyZEdyb3VwLmpzPzBhOTciXSwibmFtZXMiOlsiQ2VzaXVtIiwiQmlsbGJvYXJkR3JvdXAiLCJkcmF3SGVscGVyIiwib3B0aW9ucyIsIl9kcmF3SGVscGVyIiwiX3NjZW5lIiwiX29wdGlvbnMiLCJkZWZhdWx0QmlsbGJvYXJkIiwiYiIsIkJpbGxib2FyZENvbGxlY3Rpb24iLCJwcmltaXRpdmVzIiwiYWRkIiwiX2JpbGxib2FyZHMiLCJfb3JkZXJlZEJpbGxib2FyZHMiLCJfZXZuZXRTeXN0ZW0iLCJFdmVudFN5c3RlbUluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJwb3NpdGlvbiIsImNhbGxiYWNrcyIsImVkaXRhYmxlQmlsbGJvYXJkIiwiRWRpdGFibGVCaWxsYm9hcmQiLCJzaG93IiwicGl4ZWxPZmZzZXQiLCJDYXJ0ZXNpYW4yIiwic2hpZnRYIiwic2hpZnRZIiwiZXllT2Zmc2V0IiwiQ2FydGVzaWFuMyIsImhvcml6b250YWxPcmlnaW4iLCJIb3Jpem9udGFsT3JpZ2luIiwiQ0VOVEVSIiwidmVydGljYWxPcmlnaW4iLCJWZXJ0aWNhbE9yaWdpbiIsInNjYWxlIiwiaW1hZ2UiLCJpY29uVXJsIiwiY29sb3IiLCJDb2xvciIsIl92aWV3ZXIiLCJiaWxsYm9hcmQiLCJzY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIiLCJlbmFibGVSb3RhdGlvbiIsImVuYWJsZSIsImVuYWJsZVJvdGF0ZSIsImdldEluZGV4IiwiaSIsIkkiLCJsZW5ndGgiLCJkcmFnSGFuZGxlcnMiLCJvbkRyYWdTdGFydCIsImVuYWJsZURyYXdSb3RhdGlvbiIsImNhbWVyYSIsInBpY2tFbGxpcHNvaWQiLCJlbGxpcHNvaWQiLCJvbkRyYWciLCJfM2RQb3NpdGlvbiIsIm9uRHJhZ0VuZCIsIm9uRG91YmxlQ2xpY2siLCJvbkxlZnREb3VibGVDbGljayIsIm9uQ2xpY2siLCJvbkxlZnRDbGljayIsInRvb2x0aXAiLCJvbk1vdXNlTW92ZSIsIl90b29sdGlwIiwic2hvd0F0Iiwib25Nb3VzZU1vdmVPdXQiLCJzZXRWaXNpYmxlIiwiaW5kZXgiLCJzcGxpY2UiLCJjcmVhdGVCaWxsYm9hcmQiLCJwdXNoIiwicG9zaXRpb25zIiwiYWRkQmlsbGJvYXJkIiwiZ2V0QmlsbGJvYXJkIiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwiZGVzdHJveSIsInJhaXNlVG9Ub3AiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7SUFHYUMsYyxXQUFBQSxjO0FBQ1QsNEJBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQWlDO0FBQUE7O0FBQzdCLGFBQUtDLFdBQUwsR0FBbUJGLFVBQW5CO0FBQ0EsYUFBS0csTUFBTCxHQUFjSCxXQUFXRyxNQUF6Qjs7QUFFQSxhQUFLQyxRQUFMLEdBQWdCLHVCQUFZSCxPQUFaLEVBQXFCSSw4QkFBckIsQ0FBaEI7O0FBRUE7QUFDQSxZQUFJQyxJQUFJLElBQUlSLE9BQU9TLG1CQUFYLEVBQVI7QUFDQSxhQUFLSixNQUFMLENBQVlLLFVBQVosQ0FBdUJDLEdBQXZCLENBQTJCSCxDQUEzQjtBQUNBLGFBQUtJLFdBQUwsR0FBbUJKLENBQW5CO0FBQ0E7QUFDQSxhQUFLSyxrQkFBTCxHQUEwQixFQUExQjtBQUNBLGFBQUtDLFlBQUwsR0FBb0JDLHNCQUFvQkMsV0FBcEIsRUFBcEI7QUFDSDs7Ozt3Q0FFZUMsUSxFQUFVQyxTLEVBQVc7QUFBQTs7QUFDakMsZ0JBQUlDLG9CQUFvQixJQUFJQyxvQ0FBSixDQUFzQjtBQUMxQ0Msc0JBQU0sSUFEb0M7QUFFMUNKLDBCQUFVQSxRQUZnQztBQUcxQ0ssNkJBQWEsSUFBSXRCLE9BQU91QixVQUFYLENBQXNCLEtBQUtqQixRQUFMLENBQWNrQixNQUFwQyxFQUE0QyxLQUFLbEIsUUFBTCxDQUFjbUIsTUFBMUQsQ0FINkI7QUFJMUNDLDJCQUFXLElBQUkx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dEQsa0JBQUwsQ0FBd0J1RCxNQUF4QixDQUErQkQsS0FBL0IsRUFBc0MsQ0FBdEM7QUFDSDs7O2lDQUVRO0FBQ0wsaUJBQUt2RCxXQUFMLEdBQW1CLEtBQUtBLFdBQUwsSUFBb0IsS0FBS0EsV0FBTCxDQUFpQitELFNBQWpCLEVBQXBCLElBQW9ELEtBQUsvRCxXQUFMLENBQWlCZ0UsT0FBakIsRUFBdkU7QUFDSDs7O21DQUVVO0FBQ1AsaUJBQUt2RSxNQUFMLENBQVlLLFVBQVosQ0FBdUJtRSxVQUF2QixDQUFrQyxLQUFLakUsV0FBdkM7QUFDSCIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiO1xyXG5pbXBvcnQge2RlZmF1bHRCaWxsYm9hcmQsIGVsbGlwc29pZH0gZnJvbSBcIi4uL2NvbnN0YW50L0RlZmF1bHRWYWx1ZVwiO1xyXG5pbXBvcnQge3NldExpc3RlbmVyfSBmcm9tIFwiLi4vdXRpbC9FdmVudEhlbHBlclwiO1xyXG5pbXBvcnQge0VkaXRhYmxlQmlsbGJvYXJkfSBmcm9tIFwiLi9FZGl0YWJsZUJpbGxib2FyZFwiO1xyXG5pbXBvcnQge0V2ZW50U3lzdGVtSW5zdGFuY2V9IGZyb20gXCIuLi8uLi8uLlwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBCaWxsYm9hcmRHcm91cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkcmF3SGVscGVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBkcmF3SGVscGVyLl9zY2VuZTtcclxuXHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRCaWxsYm9hcmQpO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgb25lIGNvbW1vbiBiaWxsYm9hcmQgY29sbGVjdGlvbiBmb3IgYWxsIGJpbGxib2FyZHNcclxuICAgICAgICB2YXIgYiA9IG5ldyBDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX3NjZW5lLnByaW1pdGl2ZXMuYWRkKGIpO1xyXG4gICAgICAgIHRoaXMuX2JpbGxib2FyZHMgPSBiO1xyXG4gICAgICAgIC8vIGtlZXAgYW4gb3JkZXJlZCBsaXN0IG9mIGJpbGxib2FyZHNcclxuICAgICAgICB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2V2bmV0U3lzdGVtID0gRXZlbnRTeXN0ZW1JbnN0YW5jZS5nZXRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJpbGxib2FyZChwb3NpdGlvbiwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgbGV0IGVkaXRhYmxlQmlsbGJvYXJkID0gbmV3IEVkaXRhYmxlQmlsbGJvYXJkKHtcclxuICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxyXG4gICAgICAgICAgICBwaXhlbE9mZnNldDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKHRoaXMuX29wdGlvbnMuc2hpZnRYLCB0aGlzLl9vcHRpb25zLnNoaWZ0WSksXHJcbiAgICAgICAgICAgIGV5ZU9mZnNldDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDAuMCwgMC4wLCAwLjApLFxyXG4gICAgICAgICAgICBob3Jpem9udGFsT3JpZ2luOiBDZXNpdW0uSG9yaXpvbnRhbE9yaWdpbi5DRU5URVIsXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JpZ2luOiBDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSLFxyXG4gICAgICAgICAgICBzY2FsZTogMS4wLFxyXG4gICAgICAgICAgICBpbWFnZTogdGhpcy5fb3B0aW9ucy5pY29uVXJsLFxyXG4gICAgICAgICAgICBjb2xvcjogbmV3IENlc2l1bS5Db2xvcigxLjAsIDEuMCwgMS4wLCAxLjApXHJcbiAgICAgICAgfSwgdGhpcywgdGhpcy5fZHJhd0hlbHBlci5fdmlld2VyKTtcclxuXHJcbiAgICAgICAgbGV0IGJpbGxib2FyZCA9IHRoaXMuX2JpbGxib2FyZHMuYWRkKGVkaXRhYmxlQmlsbGJvYXJkKTtcclxuXHJcbiAgICAgICAgLy8gaWYgZWRpdGFibGVcclxuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHZhciBzY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIgPSB0aGlzLl9zY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmFibGVSb3RhdGlvbiA9IChlbmFibGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVSb3RhdGUgPSBlbmFibGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdldEluZGV4ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBpbmRleFxyXG4gICAgICAgICAgICAgICAgbGV0IGksSSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgSSA9IHRoaXMuX29yZGVyZWRCaWxsYm9hcmRzLmxlbmd0aDsgaSA8IEkgJiYgdGhpcy5fb3JkZXJlZEJpbGxib2FyZHNbaV0gIT0gYmlsbGJvYXJkOyArK2kpIDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmRyYWdIYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLl9ldm5ldFN5c3RlbS5vbkRyYWdTdGFydChlZGl0YWJsZUJpbGxib2FyZCwgKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZuZXRTeXN0ZW0uZW5hYmxlRHJhd1JvdGF0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ1N0YXJ0ICYmIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnU3RhcnQoZ2V0SW5kZXgoKSwgdGhpcy5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZCkpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ldm5ldFN5c3RlbS5vbkRyYWcoZWRpdGFibGVCaWxsYm9hcmQsIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBfM2RQb3NpdGlvbiA9IHRoaXMuX3NjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uLCBlbGxpcHNvaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgYmlsbGJvYXJkLnBvc2l0aW9uID0gXzNkUG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBJID0gdGhpcy5fb3JkZXJlZEJpbGxib2FyZHMubGVuZ3RoOyBpIDwgSSAmJiB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkc1tpXSAhPSBiaWxsYm9hcmQ7ICsraSkgO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnICYmIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnKGdldEluZGV4KCksIF8zZFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXZuZXRTeXN0ZW0ub25EcmFnRW5kKGVkaXRhYmxlQmlsbGJvYXJkLChwb3NpdGlvbik9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldm5ldFN5c3RlbS5lbmFibGVEcmF3Um90YXRpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF8zZFBvc2l0aW9uID0gdGhpcy5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZClcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ0VuZCAmJiBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ0VuZChnZXRJbmRleCgpLCBfM2RQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNldExpc3RlbmVyKGJpbGxib2FyZCwgJ2xlZnREb3duJywgKHBvc2l0aW9uKSA9PiB7Ly9UT0RPIOaOpeWFpWV2ZW50U3lzdGVtXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gVE9ETyAtIHN0YXJ0IHRoZSBkcmFnIGhhbmRsZXJzIGhlcmVcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyBjcmVhdGUgaGFuZGxlcnMgZm9yIG1vdXNlT3V0IGFuZCBsZWZ0VXAgZm9yIHRoZSBiaWxsYm9hcmQgYW5kIGEgbW91c2VNb3ZlXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3Qgb25EcmFnID0gKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGJpbGxib2FyZC5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBmaW5kIGluZGV4XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZvciAodmFyIGkgPSAwLCBJID0gdGhpcy5fb3JkZXJlZEJpbGxib2FyZHMubGVuZ3RoOyBpIDwgSSAmJiB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkc1tpXSAhPSBiaWxsYm9hcmQ7ICsraSkgO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZyAmJiBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZyhnZXRJbmRleCgpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBvbkRyYWdFbmQgPSAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGVuYWJsZVJvdGF0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ0VuZCAmJiBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ0VuZChnZXRJbmRleCgpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgaGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIodGhpcy5fc2NlbmUuY2FudmFzKTtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IHRoaXMuX3NjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LmVuZFBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAoY2FydGVzaWFuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBvbkRyYWcoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIG9uRHJhZ0VuZChjYXJ0ZXNpYW4pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLk1PVVNFX01PVkUpO1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBvbkRyYWdFbmQodGhpcy5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQobW92ZW1lbnQucG9zaXRpb24sIGVsbGlwc29pZCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX1VQKTtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5hYmxlUm90YXRpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vICAgICBjYWxsYmFja3MuZHJhZ0hhbmRsZXJzLm9uRHJhZ1N0YXJ0ICYmIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnU3RhcnQoZ2V0SW5kZXgoKSwgdGhpcy5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5vbkRvdWJsZUNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXRMaXN0ZW5lcihiaWxsYm9hcmQsICdsZWZ0RG91YmxlQ2xpY2snLCAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjYWxsYmFja3Mub25Eb3VibGVDbGljayhnZXRJbmRleCgpKTtcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXZuZXRTeXN0ZW0ub25MZWZ0RG91YmxlQ2xpY2soYmlsbGJvYXJkLCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uRG91YmxlQ2xpY2soZ2V0SW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFja3Mub25DbGljaykge1xyXG4gICAgICAgICAgICAgICAgLy8gc2V0TGlzdGVuZXIoYmlsbGJvYXJkLCAnbGVmdENsaWNrJywgKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2FsbGJhY2tzLm9uQ2xpY2soZ2V0SW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2V2bmV0U3lzdGVtLm9uTGVmdENsaWNrKGVkaXRhYmxlQmlsbGJvYXJkLCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ2xpY2soZ2V0SW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFja3MudG9vbHRpcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2V0TGlzdGVuZXIoYmlsbGJvYXJkLCAnbW91c2VNb3ZlJywgKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5fZHJhd0hlbHBlci5fdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIGNhbGxiYWNrcy50b29sdGlwKCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXRMaXN0ZW5lcihiaWxsYm9hcmQsICdtb3VzZU91dCcsIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuX2RyYXdIZWxwZXIuX3Rvb2x0aXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2V2bmV0U3lzdGVtLm9uTW91c2VNb3ZlKGVkaXRhYmxlQmlsbGJvYXJkLChwb3NpdGlvbik9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kcmF3SGVscGVyLl90b29sdGlwLnNob3dBdChwb3NpdGlvbiwgY2FsbGJhY2tzLnRvb2x0aXAoKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2V2bmV0U3lzdGVtLm9uTW91c2VNb3ZlT3V0KGVkaXRhYmxlQmlsbGJvYXJkLChwb3NpdGlvbik9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kcmF3SGVscGVyLl90b29sdGlwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJpbGxib2FyZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5zZXJ0QmlsbGJvYXJkKGluZGV4LCBwb3NpdGlvbiwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgdGhpcy5fb3JkZXJlZEJpbGxib2FyZHMuc3BsaWNlKGluZGV4LCAwLCB0aGlzLmNyZWF0ZUJpbGxib2FyZChwb3NpdGlvbiwgY2FsbGJhY2tzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQmlsbGJvYXJkKHBvc2l0aW9uLCBjYWxsYmFja3MpIHtcclxuICAgICAgICB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkcy5wdXNoKHRoaXMuY3JlYXRlQmlsbGJvYXJkKHBvc2l0aW9uLCBjYWxsYmFja3MpKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRCaWxsYm9hcmRzKHBvc2l0aW9ucywgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBmb3IgKDsgaW5kZXggPCBwb3NpdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQmlsbGJvYXJkKHBvc2l0aW9uc1tpbmRleF0sIGNhbGxiYWNrcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMocG9zaXRpb25zKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBmb3IgKDsgaW5kZXggPCBwb3NpdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0QmlsbGJvYXJkKGluZGV4KS5wb3NpdGlvbiA9IHBvc2l0aW9uc1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvdW50QmlsbGJvYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3JkZXJlZEJpbGxib2FyZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJpbGxib2FyZChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkc1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQmlsbGJvYXJkKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5fYmlsbGJvYXJkcy5yZW1vdmUodGhpcy5nZXRCaWxsYm9hcmQoaW5kZXgpKTtcclxuICAgICAgICB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRzID0gdGhpcy5fYmlsbGJvYXJkcyAmJiB0aGlzLl9iaWxsYm9hcmRzLnJlbW92ZUFsbCgpICYmIHRoaXMuX2JpbGxib2FyZHMuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE9uVG9wKCkge1xyXG4gICAgICAgIHRoaXMuX3NjZW5lLnByaW1pdGl2ZXMucmFpc2VUb1RvcCh0aGlzLl9iaWxsYm9hcmRzKTtcclxuICAgIH1cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.ChangeablePrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _util = __webpack_require__(1);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar ChangeablePrimitive = exports.ChangeablePrimitive = function () {\n    function ChangeablePrimitive() {\n        _classCallCheck(this, ChangeablePrimitive);\n    }\n\n    _createClass(ChangeablePrimitive, [{\n        key: "initialiseOptions",\n        value: function initialiseOptions(options) {\n            (0, _util.fillOptions)(this, options);\n            this._ellipsoid = undefined;\n            this._granularity = undefined;\n            this._height = undefined;\n            this._textureRotationAngle = undefined;\n            this._id = undefined;\n\n            // set the flags to initiate a first drawing\n            this._createPrimitive = true;\n            this._primitive = undefined;\n            this._outlinePolygon = undefined;\n        }\n    }, {\n        key: "setAttribute",\n        value: function setAttribute(name, value) {\n            this[name] = value;\n            this._createPrimitive = true;\n        }\n    }, {\n        key: "getAttribute",\n        value: function getAttribute(name) {\n            return this[name];\n        }\n    }, {\n        key: "update",\n        value: function update(context, frameState, commandList) {\n            if (!Cesium.defined(this.ellipsoid)) {\n                throw new Cesium.DeveloperError(\'this.ellipsoid must be defined.\');\n            }\n\n            if (!Cesium.defined(this.appearance)) {\n                throw new Cesium.DeveloperError(\'this.material must be defined.\');\n            }\n\n            if (this.granularity < 0.0) {\n                throw new Cesium.DeveloperError(\'this.granularity and scene2D/scene3D overrides must be greater than zero.\');\n            }\n\n            if (!this.show) {\n                return;\n            }\n\n            if (!this._createPrimitive && !Cesium.defined(this._primitive)) {\n                // No positions/hierarchy to draw\n                return;\n            }\n\n            if (this._createPrimitive || this._ellipsoid !== this.ellipsoid || this._granularity !== this.granularity || this._height !== this.height || this._textureRotationAngle !== this.textureRotationAngle || this._id !== this.id) {\n\n                var geometry = this.getGeometry();\n                if (!geometry) {\n                    return;\n                }\n\n                this._createPrimitive = false;\n                this._ellipsoid = this.ellipsoid;\n                this._granularity = this.granularity;\n                this._height = this.height;\n                this._textureRotationAngle = this.textureRotationAngle;\n                this._id = this.id;\n\n                this._primitive = this._primitive && this._primitive.destroy();\n                var me = this;\n                this._primitive = new Cesium.Primitive({\n                    geometryInstances: new Cesium.GeometryInstance({\n                        geometry: geometry,\n                        id: this.id,\n                        pickPrimitive: this\n                    }),\n                    appearance: this.appearance,\n                    asynchronous: this.asynchronous\n                });\n                // this._primitive = new Cesium.GroundPrimitive({\n                //     geometryInstances: new Cesium.GeometryInstance({\n                //         geometry: geometry,\n                //         id: me.id,\n                //         pickPrimitive: me\n                //     }),\n                //     attributes: {\n                //         // color :  Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.BLUE.withAlpha(0.5))\n                //         color: Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)\n                //     }\n                // });\n\n                this._outlinePolygon = this._outlinePolygon && this._outlinePolygon.destroy();\n                if (this.strokeColor && this.getOutlineGeometry) {\n                    // create the highlighting frame\n                    this._outlinePolygon = new Cesium.Primitive({\n                        geometryInstances: new Cesium.GeometryInstance({\n                            geometry: this.getOutlineGeometry(),\n                            attributes: {\n                                color: Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)\n                            }\n                        }),\n                        appearance: new Cesium.PerInstanceColorAppearance({\n                            flat: true,\n                            renderState: {\n                                depthTest: {\n                                    enabled: true\n                                },\n                                lineWidth: Math.min(this.strokeWidth || 4.0)\n                            }\n                        })\n                    });\n                }\n            }\n\n            var primitive = this._primitive;\n            // primitive.appearance.material = this.material;\n            // primitive.appearance = this.appearance;\n            primitive.appearance.material = this.material;\n            // primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n            primitive.update(context, frameState, commandList);\n            //debug\n            // console.log(context)\n            // console.log(frameState)\n            // console.log(commandList)\n            this._outlinePolygon && this._outlinePolygon.update(context, frameState, commandList);\n        }\n    }, {\n        key: "isDestroyed",\n        value: function isDestroyed() {\n            return false;\n        }\n    }, {\n        key: "destroy",\n        value: function destroy() {\n            this._primitive = this._primitive && this._primitive.destroy();\n            return Cesium.destroyObject(this);\n        }\n    }, {\n        key: "setStrokeStyle",\n        value: function setStrokeStyle(strokeColor, strokeWidth) {\n            if (!this.strokeColor || !this.strokeColor.equals(strokeColor) || this.strokeWidth != strokeWidth) {\n                this._createPrimitive = true;\n                this.strokeColor = strokeColor;\n                this.strokeWidth = strokeWidth;\n            }\n        }\n\n        /**\r\n         * 子类重写 返回边框\r\n         */\n\n    }, {\n        key: "getOutlineGeometry",\n        value: function getOutlineGeometry() {\n            return null;\n        }\n\n        /**\r\n         * 子类重写 返回实体\r\n         */\n\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n            return null;\n        }\n\n        /**\r\n         * 子类重写\r\n         */\n\n    }, {\n        key: "setEditable",\n        value: function setEditable() {}\n\n        /**\r\n         * 部分子类需要重写\r\n         * @param highlighted\r\n         */\n\n    }, {\n        key: "setHighlighted",\n        value: function setHighlighted(highlighted) {\n            var drawHelper = this._drawHelper;\n\n            // if no change\n            // if already highlighted, the outline polygon will be available\n            if (this._highlighted && this._highlighted == highlighted) {\n                return;\n            }\n            // disable if already in edit mode\n            if (this._editMode === true) {\n                return;\n            }\n            this._highlighted = highlighted;\n            // highlight by creating an outline polygon matching the polygon points\n            if (highlighted) {\n                // make sure all other shapes are not highlighted\n                drawHelper.setHighlighted(this);\n                this._strokeColor = this.strokeColor;\n                this.setStrokeStyle(Cesium.Color.fromCssColorString(\'white\'), this.strokeWidth);\n            } else {\n                if (this._strokeColor) {\n                    this.setStrokeStyle(this._strokeColor, this.strokeWidth);\n                } else {\n                    this.setStrokeStyle(undefined, undefined);\n                }\n            }\n        }\n    }]);\n\n    return ChangeablePrimitive;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0NoYW5nZWFibGVQcmltaXRpdmUuanM/YjkwYiJdLCJuYW1lcyI6WyJDZXNpdW0iLCJDaGFuZ2VhYmxlUHJpbWl0aXZlIiwib3B0aW9ucyIsIl9lbGxpcHNvaWQiLCJ1bmRlZmluZWQiLCJfZ3JhbnVsYXJpdHkiLCJfaGVpZ2h0IiwiX3RleHR1cmVSb3RhdGlvbkFuZ2xlIiwiX2lkIiwiX2NyZWF0ZVByaW1pdGl2ZSIsIl9wcmltaXRpdmUiLCJfb3V0bGluZVBvbHlnb24iLCJuYW1lIiwidmFsdWUiLCJjb250ZXh0IiwiZnJhbWVTdGF0ZSIsImNvbW1hbmRMaXN0IiwiZGVmaW5lZCIsImVsbGlwc29pZCIsIkRldmVsb3BlckVycm9yIiwiYXBwZWFyYW5jZSIsImdyYW51bGFyaXR5Iiwic2hvdyIsImhlaWdodCIsInRleHR1cmVSb3RhdGlvbkFuZ2xlIiwiaWQiLCJnZW9tZXRyeSIsImdldEdlb21ldHJ5IiwiZGVzdHJveSIsIm1lIiwiUHJpbWl0aXZlIiwiZ2VvbWV0cnlJbnN0YW5jZXMiLCJHZW9tZXRyeUluc3RhbmNlIiwicGlja1ByaW1pdGl2ZSIsImFzeW5jaHJvbm91cyIsInN0cm9rZUNvbG9yIiwiZ2V0T3V0bGluZUdlb21ldHJ5IiwiYXR0cmlidXRlcyIsImNvbG9yIiwiQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIiwiZnJvbUNvbG9yIiwiUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UiLCJmbGF0IiwicmVuZGVyU3RhdGUiLCJkZXB0aFRlc3QiLCJlbmFibGVkIiwibGluZVdpZHRoIiwiTWF0aCIsIm1pbiIsInN0cm9rZVdpZHRoIiwicHJpbWl0aXZlIiwibWF0ZXJpYWwiLCJ1cGRhdGUiLCJkZXN0cm95T2JqZWN0IiwiZXF1YWxzIiwiaGlnaGxpZ2h0ZWQiLCJkcmF3SGVscGVyIiwiX2RyYXdIZWxwZXIiLCJfaGlnaGxpZ2h0ZWQiLCJfZWRpdE1vZGUiLCJzZXRIaWdobGlnaHRlZCIsIl9zdHJva2VDb2xvciIsInNldFN0cm9rZVN0eWxlIiwiQ29sb3IiLCJmcm9tQ3NzQ29sb3JTdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOzs7Ozs7SUFHYUMsbUIsV0FBQUEsbUI7Ozs7Ozs7MENBQ1NDLE8sRUFBUztBQUN2QixtQ0FBWSxJQUFaLEVBQWtCQSxPQUFsQjtBQUNBLGlCQUFLQyxVQUFMLEdBQWtCQyxTQUFsQjtBQUNBLGlCQUFLQyxZQUFMLEdBQW9CRCxTQUFwQjtBQUNBLGlCQUFLRSxPQUFMLEdBQWVGLFNBQWY7QUFDQSxpQkFBS0cscUJBQUwsR0FBNkJILFNBQTdCO0FBQ0EsaUJBQUtJLEdBQUwsR0FBV0osU0FBWDs7QUFFQTtBQUNBLGlCQUFLSyxnQkFBTCxHQUF3QixJQUF4QjtBQUNBLGlCQUFLQyxVQUFMLEdBQWtCTixTQUFsQjtBQUNBLGlCQUFLTyxlQUFMLEdBQXVCUCxTQUF2QjtBQUNIOzs7cUNBRVlRLEksRUFBTUMsSyxFQUFPO0FBQ3RCLGlCQUFLRCxJQUFMLElBQWFDLEtBQWI7QUFDQSxpQkFBS0osZ0JBQUwsR0FBd0IsSUFBeEI7QUFDSDs7O3FDQUVZRyxJLEVBQU07QUFDZixtQkFBTyxLQUFLQSxJQUFMLENBQVA7QUFDSDs7OytCQUVNRSxPLEVBQVNDLFUsRUFBWUMsVyxFQUFZO0FBQ3BDLGdCQUFJLENBQUNoQixPQUFPaUIsT0FBUCxDQUFlLEtBQUtDLFNBQXBCLENBQUwsRUFBcUM7QUFDakMsc0JBQU0sSUFBSWxCLE9BQU9tQixjQUFYLENBQTBCLGlDQUExQixDQUFOO0FBQ0g7O0FBRUQsZ0JBQUksQ0FBQ25CLE9BQU9pQixPQUFQLENBQWUsS0FBS0csVUFBcEIsQ0FBTCxFQUFzQztBQUNsQyxzQkFBTSxJQUFJcEIsT0FBT21CLGNBQVgsQ0FBMEIsZ0NBQTFCLENBQU47QUFDSDs7QUFFRCxnQkFBSSxLQUFLRSxXQUFMLEdBQW1CLEdBQXZCLEVBQTRCO0FBQ3hCLHNCQUFN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QUNBLHFCQUFLMkIsY0FBTCxDQUFvQjlELE9BQU8rRCxLQUFQLENBQWFDLGtCQUFiLENBQWdDLE9BQWhDLENBQXBCLEVBQThELEtBQUtmLFdBQW5FO0FBQ0gsYUFMRCxNQUtPO0FBQ0gsb0JBQUksS0FBS1ksWUFBVCxFQUF1QjtBQUNuQix5QkFBS0MsY0FBTCxDQUFvQixLQUFLRCxZQUF6QixFQUF1QyxLQUFLWixXQUE1QztBQUNILGlCQUZELE1BRU87QUFDSCx5QkFBS2EsY0FBTCxDQUFvQjFELFNBQXBCLEVBQStCQSxTQUEvQjtBQUNIO0FBQ0o7QUFDSiIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtmaWxsT3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENoYW5nZWFibGVQcmltaXRpdmUge1xyXG4gICAgaW5pdGlhbGlzZU9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgICAgIGZpbGxPcHRpb25zKHRoaXMsIG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5fZWxsaXBzb2lkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2dyYW51bGFyaXR5ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl90ZXh0dXJlUm90YXRpb25BbmdsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9pZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBmbGFncyB0byBpbml0aWF0ZSBhIGZpcnN0IGRyYXdpbmdcclxuICAgICAgICB0aGlzLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9vdXRsaW5lUG9seWdvbiA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBdHRyaWJ1dGUobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShjb250ZXh0LCBmcmFtZVN0YXRlLCBjb21tYW5kTGlzdCl7XHJcbiAgICAgICAgaWYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLmVsbGlwc29pZCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IENlc2l1bS5EZXZlbG9wZXJFcnJvcigndGhpcy5lbGxpcHNvaWQgbXVzdCBiZSBkZWZpbmVkLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLmFwcGVhcmFuY2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ3RoaXMubWF0ZXJpYWwgbXVzdCBiZSBkZWZpbmVkLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JhbnVsYXJpdHkgPCAwLjApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IENlc2l1bS5EZXZlbG9wZXJFcnJvcigndGhpcy5ncmFudWxhcml0eSBhbmQgc2NlbmUyRC9zY2VuZTNEIG92ZXJyaWRlcyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9jcmVhdGVQcmltaXRpdmUgJiYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLl9wcmltaXRpdmUpKSkge1xyXG4gICAgICAgICAgICAvLyBObyBwb3NpdGlvbnMvaGllcmFyY2h5IHRvIGRyYXdcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NyZWF0ZVByaW1pdGl2ZSB8fFxyXG4gICAgICAgICAgICAodGhpcy5fZWxsaXBzb2lkICE9PSB0aGlzLmVsbGlwc29pZCkgfHxcclxuICAgICAgICAgICAgKHRoaXMuX2dyYW51bGFyaXR5ICE9PSB0aGlzLmdyYW51bGFyaXR5KSB8fFxyXG4gICAgICAgICAgICAodGhpcy5faGVpZ2h0ICE9PSB0aGlzLmhlaWdodCkgfHxcclxuICAgICAgICAgICAgKHRoaXMuX3RleHR1cmVSb3RhdGlvbkFuZ2xlICE9PSB0aGlzLnRleHR1cmVSb3RhdGlvbkFuZ2xlKSB8fFxyXG4gICAgICAgICAgICAodGhpcy5faWQgIT09IHRoaXMuaWQpKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XHJcbiAgICAgICAgICAgIGlmICghZ2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUHJpbWl0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsbGlwc29pZCA9IHRoaXMuZWxsaXBzb2lkO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFudWxhcml0eSA9IHRoaXMuZ3JhbnVsYXJpdHk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlUm90YXRpb25BbmdsZSA9IHRoaXMudGV4dHVyZVJvdGF0aW9uQW5nbGU7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkID0gdGhpcy5pZDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ByaW1pdGl2ZSA9IHRoaXMuX3ByaW1pdGl2ZSAmJiB0aGlzLl9wcmltaXRpdmUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9wcmltaXRpdmUgPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZSh7XHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja1ByaW1pdGl2ZTogdGhpc1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBhcHBlYXJhbmNlOiB0aGlzLmFwcGVhcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBhc3luY2hyb25vdXM6IHRoaXMuYXN5bmNocm9ub3VzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzLl9wcmltaXRpdmUgPSBuZXcgQ2VzaXVtLkdyb3VuZFByaW1pdGl2ZSh7XHJcbiAgICAgICAgICAgIC8vICAgICBnZW9tZXRyeUluc3RhbmNlczogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgaWQ6IG1lLmlkLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHBpY2tQcmltaXRpdmU6IG1lXHJcbiAgICAgICAgICAgIC8vICAgICB9KSxcclxuICAgICAgICAgICAgLy8gICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyBjb2xvciA6ICBDZXNpdW0uQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21Db2xvcihDZXNpdW0uQ29sb3IuQkxVRS53aXRoQWxwaGEoMC41KSlcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb2xvcjogQ2VzaXVtLkNvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5mcm9tQ29sb3IodGhpcy5zdHJva2VDb2xvcilcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9vdXRsaW5lUG9seWdvbiA9IHRoaXMuX291dGxpbmVQb2x5Z29uICYmIHRoaXMuX291dGxpbmVQb2x5Z29uLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3Ryb2tlQ29sb3IgJiYgdGhpcy5nZXRPdXRsaW5lR2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgaGlnaGxpZ2h0aW5nIGZyYW1lXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vdXRsaW5lUG9seWdvbiA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2V0T3V0bGluZUdlb21ldHJ5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBDZXNpdW0uQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21Db2xvcih0aGlzLnN0cm9rZUNvbG9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZWFyYW5jZTogbmV3IENlc2l1bS5QZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclN0YXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aFRlc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiBNYXRoLm1pbih0aGlzLnN0cm9rZVdpZHRoIHx8IDQuMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHByaW1pdGl2ZSA9IHRoaXMuX3ByaW1pdGl2ZTtcclxuICAgICAgICAvLyBwcmltaXRpdmUuYXBwZWFyYW5jZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XHJcbiAgICAgICAgLy8gcHJpbWl0aXZlLmFwcGVhcmFuY2UgPSB0aGlzLmFwcGVhcmFuY2U7XHJcbiAgICAgICAgcHJpbWl0aXZlLmFwcGVhcmFuY2UubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsO1xyXG4gICAgICAgIC8vIHByaW1pdGl2ZS5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XHJcbiAgICAgICAgcHJpbWl0aXZlLnVwZGF0ZShjb250ZXh0LCBmcmFtZVN0YXRlLCBjb21tYW5kTGlzdCk7XHJcbiAgICAgICAgLy9kZWJ1Z1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbnRleHQpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZnJhbWVTdGF0ZSlcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjb21tYW5kTGlzdClcclxuICAgICAgICB0aGlzLl9vdXRsaW5lUG9seWdvbiAmJiB0aGlzLl9vdXRsaW5lUG9seWdvbi51cGRhdGUoY29udGV4dCwgZnJhbWVTdGF0ZSwgY29tbWFuZExpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRGVzdHJveWVkKCl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKXtcclxuICAgICAgICB0aGlzLl9wcmltaXRpdmUgPSB0aGlzLl9wcmltaXRpdmUgJiYgdGhpcy5fcHJpbWl0aXZlLmRlc3Ryb3koKTtcclxuICAgICAgICByZXR1cm4gQ2VzaXVtLmRlc3Ryb3lPYmplY3QodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3Ryb2tlU3R5bGUoc3Ryb2tlQ29sb3IsIHN0cm9rZVdpZHRoKXtcclxuICAgICAgICBpZiAoIXRoaXMuc3Ryb2tlQ29sb3IgfHwgIXRoaXMuc3Ryb2tlQ29sb3IuZXF1YWxzKHN0cm9rZUNvbG9yKSB8fCB0aGlzLnN0cm9rZVdpZHRoICE9IHN0cm9rZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlQ29sb3IgPSBzdHJva2VDb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5zdHJva2VXaWR0aCA9IHN0cm9rZVdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWtkOexu+mHjeWGmSDov5Tlm57ovrnmoYZcclxuICAgICAqL1xyXG4gICAgZ2V0T3V0bGluZUdlb21ldHJ5KCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlrZDnsbvph43lhpkg6L+U5Zue5a6e5L2TXHJcbiAgICAgKi9cclxuICAgIGdldEdlb21ldHJ5KCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlrZDnsbvph43lhplcclxuICAgICAqL1xyXG4gICAgc2V0RWRpdGFibGUoKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpg6jliIblrZDnsbvpnIDopoHph43lhplcclxuICAgICAqIEBwYXJhbSBoaWdobGlnaHRlZFxyXG4gICAgICovXHJcbiAgICBzZXRIaWdobGlnaHRlZChoaWdobGlnaHRlZCkge1xyXG4gICAgICAgIHZhciBkcmF3SGVscGVyID0gdGhpcy5fZHJhd0hlbHBlcjtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gY2hhbmdlXHJcbiAgICAgICAgLy8gaWYgYWxyZWFkeSBoaWdobGlnaHRlZCwgdGhlIG91dGxpbmUgcG9seWdvbiB3aWxsIGJlIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICh0aGlzLl9oaWdobGlnaHRlZCAmJiB0aGlzLl9oaWdobGlnaHRlZCA9PSBoaWdobGlnaHRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGRpc2FibGUgaWYgYWxyZWFkeSBpbiBlZGl0IG1vZGVcclxuICAgICAgICBpZiAodGhpcy5fZWRpdE1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9oaWdobGlnaHRlZCA9IGhpZ2hsaWdodGVkO1xyXG4gICAgICAgIC8vIGhpZ2hsaWdodCBieSBjcmVhdGluZyBhbiBvdXRsaW5lIHBvbHlnb24gbWF0Y2hpbmcgdGhlIHBvbHlnb24gcG9pbnRzXHJcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkKSB7XHJcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgb3RoZXIgc2hhcGVzIGFyZSBub3QgaGlnaGxpZ2h0ZWRcclxuICAgICAgICAgICAgZHJhd0hlbHBlci5zZXRIaWdobGlnaHRlZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5fc3Ryb2tlQ29sb3IgPSB0aGlzLnN0cm9rZUNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlKENlc2l1bS5Db2xvci5mcm9tQ3NzQ29sb3JTdHJpbmcoJ3doaXRlJyksIHRoaXMuc3Ryb2tlV2lkdGgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdHJva2VDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHJva2VTdHlsZSh0aGlzLl9zdHJva2VDb2xvciwgdGhpcy5zdHJva2VXaWR0aCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlKHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getCesiumHightZero = exports.createIconDiv = exports.getExtentCorners = exports.getExtent = undefined;\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _DefaultValue = __webpack_require__(2);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar getExtent = exports.getExtent = function getExtent(mn, mx) {\n    var e = new Cesium.Rectangle();\n\n    // Re-order so west < east and south < north\n    e.west = Math.min(mn.longitude, mx.longitude);\n    e.east = Math.max(mn.longitude, mx.longitude);\n    e.south = Math.min(mn.latitude, mx.latitude);\n    e.north = Math.max(mn.latitude, mx.latitude);\n\n    // Check for approx equal (shouldn't require abs due to re-order)\n    var epsilon = Cesium.Math.EPSILON7;\n\n    if (e.east - e.west < epsilon) {\n        e.east += epsilon * 2.0;\n    }\n\n    if (e.north - e.south < epsilon) {\n        e.north += epsilon * 2.0;\n    }\n\n    return e;\n};\n\nvar getExtentCorners = exports.getExtentCorners = function getExtentCorners(value) {\n    return _DefaultValue.ellipsoid.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(value), Cesium.Rectangle.northeast(value), Cesium.Rectangle.southeast(value), Cesium.Rectangle.southwest(value)]);\n};\n\nvar createIconDiv = exports.createIconDiv = function createIconDiv(container, id, url, title, callback) {\n    var div = document.createElement('DIV');\n    div.className = 'button' + url;\n    div.title = title;\n    container.appendChild(div);\n    div.onclick = callback;\n    return div;\n};\n\nvar getCesiumHightZero = exports.getCesiumHightZero = function getCesiumHightZero(cesium3) {\n    var fromCartesian = Cesium.Cartographic.fromCartesian(cesium3);\n    return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvdXRpbC9jb25zdHJ1Y3RIZWxwZXIuanM/OWFjZCJdLCJuYW1lcyI6WyJDZXNpdW0iLCJnZXRFeHRlbnQiLCJtbiIsIm14IiwiZSIsIlJlY3RhbmdsZSIsIndlc3QiLCJNYXRoIiwibWluIiwibG9uZ2l0dWRlIiwiZWFzdCIsIm1heCIsInNvdXRoIiwibGF0aXR1ZGUiLCJub3J0aCIsImVwc2lsb24iLCJFUFNJTE9ONyIsImdldEV4dGVudENvcm5lcnMiLCJ2YWx1ZSIsImVsbGlwc29pZCIsImNhcnRvZ3JhcGhpY0FycmF5VG9DYXJ0ZXNpYW5BcnJheSIsIm5vcnRod2VzdCIsIm5vcnRoZWFzdCIsInNvdXRoZWFzdCIsInNvdXRod2VzdCIsImNyZWF0ZUljb25EaXYiLCJjb250YWluZXIiLCJpZCIsInVybCIsInRpdGxlIiwiY2FsbGJhY2siLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsIm9uY2xpY2siLCJnZXRDZXNpdW1IaWdodFplcm8iLCJjZXNpdW0zIiwiZnJvbUNhcnRlc2lhbiIsIkNhcnRvZ3JhcGhpYyIsIkNhcnRlc2lhbjMiLCJmcm9tUmFkaWFucyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOzs7O0FBRU8sSUFBTUMsZ0NBQVksU0FBWkEsU0FBWSxDQUFDQyxFQUFELEVBQUtDLEVBQUwsRUFBWTtBQUNqQyxRQUFJQyxJQUFJLElBQUlKLE9BQU9LLFNBQVgsRUFBUjs7QUFFQTtBQUNBRCxNQUFFRSxJQUFGLEdBQVNDLEtBQUtDLEdBQUwsQ0FBU04sR0FBR08sU0FBWixFQUF1Qk4sR0FBR00sU0FBMUIsQ0FBVDtBQUNBTCxNQUFFTSxJQUFGLEdBQVNILEtBQUtJLEdBQUwsQ0FBU1QsR0FBR08sU0FBWixFQUF1Qk4sR0FBR00sU0FBMUIsQ0FBVDtBQUNBTCxNQUFFUSxLQUFGLEdBQVVMLEtBQUtDLEdBQUwsQ0FBU04sR0FBR1csUUFBWixFQUFzQlYsR0FBR1UsUUFBekIsQ0FBVjtBQUNBVCxNQUFFVSxLQUFGLEdBQVVQLEtBQUtJLEdBQUwsQ0FBU1QsR0FBR1csUUFBWixFQUFzQlYsR0FBR1UsUUFBekIsQ0FBVjs7QUFFQTtBQUNBLFFBQUlFLFVBQVVmLE9BQU9PLElBQVAsQ0FBWVMsUUFBMUI7O0FBRUEsUUFBS1osRUFBRU0sSUFBRixHQUFTTixFQUFFRSxJQUFaLEdBQW9CUyxPQUF4QixFQUFpQztBQUM3QlgsVUFBRU0sSUFBRixJQUFVSyxVQUFVLEdBQXBCO0FBQ0g7O0FBRUQsUUFBS1gsRUFBRVUsS0FBRixHQUFVVixFQUFFUSxLQUFiLEdBQXNCRyxPQUExQixFQUFtQztBQUMvQlgsVUFBRVUsS0FBRixJQUFXQyxVQUFVLEdBQXJCO0FBQ0g7O0FBRUQsV0FBT1gsQ0FBUDtBQUNILENBckJNOztBQXVCQSxJQUFNYSw4Q0FBbUIsU0FBbkJBLGdCQUFtQixDQUFDQyxLQUFELEVBQVc7QUFDdkMsV0FBT0Msd0JBQVVDLGlDQUFWLENBQTRDLENBQUNwQixPQUFPSyxTQUFQLENBQWlCZ0IsU0FBakIsQ0FBMkJILEtBQTNCLENBQUQsRUFBb0NsQixPQUFPSyxTQUFQLENBQWlCaUIsU0FBakIsQ0FBMkJKLEtBQTNCLENBQXBDLEVBQXVFbEIsT0FBT0ssU0FBUCxDQUFpQmtCLFNBQWpCLENBQTJCTCxLQUEzQixDQUF2RSxFQUEwR2xCLE9BQU9LLFNBQVAsQ0FBaUJtQixTQUFqQixDQUEyQk4sS0FBM0IsQ0FBMUcsQ0FBNUMsQ0FBUDtBQUNILENBRk07O0FBS0EsSUFBTU8sd0NBQWdCLFNBQWhCQSxhQUFnQixDQUFDQyxTQUFELEVBQVdDLEVBQVgsRUFBZUMsR0FBZixFQUFvQkMsS0FBcEIsRUFBMkJDLFFBQTNCLEVBQXdDO0FBQ2pFLFFBQUlDLE1BQU1DLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNBRixRQUFJRyxTQUFKLEdBQWdCLFdBQVdOLEdBQTNCO0FBQ0FHLFFBQUlGLEtBQUosR0FBWUEsS0FBWjtBQUNBSCxjQUFVUyxXQUFWLENBQXNCSixHQUF0QjtBQUNBQSxRQUFJSyxPQUFKLEdBQWNOLFFBQWQ7QUFDQSxXQUFPQyxHQUFQO0FBQ0gsQ0FQTTs7QUFTQSxJQUFNTSxrREFBcUIsU0FBckJBLGtCQUFxQixDQUFDQyxPQUFELEVBQWE7QUFDM0MsUUFBSUMsZ0JBQWdCdkMsT0FBT3dDLFlBQVAsQ0FBb0JELGFBQXBCLENBQWtDRCxPQUFsQyxDQUFwQjtBQUNBLFdBQU90QyxPQUFPeUMsVUFBUCxDQUFrQkMsV0FBbEIsQ0FBOEJILGNBQWM5QixTQUE1QyxFQUF1RDhCLGNBQWMxQixRQUFyRSxFQUErRSxDQUEvRSxDQUFQO0FBQ0gsQ0FITSIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtlbGxpcHNvaWR9IGZyb20gJy4uL2NvbnN0YW50L0RlZmF1bHRWYWx1ZSdcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRFeHRlbnQgPSAobW4sIG14KSA9PiB7XHJcbiAgICB2YXIgZSA9IG5ldyBDZXNpdW0uUmVjdGFuZ2xlKCk7XHJcblxyXG4gICAgLy8gUmUtb3JkZXIgc28gd2VzdCA8IGVhc3QgYW5kIHNvdXRoIDwgbm9ydGhcclxuICAgIGUud2VzdCA9IE1hdGgubWluKG1uLmxvbmdpdHVkZSwgbXgubG9uZ2l0dWRlKTtcclxuICAgIGUuZWFzdCA9IE1hdGgubWF4KG1uLmxvbmdpdHVkZSwgbXgubG9uZ2l0dWRlKTtcclxuICAgIGUuc291dGggPSBNYXRoLm1pbihtbi5sYXRpdHVkZSwgbXgubGF0aXR1ZGUpO1xyXG4gICAgZS5ub3J0aCA9IE1hdGgubWF4KG1uLmxhdGl0dWRlLCBteC5sYXRpdHVkZSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIGFwcHJveCBlcXVhbCAoc2hvdWxkbid0IHJlcXVpcmUgYWJzIGR1ZSB0byByZS1vcmRlcilcclxuICAgIHZhciBlcHNpbG9uID0gQ2VzaXVtLk1hdGguRVBTSUxPTjc7XHJcblxyXG4gICAgaWYgKChlLmVhc3QgLSBlLndlc3QpIDwgZXBzaWxvbikge1xyXG4gICAgICAgIGUuZWFzdCArPSBlcHNpbG9uICogMi4wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgoZS5ub3J0aCAtIGUuc291dGgpIDwgZXBzaWxvbikge1xyXG4gICAgICAgIGUubm9ydGggKz0gZXBzaWxvbiAqIDIuMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldEV4dGVudENvcm5lcnMgPSAodmFsdWUpID0+IHtcclxuICAgIHJldHVybiBlbGxpcHNvaWQuY2FydG9ncmFwaGljQXJyYXlUb0NhcnRlc2lhbkFycmF5KFtDZXNpdW0uUmVjdGFuZ2xlLm5vcnRod2VzdCh2YWx1ZSksIENlc2l1bS5SZWN0YW5nbGUubm9ydGhlYXN0KHZhbHVlKSwgQ2VzaXVtLlJlY3RhbmdsZS5zb3V0aGVhc3QodmFsdWUpLCBDZXNpdW0uUmVjdGFuZ2xlLnNvdXRod2VzdCh2YWx1ZSldKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVJY29uRGl2ID0gKGNvbnRhaW5lcixpZCwgdXJsLCB0aXRsZSwgY2FsbGJhY2spID0+IHtcclxuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgIGRpdi5jbGFzc05hbWUgPSAnYnV0dG9uJyArIHVybDtcclxuICAgIGRpdi50aXRsZSA9IHRpdGxlO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICBkaXYub25jbGljayA9IGNhbGxiYWNrO1xyXG4gICAgcmV0dXJuIGRpdjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldENlc2l1bUhpZ2h0WmVybyA9IChjZXNpdW0zKSA9PiB7XHJcbiAgICB2YXIgZnJvbUNhcnRlc2lhbiA9IENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbUNhcnRlc2lhbihjZXNpdW0zKTtcclxuICAgIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhmcm9tQ2FydGVzaWFuLmxvbmdpdHVkZSwgZnJvbUNhcnRlc2lhbi5sYXRpdHVkZSwgMCk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nvar getWithDefault = exports.getWithDefault = function getWithDefault(element, defaultElement) {\n    return defined(element) ? element : defaultElement;\n};\n\nvar defined = exports.defined = function defined(element) {\n    return element !== null && element !== undefined;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVXRpbC9Ob3JtYWxVdGlscy5qcz85NzdlIl0sIm5hbWVzIjpbImdldFdpdGhEZWZhdWx0IiwiZWxlbWVudCIsImRlZmF1bHRFbGVtZW50IiwiZGVmaW5lZCIsInVuZGVmaW5lZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxJQUFNQSwwQ0FBaUIsU0FBakJBLGNBQWlCLENBQUNDLE9BQUQsRUFBVUMsY0FBVixFQUE2QjtBQUN2RCxXQUFPQyxRQUFRRixPQUFSLElBQW1CQSxPQUFuQixHQUE2QkMsY0FBcEM7QUFDSCxDQUZNOztBQUlBLElBQU1DLDRCQUFVLFNBQVZBLE9BQVUsQ0FBQ0YsT0FBRCxFQUFZO0FBQy9CLFdBQU9BLFlBQVksSUFBWixJQUFvQkEsWUFBWUcsU0FBdkM7QUFDSCxDQUZNIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZ2V0V2l0aERlZmF1bHQgPSAoZWxlbWVudCwgZGVmYXVsdEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiBkZWZpbmVkKGVsZW1lbnQpID8gZWxlbWVudCA6IGRlZmF1bHRFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVmaW5lZCA9IChlbGVtZW50KSA9PntcclxuICAgIHJldHVybiBlbGVtZW50ICE9PSBudWxsICYmIGVsZW1lbnQgIT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolySharpPrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _ChangeablePrimitive2 = __webpack_require__(6);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolySharpPrimitive = exports.PolySharpPrimitive = function (_ChangeablePrimitive) {\n    _inherits(PolySharpPrimitive, _ChangeablePrimitive);\n\n    function PolySharpPrimitive() {\n        _classCallCheck(this, PolySharpPrimitive);\n\n        return _possibleConstructorReturn(this, (PolySharpPrimitive.__proto__ || Object.getPrototypeOf(PolySharpPrimitive)).apply(this, arguments));\n    }\n\n    _createClass(PolySharpPrimitive, [{\n        key: "setEditMode",\n        value: function setEditMode() {\n            var editMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            var drawHelper = this._drawHelper;\n            // if no change\n            if (this._editMode == editMode) {\n                return;\n            }\n            // make sure all other shapes are not in edit mode before starting the editing of this shape\n            drawHelper.disableAllHighlights();\n            // display markers\n            if (editMode) {\n                drawHelper.setEdited(this);\n                var scene = drawHelper._scene;\n                var _self = this;\n                // create the markers and handlers for the editing\n                if (this._markers == null) {\n                    var thisDragBillboard = this.dragBillboard ? this.dragBillboard : _DefaultValue.dragBillboard;\n                    var thisDragHalfBillboard = this.dragHalfBillboard ? this.dragHalfBillboard : _DefaultValue.dragBillboard;\n\n                    var markers = new _BillboardGroup.BillboardGroup(drawHelper, thisDragBillboard);\n                    var editMarkers = new _BillboardGroup.BillboardGroup(drawHelper, thisDragHalfBillboard);\n\n                    var handleMarkerChanges = {\n                        dragHandlers: {\n                            onDrag: function onDrag(index, position) {\n                                _self.positions[index] = position;\n                                _self.updateHalfMarkers(index, _self.positions, editMarkers);\n                                _self._createPrimitive = true;\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                _self._createPrimitive = true;\n                                _self.execOnEdited();\n                            }\n                        },\n                        onDoubleClick: function onDoubleClick(index) {\n                            if (_self.positions.length < 4) {\n                                return;\n                            }\n                            // remove the point and the corresponding markers\n                            _self.positions.splice(index, 1);\n                            _self._createPrimitive = true;\n                            markers.removeBillboard(index);\n                            editMarkers.removeBillboard(index);\n                            _self.updateHalfMarkers(index, _self.positions, editMarkers);\n                            _self.execOnEdited();\n                        },\n                        tooltip: function tooltip() {\n                            if (_self.positions.length > 3) {\n                                return "Double click to remove this point";\n                            }\n                        }\n                    };\n                    // add billboards and keep an ordered list of them for the polygon edges\n                    markers.addBillboards(_self.positions, handleMarkerChanges);\n                    this._markers = markers;\n\n                    var halfPositions = [];\n                    var index = 0;\n                    var length = _self.positions.length + (this.isPolygon ? 0 : -1);\n                    for (; index < length; index++) {\n                        halfPositions.push(_self.calculateHalfMarkerPosition(index));\n                    }\n                    var handleEditMarkerChanges = {\n                        dragHandlers: {\n                            onDragStart: function onDragStart(index, position) {\n                                // add a new position to the polygon but not a new marker yet\n                                this.index = index + 1;\n                                _self.positions.splice(this.index, 0, position);\n                                _self._createPrimitive = true;\n                            },\n                            onDrag: function onDrag(index, position) {\n                                _self.positions[this.index] = position;\n                                _self._createPrimitive = true;\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                // create new sets of makers for editing\n                                markers.insertBillboard(this.index, position, handleMarkerChanges);\n                                editMarkers.getBillboard(this.index - 1).position = _self.calculateHalfMarkerPosition(this.index - 1);\n                                editMarkers.insertBillboard(this.index, _self.calculateHalfMarkerPosition(this.index), handleEditMarkerChanges);\n                                _self._createPrimitive = true;\n                                _self.execOnEdited();\n                            }\n                        },\n                        tooltip: function tooltip() {\n                            return "Drag to create a new point";\n                        }\n                    };\n                    editMarkers.addBillboards(halfPositions, handleEditMarkerChanges);\n                    this._editMarkers = editMarkers;\n                    // add a handler for clicking in the globe\n                    this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                    this._globeClickhandler.setInputAction(function (movement) {\n                        var pickedObject = scene.pick(movement.position);\n                        if (!(pickedObject && pickedObject.primitive)) {\n                            _self.setEditMode(false);\n                        }\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                    // set on top of the polygon\n                    markers.setOnTop();\n                    editMarkers.setOnTop();\n                }\n                this._editMode = true;\n            } else {\n                if (this._markers != null) {\n                    this._markers.remove();\n                    this._editMarkers.remove();\n                    this._markers = null;\n                    this._editMarkers = null;\n                    this._globeClickhandler.destroy();\n                }\n                this._editMode = false;\n            }\n        }\n    }, {\n        key: "calculateHalfMarkerPosition",\n        value: function calculateHalfMarkerPosition(index) {\n            var positions = this.positions;\n            return _DefaultValue.ellipsoid.cartographicToCartesian(new Cesium.EllipsoidGeodesic(_DefaultValue.ellipsoid.cartesianToCartographic(positions[index]), _DefaultValue.ellipsoid.cartesianToCartographic(positions[index < positions.length - 1 ? index + 1 : 0])).interpolateUsingFraction(0.5));\n        }\n\n        // function for updating the edit markers around a certain point\n\n    }, {\n        key: "updateHalfMarkers",\n        value: function updateHalfMarkers(index, positions, editMarkers) {\n            // update the half markers before and after the index\n            var editIndex = index - 1 < 0 ? positions.length - 1 : index - 1;\n            if (editIndex < editMarkers.countBillboards()) {\n                editMarkers.getBillboard(editIndex).position = this.calculateHalfMarkerPosition(editIndex);\n            }\n            editIndex = index;\n            if (editIndex < editMarkers.countBillboards()) {\n                editMarkers.getBillboard(editIndex).position = this.calculateHalfMarkerPosition(editIndex);\n            }\n        }\n    }, {\n        key: "execOnEdited",\n        value: function execOnEdited() {\n            this.executeListeners({ name: \'onEdited\', positions: this.positions });\n        }\n    }]);\n\n    return PolySharpPrimitive;\n}(_ChangeablePrimitive2.ChangeablePrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL1BvbHlTaGFycFByaW1pdGl2ZS5qcz8zZDEwIl0sIm5hbWVzIjpbIlBvbHlTaGFycFByaW1pdGl2ZSIsImVkaXRNb2RlIiwiZHJhd0hlbHBlciIsIl9kcmF3SGVscGVyIiwiX2VkaXRNb2RlIiwiZGlzYWJsZUFsbEhpZ2hsaWdodHMiLCJzZXRFZGl0ZWQiLCJzY2VuZSIsIl9zY2VuZSIsIl9zZWxmIiwiX21hcmtlcnMiLCJ0aGlzRHJhZ0JpbGxib2FyZCIsImRyYWdCaWxsYm9hcmQiLCJ0aGlzRHJhZ0hhbGZCaWxsYm9hcmQiLCJkcmFnSGFsZkJpbGxib2FyZCIsIm1hcmtlcnMiLCJCaWxsYm9hcmRHcm91cCIsImVkaXRNYXJrZXJzIiwiaGFuZGxlTWFya2VyQ2hhbmdlcyIsImRyYWdIYW5kbGVycyIsIm9uRHJhZyIsImluZGV4IiwicG9zaXRpb24iLCJwb3NpdGlvbnMiLCJ1cGRhdGVIYWxmTWFya2VycyIsIl9jcmVhdGVQcmltaXRpdmUiLCJvbkRyYWdFbmQiLCJleGVjT25FZGl0ZWQiLCJvbkRvdWJsZUNsaWNrIiwibGVuZ3RoIiwic3BsaWNlIiwicmVtb3ZlQmlsbGJvYXJkIiwidG9vbHRpcCIsImFkZEJpbGxib2FyZHMiLCJoYWxmUG9zaXRpb25zIiwiaXNQb2x5Z29uIiwicHVzaCIsImNhbGN1bGF0ZUhhbGZNYXJrZXJQb3NpdGlvbiIsImhhbmRsZUVkaXRNYXJrZXJDaGFuZ2VzIiwib25EcmFnU3RhcnQiLCJpbnNlcnRCaWxsYm9hcmQiLCJnZXRCaWxsYm9hcmQiLCJfZWRpdE1hcmtlcnMiLCJfZ2xvYmVDbGlja2hhbmRsZXIiLCJDZXNpdW0iLCJTY3JlZW5TcGFjZUV2ZW50SGFuZGxlciIsImNhbnZhcyIsInNldElucHV0QWN0aW9uIiwibW92ZW1lbnQiLCJwaWNrZWRPYmplY3QiLCJwaWNrIiwicHJpbWl0aXZlIiwic2V0RWRpdE1vZGUiLCJTY3JlZW5TcGFjZUV2ZW50VHlwZSIsIkxFRlRfQ0xJQ0siLCJzZXRPblRvcCIsInJlbW92ZSIsImRlc3Ryb3kiLCJlbGxpcHNvaWQiLCJjYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbiIsIkVsbGlwc29pZEdlb2Rlc2ljIiwiY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMiLCJpbnRlcnBvbGF0ZVVzaW5nRnJhY3Rpb24iLCJlZGl0SW5kZXgiLCJjb3VudEJpbGxib2FyZHMiLCJleGVjdXRlTGlzdGVuZXJzIiwibmFtZSIsIkNoYW5nZWFibGVQcmltaXRpdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7OztJQUVhQSxrQixXQUFBQSxrQjs7Ozs7Ozs7Ozs7c0NBQ21CO0FBQUEsZ0JBQWhCQyxRQUFnQix1RUFBTCxJQUFLOztBQUN4QixnQkFBSUMsYUFBYSxLQUFLQyxXQUF0QjtBQUNBO0FBQ0EsZ0JBQUksS0FBS0MsU0FBTCxJQUFrQkgsUUFBdEIsRUFBZ0M7QUFDNUI7QUFDSDtBQUNEO0FBQ0FDLHVCQUFXRyxvQkFBWDtBQUNBO0FBQ0EsZ0JBQUlKLFFBQUosRUFBYztBQUNWQywyQkFBV0ksU0FBWCxDQUFxQixJQUFyQjtBQUNBLG9CQUFJQyxRQUFRTCxXQUFXTSxNQUF2QjtBQUNBLG9CQUFJQyxRQUFRLElBQVo7QUFDQTtBQUNBLG9CQUFJLEtBQUtDLFFBQUwsSUFBaUIsSUFBckIsRUFBMkI7QUFDdkIsd0JBQUlDLG9CQUFvQixLQUFLQyxhQUFMLEdBQW9CLEtBQUtBLGFBQXpCLEdBQXdDQSwyQkFBaEU7QUFDQSx3QkFBSUMsd0JBQXdCLEtBQUtDLGlCQUFMLEdBQXdCLEtBQUtBLGlCQUE3QixHQUFnREYsMkJBQTVFOztBQUVBLHdCQUFJRyxVQUFVLElBQUlDLDhCQUFKLENBQW1CZCxVQUFuQixFQUErQlMsaUJBQS9CLENBQWQ7QUFDQSx3QkFBSU0sY0FBYyxJQUFJRCw4QkFBSixDQUFtQmQsVUFBbkIsRUFBK0JXLHFCQUEvQixDQUFsQjs7QUFHQSx3QkFBSUssc0JBQXNC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QUMvQixnQkFBSUUsWUFBWSxLQUFLQSxTQUFyQjtBQUNBLG1CQUFPbUMsd0JBQVVDLHVCQUFWLENBQ0gsSUFBSWYsT0FBT2dCLGlCQUFYLENBQTZCRix3QkFBVUcsdUJBQVYsQ0FBa0N0QyxVQUFVRixLQUFWLENBQWxDLENBQTdCLEVBQ0lxQyx3QkFBVUcsdUJBQVYsQ0FBa0N0QyxVQUFVRixRQUFRRSxVQUFVTSxNQUFWLEdBQW1CLENBQTNCLEdBQStCUixRQUFRLENBQXZDLEdBQTJDLENBQXJELENBQWxDLENBREosRUFDZ0d5Qyx3QkFEaEcsQ0FDeUgsR0FEekgsQ0FERyxDQUFQO0FBSUg7O0FBRUQ7Ozs7MENBQ2tCekMsSyxFQUFPRSxTLEVBQVVOLFcsRUFBYTtBQUM1QztBQUNBLGdCQUFJOEMsWUFBWTFDLFFBQVEsQ0FBUixHQUFZLENBQVosR0FBZ0JFLFVBQVVNLE1BQVYsR0FBbUIsQ0FBbkMsR0FBdUNSLFFBQVEsQ0FBL0Q7QUFDQSxnQkFBSTBDLFlBQVk5QyxZQUFZK0MsZUFBWixFQUFoQixFQUErQztBQUMzQy9DLDRCQUFZd0IsWUFBWixDQUF5QnNCLFNBQXpCLEVBQW9DekMsUUFBcEMsR0FBK0MsS0FBS2UsMkJBQUwsQ0FBaUMwQixTQUFqQyxDQUEvQztBQUNIO0FBQ0RBLHdCQUFZMUMsS0FBWjtBQUNBLGdCQUFJMEMsWUFBWTlDLFlBQVkrQyxlQUFaLEVBQWhCLEVBQStDO0FBQzNDL0MsNEJBQVl3QixZQUFaLENBQXlCc0IsU0FBekIsRUFBb0N6QyxRQUFwQyxHQUErQyxLQUFLZSwyQkFBTCxDQUFpQzBCLFNBQWpDLENBQS9DO0FBQ0g7QUFDSjs7O3VDQUdjO0FBQ1gsaUJBQUtFLGdCQUFMLENBQXNCLEVBQUNDLE1BQU0sVUFBUCxFQUFtQjNDLFdBQVcsS0FBS0EsU0FBbkMsRUFBdEI7QUFDSDs7OztFQTdJbUM0Qyx5QyIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VhYmxlUHJpbWl0aXZlfSBmcm9tIFwiLi9DaGFuZ2VhYmxlUHJpbWl0aXZlXCI7XHJcbmltcG9ydCB7ZHJhZ0JpbGxib2FyZCxlbGxpcHNvaWR9IGZyb20gXCIuLi9jb25zdGFudC9EZWZhdWx0VmFsdWVcIjtcclxuaW1wb3J0IHtCaWxsYm9hcmRHcm91cH0gZnJvbSBcIi4vQmlsbGJvYXJkR3JvdXBcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5U2hhcnBQcmltaXRpdmUgZXh0ZW5kcyBDaGFuZ2VhYmxlUHJpbWl0aXZle1xyXG4gICAgc2V0RWRpdE1vZGUoZWRpdE1vZGUgPSB0cnVlKXtcclxuICAgICAgICB2YXIgZHJhd0hlbHBlciA9IHRoaXMuX2RyYXdIZWxwZXI7XHJcbiAgICAgICAgLy8gaWYgbm8gY2hhbmdlXHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRNb2RlID09IGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICBkcmF3SGVscGVyLmRpc2FibGVBbGxIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgLy8gZGlzcGxheSBtYXJrZXJzXHJcbiAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgIGRyYXdIZWxwZXIuc2V0RWRpdGVkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgc2NlbmUgPSBkcmF3SGVscGVyLl9zY2VuZTtcclxuICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBtYXJrZXJzIGFuZCBoYW5kbGVycyBmb3IgdGhlIGVkaXRpbmdcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcmtlcnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaXNEcmFnQmlsbGJvYXJkID0gdGhpcy5kcmFnQmlsbGJvYXJkPyB0aGlzLmRyYWdCaWxsYm9hcmQ6IGRyYWdCaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0RyYWdIYWxmQmlsbGJvYXJkID0gdGhpcy5kcmFnSGFsZkJpbGxib2FyZD8gdGhpcy5kcmFnSGFsZkJpbGxib2FyZDogZHJhZ0JpbGxib2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IG5ldyBCaWxsYm9hcmRHcm91cChkcmF3SGVscGVyLCB0aGlzRHJhZ0JpbGxib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWRpdE1hcmtlcnMgPSBuZXcgQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlciwgdGhpc0RyYWdIYWxmQmlsbGJvYXJkKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZU1hcmtlckNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0hhbmRsZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYucG9zaXRpb25zW2luZGV4XSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYudXBkYXRlSGFsZk1hcmtlcnMoaW5kZXgsIF9zZWxmLnBvc2l0aW9ucyxlZGl0TWFya2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5fY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5fY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLmV4ZWNPbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvbkRvdWJsZUNsaWNrOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zZWxmLnBvc2l0aW9ucy5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBwb2ludCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5wb3NpdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucmVtb3ZlQmlsbGJvYXJkKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdE1hcmtlcnMucmVtb3ZlQmlsbGJvYXJkKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYudXBkYXRlSGFsZk1hcmtlcnMoaW5kZXgsIF9zZWxmLnBvc2l0aW9ucyxlZGl0TWFya2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLmV4ZWNPbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3NlbGYucG9zaXRpb25zLmxlbmd0aCA+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRvdWJsZSBjbGljayB0byByZW1vdmUgdGhpcyBwb2ludFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBiaWxsYm9hcmRzIGFuZCBrZWVwIGFuIG9yZGVyZWQgbGlzdCBvZiB0aGVtIGZvciB0aGUgcG9seWdvbiBlZGdlc1xyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmRzKF9zZWxmLnBvc2l0aW9ucywgaGFuZGxlTWFya2VyQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbWFya2VycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGFsZlBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBfc2VsZi5wb3NpdGlvbnMubGVuZ3RoICsgKHRoaXMuaXNQb2x5Z29uID8gMCA6IC0xKTtcclxuICAgICAgICAgICAgICAgIGZvciAoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbGZQb3NpdGlvbnMucHVzaChfc2VsZi5jYWxjdWxhdGVIYWxmTWFya2VyUG9zaXRpb24oaW5kZXgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVFZGl0TWFya2VyQ2hhbmdlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkcmFnSGFuZGxlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIG5ldyBwb3NpdGlvbiB0byB0aGUgcG9seWdvbiBidXQgbm90IGEgbmV3IG1hcmtlciB5ZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5wb3NpdGlvbnMuc3BsaWNlKHRoaXMuaW5kZXgsIDAsIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLnBvc2l0aW9uc1t0aGlzLmluZGV4XSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyBzZXRzIG9mIG1ha2VycyBmb3IgZWRpdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5pbnNlcnRCaWxsYm9hcmQodGhpcy5pbmRleCwgcG9zaXRpb24sIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdE1hcmtlcnMuZ2V0QmlsbGJvYXJkKHRoaXMuaW5kZXggLSAxKS5wb3NpdGlvbiA9IF9zZWxmLmNhbGN1bGF0ZUhhbGZNYXJrZXJQb3NpdGlvbih0aGlzLmluZGV4IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0TWFya2Vycy5pbnNlcnRCaWxsYm9hcmQodGhpcy5pbmRleCwgX3NlbGYuY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKHRoaXMuaW5kZXgpLCBoYW5kbGVFZGl0TWFya2VyQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5fY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLmV4ZWNPbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRyYWcgdG8gY3JlYXRlIGEgbmV3IHBvaW50XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGVkaXRNYXJrZXJzLmFkZEJpbGxib2FyZHMoaGFsZlBvc2l0aW9ucywgaGFuZGxlRWRpdE1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWRpdE1hcmtlcnMgPSBlZGl0TWFya2VycztcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBhIGhhbmRsZXIgZm9yIGNsaWNraW5nIGluIHRoZSBnbG9iZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2xvYmVDbGlja2hhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKHNjZW5lLmNhbnZhcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpY2tlZE9iamVjdCA9IHNjZW5lLnBpY2sobW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwaWNrZWRPYmplY3QgJiYgcGlja2VkT2JqZWN0LnByaW1pdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgb24gdG9wIG9mIHRoZSBwb2x5Z29uXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzLnNldE9uVG9wKCk7XHJcbiAgICAgICAgICAgICAgICBlZGl0TWFya2Vycy5zZXRPblRvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRNb2RlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWRpdE1hcmtlcnMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNYXJrZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9lZGl0TW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYWxjdWxhdGVIYWxmTWFya2VyUG9zaXRpb24oaW5kZXgpIHtcclxuICAgICAgICB2YXIgcG9zaXRpb25zID0gdGhpcy5wb3NpdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcclxuICAgICAgICAgICAgbmV3IENlc2l1bS5FbGxpcHNvaWRHZW9kZXNpYyhlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocG9zaXRpb25zW2luZGV4XSksXHJcbiAgICAgICAgICAgICAgICBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocG9zaXRpb25zW2luZGV4IDwgcG9zaXRpb25zLmxlbmd0aCAtIDEgPyBpbmRleCArIDEgOiAwXSkpLmludGVycG9sYXRlVXNpbmdGcmFjdGlvbigwLjUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmdW5jdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGVkaXQgbWFya2VycyBhcm91bmQgYSBjZXJ0YWluIHBvaW50XHJcbiAgICB1cGRhdGVIYWxmTWFya2VycyhpbmRleCwgcG9zaXRpb25zLGVkaXRNYXJrZXJzKSB7XHJcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBoYWxmIG1hcmtlcnMgYmVmb3JlIGFuZCBhZnRlciB0aGUgaW5kZXhcclxuICAgICAgICB2YXIgZWRpdEluZGV4ID0gaW5kZXggLSAxIDwgMCA/IHBvc2l0aW9ucy5sZW5ndGggLSAxIDogaW5kZXggLSAxO1xyXG4gICAgICAgIGlmIChlZGl0SW5kZXggPCBlZGl0TWFya2Vycy5jb3VudEJpbGxib2FyZHMoKSkge1xyXG4gICAgICAgICAgICBlZGl0TWFya2Vycy5nZXRCaWxsYm9hcmQoZWRpdEluZGV4KS5wb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKGVkaXRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVkaXRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgIGlmIChlZGl0SW5kZXggPCBlZGl0TWFya2Vycy5jb3VudEJpbGxib2FyZHMoKSkge1xyXG4gICAgICAgICAgICBlZGl0TWFya2Vycy5nZXRCaWxsYm9hcmQoZWRpdEluZGV4KS5wb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKGVkaXRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleGVjT25FZGl0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnb25FZGl0ZWQnLCBwb3NpdGlvbnM6IHRoaXMucG9zaXRpb25zfSk7XHJcbiAgICB9XHJcblxyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolyshapeHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _BaseHandler2 = __webpack_require__(11);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nvar _PolygonPrimitive = __webpack_require__(19);\n\nvar _PolylinePrimitive = __webpack_require__(20);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nvar _constructHelper = __webpack_require__(7);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolyshapeHandler = exports.PolyshapeHandler = function (_BaseHandler) {\n    _inherits(PolyshapeHandler, _BaseHandler);\n\n    function PolyshapeHandler() {\n        _classCallCheck(this, PolyshapeHandler);\n\n        return _possibleConstructorReturn(this, (PolyshapeHandler.__proto__ || Object.getPrototypeOf(PolyshapeHandler)).apply(this, arguments));\n    }\n\n    _createClass(PolyshapeHandler, [{\n        key: "start",\n        value: function start(options, drawHelper, isPolygon) {\n            options = isPolygon ? (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions) : (0, _util.copyOptions)(options, _DefaultValue.defaultPolylineOptions);\n            var scene = drawHelper.scene;\n            var viewer = drawHelper.viewer;\n            var primitives = scene.primitives;\n            var tooltip = drawHelper.tooltip;\n            var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n            drawHelper.startDrawing(function () {\n                primitives && primitives.remove(poly);\n                markers && markers.remove();\n                mouseHandler && mouseHandler.destroy();\n                tooltip && tooltip.setVisible(false);\n            });\n\n            var minPoints = isPolygon ? 3 : 2;\n            var poly = void 0;\n            if (isPolygon) {\n                // poly = new PolygonPrimitive(options);\n                poly = drawHelper.createEditablePolygonPrimitive(options);\n            } else {\n                // poly = new PolylinePrimitive(options);\n                poly = drawHelper.createEditablePolylinePrimitive(options);\n            }\n\n            poly.asynchronous = false;\n            primitives.add(poly);\n\n            var positions = [];\n            var markers = new _BillboardGroup.BillboardGroup(drawHelper, _DefaultValue.defaultBillboard);\n\n            mouseHandler.setInputAction(function (movement) {\n\n                var position = movement.position;\n                if (position != null) {\n                    if (positions.length < minPoints /*+ 2*/) {\n                            return;\n                        } else {\n                        // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                        var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n\n                        if (cartesian) {\n                            drawHelper.stopDrawing();\n                            if (typeof options.callback == \'function\') {\n                                // remove overlapping ones\n                                var index = positions.length - 1;\n                                options.callback(positions, drawHelper);\n                            }\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n            // Now wait for start\n            mouseHandler.setInputAction(function (movement) {\n\n                var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n                cartesian = (0, _constructHelper.getCesiumHightZero)(cartesian);\n\n                if (movement.position != null) {\n                    // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n\n                    if (cartesian) {\n                        // first click\n                        if (positions.length == 0) {\n                            positions.push(cartesian.clone());\n                            markers.addBillboard(positions[0]);\n                        }\n                        if (positions.length >= minPoints) {\n                            poly.positions = positions;\n                            poly._createPrimitive = true;\n                        }\n                        // add new point to polygon\n                        // this one will move with the mouse\n                        positions.push(cartesian);\n                        // add marker at the new position\n                        markers.addBillboard(cartesian);\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n            mouseHandler.setInputAction(function (movement) {\n                var position = movement.endPosition;\n                if (position != null) {\n                    if (positions.length == 0) {\n                        tooltip.showAt(position, "<p>Click to add first point</p>");\n                    } else {\n                        // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                        // var cartesian = scene.pickPosition(position);\n                        // cartesian = getCesiumHightZero(cartesian);\n                        var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                        if (cartesian) {\n                            positions.pop();\n                            // make sure it is slightly different\n                            // cartesian.y += (1 + Math.random());\n                            cartesian.y += Cesium.Math.EPSILON7;\n                            positions.push(cartesian);\n                            if (positions.length >= minPoints) {\n                                poly.positions = positions;\n                                poly._createPrimitive = true;\n                            }\n                            // update marker\n                            markers.getBillboard(positions.length - 1).position = cartesian;\n                            // show tooltip\n                            tooltip.showAt(position, "<p>Click to add new point (" + positions.length + ")</p>" + (positions.length > minPoints ? "<p>Double click to finish drawing</p>" : ""));\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n        }\n    }]);\n\n    return PolyshapeHandler;\n}(_BaseHandler2.BaseHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9Qb2x5c2hhcGVIYW5kbGVyLmpzP2Y4MWEiXSwibmFtZXMiOlsiQ2VzaXVtIiwiUG9seXNoYXBlSGFuZGxlciIsIm9wdGlvbnMiLCJkcmF3SGVscGVyIiwiaXNQb2x5Z29uIiwiZGVmYXVsdFN1cmZhY2VPcHRpb25zIiwiZGVmYXVsdFBvbHlsaW5lT3B0aW9ucyIsInNjZW5lIiwidmlld2VyIiwicHJpbWl0aXZlcyIsInRvb2x0aXAiLCJtb3VzZUhhbmRsZXIiLCJTY3JlZW5TcGFjZUV2ZW50SGFuZGxlciIsImNhbnZhcyIsInN0YXJ0RHJhd2luZyIsInJlbW92ZSIsInBvbHkiLCJtYXJrZXJzIiwiZGVzdHJveSIsInNldFZpc2libGUiLCJtaW5Qb2ludHMiLCJjcmVhdGVFZGl0YWJsZVBvbHlnb25QcmltaXRpdmUiLCJjcmVhdGVFZGl0YWJsZVBvbHlsaW5lUHJpbWl0aXZlIiwiYXN5bmNocm9ub3VzIiwiYWRkIiwicG9zaXRpb25zIiwiQmlsbGJvYXJkR3JvdXAiLCJkZWZhdWx0QmlsbGJvYXJkIiwic2V0SW5wdXRBY3Rpb24iLCJtb3ZlbWVudCIsInBvc2l0aW9uIiwibGVuZ3RoIiwiY2FydGVzaWFuIiwic3RyYXRlZ3kiLCJwaWNrU3RyYXRlZ3kiLCJzdG9wRHJhd2luZyIsImNhbGxiYWNrIiwiaW5kZXgiLCJTY3JlZW5TcGFjZUV2ZW50VHlwZSIsIkxFRlRfRE9VQkxFX0NMSUNLIiwicHVzaCIsImNsb25lIiwiYWRkQmlsbGJvYXJkIiwiX2NyZWF0ZVByaW1pdGl2ZSIsIkxFRlRfQ0xJQ0siLCJlbmRQb3NpdGlvbiIsInNob3dBdCIsInBvcCIsInkiLCJNYXRoIiwiRVBTSUxPTjciLCJnZXRCaWxsYm9hcmQiLCJNT1VTRV9NT1ZFIiwiQmFzZUhhbmRsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUVaOztBQUNBOztBQUNB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Q0FBZ0NMLFVBQVVNLE1BQTFDLEdBQW1ELE9BQW5ELElBQThETixVQUFVTSxNQUFWLEdBQW1CWCxTQUFuQixHQUErQix1Q0FBL0IsR0FBeUUsRUFBdkksQ0FBekI7QUFDSDtBQUNKO0FBQ0o7QUFDSixhQTVCRCxFQTRCR3BCLE9BQU9zQyxvQkFBUCxDQUE0QmMsVUE1Qi9CO0FBNkJIOzs7O0VBakhpQ0MseUIiLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5cclxuaW1wb3J0IHtCYXNlSGFuZGxlcn0gZnJvbSBcIi4vQmFzZUhhbmRsZXJcIjtcclxuaW1wb3J0IHtkZWZhdWx0QmlsbGJvYXJkLCBkZWZhdWx0UG9seWxpbmVPcHRpb25zLCBkZWZhdWx0U3VyZmFjZU9wdGlvbnN9IGZyb20gXCIuLi9jb25zdGFudC9EZWZhdWx0VmFsdWVcIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiO1xyXG5pbXBvcnQge1BvbHlnb25QcmltaXRpdmV9IGZyb20gXCIuLi9wcmltaXRpdmUvUG9seWdvblByaW1pdGl2ZVwiO1xyXG5pbXBvcnQge1BvbHlsaW5lUHJpbWl0aXZlfSBmcm9tIFwiLi4vcHJpbWl0aXZlL1BvbHlsaW5lUHJpbWl0aXZlXCI7XHJcbmltcG9ydCB7QmlsbGJvYXJkR3JvdXB9IGZyb20gXCIuLi9wcmltaXRpdmUvQmlsbGJvYXJkR3JvdXBcIjtcclxuaW1wb3J0IHtnZXRDZXNpdW1IaWdodFplcm99IGZyb20gXCIuLi91dGlsL2NvbnN0cnVjdEhlbHBlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvbHlzaGFwZUhhbmRsZXIgZXh0ZW5kcyBCYXNlSGFuZGxlciB7XHJcbiAgICBzdGFydChvcHRpb25zLCBkcmF3SGVscGVyLCBpc1BvbHlnb24pIHtcclxuICAgICAgICBvcHRpb25zID0gaXNQb2x5Z29uID8gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFN1cmZhY2VPcHRpb25zKSA6IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRQb2x5bGluZU9wdGlvbnMpO1xyXG4gICAgICAgIGxldCBzY2VuZSA9IGRyYXdIZWxwZXIuc2NlbmU7XHJcbiAgICAgICAgbGV0IHZpZXdlciA9IGRyYXdIZWxwZXIudmlld2VyO1xyXG4gICAgICAgIGxldCBwcmltaXRpdmVzID0gc2NlbmUucHJpbWl0aXZlcztcclxuICAgICAgICBsZXQgdG9vbHRpcCA9IGRyYXdIZWxwZXIudG9vbHRpcDtcclxuICAgICAgICBsZXQgbW91c2VIYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG5cclxuICAgICAgICBkcmF3SGVscGVyLnN0YXJ0RHJhd2luZygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVzICYmIHByaW1pdGl2ZXMucmVtb3ZlKHBvbHkpO1xyXG4gICAgICAgICAgICAgICAgbWFya2VycyAmJiBtYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgbW91c2VIYW5kbGVyICYmIG1vdXNlSGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwICYmIHRvb2x0aXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgbWluUG9pbnRzID0gaXNQb2x5Z29uID8gMyA6IDI7XHJcbiAgICAgICAgbGV0IHBvbHk7XHJcbiAgICAgICAgaWYgKGlzUG9seWdvbikge1xyXG4gICAgICAgICAgICAvLyBwb2x5ID0gbmV3IFBvbHlnb25QcmltaXRpdmUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHBvbHkgPSBkcmF3SGVscGVyLmNyZWF0ZUVkaXRhYmxlUG9seWdvblByaW1pdGl2ZShvcHRpb25zKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHBvbHkgPSBuZXcgUG9seWxpbmVQcmltaXRpdmUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHBvbHkgPSBkcmF3SGVscGVyLmNyZWF0ZUVkaXRhYmxlUG9seWxpbmVQcmltaXRpdmUob3B0aW9ucylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBvbHkuYXN5bmNocm9ub3VzID0gZmFsc2U7XHJcbiAgICAgICAgcHJpbWl0aXZlcy5hZGQocG9seSk7XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGlvbnMgPSBbXTtcclxuICAgICAgICBsZXQgbWFya2VycyA9IG5ldyBCaWxsYm9hcmRHcm91cChkcmF3SGVscGVyLCBkZWZhdWx0QmlsbGJvYXJkKTtcclxuXHJcblxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IG1vdmVtZW50LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9ucy5sZW5ndGggPCBtaW5Qb2ludHMgLyorIDIqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShtb3ZlbWVudC5wb3NpdGlvbiwgdmlld2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnN0b3BEcmF3aW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3ZlcmxhcHBpbmcgb25lc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gcG9zaXRpb25zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKHBvc2l0aW9ucywgZHJhd0hlbHBlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1VCTEVfQ0xJQ0spO1xyXG4gICAgICAgIC8vIE5vdyB3YWl0IGZvciBzdGFydFxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShtb3ZlbWVudC5wb3NpdGlvbiwgdmlld2VyKTtcclxuICAgICAgICAgICAgY2FydGVzaWFuID0gZ2V0Q2VzaXVtSGlnaHRaZXJvKGNhcnRlc2lhbik7XHJcblxyXG4gICAgICAgICAgICBpZiAobW92ZW1lbnQucG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LnBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goY2FydGVzaWFuLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZChwb3NpdGlvbnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25zLmxlbmd0aCA+PSBtaW5Qb2ludHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9seS5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHkuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgcG9pbnQgdG8gcG9seWdvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgb25lIHdpbGwgbW92ZSB3aXRoIHRoZSBtb3VzZVxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG1hcmtlciBhdCB0aGUgbmV3IHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmQoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gbW92ZW1lbnQuZW5kUG9zaXRpb247XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25zLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gYWRkIGZpcnN0IHBvaW50PC9wPlwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5waWNrUG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhcnRlc2lhbiA9IGdldENlc2l1bUhpZ2h0WmVybyhjYXJ0ZXNpYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShwb3NpdGlvbiwgdmlld2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBpdCBpcyBzbGlnaHRseSBkaWZmZXJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FydGVzaWFuLnkgKz0gKDEgKyBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FydGVzaWFuLnkgKz0gQ2VzaXVtLk1hdGguRVBTSUxPTjc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID49IG1pblBvaW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9seS5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2x5Ll9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5nZXRCaWxsYm9hcmQocG9zaXRpb25zLmxlbmd0aCAtIDEpLnBvc2l0aW9uID0gY2FydGVzaWFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gYWRkIG5ldyBwb2ludCAoXCIgKyBwb3NpdGlvbnMubGVuZ3RoICsgXCIpPC9wPlwiICsgKHBvc2l0aW9ucy5sZW5ndGggPiBtaW5Qb2ludHMgPyBcIjxwPkRvdWJsZSBjbGljayB0byBmaW5pc2ggZHJhd2luZzwvcD5cIiA6IFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTU9VU0VfTU9WRSk7XHJcbiAgICB9XHJcblxyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.BaseHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar BaseHandler = exports.BaseHandler = function () {\n    function BaseHandler() {\n        _classCallCheck(this, BaseHandler);\n    }\n\n    _createClass(BaseHandler, [{\n        key: "start",\n        value: function start() {}\n    }, {\n        key: "complete",\n        value: function complete() {}\n    }]);\n\n    return BaseHandler;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9CYXNlSGFuZGxlci5qcz9kZjkxIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkJhc2VIYW5kbGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7Ozs7O0lBRUNDLFcsV0FBQUEsVzs7Ozs7OztnQ0FDRixDQUVOOzs7bUNBRVMsQ0FFVCIsImZpbGUiOiIxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZUhhbmRsZXIge1xyXG4gICAgc3RhcnQoKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29tcGxldGUoKXtcclxuXHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n/**\r\n * 获取绕某点的圆 SampledPositionProperty\r\n * @param lon 角度\r\n * @param lat 角度\r\n * @param height\r\n * @param radius\r\n */\nvar computeCirclularFlight = exports.computeCirclularFlight = function computeCirclularFlight(lon, lat, height, radius) {\n    var property = new Cesium.SampledPositionProperty();\n    var startAngle = Cesium.Math.nextRandomNumber() * 360.0;\n    var endAngle = startAngle + 360.0;\n\n    var increment = (Cesium.Math.nextRandomNumber() * 2.0 - 1.0) * 10.0 + 45.0;\n    for (var i = startAngle; i < endAngle; i += increment) {\n        var radians = Cesium.Math.toRadians(i);\n        var timeIncrement = i - startAngle;\n        var time = Cesium.JulianDate.addSeconds(start, timeIncrement, new Cesium.JulianDate());\n        var position = Cesium.Cartesian3.fromDegrees(lon + radius * 1.5 * Math.cos(radians), lat + radius * Math.sin(radians), height);\n        property.addSample(time, position);\n    }\n    return property;\n};\n\nvar computeCirclularFlightPositions = exports.computeCirclularFlightPositions = function computeCirclularFlightPositions(lon, lat, height, radius) {\n    var positions = [];\n    var startAngle = Cesium.Math.nextRandomNumber() * 360.0;\n    var endAngle = startAngle + 360.0;\n\n    var increment = (Cesium.Math.nextRandomNumber() * 2.0 - 1.0) * 10.0 + 45.0;\n    for (var i = startAngle; i < endAngle; i += increment) {\n        var radians = Cesium.Math.toRadians(i);\n        var position = Cesium.Cartesian3.fromDegrees(lon + radius * 1.5 * Math.cos(radians), lat + radius * Math.sin(radians), height);\n        positions.push(position);\n    }\n    return positions;\n};\n\nvar computeCirclularAugle = exports.computeCirclularAugle = function computeCirclularAugle(increment) {\n    var startAngle = Cesium.Math.nextRandomNumber() * 360.0;\n    var endAngle = startAngle + 360.0;\n    // let increment = (Cesium.Math.nextRandomNumber() * 2.0 - 1.0) * 10.0 + 45.0;\n\n    var angles = [];\n    for (var i = startAngle; i < endAngle; i += increment) {\n        angles.push(i);\n    }\n    return angles;\n};\n\nvar computeCircle = exports.computeCircle = function computeCircle(radius) {\n    var positions = [];\n    for (var i = 0; i < 360; i++) {\n        var radians = Cesium.Math.toRadians(i);\n        positions.push(new Cesium.Cartesian2(radius * Math.cos(radians), radius * Math.sin(radians)));\n    }\n    return positions;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVXRpbC9PZmZpY2lhbFV0aWxzLmpzP2IwNTYiXSwibmFtZXMiOlsiY29tcHV0ZUNpcmNsdWxhckZsaWdodCIsImxvbiIsImxhdCIsImhlaWdodCIsInJhZGl1cyIsInByb3BlcnR5IiwiQ2VzaXVtIiwiU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkiLCJzdGFydEFuZ2xlIiwiTWF0aCIsIm5leHRSYW5kb21OdW1iZXIiLCJlbmRBbmdsZSIsImluY3JlbWVudCIsImkiLCJyYWRpYW5zIiwidG9SYWRpYW5zIiwidGltZUluY3JlbWVudCIsInRpbWUiLCJKdWxpYW5EYXRlIiwiYWRkU2Vjb25kcyIsInN0YXJ0IiwicG9zaXRpb24iLCJDYXJ0ZXNpYW4zIiwiZnJvbURlZ3JlZXMiLCJjb3MiLCJzaW4iLCJhZGRTYW1wbGUiLCJjb21wdXRlQ2lyY2x1bGFyRmxpZ2h0UG9zaXRpb25zIiwicG9zaXRpb25zIiwicHVzaCIsImNvbXB1dGVDaXJjbHVsYXJBdWdsZSIsImFuZ2xlcyIsImNvbXB1dGVDaXJjbGUiLCJDYXJ0ZXNpYW4yIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7O0FBT08sSUFBTUEsMERBQXlCLFNBQXpCQSxzQkFBeUIsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLE1BQVgsRUFBbUJDLE1BQW5CLEVBQThCO0FBQ2hFLFFBQUlDLFdBQVcsSUFBSUMsT0FBT0MsdUJBQVgsRUFBZjtBQUNBLFFBQUlDLGFBQWFGLE9BQU9HLElBQVAsQ0FBWUMsZ0JBQVosS0FBaUMsS0FBbEQ7QUFDQSxRQUFJQyxXQUFXSCxhQUFhLEtBQTVCOztBQUVBLFFBQUlJLFlBQVksQ0FBQ04sT0FBT0csSUFBUCxDQUFZQyxnQkFBWixLQUFpQyxHQUFqQyxHQUF1QyxHQUF4QyxJQUErQyxJQUEvQyxHQUFzRCxJQUF0RTtBQUNBLFNBQUssSUFBSUcsSUFBSUwsVUFBYixFQUF5QkssSUFBSUYsUUFBN0IsRUFBdUNFLEtBQUtELFNBQTVDLEVBQXVEO0FBQ25ELFlBQUlFLFVBQVVSLE9BQU9HLElBQVAsQ0FBWU0sU0FBWixDQUFzQkYsQ0FBdEIsQ0FBZDtBQUNBLFlBQUlHLGdCQUFnQkgsSUFBSUwsVUFBeEI7QUFDQSxZQUFJUyxPQUFPWCxPQUFPWSxVQUFQLENBQWtCQyxVQUFsQixDQUE2QkMsS0FBN0IsRUFBb0NKLGFBQXBDLEVBQW1ELElBQUlWLE9BQU9ZLFVBQVgsRUFBbkQsQ0FBWDtBQUNBLFlBQUlHLFdBQVdmLE9BQU9nQixVQUFQLENBQWtCQyxXQUFsQixDQUE4QnRCLE1BQU9HLFNBQVMsR0FBVCxHQUFlSyxLQUFLZSxHQUFMLENBQVNWLE9BQVQsQ0FBcEQsRUFBd0VaLE1BQU9FLFNBQVNLLEtBQUtnQixHQUFMLENBQVNYLE9BQVQsQ0FBeEYsRUFBNEdYLE1BQTVHLENBQWY7QUFDQUUsaUJBQVNxQixTQUFULENBQW1CVCxJQUFuQixFQUF5QkksUUFBekI7QUFDSDtBQUNELFdBQU9oQixRQUFQO0FBQ0gsQ0FkTTs7QUFnQkEsSUFBTXNCLDRFQUFrQyxTQUFsQ0EsK0JBQWtDLENBQUMxQixHQUFELEVBQU1DLEdBQU4sRUFBV0MsTUFBWCxFQUFtQkMsTUFBbkIsRUFBOEI7QUFDekUsUUFBSXdCLFlBQVksRUFBaEI7QUFDQSxRQUFJcEIsYUFBYUYsT0FBT0csSUFBUCxDQUFZQyxnQkFBWixLQUFpQyxLQUFsRDtBQUNBLFFBQUlDLFdBQVdILGFBQWEsS0FBNUI7O0FBRUEsUUFBSUksWUFBWSxDQUFDTixPQUFPRyxJQUFQLENBQVlDLGdCQUFaLEtBQWlDLEdBQWpDLEdBQXVDLEdBQXhDLElBQStDLElBQS9DLEdBQXNELElBQXRFO0FBQ0EsU0FBSyxJQUFJRyxJQUFJTCxVQUFiLEVBQXlCSyxJQUFJRixRQUE3QixFQUF1Q0UsS0FBS0QsU0FBNUMsRUFBdUQ7QUFDbkQsWUFBSUUsVUFBVVIsT0FBT0csSUFBUCxDQUFZTSxTQUFaLENBQXNCRixDQUF0QixDQUFkO0FBQ0EsWUFBSVEsV0FBV2YsT0FBT2dCLFVBQVAsQ0FBa0JDLFdBQWxCLENBQThCdEIsTUFBT0csU0FBUyxHQUFULEdBQWVLLEtBQUtlLEdBQUwsQ0FBU1YsT0FBVCxDQUFwRCxFQUF3RVosTUFBT0UsU0FBU0ssS0FBS2dCLEdBQUwsQ0FBU1gsT0FBVCxDQUF4RixFQUE0R1gsTUFBNUcsQ0FBZjtBQUNBeUIsa0JBQVVDLElBQVYsQ0FBZVIsUUFBZjtBQUNIO0FBQ0QsV0FBT08sU0FBUDtBQUNILENBWk07O0FBY0EsSUFBTUUsd0RBQXdCLFNBQXhCQSxxQkFBd0IsQ0FBQ2xCLFNBQUQsRUFBZTtBQUNoRCxRQUFJSixhQUFhRixPQUFPRyxJQUFQLENBQVlDLGdCQUFaLEtBQWlDLEtBQWxEO0FBQ0EsUUFBSUMsV0FBV0gsYUFBYSxLQUE1QjtBQUNBOztBQUVBLFFBQUl1QixTQUFTLEVBQWI7QUFDQSxTQUFLLElBQUlsQixJQUFJTCxVQUFiLEVBQXlCSyxJQUFJRixRQUE3QixFQUF1Q0UsS0FBS0QsU0FBNUMsRUFBdUQ7QUFDbkRtQixlQUFPRixJQUFQLENBQVloQixDQUFaO0FBQ0g7QUFDRCxXQUFPa0IsTUFBUDtBQUNILENBVk07O0FBWUEsSUFBTUMsd0NBQWdCLFNBQWhCQSxhQUFnQixDQUFDNUIsTUFBRCxFQUFZO0FBQ3JDLFFBQUl3QixZQUFZLEVBQWhCO0FBQ0EsU0FBSyxJQUFJZixJQUFJLENBQWIsRUFBZ0JBLElBQUksR0FBcEIsRUFBeUJBLEdBQXpCLEVBQThCO0FBQzFCLFlBQUlDLFVBQVVSLE9BQU9HLElBQVAsQ0FBWU0sU0FBWixDQUFzQkYsQ0FBdEIsQ0FBZDtBQUNBZSxrQkFBVUMsSUFBVixDQUFlLElBQUl2QixPQUFPMkIsVUFBWCxDQUFzQjdCLFNBQVNLLEtBQUtlLEdBQUwsQ0FBU1YsT0FBVCxDQUEvQixFQUFrRFYsU0FBU0ssS0FBS2dCLEdBQUwsQ0FBU1gsT0FBVCxDQUEzRCxDQUFmO0FBQ0g7QUFDRCxXQUFPYyxTQUFQO0FBQ0gsQ0FQTSIsImZpbGUiOiIxMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDojrflj5bnu5Xmn5DngrnnmoTlnIYgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHlcclxuICogQHBhcmFtIGxvbiDop5LluqZcclxuICogQHBhcmFtIGxhdCDop5LluqZcclxuICogQHBhcmFtIGhlaWdodFxyXG4gKiBAcGFyYW0gcmFkaXVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY29tcHV0ZUNpcmNsdWxhckZsaWdodCA9IChsb24sIGxhdCwgaGVpZ2h0LCByYWRpdXMpID0+IHtcclxuICAgIGxldCBwcm9wZXJ0eSA9IG5ldyBDZXNpdW0uU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkoKTtcclxuICAgIGxldCBzdGFydEFuZ2xlID0gQ2VzaXVtLk1hdGgubmV4dFJhbmRvbU51bWJlcigpICogMzYwLjA7XHJcbiAgICBsZXQgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgMzYwLjA7XHJcblxyXG4gICAgbGV0IGluY3JlbWVudCA9IChDZXNpdW0uTWF0aC5uZXh0UmFuZG9tTnVtYmVyKCkgKiAyLjAgLSAxLjApICogMTAuMCArIDQ1LjA7XHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnRBbmdsZTsgaSA8IGVuZEFuZ2xlOyBpICs9IGluY3JlbWVudCkge1xyXG4gICAgICAgIGxldCByYWRpYW5zID0gQ2VzaXVtLk1hdGgudG9SYWRpYW5zKGkpO1xyXG4gICAgICAgIGxldCB0aW1lSW5jcmVtZW50ID0gaSAtIHN0YXJ0QW5nbGU7XHJcbiAgICAgICAgbGV0IHRpbWUgPSBDZXNpdW0uSnVsaWFuRGF0ZS5hZGRTZWNvbmRzKHN0YXJ0LCB0aW1lSW5jcmVtZW50LCBuZXcgQ2VzaXVtLkp1bGlhbkRhdGUoKSk7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMobG9uICsgKHJhZGl1cyAqIDEuNSAqIE1hdGguY29zKHJhZGlhbnMpKSwgbGF0ICsgKHJhZGl1cyAqIE1hdGguc2luKHJhZGlhbnMpKSwgaGVpZ2h0KTtcclxuICAgICAgICBwcm9wZXJ0eS5hZGRTYW1wbGUodGltZSwgcG9zaXRpb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb3BlcnR5O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29tcHV0ZUNpcmNsdWxhckZsaWdodFBvc2l0aW9ucyA9IChsb24sIGxhdCwgaGVpZ2h0LCByYWRpdXMpID0+IHtcclxuICAgIGxldCBwb3NpdGlvbnMgPSBbXTtcclxuICAgIGxldCBzdGFydEFuZ2xlID0gQ2VzaXVtLk1hdGgubmV4dFJhbmRvbU51bWJlcigpICogMzYwLjA7XHJcbiAgICBsZXQgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgMzYwLjA7XHJcblxyXG4gICAgbGV0IGluY3JlbWVudCA9IChDZXNpdW0uTWF0aC5uZXh0UmFuZG9tTnVtYmVyKCkgKiAyLjAgLSAxLjApICogMTAuMCArIDQ1LjA7XHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnRBbmdsZTsgaSA8IGVuZEFuZ2xlOyBpICs9IGluY3JlbWVudCkge1xyXG4gICAgICAgIGxldCByYWRpYW5zID0gQ2VzaXVtLk1hdGgudG9SYWRpYW5zKGkpO1xyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKGxvbiArIChyYWRpdXMgKiAxLjUgKiBNYXRoLmNvcyhyYWRpYW5zKSksIGxhdCArIChyYWRpdXMgKiBNYXRoLnNpbihyYWRpYW5zKSksIGhlaWdodCk7XHJcbiAgICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBvc2l0aW9ucztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbXB1dGVDaXJjbHVsYXJBdWdsZSA9IChpbmNyZW1lbnQpID0+IHtcclxuICAgIGxldCBzdGFydEFuZ2xlID0gQ2VzaXVtLk1hdGgubmV4dFJhbmRvbU51bWJlcigpICogMzYwLjA7XHJcbiAgICBsZXQgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgMzYwLjA7XHJcbiAgICAvLyBsZXQgaW5jcmVtZW50ID0gKENlc2l1bS5NYXRoLm5leHRSYW5kb21OdW1iZXIoKSAqIDIuMCAtIDEuMCkgKiAxMC4wICsgNDUuMDtcclxuXHJcbiAgICBsZXQgYW5nbGVzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnRBbmdsZTsgaSA8IGVuZEFuZ2xlOyBpICs9IGluY3JlbWVudCkge1xyXG4gICAgICAgIGFuZ2xlcy5wdXNoKGkpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gYW5nbGVzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29tcHV0ZUNpcmNsZSA9IChyYWRpdXMpID0+IHtcclxuICAgIHZhciBwb3NpdGlvbnMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzYwOyBpKyspIHtcclxuICAgICAgICB2YXIgcmFkaWFucyA9IENlc2l1bS5NYXRoLnRvUmFkaWFucyhpKTtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgQ2VzaXVtLkNhcnRlc2lhbjIocmFkaXVzICogTWF0aC5jb3MocmFkaWFucyksIHJhZGl1cyAqIE1hdGguc2luKHJhZGlhbnMpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9zaXRpb25zO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.Cartesian3s = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar Cartesian3s = exports.Cartesian3s = function () {\n    function Cartesian3s() {\n        _classCallCheck(this, Cartesian3s);\n    }\n\n    _createClass(Cartesian3s, null, [{\n        key: "toRadians",\n\n\n        /**\r\n         * 将地球坐标系基于WSG84椭球体转换成经纬度（弧度制）\r\n         * @param {Cesium.Cartesian3} cartesian3\r\n         * @returns {{height: *, latitude: *, longitude: *}}\r\n         */\n        value: function toRadians(cartesian3) {\n            return Cesium.Cartographic.fromCartesian(cartesian3);\n        }\n\n        /**\r\n         * 输出角度单位的经纬度\r\n         * @param {Cesium.Cartesian3}  cartesian3\r\n         * @returns {{height: *, latitude: *, longitude: *}}\r\n         */\n\n    }, {\n        key: "toDegrees",\n        value: function toDegrees(cartesian3) {\n            var cartographic = Cartesian3s.toRadians(cartesian3);\n            return {\n                height: cartographic.height,\n                latitude: Cesium.Math.toDegrees(cartographic.latitude),\n                longitude: Cesium.Math.toDegrees(cartographic.longitude)\n            };\n        }\n\n        /**\r\n         * 修正当前点位的高度\r\n         * @param {Cesium.Cartesian3} cartesian3\r\n         * @param {number} heightPlus - 修正高度，默认为5\r\n         */\n\n    }, {\n        key: "formatHeightPlus",\n        value: function formatHeightPlus(cartesian3) {\n            var heightPlus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n            var fromCartesian = Cartesian3s.toRadians(cartesian3);\n            return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, fromCartesian.height + heightPlus);\n        }\n\n        /**\r\n         * 修正当前点位的高度到0\r\n         * @param {Cesium.Cartesian3} cartesian3\r\n         */\n\n    }, {\n        key: "formatHeightZero",\n        value: function formatHeightZero(cartesian3) {\n            var fromCartesian = Cartesian3s.toRadians(cartesian3);\n            return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n        }\n    }, {\n        key: "formatHeight",\n        value: function formatHeight(cartesian3, height) {\n            var fromCartesian = Cartesian3s.toRadians(cartesian3);\n            return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, height);\n        }\n    }, {\n        key: "getCenter",\n        value: function getCenter(positions) {\n            var sum = new Cesium.Cartesian3();\n            positions.forEach(function (position) {\n                Cesium.Cartesian3.add(sum, position, sum);\n            });\n            return Cesium.Cartesian3.divideByScalar(sum, positions.length, sum);\n        }\n    }]);\n\n    return Cartesian3s;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvQ29yZS9DYXJ0ZXNpYW4zcy5qcz85OTMwIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkNhcnRlc2lhbjNzIiwiY2FydGVzaWFuMyIsIkNhcnRvZ3JhcGhpYyIsImZyb21DYXJ0ZXNpYW4iLCJjYXJ0b2dyYXBoaWMiLCJ0b1JhZGlhbnMiLCJoZWlnaHQiLCJsYXRpdHVkZSIsIk1hdGgiLCJ0b0RlZ3JlZXMiLCJsb25naXR1ZGUiLCJoZWlnaHRQbHVzIiwiQ2FydGVzaWFuMyIsImZyb21SYWRpYW5zIiwicG9zaXRpb25zIiwic3VtIiwiZm9yRWFjaCIsInBvc2l0aW9uIiwiYWRkIiwiZGl2aWRlQnlTY2FsYXIiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOzs7Ozs7SUFFQ0MsVyxXQUFBQSxXOzs7Ozs7Ozs7QUFFVDs7Ozs7a0NBS2lCQyxVLEVBQVk7QUFDekIsbUJBQU9GLE9BQU9HLFlBQVAsQ0FBb0JDLGFBQXBCLENBQWtDRixVQUFsQyxDQUFQO0FBQ0g7O0FBRUQ7Ozs7Ozs7O2tDQUtpQkEsVSxFQUFZO0FBQ3pCLGdCQUFJRyxlQUFlSixZQUFZSyxTQUFaLENBQXNCSixVQUF0QixDQUFuQjtBQUNBLG1CQUFPO0FBQ0hLLHdCQUFRRixhQUFhRSxNQURsQjtBQUVIQywwQkFBVVIsT0FBT1MsSUFBUCxDQUFZQyxTQUFaLENBQXNCTCxhQUFhRyxRQUFuQyxDQUZQO0FBR0hHLDJCQUFXWCxPQUFPUyxJQUFQLENBQVlDLFNBQVosQ0FBc0JMLGFBQWFNLFNBQW5DO0FBSFIsYUFBUDtBQUtIOztBQUVEOzs7Ozs7Ozt5Q0FLd0JULFUsRUFBNEI7QUFBQSxnQkFBaEJVLFVBQWdCLHVFQUFILENBQUc7O0FBQ2hELGdCQUFJUixnQkFBZ0JILFlBQVlLLFNBQVosQ0FBc0JKLFVBQXRCLENBQXBCO0FBQ0EsbUJBQU9GLE9BQU9hLFVBQVAsQ0FBa0JDLFdBQWxCLENBQThCVixjQUFjTyxTQUE1QyxFQUF1RFAsY0FBY0ksUUFBckUsRUFBK0VKLGNBQWNHLE1BQWQsR0FBdUJLLFVBQXRHLENBQVA7QUFDSDs7QUFFRDs7Ozs7Ozt5Q0FJd0JWLFUsRUFBWTtBQUNoQyxnQkFBSUUsZ0JBQWdCSCxZQUFZSyxTQUFaLENBQXNCSixVQUF0QixDQUFwQjtBQUNBLG1CQUFPRixPQUFPYSxVQUFQLENBQWtCQyxXQUFsQixDQUE4QlYsY0FBY08sU0FBNUMsRUFBdURQLGNBQWNJLFFBQXJFLEVBQStFLENBQS9FLENBQVA7QUFDSDs7O3FDQUVtQk4sVSxFQUFZSyxNLEVBQVE7QUFDcEMsZ0JBQUlILGdCQUFnQkgsWUFBWUssU0FBWixDQUFzQkosVUFBdEIsQ0FBcEI7QUFDQSxtQkFBT0YsT0FBT2EsVUFBUCxDQUFrQkMsV0FBbEIsQ0FBOEJWLGNBQWNPLFNBQTVDLEVBQXVEUCxjQUFjSSxRQUFyRSxFQUErRUQsTUFBL0UsQ0FBUDtBQUNIOzs7a0NBRWdCUSxTLEVBQVU7QUFDdkIsZ0JBQUlDLE1BQU0sSUFBSWhCLE9BQU9hLFVBQVgsRUFBVjtBQUNBRSxzQkFBVUUsT0FBVixDQUFrQixVQUFDQyxRQUFELEVBQVk7QUFDMUJsQix1QkFBT2EsVUFBUCxDQUFrQk0sR0FBbEIsQ0FBc0JILEdBQXRCLEVBQTJCRSxRQUEzQixFQUFxQ0YsR0FBckM7QUFDSCxhQUZEO0FBR0EsbUJBQU9oQixPQUFPYSxVQUFQLENBQWtCTyxjQUFsQixDQUFpQ0osR0FBakMsRUFBcUNELFVBQVVNLE1BQS9DLEVBQXNETCxHQUF0RCxDQUFQO0FBQ0giLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcnRlc2lhbjNzIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuWcsOeQg+WdkOagh+ezu+WfuuS6jldTRzg05qSt55CD5L2T6L2s5o2i5oiQ57uP57qs5bqm77yI5byn5bqm5Yi277yJXHJcbiAgICAgKiBAcGFyYW0ge0Nlc2l1bS5DYXJ0ZXNpYW4zfSBjYXJ0ZXNpYW4zXHJcbiAgICAgKiBAcmV0dXJucyB7e2hlaWdodDogKiwgbGF0aXR1ZGU6ICosIGxvbmdpdHVkZTogKn19XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0b1JhZGlhbnMoY2FydGVzaWFuMykge1xyXG4gICAgICAgIHJldHVybiBDZXNpdW0uQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4oY2FydGVzaWFuMyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDovpPlh7rop5LluqbljZXkvY3nmoTnu4/nuqzluqZcclxuICAgICAqIEBwYXJhbSB7Q2VzaXVtLkNhcnRlc2lhbjN9ICBjYXJ0ZXNpYW4zXHJcbiAgICAgKiBAcmV0dXJucyB7e2hlaWdodDogKiwgbGF0aXR1ZGU6ICosIGxvbmdpdHVkZTogKn19XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0b0RlZ3JlZXMoY2FydGVzaWFuMykge1xyXG4gICAgICAgIGxldCBjYXJ0b2dyYXBoaWMgPSBDYXJ0ZXNpYW4zcy50b1JhZGlhbnMoY2FydGVzaWFuMyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYXJ0b2dyYXBoaWMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBsYXRpdHVkZTogQ2VzaXVtLk1hdGgudG9EZWdyZWVzKGNhcnRvZ3JhcGhpYy5sYXRpdHVkZSksXHJcbiAgICAgICAgICAgIGxvbmdpdHVkZTogQ2VzaXVtLk1hdGgudG9EZWdyZWVzKGNhcnRvZ3JhcGhpYy5sb25naXR1ZGUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS/ruato+W9k+WJjeeCueS9jeeahOmrmOW6plxyXG4gICAgICogQHBhcmFtIHtDZXNpdW0uQ2FydGVzaWFuM30gY2FydGVzaWFuM1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFBsdXMgLSDkv67mraPpq5jluqbvvIzpu5jorqTkuLo1XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmb3JtYXRIZWlnaHRQbHVzKGNhcnRlc2lhbjMsIGhlaWdodFBsdXMgPSA1KSB7XHJcbiAgICAgICAgbGV0IGZyb21DYXJ0ZXNpYW4gPSBDYXJ0ZXNpYW4zcy50b1JhZGlhbnMoY2FydGVzaWFuMyk7XHJcbiAgICAgICAgcmV0dXJuIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKGZyb21DYXJ0ZXNpYW4ubG9uZ2l0dWRlLCBmcm9tQ2FydGVzaWFuLmxhdGl0dWRlLCBmcm9tQ2FydGVzaWFuLmhlaWdodCArIGhlaWdodFBsdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L+u5q2j5b2T5YmN54K55L2N55qE6auY5bqm5YiwMFxyXG4gICAgICogQHBhcmFtIHtDZXNpdW0uQ2FydGVzaWFuM30gY2FydGVzaWFuM1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZm9ybWF0SGVpZ2h0WmVybyhjYXJ0ZXNpYW4zKSB7XHJcbiAgICAgICAgbGV0IGZyb21DYXJ0ZXNpYW4gPSBDYXJ0ZXNpYW4zcy50b1JhZGlhbnMoY2FydGVzaWFuMyk7XHJcbiAgICAgICAgcmV0dXJuIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKGZyb21DYXJ0ZXNpYW4ubG9uZ2l0dWRlLCBmcm9tQ2FydGVzaWFuLmxhdGl0dWRlLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZm9ybWF0SGVpZ2h0KGNhcnRlc2lhbjMsIGhlaWdodCkge1xyXG4gICAgICAgIGxldCBmcm9tQ2FydGVzaWFuID0gQ2FydGVzaWFuM3MudG9SYWRpYW5zKGNhcnRlc2lhbjMpO1xyXG4gICAgICAgIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhmcm9tQ2FydGVzaWFuLmxvbmdpdHVkZSwgZnJvbUNhcnRlc2lhbi5sYXRpdHVkZSwgaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0Q2VudGVyKHBvc2l0aW9ucyl7XHJcbiAgICAgICAgbGV0IHN1bSA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xyXG4gICAgICAgIHBvc2l0aW9ucy5mb3JFYWNoKChwb3NpdGlvbik9PntcclxuICAgICAgICAgICAgQ2VzaXVtLkNhcnRlc2lhbjMuYWRkKHN1bSwgcG9zaXRpb24sIHN1bSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5kaXZpZGVCeVNjYWxhcihzdW0scG9zaXRpb25zLmxlbmd0aCxzdW0pO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.EventSystemInstance = exports.EventSystemFactory = exports.EventType = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _NormalUtils = __webpack_require__(8);\n\nvar _TypeUtils = __webpack_require__(23);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _Settings = __webpack_require__(15);\n\nvar _Uuid = __webpack_require__(24);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar consumeMoveOutFlag = true;\n\n/**\r\n * 接管Cesium的事件系统（对于entity和primitive）\r\n */\n\nvar EventSystem = function () {\n    function EventSystem() {\n        var accuracy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n\n        _classCallCheck(this, EventSystem);\n\n        this._init = false;\n        this._accuracy = accuracy;\n        this._enableRotation = true;\n        this._frameRate = 60;\n        this.updateMoveTime();\n        this._cunsumeMoveOutObject = [];\n        window.logs = [];\n    }\n\n    /**\r\n     * 单地图\r\n     * @param viewer\r\n     */\n\n\n    _createClass(EventSystem, [{\n        key: "setView",\n        value: function setView(viewer) {\n            if (!this._init) {\n                this.viewer = viewer;\n                if ((0, _NormalUtils.defined)(viewer)) {\n                    this._init = true;\n                    this.eventBind();\n                }\n            }\n            return this;\n        }\n\n        /**\r\n         * 设置帧率，帧率会影响move事件的节流时间\r\n         * @param frameRate\r\n         */\n\n    }, {\n        key: "setFrameRate",\n        value: function setFrameRate(frameRate) {\n            this._frameRate = frameRate;\n            this.updateMoveTime();\n        }\n    }, {\n        key: "updateMoveTime",\n        value: function updateMoveTime() {\n            this._moveTime = parseInt(1000 / this._frameRate);\n        }\n    }, {\n        key: "setAccuracy",\n        value: function setAccuracy() {\n            var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n\n            this._accuracy = value;\n            return this;\n        }\n    }, {\n        key: "eventBind",\n        value: function eventBind() {\n            var _this = this;\n\n            var moveCount = 0;\n            var moveTimeout = null;\n            var pressFlag = false;\n            var currentObject = null;\n            var firstFlag = true;\n            var mouseMoveObject = null;\n            var handler = new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);\n\n            handler.setInputAction(function (movement) {\n                _this.callPrimitiveCallback(EventType.LEFT_CLICK, movement.position);\n            }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n            handler.setInputAction(function (movement) {\n                _this.callPrimitiveCallback(EventType.LEFT_DOUBLE_CLICK, movement.position);\n            }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n\n            handler.setInputAction(function (movementStep) {\n\n                if (moveTimeout === null) {\n                    var markPosition = {\n                        x: movementStep.endPosition.x,\n                        y: movementStep.endPosition.y\n                    };\n                    // console.log(markPosition)\n\n                    moveTimeout = setTimeout(function () {\n                        if (pressFlag) {\n                            //第一次按下\n                            if (firstFlag) {\n                                firstFlag = false;\n                                _this.callPrimitiveCallbackCurrent(currentObject, EventType.DRAW_START, markPosition);\n                                if (currentObject && !_this._enableRotation) {\n                                    _Settings.Settings.enableRotation(_this.viewer, false);\n                                }\n                            } else {\n                                _this.callPrimitiveCallbackCurrent(currentObject, EventType.DRAW, markPosition);\n                            }\n                        } else {\n                            var lastObject = mouseMoveObject;\n                            // console.log([ lastObject, mouseMoveObject, markPosition])\n                            var currentMouseMoveObject = _this.callPrimitiveCallback(EventType.MOUSE_MOVE, markPosition);\n                            // console.log([currentMouseMoveObject, lastObject, mouseMoveObject, markPosition])\n                            if (currentMouseMoveObject !== lastObject) {\n                                mouseMoveObject = currentMouseMoveObject;\n                                lastObject && _this.callPrimitiveCallbackCurrent(lastObject, EventType.MOUSE_MOVE_OUT, markPosition);\n                            }\n                        }\n                        moveTimeout = null;\n                    }, _this._moveTime);\n                }\n            }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n\n            handler.setInputAction(function (movement) {\n                if (pressFlag) {\n                    pressFlag = false;\n                    currentObject && _this.callPrimitiveCallbackCurrent(currentObject, EventType.DRAW_END, movement.position);\n                }\n                _this.callPrimitiveCallback(EventType.LEFT_UP, movement.position);\n\n                _Settings.Settings.enableRotation(_this.viewer, true);\n                currentObject = null;\n                firstFlag = true;\n            }, Cesium.ScreenSpaceEventType.LEFT_UP);\n\n            handler.setInputAction(function (movement) {\n                pressFlag = true;\n                currentObject = _this.callPrimitiveCallback(EventType.LEFT_DOWN, movement.position);\n                // if (currentObject && (currentObject[EventType.DRAW] || currentObject[EventType.DRAW_START] || currentObject[EventType.DRAW_END])) {\n            }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n        }\n    }, {\n        key: "callPrimitiveCallback",\n        value: function callPrimitiveCallback(eventName, position) {\n            var pickedObject = this.viewer.scene.pick(position, this._accuracy, this._accuracy);\n            //entity\n            if (pickedObject && (0, _TypeUtils.typeContaines)(pickedObject.id, "Entity")) {\n                return this.callPrimitiveCallbackCurrent(pickedObject.id, eventName, position);\n            }\n            //primitive\n            if (pickedObject && pickedObject.primitive) {\n                return this.callPrimitiveCallbackCurrent(pickedObject.primitive, eventName, position);\n            }\n\n            return undefined;\n        }\n    }, {\n        key: "callPrimitiveCallbackCurrent",\n        value: function callPrimitiveCallbackCurrent(pickedObjectObj, eventName, position) {\n            pickedObjectObj && pickedObjectObj[eventName] && pickedObjectObj[eventName](position, pickedObjectObj);\n            return pickedObjectObj;\n        }\n    }, {\n        key: "consumeMoveOut",\n        value: function consumeMoveOut() {\n            var _this2 = this;\n\n            if (consumeMoveOutFlag) {\n                consumeMoveOutFlag = false;\n                var cunsumeObjects = this._cunsumeMoveOutObject.slice(0);\n                this._cunsumeMoveOutObject.length = 0;\n                cunsumeObjects.forEach(function (obj) {\n                    obj.obj && _this2.callPrimitiveCallbackCurrent(obj.obj, EventType.MOUSE_MOVE_OUT, obj.position);\n                });\n\n                consumeMoveOutFlag = true;\n            }\n        }\n\n        /**\r\n         *\r\n         * @param {Cesium.Entity | Cesium.Primitive} obj\r\n         * @param {string} type\r\n         * @param callback\r\n         */\n\n    }, {\n        key: "setListener",\n        value: function setListener(obj, type, callback) {\n            if ((0, _NormalUtils.defined)(obj) && (0, _NormalUtils.defined)(type) && typeof callback === "function") {\n                obj[type] = callback;\n            }\n        }\n    }, {\n        key: "removeListener",\n        value: function removeListener(obj, type) {\n            delete obj[type];\n        }\n    }, {\n        key: "enableDrawRotation",\n        value: function enableDrawRotation() {\n            var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            this._enableRotation = enable;\n        }\n\n        //pass\n\n    }, {\n        key: "onLeftClick",\n        value: function onLeftClick(obj, callback) {\n            this.setListener(obj, EventType.LEFT_CLICK, callback);\n        }\n    }, {\n        key: "onLeftDoubleClick",\n        value: function onLeftDoubleClick(obj, callback) {\n            this.setListener(obj, EventType.LEFT_DOUBLE_CLICK, callback);\n        }\n    }, {\n        key: "onMouseMove",\n        value: function onMouseMove(obj, callback) {\n            this.setListener(obj, EventType.MOUSE_MOVE, callback);\n        }\n    }, {\n        key: "onMouseMoveOut",\n        value: function onMouseMoveOut(obj, callback) {\n            this.setListener(obj, EventType.MOUSE_MOVE_OUT, callback);\n        }\n    }, {\n        key: "onLeftUp",\n        value: function onLeftUp(obj, callback) {\n            this.setListener(obj, EventType.LEFT_UP, callback);\n        }\n    }, {\n        key: "onLeftDown",\n        value: function onLeftDown(obj, callback) {\n            this.setListener(obj, EventType.LEFT_DOWN, callback);\n        }\n    }, {\n        key: "onDragStart",\n        value: function onDragStart(obj, callback) {\n            this.setListener(obj, EventType.DRAW_START, callback);\n        }\n    }, {\n        key: "onDrag",\n        value: function onDrag(obj, callback) {\n            this.setListener(obj, EventType.DRAW, callback);\n        }\n    }, {\n        key: "onDragEnd",\n        value: function onDragEnd(obj, callback) {\n            this.setListener(obj, EventType.DRAW_END, callback);\n        }\n    }]);\n\n    return EventSystem;\n}();\n\nvar EventType = exports.EventType = Object.freeze({\n    LEFT_CLICK: "leftClick",\n    LEFT_DOUBLE_CLICK: "leftDoubleClick",\n    MOUSE_MOVE: "mouseMove",\n    MOUSE_MOVE_OUT: "mouseMoveOut",\n    LEFT_UP: "leftUp",\n    LEFT_DOWN: "leftDown",\n    DRAW_START: "drawStart",\n    DRAW: "draw",\n    DRAW_END: "drawEnd"\n});\n\nvar eventSystemMap = {};\n\n// 应对多viewer的情况\n// 但是内部模块（Entity）的事件不好管理，除非全部用SetView的方式\n// 目前\n\nvar EventSystemFactory = exports.EventSystemFactory = function () {\n    function EventSystemFactory() {\n        _classCallCheck(this, EventSystemFactory);\n    }\n\n    _createClass(EventSystemFactory, null, [{\n        key: "createEventSystem",\n        value: function createEventSystem(viewer) {\n            if ((0, _NormalUtils.defined)(viewer)) {\n                if ((0, _NormalUtils.defined)(viewer._eventSystemUUID) && (0, _NormalUtils.defined)(eventSystemMap[viewer._eventSystemUUID])) {\n                    return eventSystemMap[viewer._eventSystemUUID];\n                }\n\n                var _eventSystem = new EventSystem();\n                var id = (0, _Uuid.Uuid)();\n                _eventSystem.setView(viewer);\n                viewer._eventSystemUUID = id;\n                eventSystemMap[id] = _eventSystem;\n                return _eventSystem;\n            }\n        }\n    }]);\n\n    return EventSystemFactory;\n}();\n\nvar eventSystem = new EventSystem();\n\n// 默认单个viewer ， 内部模块更容易接入事件系统\n\nvar EventSystemInstance = exports.EventSystemInstance = function () {\n    function EventSystemInstance() {\n        _classCallCheck(this, EventSystemInstance);\n    }\n\n    _createClass(EventSystemInstance, null, [{\n        key: "setViewer",\n        value: function setViewer(viewer) {\n            if (!eventSystem._init) {\n                eventSystem.setView(viewer);\n            }\n        }\n    }, {\n        key: "getInstance",\n        value: function getInstance(viewer) {\n            if ((0, _NormalUtils.defined)(viewer)) this.setViewer(viewer);\n            return eventSystem;\n        }\n    }]);\n\n    return EventSystemInstance;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvQ29yZS9FdmVudFN5c3RlbS5qcz9kMGU4Il0sIm5hbWVzIjpbIkNlc2l1bSIsImNvbnN1bWVNb3ZlT3V0RmxhZyIsIkV2ZW50U3lzdGVtIiwiYWNjdXJhY3kiLCJfaW5pdCIsIl9hY2N1cmFjeSIsIl9lbmFibGVSb3RhdGlvbiIsIl9mcmFtZVJhdGUiLCJ1cGRhdGVNb3ZlVGltZSIsIl9jdW5zdW1lTW92ZU91dE9iamVjdCIsIndpbmRvdyIsImxvZ3MiLCJ2aWV3ZXIiLCJldmVudEJpbmQiLCJmcmFtZVJhdGUiLCJfbW92ZVRpbWUiLCJwYXJzZUludCIsInZhbHVlIiwibW92ZUNvdW50IiwibW92ZVRpbWVvdXQiLCJwcmVzc0ZsYWciLCJjdXJyZW50T2JqZWN0IiwiZmlyc3RGbGFnIiwibW91c2VNb3ZlT2JqZWN0IiwiaGFuZGxlciIsIlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyIiwic2NlbmUiLCJjYW52YXMiLCJzZXRJbnB1dEFjdGlvbiIsIm1vdmVtZW50IiwiY2FsbFByaW1pdGl2ZUNhbGxiYWNrIiwiRXZlbnRUeXBlIiwiTEVGVF9DTElDSyIsInBvc2l0aW9uIiwiU2NyZWVuU3BhY2VFdmVudFR5cGUiLCJMRUZUX0RPVUJMRV9DTElDSyIsIm1vdmVtZW50U3RlcCIsIm1hcmtQb3NpdGlvbiIsIngiLCJlbmRQb3NpdGlvbiIsInkiLCJzZXRUaW1lb3V0IiwiY2FsbFByaW1pdGl2ZUNhbGxiYWNrQ3VycmVudCIsIkRSQVdfU1RBUlQiLCJTZXR0aW5ncyIsImVuYWJsZVJvdGF0aW9uIiwiRFJBVyIsImxhc3RPYmplY3QiLCJjdXJyZW50TW91c2VNb3ZlT2JqZWN0IiwiTU9VU0VfTU9WRSIsIk1PVVNFX01PVkVfT1VUIiwiRFJBV19FTkQiLCJMRUZUX1VQIiwiTEVGVF9ET1dOIiwiZXZlbnROYW1lIiwicGlja2VkT2JqZWN0IiwicGljayIsImlkIiwicHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicGlja2VkT2JqZWN0T2JqIiwiY3Vuc3VtZU9iamVjdHMiLCJzbGljZSIsImxlbmd0aCIsImZvckVhY2giLCJvYmoiLCJ0eXBlIiwiY2FsbGJhY2siLCJlbmFibGUiLCJzZXRMaXN0ZW5lciIsIk9iamVjdCIsImZyZWV6ZSIsImV2ZW50U3lzdGVtTWFwIiwiRXZlbnRTeXN0ZW1GYWN0b3J5IiwiX2V2ZW50U3lzdGVtVVVJRCIsImV2ZW50U3lzdGVtIiwic2V0VmlldyIsIkV2ZW50U3lzdGVtSW5zdGFuY2UiLCJzZXRWaWV3ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7QUFHQSxJQUFJQyxxQkFBcUIsSUFBekI7O0FBRUE7Ozs7SUFJTUMsVztBQUVGLDJCQUEwQjtBQUFBLFlBQWRDLFFBQWMsdUVBQUgsQ0FBRzs7QUFBQTs7QUFDdEIsYUFBS0MsS0FBTCxHQUFhLEtBQWI7QUFDQSxhQUFLQyxTQUFMLEdBQWlCRixRQUFqQjtBQUNBLGFBQUtHLGVBQUwsR0FBdUIsSUFBdkI7QUFDQSxhQUFLQyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsYUFBS0MsY0FBTDtBQUNBLGFBQUtDLHFCQUFMLEdBQTZCLEVBQTdCO0FBQ0FDLGVBQU9DLElBQVAsR0FBYyxFQUFkO0FBQ0g7O0FBRUQ7Ozs7Ozs7O2dDQUlRQyxNLEVBQVE7QUFDWixnQkFBSSxDQUFDLEtBQUtSLEtBQVYsRUFBaUI7QUFDYixxQkFBS1EsTUFBTCxHQUFjQSxNQUFkO0FBQ0Esb0JBQUksMEJBQVFBLE1BQVIsQ0FBSixFQUFxQjtBQUNqQix5QkFBS1IsS0FBTCxHQUFhLElBQWI7QUFDQSx5QkFBS1MsU0FBTDtBQUNIO0FBQ0o7QUFDRCxtQkFBTyxJQUFQO0FBQ0g7O0FBRUQ7Ozs7Ozs7cUNBSWFDLFMsRUFBVztBQUNwQixpQkFBS1AsVUFBTCxHQUFrQk8sU0FBbEI7QUFDQSxpQkFBS04sY0FBTDtBQUNIOzs7eUNBRWdCO0FBQ2IsaUJBQUtPLFNBQUwsR0FBaUJDLFNBQVMsT0FBTyxLQUFL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Q0FBSixFQUFxQjtBQUNqQixvQkFBSSwwQkFBUUEsT0FBTzhELGdCQUFmLEtBQW9DLDBCQUFRRixlQUFlNUQsT0FBTzhELGdCQUF0QixDQUFSLENBQXhDLEVBQTBGO0FBQ3RGLDJCQUFPRixlQUFlNUQsT0FBTzhELGdCQUF0QixDQUFQO0FBQ0g7O0FBRUQsb0JBQUlDLGVBQWMsSUFBSXpFLFdBQUosRUFBbEI7QUFDQSxvQkFBSXVELEtBQUssaUJBQVQ7QUFDQWtCLDZCQUFZQyxPQUFaLENBQW9CaEUsTUFBcEI7QUFDQUEsdUJBQU84RCxnQkFBUCxHQUEwQmpCLEVBQTFCO0FBQ0FlLCtCQUFlZixFQUFmLElBQXFCa0IsWUFBckI7QUFDQSx1QkFBT0EsWUFBUDtBQUNIO0FBQ0o7Ozs7OztBQUdMLElBQU1BLGNBQWMsSUFBSXpFLFdBQUosRUFBcEI7O0FBRUE7O0lBQ2EyRSxtQixXQUFBQSxtQjs7Ozs7OztrQ0FDUWpFLE0sRUFBUTtBQUNyQixnQkFBSSxDQUFDK0QsWUFBWXZFLEtBQWpCLEVBQXdCO0FBQ3BCdUUsNEJBQVlDLE9BQVosQ0FBb0JoRSxNQUFwQjtBQUNIO0FBQ0o7OztvQ0FFa0JBLE0sRUFBUTtBQUN2QixnQkFBSSwwQkFBUUEsTUFBUixDQUFKLEVBQ0ksS0FBS2tFLFNBQUwsQ0FBZWxFLE1BQWY7QUFDSixtQkFBTytELFdBQVA7QUFDSCIsImZpbGUiOiIxNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcbmltcG9ydCB7ZGVmaW5lZH0gZnJvbSBcIi4uL1V0aWwvTm9ybWFsVXRpbHNcIlxyXG5pbXBvcnQge3R5cGVDb250YWluZXN9IGZyb20gXCIuLi9VdGlsL1R5cGVVdGlsc1wiXHJcbmltcG9ydCB7c2V0TGlzdGVuZXJ9IGZyb20gXCIuLi9UaGlyZFBhcnR5L0RyYXdIZWxwZXJWMi91dGlsL0V2ZW50SGVscGVyXCI7XHJcbmltcG9ydCB7U2V0dGluZ3N9IGZyb20gXCIuLi9XaWRnZXRzL1NldHRpbmdzXCJcclxuaW1wb3J0IHtVdWlkfSBmcm9tIFwiLi4vVXRpbC9VdWlkXCJcclxuXHJcblxyXG5sZXQgY29uc3VtZU1vdmVPdXRGbGFnID0gdHJ1ZTtcclxuXHJcbi8qKlxyXG4gKiDmjqXnrqFDZXNpdW3nmoTkuovku7bns7vnu5/vvIjlr7nkuo5lbnRpdHnlkoxwcmltaXRpdmXvvIlcclxuICovXHJcblxyXG5jbGFzcyBFdmVudFN5c3RlbSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWNjdXJhY3kgPSAzKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2FjY3VyYWN5ID0gYWNjdXJhY3k7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlUm90YXRpb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lUmF0ZSA9IDYwO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTW92ZVRpbWUoKVxyXG4gICAgICAgIHRoaXMuX2N1bnN1bWVNb3ZlT3V0T2JqZWN0ID0gW107XHJcbiAgICAgICAgd2luZG93LmxvZ3MgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleWcsOWbvlxyXG4gICAgICogQHBhcmFtIHZpZXdlclxyXG4gICAgICovXHJcbiAgICBzZXRWaWV3KHZpZXdlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5faW5pdCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlciA9IHZpZXdlcjtcclxuICAgICAgICAgICAgaWYgKGRlZmluZWQodmlld2VyKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QmluZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5bin546H77yM5bin546H5Lya5b2x5ZONbW92ZeS6i+S7tueahOiKgua1geaXtumXtFxyXG4gICAgICogQHBhcmFtIGZyYW1lUmF0ZVxyXG4gICAgICovXHJcbiAgICBzZXRGcmFtZVJhdGUoZnJhbWVSYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVSYXRlID0gZnJhbWVSYXRlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTW92ZVRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb3ZlVGltZSgpIHtcclxuICAgICAgICB0aGlzLl9tb3ZlVGltZSA9IHBhcnNlSW50KDEwMDAgLyB0aGlzLl9mcmFtZVJhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFjY3VyYWN5KHZhbHVlID0gMykge1xyXG4gICAgICAgIHRoaXMuX2FjY3VyYWN5ID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRCaW5kKCkge1xyXG4gICAgICAgIGxldCBtb3ZlQ291bnQgPSAwO1xyXG4gICAgICAgIGxldCBtb3ZlVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgbGV0IHByZXNzRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBjdXJyZW50T2JqZWN0ID0gbnVsbDtcclxuICAgICAgICBsZXQgZmlyc3RGbGFnID0gdHJ1ZTtcclxuICAgICAgICBsZXQgbW91c2VNb3ZlT2JqZWN0ID0gbnVsbDtcclxuICAgICAgICBsZXQgaGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIodGhpcy52aWV3ZXIuc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsUHJpbWl0aXZlQ2FsbGJhY2soRXZlbnRUeXBlLkxFRlRfQ0xJQ0ssIG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgIGhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oKG1vdmVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbFByaW1pdGl2ZUNhbGxiYWNrKEV2ZW50VHlwZS5MRUZUX0RPVUJMRV9DTElDSywgbW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0RPVUJMRV9DTElDSyk7XHJcblxyXG4gICAgICAgIGhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oKG1vdmVtZW50U3RlcCkgPT4ge1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlVGltZW91dCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICB4OiBtb3ZlbWVudFN0ZXAuZW5kUG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgICAgICB5OiBtb3ZlbWVudFN0ZXAuZW5kUG9zaXRpb24ueVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1hcmtQb3NpdGlvbilcclxuXHJcbiAgICAgICAgICAgICAgICBtb3ZlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVzc0ZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/nrKzkuIDmrKHmjInkuItcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxQcmltaXRpdmVDYWxsYmFja0N1cnJlbnQoY3VycmVudE9iamVjdCwgRXZlbnRUeXBlLkRSQVdfU1RBUlQsIG1hcmtQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50T2JqZWN0ICYmICF0aGlzLl9lbmFibGVSb3RhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLmVuYWJsZVJvdGF0aW9uKHRoaXMudmlld2VyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxQcmltaXRpdmVDYWxsYmFja0N1cnJlbnQoY3VycmVudE9iamVjdCwgRXZlbnRUeXBlLkRSQVcsIG1hcmtQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0T2JqZWN0ID0gbW91c2VNb3ZlT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhbIGxhc3RPYmplY3QsIG1vdXNlTW92ZU9iamVjdCwgbWFya1Bvc2l0aW9uXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRNb3VzZU1vdmVPYmplY3QgPSB0aGlzLmNhbGxQcmltaXRpdmVDYWxsYmFjayhFdmVudFR5cGUuTU9VU0VfTU9WRSwgbWFya1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coW2N1cnJlbnRNb3VzZU1vdmVPYmplY3QsIGxhc3RPYmplY3QsIG1vdXNlTW92ZU9iamVjdCwgbWFya1Bvc2l0aW9uXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb3VzZU1vdmVPYmplY3QgIT09IGxhc3RPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlTW92ZU9iamVjdCA9IGN1cnJlbnRNb3VzZU1vdmVPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0T2JqZWN0ICYmIHRoaXMuY2FsbFByaW1pdGl2ZUNhbGxiYWNrQ3VycmVudChsYXN0T2JqZWN0LCBFdmVudFR5cGUuTU9VU0VfTU9WRV9PVVQsIG1hcmtQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLl9tb3ZlVGltZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFKTtcclxuXHJcbiAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbigobW92ZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByZXNzRmxhZykge1xyXG4gICAgICAgICAgICAgICAgcHJlc3NGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50T2JqZWN0ICYmIHRoaXMuY2FsbFByaW1pdGl2ZUNhbGxiYWNrQ3VycmVudChjdXJyZW50T2JqZWN0LCBFdmVudFR5cGUuRFJBV19FTkQsIG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGxQcmltaXRpdmVDYWxsYmFjayhFdmVudFR5cGUuTEVGVF9VUCwgbW92ZW1lbnQucG9zaXRpb24pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIFNldHRpbmdzLmVuYWJsZVJvdGF0aW9uKHRoaXMudmlld2VyLCB0cnVlKTtcclxuICAgICAgICAgICAgY3VycmVudE9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZpcnN0RmxhZyA9IHRydWU7XHJcbiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfVVApO1xyXG5cclxuICAgICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBwcmVzc0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICBjdXJyZW50T2JqZWN0ID0gdGhpcy5jYWxsUHJpbWl0aXZlQ2FsbGJhY2soRXZlbnRUeXBlLkxFRlRfRE9XTiwgbW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAvLyBpZiAoY3VycmVudE9iamVjdCAmJiAoY3VycmVudE9iamVjdFtFdmVudFR5cGUuRFJBV10gfHwgY3VycmVudE9iamVjdFtFdmVudFR5cGUuRFJBV19TVEFSVF0gfHwgY3VycmVudE9iamVjdFtFdmVudFR5cGUuRFJBV19FTkRdKSkge1xyXG5cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1dOKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsUHJpbWl0aXZlQ2FsbGJhY2soZXZlbnROYW1lLCBwb3NpdGlvbikge1xyXG4gICAgICAgIGxldCBwaWNrZWRPYmplY3QgPSB0aGlzLnZpZXdlci5zY2VuZS5waWNrKHBvc2l0aW9uLCB0aGlzLl9hY2N1cmFjeSwgdGhpcy5fYWNjdXJhY3kpO1xyXG4gICAgICAgIC8vZW50aXR5XHJcbiAgICAgICAgaWYgKHBpY2tlZE9iamVjdCAmJiB0eXBlQ29udGFpbmVzKHBpY2tlZE9iamVjdC5pZCwgXCJFbnRpdHlcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsbFByaW1pdGl2ZUNhbGxiYWNrQ3VycmVudChwaWNrZWRPYmplY3QuaWQsIGV2ZW50TmFtZSwgcG9zaXRpb24pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vcHJpbWl0aXZlXHJcbiAgICAgICAgaWYgKHBpY2tlZE9iamVjdCAmJiBwaWNrZWRPYmplY3QucHJpbWl0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGxQcmltaXRpdmVDYWxsYmFja0N1cnJlbnQocGlja2VkT2JqZWN0LnByaW1pdGl2ZSwgZXZlbnROYW1lLCBwb3NpdGlvbilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAgdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGxQcmltaXRpdmVDYWxsYmFja0N1cnJlbnQocGlja2VkT2JqZWN0T2JqLCBldmVudE5hbWUsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgcGlja2VkT2JqZWN0T2JqICYmIHBpY2tlZE9iamVjdE9ialtldmVudE5hbWVdICYmIHBpY2tlZE9iamVjdE9ialtldmVudE5hbWVdKHBvc2l0aW9uLHBpY2tlZE9iamVjdE9iaik7XHJcbiAgICAgICAgcmV0dXJuIHBpY2tlZE9iamVjdE9iajtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdW1lTW92ZU91dCgpIHtcclxuICAgICAgICBpZiAoY29uc3VtZU1vdmVPdXRGbGFnKSB7XHJcbiAgICAgICAgICAgIGNvbnN1bWVNb3ZlT3V0RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgY3Vuc3VtZU9iamVjdHMgPSB0aGlzLl9jdW5zdW1lTW92ZU91dE9iamVjdC5zbGljZSgwKTtcclxuICAgICAgICAgICAgdGhpcy5fY3Vuc3VtZU1vdmVPdXRPYmplY3QubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgY3Vuc3VtZU9iamVjdHMuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmoub2JqICYmIHRoaXMuY2FsbFByaW1pdGl2ZUNhbGxiYWNrQ3VycmVudChvYmoub2JqLCBFdmVudFR5cGUuTU9VU0VfTU9WRV9PVVQsIG9iai5wb3NpdGlvbilcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGNvbnN1bWVNb3ZlT3V0RmxhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Q2VzaXVtLkVudGl0eSB8IENlc2l1bS5QcmltaXRpdmV9IG9ialxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBzZXRMaXN0ZW5lcihvYmosIHR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGRlZmluZWQob2JqKSAmJiBkZWZpbmVkKHR5cGUpICYmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikpIHtcclxuICAgICAgICAgICAgb2JqW3R5cGVdID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUxpc3RlbmVyKG9iaiwgdHlwZSkge1xyXG4gICAgICAgIGRlbGV0ZSBvYmpbdHlwZV07XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlRHJhd1JvdGF0aW9uKGVuYWJsZSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9lbmFibGVSb3RhdGlvbiA9IGVuYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICAvL3Bhc3NcclxuICAgIG9uTGVmdENsaWNrKG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLkxFRlRfQ0xJQ0ssIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkxlZnREb3VibGVDbGljayhvYmosIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5zZXRMaXN0ZW5lcihvYmosIEV2ZW50VHlwZS5MRUZUX0RPVUJMRV9DTElDSywgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VNb3ZlKG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLk1PVVNFX01PVkUsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlTW92ZU91dChvYmosIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5zZXRMaXN0ZW5lcihvYmosIEV2ZW50VHlwZS5NT1VTRV9NT1ZFX09VVCwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTGVmdFVwKG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLkxFRlRfVVAsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkxlZnREb3duKG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLkxFRlRfRE9XTiwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRHJhZ1N0YXJ0KG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLkRSQVdfU1RBUlQsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRyYWcob2JqLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuc2V0TGlzdGVuZXIob2JqLCBFdmVudFR5cGUuRFJBVywgY2FsbGJhY2spXHJcbiAgICB9XHJcblxyXG4gICAgb25EcmFnRW5kKG9iaiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyKG9iaiwgRXZlbnRUeXBlLkRSQVdfRU5ELCBjYWxsYmFjaylcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEV2ZW50VHlwZSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgTEVGVF9DTElDSzogXCJsZWZ0Q2xpY2tcIixcclxuICAgIExFRlRfRE9VQkxFX0NMSUNLOiBcImxlZnREb3VibGVDbGlja1wiLFxyXG4gICAgTU9VU0VfTU9WRTogXCJtb3VzZU1vdmVcIixcclxuICAgIE1PVVNFX01PVkVfT1VUOiBcIm1vdXNlTW92ZU91dFwiLFxyXG4gICAgTEVGVF9VUDogXCJsZWZ0VXBcIixcclxuICAgIExFRlRfRE9XTjogXCJsZWZ0RG93blwiLFxyXG4gICAgRFJBV19TVEFSVDogXCJkcmF3U3RhcnRcIixcclxuICAgIERSQVc6IFwiZHJhd1wiLFxyXG4gICAgRFJBV19FTkQ6IFwiZHJhd0VuZFwiXHJcbn0pXHJcblxyXG5jb25zdCBldmVudFN5c3RlbU1hcCA9IHt9O1xyXG5cclxuLy8g5bqU5a+55aSadmlld2Vy55qE5oOF5Ya1XHJcbi8vIOS9huaYr+WGhemDqOaooeWdl++8iEVudGl0ee+8ieeahOS6i+S7tuS4jeWlveeuoeeQhu+8jOmZpOmdnuWFqOmDqOeUqFNldFZpZXfnmoTmlrnlvI9cclxuLy8g55uu5YmNXHJcbmV4cG9ydCBjbGFzcyBFdmVudFN5c3RlbUZhY3Rvcnkge1xyXG4gICAgc3RhdGljIGNyZWF0ZUV2ZW50U3lzdGVtKHZpZXdlcikge1xyXG4gICAgICAgIGlmIChkZWZpbmVkKHZpZXdlcikpIHtcclxuICAgICAgICAgICAgaWYgKGRlZmluZWQodmlld2VyLl9ldmVudFN5c3RlbVVVSUQpICYmIGRlZmluZWQoZXZlbnRTeXN0ZW1NYXBbdmlld2VyLl9ldmVudFN5c3RlbVVVSURdKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50U3lzdGVtTWFwW3ZpZXdlci5fZXZlbnRTeXN0ZW1VVUlEXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKCk7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IFV1aWQoKTtcclxuICAgICAgICAgICAgZXZlbnRTeXN0ZW0uc2V0Vmlldyh2aWV3ZXIpO1xyXG4gICAgICAgICAgICB2aWV3ZXIuX2V2ZW50U3lzdGVtVVVJRCA9IGlkO1xyXG4gICAgICAgICAgICBldmVudFN5c3RlbU1hcFtpZF0gPSBldmVudFN5c3RlbTtcclxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50U3lzdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oKTtcclxuXHJcbi8vIOm7mOiupOWNleS4qnZpZXdlciDvvIwg5YaF6YOo5qih5Z2X5pu05a655piT5o6l5YWl5LqL5Lu257O757ufXHJcbmV4cG9ydCBjbGFzcyBFdmVudFN5c3RlbUluc3RhbmNlIHtcclxuICAgIHN0YXRpYyBzZXRWaWV3ZXIodmlld2VyKSB7XHJcbiAgICAgICAgaWYgKCFldmVudFN5c3RlbS5faW5pdCkge1xyXG4gICAgICAgICAgICBldmVudFN5c3RlbS5zZXRWaWV3KHZpZXdlcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKHZpZXdlcikge1xyXG4gICAgICAgIGlmIChkZWZpbmVkKHZpZXdlcikpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Vmlld2VyKHZpZXdlcik7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50U3lzdGVtO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.Settings = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n/**\r\n * 记录一些常用的设置\r\n */\nvar Settings = exports.Settings = function () {\n    function Settings() {\n        _classCallCheck(this, Settings);\n    }\n\n    _createClass(Settings, null, [{\n        key: "cancelDefaultDbLeftClick",\n\n        /**\r\n         * 清除默认的双击事件\r\n         * @param viewer\r\n         */\n        value: function cancelDefaultDbLeftClick(viewer) {\n            viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n        }\n    }, {\n        key: "enableRotation",\n        value: function enableRotation(viewer) {\n            var enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            viewer.scene.screenSpaceCameraController.enableRotate = enable;\n        }\n    }]);\n\n    return Settings;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvV2lkZ2V0cy9TZXR0aW5ncy5qcz9lYWMwIl0sIm5hbWVzIjpbIkNlc2l1bSIsIlNldHRpbmdzIiwidmlld2VyIiwiY2VzaXVtV2lkZ2V0Iiwic2NyZWVuU3BhY2VFdmVudEhhbmRsZXIiLCJyZW1vdmVJbnB1dEFjdGlvbiIsIlNjcmVlblNwYWNlRXZlbnRUeXBlIiwiTEVGVF9ET1VCTEVfQ0xJQ0siLCJlbmFibGUiLCJzY2VuZSIsInNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlciIsImVuYWJsZVJvdGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0lBQVlBLE07Ozs7OztBQUVaOzs7SUFHYUMsUSxXQUFBQSxROzs7Ozs7OztBQUNUOzs7O2lEQUlnQ0MsTSxFQUFPO0FBQ25DQSxtQkFBT0MsWUFBUCxDQUFvQkMsdUJBQXBCLENBQTRDQyxpQkFBNUMsQ0FBOERMLE9BQU9NLG9CQUFQLENBQTRCQyxpQkFBMUY7QUFDSDs7O3VDQUVxQkwsTSxFQUFxQjtBQUFBLGdCQUFkTSxNQUFjLHVFQUFMLElBQUs7O0FBQ3ZDTixtQkFBT08sS0FBUCxDQUFhQywyQkFBYixDQUF5Q0MsWUFBekMsR0FBd0RILE1BQXhEO0FBQ0giLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5cclxuLyoqXHJcbiAqIOiusOW9leS4gOS6m+W4uOeUqOeahOiuvue9rlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzIHtcclxuICAgIC8qKlxyXG4gICAgICog5riF6Zmk6buY6K6k55qE5Y+M5Ye75LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gdmlld2VyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjYW5jZWxEZWZhdWx0RGJMZWZ0Q2xpY2sodmlld2VyKXtcclxuICAgICAgICB2aWV3ZXIuY2VzaXVtV2lkZ2V0LnNjcmVlblNwYWNlRXZlbnRIYW5kbGVyLnJlbW92ZUlucHV0QWN0aW9uKENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0RPVUJMRV9DTElDSylcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZW5hYmxlUm90YXRpb24odmlld2VyLGVuYWJsZSA9IHRydWUpe1xyXG4gICAgICAgIHZpZXdlci5zY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIuZW5hYmxlUm90YXRlID0gZW5hYmxlO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.BaseEntity = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _EventSystem = __webpack_require__(14);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * 基础entity\r\n * 改变了，继承改变 display/hide/add/remove方向\r\n * 选择选中接口对外开放\r\n * 点击事件\r\n */\nvar BaseEntity = exports.BaseEntity = function (_Cesium$Entity) {\n    _inherits(BaseEntity, _Cesium$Entity);\n\n    function BaseEntity(config) {\n        _classCallCheck(this, BaseEntity);\n\n        return _possibleConstructorReturn(this, (BaseEntity.__proto__ || Object.getPrototypeOf(BaseEntity)).call(this, config));\n    }\n\n    _createClass(BaseEntity, [{\n        key: "setViewer",\n        value: function setViewer(viewer) {\n            viewer.entities.add(this);\n            this._viewer = viewer;\n        }\n    }, {\n        key: "removeViewer",\n        value: function removeViewer(viewer) {\n            viewer.entities.remove(this);\n            delete this._viewer;\n        }\n    }, {\n        key: "display",\n        value: function display() {\n            this.show = true;\n        }\n    }, {\n        key: "hide",\n        value: function hide() {\n            this.show = false;\n        }\n    }, {\n        key: "setSelected",\n        value: function setSelected() {\n            var selected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            this.selected = selected;\n        }\n    }, {\n        key: "cancelSelected",\n        value: function cancelSelected() {\n            this.selected = false;\n        }\n    }, {\n        key: "onSelect",\n        value: function onSelect() {\n            var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n            this._selectedCallback = callback;\n        }\n    }, {\n        key: "onRelease",\n        value: function onRelease() {\n            var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n            this._releaseCallback = callback;\n        }\n    }, {\n        key: "initEvent",\n        value: function initEvent() {\n            var _this2 = this;\n\n            _EventSystem.EventSystemInstance.getInstance().onLeftClick(this, function (position) {\n                // this.onSelected ^= true;//反向\n                if (typeof _this2.onClickCallback === "function") {\n                    _this2.onClickCallback(position);\n                }\n            });\n        }\n    }, {\n        key: "onClick",\n        value: function onClick(callback) {\n            this.onClickCallback = callback;\n        }\n    }, {\n        key: "selected",\n        set: function set(selected) {\n            this._selected = selected;\n            if (this.selected) {\n                typeof this._selectedCallback() === "function" && this._selectedCallback();\n            } else {\n                typeof this._releaseCallback === "function" && this._releaseCallback();\n            }\n        },\n        get: function get() {\n            return this._selected;\n        }\n    }]);\n\n    return BaseEntity;\n}(Cesium.Entity);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvRGF0YVNvdXJjZXMvQmFzZUVudGl0eS5qcz9iNGQzIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkJhc2VFbnRpdHkiLCJjb25maWciLCJ2aWV3ZXIiLCJlbnRpdGllcyIsImFkZCIsIl92aWV3ZXIiLCJyZW1vdmUiLCJzaG93Iiwic2VsZWN0ZWQiLCJjYWxsYmFjayIsIl9zZWxlY3RlZENhbGxiYWNrIiwiX3JlbGVhc2VDYWxsYmFjayIsIkV2ZW50U3lzdGVtSW5zdGFuY2UiLCJnZXRJbnN0YW5jZSIsIm9uTGVmdENsaWNrIiwicG9zaXRpb24iLCJvbkNsaWNrQ2FsbGJhY2siLCJfc2VsZWN0ZWQiLCJFbnRpdHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOzs7Ozs7Ozs7O0FBRUE7Ozs7OztJQU1hQyxVLFdBQUFBLFU7OztBQUNULHdCQUFZQyxNQUFaLEVBQW9CO0FBQUE7O0FBQUEsdUhBQ1ZBLE1BRFU7QUFFbkI7Ozs7a0NBRVNDLE0sRUFBUTtBQUNkQSxtQkFBT0MsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBb0IsSUFBcEI7QUFDQSxpQkFBS0MsT0FBTCxHQUFlSCxNQUFmO0FBQ0g7OztxQ0FFWUEsTSxFQUFRO0FBQ2pCQSxtQkFBT0MsUUFBUCxDQUFnQkcsTUFBaEIsQ0FBdUIsSUFBdkI7QUFDQSxtQkFBTyxLQUFLRCxPQUFaO0FBQ0g7OztrQ0FFUztBQUNOLGlCQUFLRSxJQUFMLEdBQVksSUFBWjtBQUNIOzs7K0JBRU07QUFDSCxpQkFBS0EsSUFBTCxHQUFZLEtBQVo7QUFDSDs7O3NDQWU0QjtBQUFBLGdCQUFqQkMsUUFBaUIsdUVBQU4sSUFBTTs7QUFDekIsaUJBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0g7Ozt5Q0FFZ0I7QUFDYixpQkFBS0EsUUFBTCxHQUFnQixLQUFoQjtBQUNIOzs7bUNBR0U7QUFBQSxnQkFETUMsUUFDTix1RUFEaUIsWUFBTSxDQUN6QixDQUFFOztBQUNDLGlCQUFLQyxpQkFBTCxHQUF5QkQsUUFBekI7QUFDSDs7O29DQUdFO0FBQUEsZ0JBRE9BLFFBQ1AsdUVBRGtCLFlBQU0sQ0FDMUIsQ0FBRTs7QUFDQyxpQkFBS0UsZ0JBQUwsR0FBd0JGLFFBQXhCO0FBQ0g7OztvQ0FFVztBQUFBOztBQUNSRyw2Q0FBb0JDLFdBQXBCLEdBQWtDQyxXQUFsQyxDQUE4QyxJQUE5QyxFQUFvRCxVQUFDQyxRQUFELEVBQWM7QUFDOUQ7QUFDQSxvQkFBSSxPQUFPLE9BQUtDLGVBQVosS0FBZ0MsVUFBcEMsRUFBZ0Q7QUFDNUMsMkJBQUtBLGVBQUwsQ0FBcUJELFFBQXJCO0FBQ0g7QUFDSixhQUxEO0FBTUg7OztnQ0FFT04sUSxFQUFVO0FBQ2QsaUJBQUtPLGVBQUwsR0FBdUJQLFFBQXZCO0FBQ0g7OzswQkExQ1lELFEsRUFBUztBQUNsQixpQkFBS1MsU0FBTCxHQUFpQlQsUUFBakI7QUFDQSxnQkFBRyxLQUFLQSxRQUFSLEVBQWlCO0FBQ2IsdUJBQU8sS0FBS0UsaUJBQUwsRUFBUCxLQUFvQyxVQUFwQyxJQUFrRCxLQUFLQSxpQkFBTCxFQUFsRDtBQUNILGFBRkQsTUFFSztBQUNELHVCQUFPLEtBQUtDLGdCQUFaLEtBQWlDLFVBQWpDLElBQStDLEtBQUtBLGdCQUFMLEVBQS9DO0FBQ0g7QUFDSixTOzRCQUVhO0FBQ1YsbUJBQU8sS0FBS00sU0FBWjtBQUNIOzs7O0VBbEMyQmxCLE9BQU9tQixNIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtFdmVudFN5c3RlbUluc3RhbmNlfSBmcm9tIFwiLi4vQ29yZS9FdmVudFN5c3RlbVwiO1xyXG5cclxuLyoqXHJcbiAqIOWfuuehgGVudGl0eVxyXG4gKiDmlLnlj5jkuobvvIznu6fmib/mlLnlj5ggZGlzcGxheS9oaWRlL2FkZC9yZW1vdmXmlrnlkJFcclxuICog6YCJ5oup6YCJ5Lit5o6l5Y+j5a+55aSW5byA5pS+XHJcbiAqIOeCueWHu+S6i+S7tlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VFbnRpdHkgZXh0ZW5kcyBDZXNpdW0uRW50aXR5IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Vmlld2VyKHZpZXdlcikge1xyXG4gICAgICAgIHZpZXdlci5lbnRpdGllcy5hZGQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fdmlld2VyID0gdmlld2VyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVZpZXdlcih2aWV3ZXIpIHtcclxuICAgICAgICB2aWV3ZXIuZW50aXRpZXMucmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl92aWV3ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpIHtcclxuICAgICAgICB0aGlzLnNob3cgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlbGVjdGVkKHNlbGVjdGVkKXtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZCA9IHNlbGVjdGVkO1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0ZWQpe1xyXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5fc2VsZWN0ZWRDYWxsYmFjaygpID09PSBcImZ1bmN0aW9uXCIgJiYgdGhpcy5fc2VsZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5fcmVsZWFzZUNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgJiYgdGhpcy5fcmVsZWFzZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZWxlY3RlZCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTZWxlY3RlZChzZWxlY3RlZCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2VsZWN0KGNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgfSkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBvblJlbGVhc2UoY2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICB9KSB7XHJcbiAgICAgICAgdGhpcy5fcmVsZWFzZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEV2ZW50KCkge1xyXG4gICAgICAgIEV2ZW50U3lzdGVtSW5zdGFuY2UuZ2V0SW5zdGFuY2UoKS5vbkxlZnRDbGljayh0aGlzLCAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgLy8gdGhpcy5vblNlbGVjdGVkIF49IHRydWU7Ly/lj43lkJFcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2xpY2tDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpY2tDYWxsYmFjayhwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uQ2xpY2tDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.EditableBillboard = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EditableBillboard = exports.EditableBillboard = function (_Cesium$Billboard) {\n    _inherits(EditableBillboard, _Cesium$Billboard);\n\n    function EditableBillboard(config, billboardCollection, viewer) {\n        _classCallCheck(this, EditableBillboard);\n\n        var _this = _possibleConstructorReturn(this, (EditableBillboard.__proto__ || Object.getPrototypeOf(EditableBillboard)).call(this, config, billboardCollection));\n\n        _this.viewer = viewer;\n        return _this;\n    }\n\n    _createClass(EditableBillboard, [{\n        key: "setEditable",\n        value: function setEditable() {\n            var _this2 = this;\n\n            if (this._editable) {\n                return;\n            }\n\n            this._editable = true;\n\n            var eventSystem = _.EventSystemInstance.getInstance();\n            eventSystem.onDragStart(this, function (position) {\n                eventSystem.enableDrawRotation(false);\n\n                _this2.position = _this2.viewer.scene.camera.pickEllipsoid(position);\n            });\n\n            eventSystem.onDrag(this, function (position) {\n                _this2.position = _this2.viewer.scene.camera.pickEllipsoid(position);\n            });\n\n            eventSystem.onDragEnd(this, function (position) {\n                eventSystem.enableDrawRotation(true);\n            });\n        }\n    }]);\n\n    return EditableBillboard;\n}(Cesium.Billboard);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0VkaXRhYmxlQmlsbGJvYXJkLmpzP2Y3OTEiXSwibmFtZXMiOlsiQ2VzaXVtIiwiRWRpdGFibGVCaWxsYm9hcmQiLCJjb25maWciLCJiaWxsYm9hcmRDb2xsZWN0aW9uIiwidmlld2VyIiwiX2VkaXRhYmxlIiwiZXZlbnRTeXN0ZW0iLCJFdmVudFN5c3RlbUluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJvbkRyYWdTdGFydCIsInBvc2l0aW9uIiwiZW5hYmxlRHJhd1JvdGF0aW9uIiwic2NlbmUiLCJjYW1lcmEiLCJwaWNrRWxsaXBzb2lkIiwib25EcmFnIiwib25EcmFnRW5kIiwiQmlsbGJvYXJkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7QUFDWjs7Ozs7Ozs7OztJQUVhQyxpQixXQUFBQSxpQjs7O0FBRVQsK0JBQVlDLE1BQVosRUFBb0JDLG1CQUFwQixFQUF3Q0MsTUFBeEMsRUFBZ0Q7QUFBQTs7QUFBQSwwSUFDdENGLE1BRHNDLEVBQy9CQyxtQkFEK0I7O0FBRTVDLGNBQUtDLE1BQUwsR0FBY0EsTUFBZDtBQUY0QztBQUcvQzs7OztzQ0FFYTtBQUFBOztBQUNWLGdCQUFJLEtBQUtDLFNBQVQsRUFBb0I7QUFDaEI7QUFDSDs7QUFFRCxpQkFBS0EsU0FBTCxHQUFpQixJQUFqQjs7QUFFQSxnQkFBSUMsY0FBY0Msc0JBQW9CQyxXQUFwQixFQUFsQjtBQUNBRix3QkFBWUcsV0FBWixDQUF3QixJQUF4QixFQUE4QixVQUFDQyxRQUFELEVBQWM7QUFDeENKLDRCQUFZSyxrQkFBWixDQUErQixLQUEvQjs7QUFFQSx1QkFBS0QsUUFBTCxHQUFnQixPQUFLTixNQUFMLENBQVlRLEtBQVosQ0FBa0JDLE1BQWxCLENBQXlCQyxhQUF6QixDQUF1Q0osUUFBdkMsQ0FBaEI7QUFDSCxhQUpEOztBQU1BSix3QkFBWVMsTUFBWixDQUFtQixJQUFuQixFQUF5QixVQUFDTCxRQUFELEVBQWM7QUFDbkMsdUJBQUtBLFFBQUwsR0FBZ0IsT0FBS04sTUFBTCxDQUFZUSxLQUFaLENBQWtCQyxNQUFsQixDQUF5QkMsYUFBekIsQ0FBdUNKLFFBQXZDLENBQWhCO0FBQ0gsYUFGRDs7QUFJQUosd0JBQVlVLFNBQVosQ0FBc0IsSUFBdEIsRUFBNEIsVUFBQ04sUUFBRCxFQUFjO0FBQ3RDSiw0QkFBWUssa0JBQVosQ0FBK0IsSUFBL0I7QUFDSCxhQUZEO0FBR0g7Ozs7RUE1QmtDWCxPQUFPaUIsUyIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcbmltcG9ydCB7RXZlbnRTeXN0ZW1JbnN0YW5jZX0gZnJvbSBcIi4uLy4uLy4uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdGFibGVCaWxsYm9hcmQgZXh0ZW5kcyBDZXNpdW0uQmlsbGJvYXJkIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGJpbGxib2FyZENvbGxlY3Rpb24sdmlld2VyKSB7XHJcbiAgICAgICAgc3VwZXIoY29uZmlnLGJpbGxib2FyZENvbGxlY3Rpb24pO1xyXG4gICAgICAgIHRoaXMudmlld2VyID0gdmlld2VyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEVkaXRhYmxlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0YWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGxldCBldmVudFN5c3RlbSA9IEV2ZW50U3lzdGVtSW5zdGFuY2UuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBldmVudFN5c3RlbS5vbkRyYWdTdGFydCh0aGlzLCAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgZXZlbnRTeXN0ZW0uZW5hYmxlRHJhd1JvdGF0aW9uKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnZpZXdlci5zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbik7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXZlbnRTeXN0ZW0ub25EcmFnKHRoaXMsIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy52aWV3ZXIuc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGV2ZW50U3lzdGVtLm9uRHJhZ0VuZCh0aGlzLCAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgZXZlbnRTeXN0ZW0uZW5hYmxlRHJhd1JvdGF0aW9uKHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.CirclePrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ChangeablePrimitive2 = __webpack_require__(6);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _ = __webpack_require__(3);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CirclePrimitive = exports.CirclePrimitive = function (_ChangeablePrimitive) {\n    _inherits(CirclePrimitive, _ChangeablePrimitive);\n\n    function CirclePrimitive(options, drawHelper) {\n        _classCallCheck(this, CirclePrimitive);\n\n        var _this = _possibleConstructorReturn(this, (CirclePrimitive.__proto__ || Object.getPrototypeOf(CirclePrimitive)).call(this));\n\n        _this._drawHelper = drawHelper;\n\n        if (!(Cesium.defined(options.center) && Cesium.defined(options.radius))) {\n            throw new Cesium.DeveloperError(\'Center and radius are required\');\n        }\n\n        options = (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions);\n\n        _this.initialiseOptions(options);\n\n        _this.setRadius(options.radius);\n        drawHelper.registerEditableShape(_this);\n        (0, _EventHelper.enhanceWithListeners)(_this);\n        var eventsystem = _.EventSystemInstance.getInstance();\n        return _this;\n    }\n\n    _createClass(CirclePrimitive, [{\n        key: "setCenter",\n        value: function setCenter(center) {\n            this.setAttribute(\'center\', center);\n        }\n    }, {\n        key: "setRadius",\n        value: function setRadius(radius) {\n            this.setAttribute(\'radius\', Math.max(0.1, radius));\n        }\n    }, {\n        key: "getCenter",\n        value: function getCenter() {\n            return this.getAttribute(\'center\');\n        }\n    }, {\n        key: "getRadius",\n        value: function getRadius() {\n            return this.getAttribute(\'radius\');\n        }\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n\n            if (!(Cesium.defined(this.center) && Cesium.defined(this.radius))) {\n                return;\n            }\n\n            return new Cesium.CircleGeometry({\n                center: this.center,\n                radius: this.radius,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        }\n    }, {\n        key: "getOutlineGeometry",\n        value: function getOutlineGeometry() {\n            return new Cesium.CircleOutlineGeometry({\n                center: this.getCenter(),\n                radius: this.getRadius()\n            });\n        }\n    }, {\n        key: "setEditMode",\n        value: function setEditMode() {\n            var _this2 = this;\n\n            var editMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            var drawHelper = this._drawHelper;\n            var circle = this;\n            var scene = drawHelper._scene;\n\n            var getMarkerPositions = function getMarkerPositions() {\n                return _this2.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO);\n            };\n\n            var onEdited = function onEdited() {\n                _this2.executeListeners({\n                    name: \'onEdited\',\n                    center: _this2.getCenter(),\n                    radius: _this2.getRadius()\n                });\n            };\n\n            if (this._editMode == editMode) {\n                return;\n            }\n\n            drawHelper.disableAllHighlights();\n            // display markers\n            if (editMode) {\n                // make sure all other shapes are not in edit mode before starting the editing of this shape\n                drawHelper.setEdited(this);\n                var _self = this;\n                // create the markers and handlers for the editing\n                if (this._markers == null) {\n                    var thisDragBillboard = this.dragBillboard ? this.dragBillboard : _DefaultValue.dragBillboard;\n\n                    var markers = new _BillboardGroup.BillboardGroup(drawHelper, thisDragBillboard);\n\n                    var handleMarkerChanges = {\n                        dragHandlers: {\n                            onDrag: function onDrag(index, position) {\n                                circle.setRadius(Cesium.Cartesian3.distance(circle.getCenter(), position));\n                                markers.updateBillboardsPositions(getMarkerPositions());\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                onEdited();\n                            }\n                        },\n                        tooltip: function tooltip() {\n                            return "Drag to change the radius";\n                        }\n                    };\n                    markers.addBillboards(getMarkerPositions(), handleMarkerChanges);\n                    this._markers = markers;\n                    // add a handler for clicking in the globe\n                    this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                    this._globeClickhandler.setInputAction(function (movement) {\n                        var pickedObject = scene.pick(movement.position);\n                        if (!(pickedObject && pickedObject.primitive)) {\n                            _self.setEditMode(false);\n                        }\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                    // set on top of the polygon\n                    markers.setOnTop();\n                }\n                this._editMode = true;\n            } else {\n                if (this._markers != null) {\n                    this._markers.remove();\n                    this._markers = null;\n                    this._globeClickhandler.destroy();\n                }\n                this._editMode = false;\n            }\n        }\n    }, {\n        key: "getCircleCartesianCoordinates",\n        value: function getCircleCartesianCoordinates(granularity) {\n            var geometry = Cesium.CircleOutlineGeometry.createGeometry(new Cesium.CircleOutlineGeometry({\n                ellipsoid: _DefaultValue.ellipsoid,\n                center: this.getCenter(),\n                radius: this.getRadius(),\n                granularity: granularity\n            }));\n            var count = 0,\n                value,\n                values = [];\n            for (; count < geometry.attributes.position.values.length; count += 3) {\n                value = geometry.attributes.position.values;\n                values.push(new Cesium.Cartesian3(value[count], value[count + 1], value[count + 2]));\n            }\n            return values;\n        }\n    }]);\n\n    return CirclePrimitive;\n}(_ChangeablePrimitive2.ChangeablePrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0NpcmNsZVByaW1pdGl2ZS5qcz9kYThmIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkNpcmNsZVByaW1pdGl2ZSIsIm9wdGlvbnMiLCJkcmF3SGVscGVyIiwiX2RyYXdIZWxwZXIiLCJkZWZpbmVkIiwiY2VudGVyIiwicmFkaXVzIiwiRGV2ZWxvcGVyRXJyb3IiLCJkZWZhdWx0U3VyZmFjZU9wdGlvbnMiLCJpbml0aWFsaXNlT3B0aW9ucyIsInNldFJhZGl1cyIsInJlZ2lzdGVyRWRpdGFibGVTaGFwZSIsImV2ZW50c3lzdGVtIiwiRXZlbnRTeXN0ZW1JbnN0YW5jZSIsImdldEluc3RhbmNlIiwic2V0QXR0cmlidXRlIiwiTWF0aCIsIm1heCIsImdldEF0dHJpYnV0ZSIsIkNpcmNsZUdlb21ldHJ5IiwiaGVpZ2h0IiwidmVydGV4Rm9ybWF0IiwiRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2UiLCJWRVJURVhfRk9STUFUIiwic3RSb3RhdGlvbiIsInRleHR1cmVSb3RhdGlvbkFuZ2xlIiwiZWxsaXBzb2lkIiwiZ3JhbnVsYXJpdHkiLCJDaXJjbGVPdXRsaW5lR2VvbWV0cnkiLCJnZXRDZW50ZXIiLCJnZXRSYWRpdXMiLCJlZGl0TW9kZSIsImNpcmNsZSIsInNjZW5lIiwiX3NjZW5lIiwiZ2V0TWFya2VyUG9zaXRpb25zIiwiZ2V0Q2lyY2xlQ2FydGVzaWFuQ29vcmRpbmF0ZXMiLCJQSV9PVkVSX1RXTyIsIm9uRWRpdGVkIiwiZXhlY3V0ZUxpc3RlbmVycyIsIm5hbWUiLCJfZWRpdE1vZGUiLCJkaXNhYmxlQWxsSGlnaGxpZ2h0cyIsInNldEVkaXRlZCIsIl9zZWxmIiwiX21hcmtlcnMiLCJ0aGlzRHJhZ0JpbGxib2FyZCIsImRyYWdCaWxsYm9hcmQiLCJtYXJrZXJzIiwiQmlsbGJvYXJkR3JvdXAiLCJoYW5kbGVNYXJrZXJDaGFuZ2VzIiwiZHJhZ0hhbmRsZXJzIiwib25EcmFnIiwiaW5kZXgiLCJwb3NpdGlvbiIsIkNhcnRlc2lhbjMiLCJkaXN0YW5jZSIsInVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMiLCJvbkRyYWdFbmQiLCJ0b29sdGlwIiwiYWRkQmlsbGJvYXJkcyIsIl9nbG9iZUNsaWNraGFuZGxlciIsIlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyIiwiY2FudmFzIiwic2V0SW5wdXRBY3Rpb24iLCJtb3ZlbWVudCIsInBpY2tlZE9iamVjdCIsInBpY2siLCJwcmltaXRpdmUiLCJzZXRFZGl0TW9kZSIsIlNjcmVlblNwYWNlRXZlbnRUeXBlIiwiTEVGVF9DTElDSyIsInNldE9uVG9wIiwicmVtb3ZlIiwiZGVzdHJveSIsImdlb21ldHJ5IiwiY3JlYXRlR2VvbWV0cnkiLCJjb3VudCIsInZhbHVlIiwidmFsdWVzIiwiYXR0cmlidXRlcyIsImxlbmd0aCIsInB1c2giLCJDaGFuZ2VhYmxlUHJpbWl0aXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7QUFDWjs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztJQUdhQyxlLFdBQUFBLGU7OztBQUNULDZCQUFZQyxPQUFaLEVBQXFCQyxVQUFyQixFQUFpQztBQUFBOztBQUFBOztBQUU3QixjQUFLQyxXQUFMLEdBQW1CRCxVQUFuQjs7QUFFQSxZQUFJLEVBQUVILE9BQU9LLE9BQVAsQ0FBZUgsUUFBUUksTUFBdkIsS0FBa0NOLE9BQU9LLE9BQVAsQ0FBZUgsUUFBUUssTUFBdkIsQ0FBcEMsQ0FBSixFQUF5RTtBQUNyRSxrQkFBTSxJQUFJUCxPQUFPUSxjQUFYLENBQTBCLGdDQUExQixDQUFOO0FBQ0g7O0FBRUROLGtCQUFVLHVCQUFZQSxPQUFaLEVBQXFCTyxtQ0FBckIsQ0FBVjs7QUFFQSxjQUFLQyxpQkFBTCxDQUF1QlIsT0FBdkI7O0FBRUEsY0FBS1MsU0FBTCxDQUFlVCxRQUFRSyxNQUF2QjtBQUNBSixtQkFBV1MscUJBQVg7QUFDQTtBQUNBLFlBQUlDLGNBQWND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O0FBSjJFLGFBQWpDLENBQTVDLENBQWY7QUFNQSxnQkFBSWtELFFBQVEsQ0FBWjtBQUFBLGdCQUFlQyxLQUFmO0FBQUEsZ0JBQXNCQyxTQUFTLEVBQS9CO0FBQ0EsbUJBQU9GLFFBQVFGLFNBQVNLLFVBQVQsQ0FBb0IxQixRQUFwQixDQUE2QnlCLE1BQTdCLENBQW9DRSxNQUFuRCxFQUEyREosU0FBUyxDQUFwRSxFQUF1RTtBQUNuRUMsd0JBQVFILFNBQVNLLFVBQVQsQ0FBb0IxQixRQUFwQixDQUE2QnlCLE1BQXJDO0FBQ0FBLHVCQUFPRyxJQUFQLENBQVksSUFBSW5GLE9BQU93RCxVQUFYLENBQXNCdUIsTUFBTUQsS0FBTixDQUF0QixFQUFvQ0MsTUFBTUQsUUFBUSxDQUFkLENBQXBDLEVBQXNEQyxNQUFNRCxRQUFRLENBQWQsQ0FBdEQsQ0FBWjtBQUNIO0FBQ0QsbUJBQU9FLE1BQVA7QUFDSDs7OztFQWhKZ0NJLHlDIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtDaGFuZ2VhYmxlUHJpbWl0aXZlfSBmcm9tIFwiLi9DaGFuZ2VhYmxlUHJpbWl0aXZlXCI7XHJcbmltcG9ydCB7Y29weU9wdGlvbnN9IGZyb20gXCIuLi91dGlsL3V0aWxcIjtcclxuaW1wb3J0IHtkZWZhdWx0U3VyZmFjZU9wdGlvbnMsIGRyYWdCaWxsYm9hcmQsZWxsaXBzb2lkfSBmcm9tIFwiLi4vY29uc3RhbnQvRGVmYXVsdFZhbHVlXCI7XHJcbmltcG9ydCB7ZW5oYW5jZVdpdGhMaXN0ZW5lcnN9IGZyb20gXCIuLi91dGlsL0V2ZW50SGVscGVyXCI7XHJcbmltcG9ydCB7RXZlbnRTeXN0ZW1JbnN0YW5jZX0gZnJvbSBcIi4uLy4uLy4uXCI7XHJcbmltcG9ydCB7QmlsbGJvYXJkR3JvdXB9IGZyb20gXCIuL0JpbGxib2FyZEdyb3VwXCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENpcmNsZVByaW1pdGl2ZSBleHRlbmRzIENoYW5nZWFibGVQcmltaXRpdmUge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgZHJhd0hlbHBlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcblxyXG4gICAgICAgIGlmICghKENlc2l1bS5kZWZpbmVkKG9wdGlvbnMuY2VudGVyKSAmJiBDZXNpdW0uZGVmaW5lZChvcHRpb25zLnJhZGl1cykpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ0NlbnRlciBhbmQgcmFkaXVzIGFyZSByZXF1aXJlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRTdXJmYWNlT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGlzZU9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UmFkaXVzKG9wdGlvbnMucmFkaXVzKTtcclxuICAgICAgICBkcmF3SGVscGVyLnJlZ2lzdGVyRWRpdGFibGVTaGFwZSh0aGlzKTtcclxuICAgICAgICBlbmhhbmNlV2l0aExpc3RlbmVycyh0aGlzKTtcclxuICAgICAgICBsZXQgZXZlbnRzeXN0ZW0gPSBFdmVudFN5c3RlbUluc3RhbmNlLmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2VudGVyKGNlbnRlcikge1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjZW50ZXInLCBjZW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJhZGl1cyhyYWRpdXMpIHtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgncmFkaXVzJywgTWF0aC5tYXgoMC4xLCByYWRpdXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZW50ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdjZW50ZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSYWRpdXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdyYWRpdXMnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHZW9tZXRyeSgpIHtcclxuXHJcbiAgICAgICAgaWYgKCEoQ2VzaXVtLmRlZmluZWQodGhpcy5jZW50ZXIpICYmIENlc2l1bS5kZWZpbmVkKHRoaXMucmFkaXVzKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uQ2lyY2xlR2VvbWV0cnkoe1xyXG4gICAgICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLFxyXG4gICAgICAgICAgICByYWRpdXM6IHRoaXMucmFkaXVzLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5FbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZS5WRVJURVhfRk9STUFULFxyXG4gICAgICAgICAgICBzdFJvdGF0aW9uOiB0aGlzLnRleHR1cmVSb3RhdGlvbkFuZ2xlLFxyXG4gICAgICAgICAgICBlbGxpcHNvaWQ6IHRoaXMuZWxsaXBzb2lkLFxyXG4gICAgICAgICAgICBncmFudWxhcml0eTogdGhpcy5ncmFudWxhcml0eVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRPdXRsaW5lR2VvbWV0cnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgY2VudGVyOiB0aGlzLmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICByYWRpdXM6IHRoaXMuZ2V0UmFkaXVzKClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFZGl0TW9kZShlZGl0TW9kZSA9IHRydWUpIHtcclxuICAgICAgICB2YXIgZHJhd0hlbHBlciA9IHRoaXMuX2RyYXdIZWxwZXI7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG4gICAgICAgIGNvbnN0IGdldE1hcmtlclBvc2l0aW9ucyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2lyY2xlQ2FydGVzaWFuQ29vcmRpbmF0ZXMoQ2VzaXVtLk1hdGguUElfT1ZFUl9UV08pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb25FZGl0ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUxpc3RlbmVycyh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnb25FZGl0ZWQnLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyOiB0aGlzLmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiB0aGlzLmdldFJhZGl1cygpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRNb2RlID09IGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRyYXdIZWxwZXIuZGlzYWJsZUFsbEhpZ2hsaWdodHMoKTtcclxuICAgICAgICAvLyBkaXNwbGF5IG1hcmtlcnNcclxuICAgICAgICBpZiAoZWRpdE1vZGUpIHtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICAgICAgZHJhd0hlbHBlci5zZXRFZGl0ZWQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbWFya2VycyBhbmQgaGFuZGxlcnMgZm9yIHRoZSBlZGl0aW5nXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzRHJhZ0JpbGxib2FyZCA9IHRoaXMuZHJhZ0JpbGxib2FyZCA/IHRoaXMuZHJhZ0JpbGxib2FyZCA6IGRyYWdCaWxsYm9hcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBuZXcgQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlciwgdGhpc0RyYWdCaWxsYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVNYXJrZXJDaGFuZ2VzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYWdIYW5kbGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZS5zZXRSYWRpdXMoQ2VzaXVtLkNhcnRlc2lhbjMuZGlzdGFuY2UoY2lyY2xlLmdldENlbnRlcigpLCBwb3NpdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy51cGRhdGVCaWxsYm9hcmRzUG9zaXRpb25zKGdldE1hcmtlclBvc2l0aW9ucygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRyYWcgdG8gY2hhbmdlIHRoZSByYWRpdXNcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmRzKGdldE1hcmtlclBvc2l0aW9ucygpLCBoYW5kbGVNYXJrZXJDaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlcnMgPSBtYXJrZXJzO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGEgaGFuZGxlciBmb3IgY2xpY2tpbmcgaW4gdGhlIGdsb2JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIoc2NlbmUuY2FudmFzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBzY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGlja2VkT2JqZWN0ICYmIHBpY2tlZE9iamVjdC5wcmltaXRpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRFZGl0TW9kZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IG9uIHRvcCBvZiB0aGUgcG9seWdvblxyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5zZXRPblRvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRNb2RlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2lyY2xlQ2FydGVzaWFuQ29vcmRpbmF0ZXMoZ3JhbnVsYXJpdHkpIHtcclxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5KG5ldyBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgZWxsaXBzb2lkOiBlbGxpcHNvaWQsXHJcbiAgICAgICAgICAgIGNlbnRlcjogdGhpcy5nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgcmFkaXVzOiB0aGlzLmdldFJhZGl1cygpLFxyXG4gICAgICAgICAgICBncmFudWxhcml0eTogZ3JhbnVsYXJpdHlcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMCwgdmFsdWUsIHZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoOyBjb3VudCA8IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzLmxlbmd0aDsgY291bnQgKz0gMykge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChuZXcgQ2VzaXVtLkNhcnRlc2lhbjModmFsdWVbY291bnRdLCB2YWx1ZVtjb3VudCArIDFdLCB2YWx1ZVtjb3VudCArIDJdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgICB9XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolygonPrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ChangeablePrimitive = __webpack_require__(6);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _PolySharpPrimitive2 = __webpack_require__(9);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolygonPrimitive = exports.PolygonPrimitive = function (_PolySharpPrimitive) {\n    _inherits(PolygonPrimitive, _PolySharpPrimitive);\n\n    function PolygonPrimitive(options, drawHelper) {\n        _classCallCheck(this, PolygonPrimitive);\n\n        var _this = _possibleConstructorReturn(this, (PolygonPrimitive.__proto__ || Object.getPrototypeOf(PolygonPrimitive)).call(this));\n\n        options = (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions);\n\n        _this._drawHelper = drawHelper;\n\n        _this.initialiseOptions(options);\n\n        _this.isPolygon = true;\n        drawHelper.registerEditableShape(_this);\n        (0, _EventHelper.enhanceWithListeners)(_this);\n\n        return _this;\n    }\n\n    _createClass(PolygonPrimitive, [{\n        key: "setPositions",\n        value: function setPositions(positions) {\n            this.setAttribute(\'positions\', positions);\n        }\n    }, {\n        key: "getPositions",\n        value: function getPositions() {\n            return this.getAttribute(\'positions\');\n        }\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n            if (!Cesium.defined(this.positions) || this.positions.length < 3) {\n                return;\n            }\n\n            return Cesium.PolygonGeometry.fromPositions({\n                positions: this.positions,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        }\n    }, {\n        key: "getOutlineGeometry",\n        value: function getOutlineGeometry() {\n            return Cesium.PolygonOutlineGeometry.fromPositions({\n                positions: this.getPositions()\n            });\n        }\n    }]);\n\n    return PolygonPrimitive;\n}(_PolySharpPrimitive2.PolySharpPrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL1BvbHlnb25QcmltaXRpdmUuanM/MWY2NyJdLCJuYW1lcyI6WyJDZXNpdW0iLCJQb2x5Z29uUHJpbWl0aXZlIiwib3B0aW9ucyIsImRyYXdIZWxwZXIiLCJkZWZhdWx0U3VyZmFjZU9wdGlvbnMiLCJfZHJhd0hlbHBlciIsImluaXRpYWxpc2VPcHRpb25zIiwiaXNQb2x5Z29uIiwicmVnaXN0ZXJFZGl0YWJsZVNoYXBlIiwicG9zaXRpb25zIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiZGVmaW5lZCIsImxlbmd0aCIsIlBvbHlnb25HZW9tZXRyeSIsImZyb21Qb3NpdGlvbnMiLCJoZWlnaHQiLCJ2ZXJ0ZXhGb3JtYXQiLCJFbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZSIsIlZFUlRFWF9GT1JNQVQiLCJzdFJvdGF0aW9uIiwidGV4dHVyZVJvdGF0aW9uQW5nbGUiLCJlbGxpcHNvaWQiLCJncmFudWxhcml0eSIsIlBvbHlnb25PdXRsaW5lR2VvbWV0cnkiLCJnZXRQb3NpdGlvbnMiLCJQb2x5U2hhcnBQcmltaXRpdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7O0lBR2FDLGdCLFdBQUFBLGdCOzs7QUFDVCw4QkFBWUMsT0FBWixFQUFvQkMsVUFBcEIsRUFBZ0M7QUFBQTs7QUFBQTs7QUFFNUJELGtCQUFVLHVCQUFZQSxPQUFaLEVBQXFCRSxtQ0FBckIsQ0FBVjs7QUFFQSxjQUFLQyxXQUFMLEdBQW1CRixVQUFuQjs7QUFFQSxjQUFLRyxpQkFBTCxDQUF1QkosT0FBdkI7O0FBRUEsY0FBS0ssU0FBTCxHQUFpQixJQUFqQjtBQUNBSixtQkFBV0sscUJBQVg7QUFDQTs7QUFWNEI7QUFZL0I7Ozs7cUNBRVlDLFMsRUFBVztBQUNwQixpQkFBS0MsWUFBTCxDQUFrQixXQUFsQixFQUErQkQsU0FBL0I7QUFDSDs7O3VDQUVjO0FBQ1gsbUJBQU8sS0FBS0UsWUFBTCxDQUFrQixXQUFsQixDQUFQO0FBQ0g7OztzQ0FFYTtBQUNWLGdCQUFJLENBQUNYLE9BQU9ZLE9BQVAsQ0FBZSxLQUFLSCxTQUFwQixDQUFELElBQW1DLEtBQUtBLFNBQUwsQ0FBZUksTUFBZixHQUF3QixDQUEvRCxFQUFrRTtBQUM5RDtBQUNIOztBQUVELG1CQUFPYixPQUFPYyxlQUFQLENBQXVCQyxhQUF2QixDQUFxQztBQUN4Q04sMkJBQVcsS0FBS0EsU0FEd0I7QUFFeENPLHdCQUFRLEtBQUtBLE1BRjJCO0FBR3hDQyw4QkFBY2pCLE9BQU9rQiwwQkFBUCxDQUFrQ0MsYUFIUjtBQUl4Q0MsNEJBQVksS0FBS0Msb0JBSnVCO0FBS3hDQywyQkFBVyxLQUFLQSxTQUx3QjtBQU14Q0MsNkJBQWEsS0FBS0E7QUFOc0IsYUFBckMsQ0FBUDtBQVFIOzs7NkNBRW9CO0FBQ2pCLG1CQUFPdkIsT0FBT3dCLHNCQUFQLENBQThCVCxhQUE5QixDQUE0QztBQUMvQ04sMkJBQVcsS0FBS2dCLFlBQUw7QUFEb0MsYUFBNUMsQ0FBUDtBQUdIOzs7O0VBMUNpQ0MsdUMiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge0NoYW5nZWFibGVQcmltaXRpdmV9IGZyb20gXCIuL0NoYW5nZWFibGVQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiO1xyXG5pbXBvcnQge2RlZmF1bHRTdXJmYWNlT3B0aW9ucyxlbGxpcHNvaWR9IGZyb20gXCIuLi9jb25zdGFudC9EZWZhdWx0VmFsdWVcIjtcclxuaW1wb3J0IHtlbmhhbmNlV2l0aExpc3RlbmVyc30gZnJvbSBcIi4uL3V0aWwvRXZlbnRIZWxwZXJcIjtcclxuaW1wb3J0IHtQb2x5U2hhcnBQcmltaXRpdmV9IGZyb20gXCIuL1BvbHlTaGFycFByaW1pdGl2ZVwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uUHJpbWl0aXZlIGV4dGVuZHMgUG9seVNoYXJwUHJpbWl0aXZlIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsZHJhd0hlbHBlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRTdXJmYWNlT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RyYXdIZWxwZXIgPSBkcmF3SGVscGVyO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxpc2VPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmlzUG9seWdvbiA9IHRydWU7XHJcbiAgICAgICAgZHJhd0hlbHBlci5yZWdpc3RlckVkaXRhYmxlU2hhcGUodGhpcyk7XHJcbiAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnModGhpcyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFBvc2l0aW9ucyhwb3NpdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb25zJywgcG9zaXRpb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0UG9zaXRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgncG9zaXRpb25zJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldEdlb21ldHJ5KCkge1xyXG4gICAgICAgIGlmICghQ2VzaXVtLmRlZmluZWQodGhpcy5wb3NpdGlvbnMpIHx8IHRoaXMucG9zaXRpb25zLmxlbmd0aCA8IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIENlc2l1bS5Qb2x5Z29uR2VvbWV0cnkuZnJvbVBvc2l0aW9ucyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uczogdGhpcy5wb3NpdGlvbnMsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQsXHJcbiAgICAgICAgICAgIHN0Um90YXRpb246IHRoaXMudGV4dHVyZVJvdGF0aW9uQW5nbGUsXHJcbiAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWQsXHJcbiAgICAgICAgICAgIGdyYW51bGFyaXR5OiB0aGlzLmdyYW51bGFyaXR5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldE91dGxpbmVHZW9tZXRyeSgpIHtcclxuICAgICAgICByZXR1cm4gQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkuZnJvbVBvc2l0aW9ucyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uczogdGhpcy5nZXRQb3NpdGlvbnMoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolylinePrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ChangeablePrimitive = __webpack_require__(6);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _PolySharpPrimitive2 = __webpack_require__(9);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolylinePrimitive = exports.PolylinePrimitive = function (_PolySharpPrimitive) {\n    _inherits(PolylinePrimitive, _PolySharpPrimitive);\n\n    function PolylinePrimitive(options, drawHelper) {\n        _classCallCheck(this, PolylinePrimitive);\n\n        var _this = _possibleConstructorReturn(this, (PolylinePrimitive.__proto__ || Object.getPrototypeOf(PolylinePrimitive)).call(this));\n\n        _this._drawHelper = drawHelper;\n\n        options = (0, _util.copyOptions)(options, _DefaultValue.defaultPolylineOptions);\n        _this.initialiseOptions(options);\n        drawHelper.registerEditableShape(_this);\n        (0, _EventHelper.enhanceWithListeners)(_this);\n        return _this;\n    }\n\n    _createClass(PolylinePrimitive, [{\n        key: "setPositions",\n        value: function setPositions(positions) {\n            this.setAttribute(\'positions\', positions);\n        }\n    }, {\n        key: "setWidth",\n        value: function setWidth(width) {\n            this.setAttribute(\'width\', width);\n        }\n    }, {\n        key: "setGeodesic",\n        value: function setGeodesic(geodesic) {\n            this.setAttribute(\'geodesic\', geodesic);\n        }\n    }, {\n        key: "getPositions",\n        value: function getPositions() {\n            return this.getAttribute(\'positions\');\n        }\n    }, {\n        key: "getWidth",\n        value: function getWidth() {\n            return this.getAttribute(\'width\');\n        }\n    }, {\n        key: "getGeodesic",\n        value: function getGeodesic() {\n            return this.getAttribute(\'geodesic\');\n        }\n    }, {\n        key: "getGeodesic",\n        value: function getGeodesic(geodesic) {\n            return this.getAttribute(\'geodesic\');\n        }\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n\n            if (!Cesium.defined(this.positions) || this.positions.length < 2) {\n                return;\n            }\n\n            return new Cesium.PolylineGeometry({\n                positions: this.positions,\n                height: this.height,\n                width: this.width < 1 ? 1 : this.width,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                ellipsoid: this.ellipsoid\n            });\n        }\n    }, {\n        key: "setHighlighted",\n        value: function setHighlighted(highlighted) {\n            // disable if already in edit mode\n            if (this._editMode === true) {\n                return;\n            }\n            if (highlighted) {\n                this._drawHelper.setHighlighted(this);\n                this.setWidth(this.width * 2);\n            } else {\n                this.setWidth(this.width);\n            }\n        }\n    }, {\n        key: "getExtent",\n        value: function getExtent() {\n            return Cesium.Extent.fromCartographicArray(_DefaultValue.ellipsoid.cartesianArrayToCartographicArray(this.positions));\n        }\n    }]);\n\n    return PolylinePrimitive;\n}(_PolySharpPrimitive2.PolySharpPrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL1BvbHlsaW5lUHJpbWl0aXZlLmpzPzQ4MTgiXSwibmFtZXMiOlsiQ2VzaXVtIiwiUG9seWxpbmVQcmltaXRpdmUiLCJvcHRpb25zIiwiZHJhd0hlbHBlciIsIl9kcmF3SGVscGVyIiwiZGVmYXVsdFBvbHlsaW5lT3B0aW9ucyIsImluaXRpYWxpc2VPcHRpb25zIiwicmVnaXN0ZXJFZGl0YWJsZVNoYXBlIiwicG9zaXRpb25zIiwic2V0QXR0cmlidXRlIiwid2lkdGgiLCJnZW9kZXNpYyIsImdldEF0dHJpYnV0ZSIsImRlZmluZWQiLCJsZW5ndGgiLCJQb2x5bGluZUdlb21ldHJ5IiwiaGVpZ2h0IiwidmVydGV4Rm9ybWF0IiwiRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2UiLCJWRVJURVhfRk9STUFUIiwiZWxsaXBzb2lkIiwiaGlnaGxpZ2h0ZWQiLCJfZWRpdE1vZGUiLCJzZXRIaWdobGlnaHRlZCIsInNldFdpZHRoIiwiRXh0ZW50IiwiZnJvbUNhcnRvZ3JhcGhpY0FycmF5IiwiY2FydGVzaWFuQXJyYXlUb0NhcnRvZ3JhcGhpY0FycmF5IiwiUG9seVNoYXJwUHJpbWl0aXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7QUFDWjs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztJQUVhQyxpQixXQUFBQSxpQjs7O0FBQ1QsK0JBQVlDLE9BQVosRUFBb0JDLFVBQXBCLEVBQWdDO0FBQUE7O0FBQUE7O0FBRzVCLGNBQUtDLFdBQUwsR0FBbUJELFVBQW5COztBQUVBRCxrQkFBVSx1QkFBWUEsT0FBWixFQUFxQkcsb0NBQXJCLENBQVY7QUFDQSxjQUFLQyxpQkFBTCxDQUF1QkosT0FBdkI7QUFDQUMsbUJBQVdJLHFCQUFYO0FBQ0E7QUFSNEI7QUFTL0I7Ozs7cUNBRVlDLFMsRUFBVztBQUNwQixpQkFBS0MsWUFBTCxDQUFrQixXQUFsQixFQUErQkQsU0FBL0I7QUFDSDs7O2lDQUVRRSxLLEVBQU87QUFDWixpQkFBS0QsWUFBTCxDQUFrQixPQUFsQixFQUEyQkMsS0FBM0I7QUFDSDs7O29DQUVXQyxRLEVBQVU7QUFDbEIsaUJBQUtGLFlBQUwsQ0FBa0IsVUFBbEIsRUFBOEJFLFFBQTlCO0FBQ0g7Ozt1Q0FFYztBQUNYLG1CQUFPLEtBQUtDLFlBQUwsQ0FBa0IsV0FBbEIsQ0FBUDtBQUNIOzs7bUNBRVU7QUFDUCxtQkFBTyxLQUFLQSxZQUFMLENBQWtCLE9BQWxCLENBQVA7QUFDSDs7O3NDQUVhO0FBQ1YsbUJBQU8sS0FBS0EsWUFBTCxDQUFrQixVQUFsQixDQUFQO0FBQ0g7OztvQ0FFV0QsUSxFQUFVO0FBQ2xCLG1CQUFPLEtBQUtDLFlBQUwsQ0FBa0IsVUFBbEIsQ0FBUDtBQUNIOzs7c0NBRWE7O0FBRVYsZ0JBQUksQ0FBQ1osT0FBT2EsT0FBUCxDQUFlLEtBQUtMLFNBQXBCLENBQUQsSUFBbUMsS0FBS0EsU0FBTCxDQUFlTSxNQUFmLEdBQXdCLENBQS9ELEVBQWtFO0FBQzlEO0FBQ0g7O0FBRUQsbUJBQU8sSUFBSWQsT0FBT2UsZ0JBQVgsQ0FBNEI7QUFDL0JQLDJCQUFXLEtBQUtBLFNBRGU7QUFFL0JRLHdCQUFRLEtBQUtBLE1BRmtCO0FBRy9CTix1QkFBTyxLQUFLQSxLQUFMLEdBQWEsQ0FBYixHQUFpQixDQUFqQixHQUFxQixLQUFLQSxLQUhGO0FBSS9CTyw4QkFBY2pCLE9BQU9rQiwwQkFBUCxDQUFrQ0MsYUFKakI7QUFLL0JDLDJCQUFXLEtBQUtBO0FBTGUsYUFBNUIsQ0FBUDtBQU9IOzs7dUNBRWVDLFcsRUFBYTtBQUN6QjtBQUNBLGdCQUFJLEtBQUtDLFNBQUwsS0FBbUIsSUFBdkIsRUFBNkI7QUFDekI7QUFDSDtBQUNELGdCQUFJRCxXQUFKLEVBQWlCO0FBQ2IscUJBQUtqQixXQUFMLENBQWlCbUIsY0FBakIsQ0FBZ0MsSUFBaEM7QUFDQSxxQkFBS0MsUUFBTCxDQUFjLEtBQUtkLEtBQUwsR0FBYSxDQUEzQjtBQUNILGFBSEQsTUFHTztBQUNILHFCQUFLYyxRQUFMLENBQWMsS0FBS2QsS0FBbkI7QUFDSDtBQUNKOzs7b0NBRVU7QUFDUCxtQkFBT1YsT0FBT3lCLE1BQVAsQ0FBY0MscUJBQWQsQ0FBb0NOLHdCQUFVTyxpQ0FBVixDQUE0QyxLQUFLbkIsU0FBakQsQ0FBcEMsQ0FBUDtBQUNIOzs7O0VBdEVrQ29CLHVDIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtDaGFuZ2VhYmxlUHJpbWl0aXZlfSBmcm9tIFwiLi9DaGFuZ2VhYmxlUHJpbWl0aXZlXCI7XHJcbmltcG9ydCB7Y29weU9wdGlvbnN9IGZyb20gXCIuLi91dGlsL3V0aWxcIjtcclxuaW1wb3J0IHtkZWZhdWx0UG9seWxpbmVPcHRpb25zLGVsbGlwc29pZH0gZnJvbSBcIi4uL2NvbnN0YW50L0RlZmF1bHRWYWx1ZVwiO1xyXG5pbXBvcnQge2VuaGFuY2VXaXRoTGlzdGVuZXJzfSBmcm9tIFwiLi4vdXRpbC9FdmVudEhlbHBlclwiO1xyXG5pbXBvcnQge1BvbHlTaGFycFByaW1pdGl2ZX0gZnJvbSBcIi4vUG9seVNoYXJwUHJpbWl0aXZlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9seWxpbmVQcmltaXRpdmUgZXh0ZW5kcyBQb2x5U2hhcnBQcmltaXRpdmUge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyxkcmF3SGVscGVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0UG9seWxpbmVPcHRpb25zKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpc2VPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGRyYXdIZWxwZXIucmVnaXN0ZXJFZGl0YWJsZVNoYXBlKHRoaXMpO1xyXG4gICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBvc2l0aW9ucyhwb3NpdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb25zJywgcG9zaXRpb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgc2V0V2lkdGgod2lkdGgpIHtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNldEdlb2Rlc2ljKGdlb2Rlc2ljKSB7XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2dlb2Rlc2ljJywgZ2VvZGVzaWMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRQb3NpdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbnMnKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRHZW9kZXNpYygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2dlb2Rlc2ljJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldEdlb2Rlc2ljKGdlb2Rlc2ljKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdnZW9kZXNpYycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRHZW9tZXRyeSgpIHtcclxuXHJcbiAgICAgICAgaWYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLnBvc2l0aW9ucykgfHwgdGhpcy5wb3NpdGlvbnMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5Qb2x5bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgcG9zaXRpb25zOiB0aGlzLnBvc2l0aW9ucyxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGggPCAxID8gMSA6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQsXHJcbiAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRIaWdobGlnaHRlZCAoaGlnaGxpZ2h0ZWQpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIGlmIGFscmVhZHkgaW4gZWRpdCBtb2RlXHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRNb2RlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYXdIZWxwZXIuc2V0SGlnaGxpZ2h0ZWQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgodGhpcy53aWR0aCAqIDIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgodGhpcy53aWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEV4dGVudCgpe1xyXG4gICAgICAgIHJldHVybiBDZXNpdW0uRXh0ZW50LmZyb21DYXJ0b2dyYXBoaWNBcnJheShlbGxpcHNvaWQuY2FydGVzaWFuQXJyYXlUb0NhcnRvZ3JhcGhpY0FycmF5KHRoaXMucG9zaXRpb25zKSk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')},function(I,C,g){I.exports=g(3)},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.Cameras = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _OfficialUtils = __webpack_require__(12);\n\nvar _ = __webpack_require__(3);\n\nvar _NormalUtils = __webpack_require__(8);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n/**\r\n * @namespace Cameras\r\n */\nvar Cameras = exports.Cameras = function () {\n    function Cameras() {\n        _classCallCheck(this, Cameras);\n    }\n\n    _createClass(Cameras, null, [{\n        key: "getPositionAwayByCamara",\n\n        /**\r\n         * 获取一个目标点位向摄像头方向移动distance米的点位\r\n         * @param camera\r\n         * @param position\r\n         * @param distance\r\n         * @returns {*}\r\n         */\n        value: function getPositionAwayByCamara(camera, position, distance) {\n            var totalDistance = Cesium.Cartesian3.distance(camera.position, position, new Cesium.Cartesian3());\n            var subtract = Cesium.Cartesian3.subtract(camera.position, position, new Cesium.Cartesian3());\n            var add = Cesium.Cartesian3.multiplyByScalar(subtract, distance / totalDistance, new Cesium.Cartesian3());\n            return Cesium.Cartesian3.add(position, add, new Cesium.Cartesian3());\n        }\n\n        /**\r\n         *\r\n         * @param camera\r\n         * @param position 围绕的点位\r\n         * @param radius 围绕的半径\r\n         * @param second 转一圈的秒数\r\n         * @param increment 绕圈精度\r\n         * @param pitch 俯角\r\n         */\n\n    }, {\n        key: "flyAroundPosition",\n        value: function flyAroundPosition(camera, position, radius) {\n            var second = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 20;\n            var increment = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.1;\n            var pitch = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : -45;\n\n            var angles = (0, _OfficialUtils.computeCirclularAugle)(increment);\n            var index = 0;\n            var timeInterval = second * 1000 / angles.length;\n\n            var interval = setInterval(function () {\n                camera.lookAt(position, new Cesium.HeadingPitchRange(Cesium.Math.toRadians(angles[index]), Cesium.Math.toRadians(pitch), radius));\n                camera.lookAtTransform(Cesium.Matrix4.IDENTITY); //勉强确保摄像头坐标系正确\n                index = ++index % angles.length;\n            }, timeInterval);\n\n            return function () {\n                clearInterval(interval);\n                camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n            };\n        }\n\n        /**\r\n         * 类似于Camera.lookAt\r\n         * 第三个参数是 Cesium.HeadingPitchRange\r\n         * @param camera\r\n         * @param position 面向的点位\r\n         * @param config 俯仰角配置\r\n         * @param config.heading\r\n         * @param config.pitch 俯仰角\r\n         * @param config.range 距离\r\n         * @param complete 飞行完成回调\r\n         * @param cancel 飞行取消回调\r\n         */\n\n    }, {\n        key: "flyAt",\n        value: function flyAt(camera, position) {\n            var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref$heading = _ref.heading,\n                heading = _ref$heading === undefined ? 0 : _ref$heading,\n                _ref$pitch = _ref.pitch,\n                pitch = _ref$pitch === undefined ? 0 : _ref$pitch,\n                _ref$range = _ref.range,\n                range = _ref$range === undefined ? 50 : _ref$range;\n\n            var complete = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n            var cancel = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};\n\n            pitch = Cesium.Math.toRadians(pitch);\n            heading = Cesium.Math.toRadians(heading);\n\n            // let x = Math.sqrt(1 / (Math.pow(Math.tan(-pitch), 2) + 1) / (1 + Math.pow(Math.tan(-heading), 2)));\n            // // let y = Math.sqrt(1 / (Math.pow(Math.tan(-pitch), 2) + 1) / (1 / (Math.pow(Math.tan(-heading), 2) + 1)));\n            // let z = Math.sqrt(Math.pow(Math.tan(-pitch), 2) / (Math.pow(Math.tan(-pitch), 2) + 1));\n            // let y = Math.sqrt(1 - Math.pow(x, 2) - (Math.pow(z, 2)));\n            // let relativePosition = Cesium.Cartesian3.multiplyByScalar(new Cesium.Cartesian3(x, y, z), range, new Cesium.Cartesian3());\n\n            var rotationTranslation = Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(heading + Math.PI / 2, -pitch, 0)));\n            var relativePosition = Cesium.Matrix4.multiplyByPoint(rotationTranslation, new Cesium.Cartesian3(range, 0, 0), new Cesium.Cartesian3());\n\n            var earthTransform = Cesium.Transforms.eastNorthUpToFixedFrame(position, Cesium.Ellipsoid.WGS84, new Cesium.Matrix4());\n            var cameraPosition = Cesium.Matrix4.multiplyByPoint(earthTransform, relativePosition, new Cesium.Cartesian3());\n\n            camera.flyTo({\n                destination: cameraPosition,\n                orientation: {\n                    heading: heading,\n                    pitch: pitch,\n                    roll: 0.0\n                },\n                complete: complete,\n                cancel: cancel\n            });\n        }\n\n        /**\r\n         *  保存当前摄像头的位置\r\n         * @param camera\r\n         * @returns {string} uri编码后的数据\r\n         */\n\n    }, {\n        key: "saveCameraStatus",\n        value: function saveCameraStatus(camera) {\n            var data = {\n                position: camera.position,\n                heading: camera.heading,\n                pitch: camera.pitch,\n                roll: camera.roll\n            };\n            var dataCompress = [data.position.x.toFixed(2), data.position.y.toFixed(2), data.position.z.toFixed(2), data.heading.toFixed(2), data.pitch.toFixed(2), data.roll.toFixed(2)];\n\n            return encodeURIComponent(dataCompress.join(","));\n        }\n\n        /**\r\n         * 加载\r\n         * @param camera\r\n         * @param data\r\n         * @param isFly\r\n         */\n\n    }, {\n        key: "loadCameraStatus",\n        value: function loadCameraStatus(camera, data) {\n            var isFly = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n            var errorCallback = arguments[3];\n\n            try {\n                var dataCompress = decodeURIComponent(data).split(",");\n\n                if ((0, _NormalUtils.defined)(dataCompress) && dataCompress.length >= 6) {\n                    var target = {\n                        destination: {\n                            x: parseFloat(dataCompress[0]),\n                            y: parseFloat(dataCompress[1]),\n                            z: parseFloat(dataCompress[2])\n                        },\n                        orientation: {\n                            heading: parseFloat(dataCompress[3]),\n                            pitch: parseFloat(dataCompress[4]),\n                            roll: parseFloat(dataCompress[5])\n                        }\n                    };\n                    if (isFly) {\n                        camera.flyTo(target);\n                    } else {\n                        camera.setView(target);\n                    }\n                } else throw "not define position| heading | pitch | roll";\n            } catch (e) {\n                console.error(e);\n                if (typeof errorCallback === \'function\') errorCallback(e);\n            }\n        }\n    }]);\n\n    return Cameras;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvU2NlbmUvQ2FtZXJhcy5qcz8yNWQ2Il0sIm5hbWVzIjpbIkNlc2l1bSIsIkNhbWVyYXMiLCJjYW1lcmEiLCJwb3NpdGlvbiIsImRpc3RhbmNlIiwidG90YWxEaXN0YW5jZSIsIkNhcnRlc2lhbjMiLCJzdWJ0cmFjdCIsImFkZCIsIm11bHRpcGx5QnlTY2FsYXIiLCJyYWRpdXMiLCJzZWNvbmQiLCJpbmNyZW1lbnQiLCJwaXRjaCIsImFuZ2xlcyIsImluZGV4IiwidGltZUludGVydmFsIiwibGVuZ3RoIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImxvb2tBdCIsIkhlYWRpbmdQaXRjaFJhbmdlIiwiTWF0aCIsInRvUmFkaWFucyIsImxvb2tBdFRyYW5zZm9ybSIsIk1hdHJpeDQiLCJJREVOVElUWSIsImNsZWFySW50ZXJ2YWwiLCJoZWFkaW5nIiwicmFuZ2UiLCJjb21wbGV0ZSIsImNhbmNlbCIsInJvdGF0aW9uVHJhbnNsYXRpb24iLCJmcm9tUm90YXRpb25UcmFuc2xhdGlvbiIsIk1hdHJpeDMiLCJmcm9tSGVhZGluZ1BpdGNoUm9sbCIsIkhlYWRpbmdQaXRjaFJvbGwiLCJQSSIsInJlbGF0aXZlUG9zaXRpb24iLCJtdWx0aXBseUJ5UG9pbnQiLCJlYXJ0aFRyYW5zZm9ybSIsIlRyYW5zZm9ybXMiLCJlYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZSIsIkVsbGlwc29pZCIsIldHUzg0IiwiY2FtZXJhUG9zaXRpb24iLCJmbHlUbyIsImRlc3RpbmF0aW9uIiwib3JpZW50YXRpb24iLCJyb2xsIiwiZGF0YSIsImRhdGFDb21wcmVzcyIsIngiLCJ0b0ZpeGVkIiwieSIsInoiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiaXNGbHkiLCJlcnJvckNhbGxiYWNrIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic3BsaXQiLCJ0YXJnZXQiLCJwYXJzZUZsb2F0Iiwic2V0VmlldyIsImUiLCJjb25zb2xlIiwiZXJyb3IiXSwi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QWVGLE1BQWY7QUFDSDtBQUNKLGlCQWxCRCxNQWtCTyxNQUFNLDZDQUFOO0FBQ1YsYUF0QkQsQ0FzQkUsT0FBT0csQ0FBUCxFQUFVO0FBQ1JDLHdCQUFRQyxLQUFSLENBQWNGLENBQWQ7QUFDQSxvQkFBSSxPQUFPTixhQUFQLEtBQXlCLFVBQTdCLEVBQXlDQSxjQUFjTSxDQUFkO0FBQzVDO0FBQ0oiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge2NvbXB1dGVDaXJjbHVsYXJBdWdsZX0gZnJvbSBcIi4uL1V0aWwvT2ZmaWNpYWxVdGlsc1wiXHJcbmltcG9ydCB7Q2FydGVzaWFuM3N9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQge2RlZmluZWR9IGZyb20gXCIuLi9VdGlsL05vcm1hbFV0aWxzXCJcclxuXHJcbi8qKlxyXG4gKiBAbmFtZXNwYWNlIENhbWVyYXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDYW1lcmFzIHtcclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiA5Liq55uu5qCH54K55L2N5ZCR5pGE5YOP5aS05pa55ZCR56e75YqoZGlzdGFuY2XnsbPnmoTngrnkvY1cclxuICAgICAqIEBwYXJhbSBjYW1lcmFcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvblxyXG4gICAgICogQHBhcmFtIGRpc3RhbmNlXHJcbiAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFBvc2l0aW9uQXdheUJ5Q2FtYXJhKGNhbWVyYSwgcG9zaXRpb24sIGRpc3RhbmNlKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsRGlzdGFuY2UgPSBDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShjYW1lcmEucG9zaXRpb24sIHBvc2l0aW9uLCBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKSk7XHJcbiAgICAgICAgbGV0IHN1YnRyYWN0ID0gQ2VzaXVtLkNhcnRlc2lhbjMuc3VidHJhY3QoY2FtZXJhLnBvc2l0aW9uLCBwb3NpdGlvbiwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCkpO1xyXG4gICAgICAgIGxldCBhZGQgPSBDZXNpdW0uQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKHN1YnRyYWN0LCBkaXN0YW5jZSAvIHRvdGFsRGlzdGFuY2UsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcclxuICAgICAgICByZXR1cm4gQ2VzaXVtLkNhcnRlc2lhbjMuYWRkKHBvc2l0aW9uLCBhZGQsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYW1lcmFcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiDlm7Tnu5XnmoTngrnkvY1cclxuICAgICAqIEBwYXJhbSByYWRpdXMg5Zu057uV55qE5Y2K5b6EXHJcbiAgICAgKiBAcGFyYW0gc2Vjb25kIOi9rOS4gOWciOeahOenkuaVsFxyXG4gICAgICogQHBhcmFtIGluY3JlbWVudCDnu5XlnIjnsr7luqZcclxuICAgICAqIEBwYXJhbSBwaXRjaCDkv6/op5JcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZseUFyb3VuZFBvc2l0aW9uKGNhbWVyYSwgcG9zaXRpb24sIHJhZGl1cywgc2Vjb25kID0gMjAsIGluY3JlbWVudCA9IDAuMSwgcGl0Y2ggPSAtNDUpIHtcclxuICAgICAgICBsZXQgYW5nbGVzID0gY29tcHV0ZUNpcmNsdWxhckF1Z2xlKGluY3JlbWVudCk7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBsZXQgdGltZUludGVydmFsID0gc2Vjb25kICogMTAwMCAvIGFuZ2xlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChwb3NpdGlvbiwgbmV3IENlc2l1bS5IZWFkaW5nUGl0Y2hSYW5nZShDZXNpdW0uTWF0aC50b1JhZGlhbnMoYW5nbGVzW2luZGV4XSksIENlc2l1bS5NYXRoLnRvUmFkaWFucyhwaXRjaCksIHJhZGl1cykpXHJcbiAgICAgICAgICAgIGNhbWVyYS5sb29rQXRUcmFuc2Zvcm0oQ2VzaXVtLk1hdHJpeDQuSURFTlRJVFkpOy8v5YuJ5by656Gu5L+d5pGE5YOP5aS05Z2Q5qCH57O75q2j56GuXHJcbiAgICAgICAgICAgIGluZGV4ID0gKCsraW5kZXgpICUgYW5nbGVzLmxlbmd0aDtcclxuICAgICAgICB9LCB0aW1lSW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgY2FtZXJhLmxvb2tBdFRyYW5zZm9ybShDZXNpdW0uTWF0cml4NC5JREVOVElUWSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57G75Ly85LqOQ2FtZXJhLmxvb2tBdFxyXG4gICAgICog56ys5LiJ5Liq5Y+C5pWw5pivIENlc2l1bS5IZWFkaW5nUGl0Y2hSYW5nZVxyXG4gICAgICogQHBhcmFtIGNhbWVyYVxyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIOmdouWQkeeahOeCueS9jVxyXG4gICAgICogQHBhcmFtIGNvbmZpZyDkv6/ku7Dop5LphY3nva5cclxuICAgICAqIEBwYXJhbSBjb25maWcuaGVhZGluZ1xyXG4gICAgICogQHBhcmFtIGNvbmZpZy5waXRjaCDkv6/ku7Dop5JcclxuICAgICAqIEBwYXJhbSBjb25maWcucmFuZ2Ug6Led56a7XHJcbiAgICAgKiBAcGFyYW0gY29tcGxldGUg6aOe6KGM5a6M5oiQ5Zue6LCDXHJcbiAgICAgKiBAcGFyYW0gY2FuY2VsIOmjnuihjOWPlua2iOWbnuiwg1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmx5QXQoY2FtZXJhLCBwb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgICAgICBoZWFkaW5nID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgcGl0Y2ggPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDUwLFxyXG4gICAgICAgICAgICAgICAgIH0gPSB7fSxcclxuICAgICAgICAgICAgICAgICBjb21wbGV0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgIGNhbmNlbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICB9KSB7XHJcbiAgICAgICAgcGl0Y2ggPSBDZXNpdW0uTWF0aC50b1JhZGlhbnMocGl0Y2gpO1xyXG4gICAgICAgIGhlYWRpbmcgPSBDZXNpdW0uTWF0aC50b1JhZGlhbnMoaGVhZGluZyk7XHJcblxyXG4gICAgICAgIC8vIGxldCB4ID0gTWF0aC5zcXJ0KDEgLyAoTWF0aC5wb3coTWF0aC50YW4oLXBpdGNoKSwgMikgKyAxKSAvICgxICsgTWF0aC5wb3coTWF0aC50YW4oLWhlYWRpbmcpLCAyKSkpO1xyXG4gICAgICAgIC8vIC8vIGxldCB5ID0gTWF0aC5zcXJ0KDEgLyAoTWF0aC5wb3coTWF0aC50YW4oLXBpdGNoKSwgMikgKyAxKSAvICgxIC8gKE1hdGgucG93KE1hdGgudGFuKC1oZWFkaW5nKSwgMikgKyAxKSkpO1xyXG4gICAgICAgIC8vIGxldCB6ID0gTWF0aC5zcXJ0KE1hdGgucG93KE1hdGgudGFuKC1waXRjaCksIDIpIC8gKE1hdGgucG93KE1hdGgudGFuKC1waXRjaCksIDIpICsgMSkpO1xyXG4gICAgICAgIC8vIGxldCB5ID0gTWF0aC5zcXJ0KDEgLSBNYXRoLnBvdyh4LCAyKSAtIChNYXRoLnBvdyh6LCAyKSkpO1xyXG4gICAgICAgIC8vIGxldCByZWxhdGl2ZVBvc2l0aW9uID0gQ2VzaXVtLkNhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoeCwgeSwgeiksIHJhbmdlLCBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKSk7XHJcblxyXG4gICAgICAgIGxldCByb3RhdGlvblRyYW5zbGF0aW9uID0gQ2VzaXVtLk1hdHJpeDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24oQ2VzaXVtLk1hdHJpeDMuZnJvbUhlYWRpbmdQaXRjaFJvbGwobmV3IENlc2l1bS5IZWFkaW5nUGl0Y2hSb2xsKGhlYWRpbmcgKyBNYXRoLlBJIC8gMiwgLXBpdGNoLCAwKSkpO1xyXG4gICAgICAgIGxldCByZWxhdGl2ZVBvc2l0aW9uID0gQ2VzaXVtLk1hdHJpeDQubXVsdGlwbHlCeVBvaW50KHJvdGF0aW9uVHJhbnNsYXRpb24sIG5ldyBDZXNpdW0uQ2FydGVzaWFuMyhyYW5nZSwgMCwgMCksIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcclxuXHJcbiAgICAgICAgbGV0IGVhcnRoVHJhbnNmb3JtID0gQ2VzaXVtLlRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUocG9zaXRpb24sIENlc2l1bS5FbGxpcHNvaWQuV0dTODQsIG5ldyBDZXNpdW0uTWF0cml4NCgpKTtcclxuICAgICAgICBsZXQgY2FtZXJhUG9zaXRpb24gPSBDZXNpdW0uTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQoZWFydGhUcmFuc2Zvcm0sIHJlbGF0aXZlUG9zaXRpb24sIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcclxuXHJcbiAgICAgICAgY2FtZXJhLmZseVRvKHtcclxuICAgICAgICAgICAgZGVzdGluYXRpb246IGNhbWVyYVBvc2l0aW9uLFxyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgaGVhZGluZzogaGVhZGluZyxcclxuICAgICAgICAgICAgICAgIHBpdGNoOiBwaXRjaCxcclxuICAgICAgICAgICAgICAgIHJvbGw6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogY29tcGxldGUsXHJcbiAgICAgICAgICAgIGNhbmNlbDogY2FuY2VsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg5L+d5a2Y5b2T5YmN5pGE5YOP5aS055qE5L2N572uXHJcbiAgICAgKiBAcGFyYW0gY2FtZXJhXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB1cmnnvJbnoIHlkI7nmoTmlbDmja5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNhdmVDYW1lcmFTdGF0dXMoY2FtZXJhKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBjYW1lcmEucG9zaXRpb24sXHJcbiAgICAgICAgICAgIGhlYWRpbmc6IGNhbWVyYS5oZWFkaW5nLFxyXG4gICAgICAgICAgICBwaXRjaDogY2FtZXJhLnBpdGNoLFxyXG4gICAgICAgICAgICByb2xsOiBjYW1lcmEucm9sbCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkYXRhQ29tcHJlc3MgPSBbXHJcbiAgICAgICAgICAgIGRhdGEucG9zaXRpb24ueC50b0ZpeGVkKDIpLFxyXG4gICAgICAgICAgICBkYXRhLnBvc2l0aW9uLnkudG9GaXhlZCgyKSxcclxuICAgICAgICAgICAgZGF0YS5wb3NpdGlvbi56LnRvRml4ZWQoMiksXHJcbiAgICAgICAgICAgIGRhdGEuaGVhZGluZy50b0ZpeGVkKDIpLFxyXG4gICAgICAgICAgICBkYXRhLnBpdGNoLnRvRml4ZWQoMiksXHJcbiAgICAgICAgICAgIGRhdGEucm9sbC50b0ZpeGVkKDIpXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFDb21wcmVzcy5qb2luKFwiLFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb1cclxuICAgICAqIEBwYXJhbSBjYW1lcmFcclxuICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgKiBAcGFyYW0gaXNGbHlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxvYWRDYW1lcmFTdGF0dXMoY2FtZXJhLCBkYXRhLCBpc0ZseSA9IGZhbHNlLCBlcnJvckNhbGxiYWNrKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGRhdGFDb21wcmVzcyA9IGRlY29kZVVSSUNvbXBvbmVudChkYXRhKS5zcGxpdChcIixcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVmaW5lZChkYXRhQ29tcHJlc3MpICYmIGRhdGFDb21wcmVzcy5sZW5ndGggPj0gNikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBwYXJzZUZsb2F0KGRhdGFDb21wcmVzc1swXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHBhcnNlRmxvYXQoZGF0YUNvbXByZXNzWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgejogcGFyc2VGbG9hdChkYXRhQ29tcHJlc3NbMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiBwYXJzZUZsb2F0KGRhdGFDb21wcmVzc1szXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpdGNoOiBwYXJzZUZsb2F0KGRhdGFDb21wcmVzc1s0XSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGw6IHBhcnNlRmxvYXQoZGF0YUNvbXByZXNzWzVdKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGbHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZmx5VG8odGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnNldFZpZXcodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHRocm93IFwibm90IGRlZmluZSBwb3NpdGlvbnwgaGVhZGluZyB8IHBpdGNoIHwgcm9sbFwiO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBlcnJvckNhbGxiYWNrKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.getType = exports.typeContaines = exports.isType = undefined;\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\nvar _NormalUtils = __webpack_require__(8);\n\nvar isType = exports.isType = function isType(instance, typeName) {\n    if ((typeof instance === "undefined" ? "undefined" : _typeof(instance)) === "object" && (0, _NormalUtils.defined)(instance.constructor)) {\n        return instance.constructor.toString().match(/^function\\s*([^\\s(]+)/)[1] === typeName;\n    }\n    return false;\n};\n\n/**\r\n * 类名包含\r\n * @param instance\r\n * @param typeName\r\n * @returns {boolean}\r\n */\nvar typeContaines = exports.typeContaines = function typeContaines(instance, typeName) {\n    if ((typeof instance === "undefined" ? "undefined" : _typeof(instance)) === "object" && (0, _NormalUtils.defined)(instance.constructor)) {\n        var typeMatchGroup = instance.constructor.toString().match(/^function\\s*([^\\s(]+)/);\n        if ((0, _NormalUtils.defined)(typeMatchGroup) && (0, _NormalUtils.defined)(typeMatchGroup[1])) {\n            return typeMatchGroup[1].indexOf(typeName) !== -1;\n        }\n    }\n    return false;\n};\n\nvar getType = exports.getType = function getType(instance) {\n    if ((typeof instance === "undefined" ? "undefined" : _typeof(instance)) === "object" && (0, _NormalUtils.defined)(instance.constructor)) {\n        var typeMatchGroup = instance.constructor.toString().match(/^function\\s*([^\\s(]+)/);\n        if ((0, _NormalUtils.defined)(typeMatchGroup) && (0, _NormalUtils.defined)(typeMatchGroup[1])) {\n            return typeMatchGroup[1];\n        }\n    }\n    return undefined;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVXRpbC9UeXBlVXRpbHMuanM/MGFhMCJdLCJuYW1lcyI6WyJpc1R5cGUiLCJpbnN0YW5jZSIsInR5cGVOYW1lIiwiY29uc3RydWN0b3IiLCJ0b1N0cmluZyIsIm1hdGNoIiwidHlwZUNvbnRhaW5lcyIsInR5cGVNYXRjaEdyb3VwIiwiaW5kZXhPZiIsImdldFR5cGUiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUVPLElBQU1BLDBCQUFTLFNBQVRBLE1BQVMsQ0FBQ0MsUUFBRCxFQUFXQyxRQUFYLEVBQXdCO0FBQzFDLFFBQUksUUFBT0QsUUFBUCx5Q0FBT0EsUUFBUCxPQUFvQixRQUFwQixJQUFnQywwQkFBUUEsU0FBU0UsV0FBakIsQ0FBcEMsRUFBbUU7QUFDL0QsZUFBT0YsU0FBU0UsV0FBVCxDQUFxQkMsUUFBckIsR0FBZ0NDLEtBQWhDLENBQXNDLHVCQUF0QyxFQUErRCxDQUEvRCxNQUFzRUgsUUFBN0U7QUFDSDtBQUNELFdBQU8sS0FBUDtBQUNILENBTE07O0FBT1A7Ozs7OztBQU1PLElBQU1JLHdDQUFnQixTQUFoQkEsYUFBZ0IsQ0FBQ0wsUUFBRCxFQUFXQyxRQUFYLEVBQXdCO0FBQ2pELFFBQUksUUFBT0QsUUFBUCx5Q0FBT0EsUUFBUCxPQUFvQixRQUFwQixJQUFnQywwQkFBUUEsU0FBU0UsV0FBakIsQ0FBcEMsRUFBbUU7QUFDL0QsWUFBSUksaUJBQWlCTixTQUFTRSxXQUFULENBQXFCQyxRQUFyQixHQUFnQ0MsS0FBaEMsQ0FBc0MsdUJBQXRDLENBQXJCO0FBQ0EsWUFBSSwwQkFBUUUsY0FBUixLQUEyQiwwQkFBUUEsZUFBZSxDQUFmLENBQVIsQ0FBL0IsRUFBMkQ7QUFDdkQsbUJBQU9BLGVBQWUsQ0FBZixFQUFrQkMsT0FBbEIsQ0FBMEJOLFFBQTFCLE1BQXdDLENBQUMsQ0FBaEQ7QUFDSDtBQUNKO0FBQ0QsV0FBTyxLQUFQO0FBQ0gsQ0FSTTs7QUFVQSxJQUFNTyw0QkFBVSxTQUFWQSxPQUFVLENBQUNSLFFBQUQsRUFBYztBQUNqQyxRQUFJLFFBQU9BLFFBQVAseUNBQU9BLFFBQVAsT0FBb0IsUUFBcEIsSUFBZ0MsMEJBQVFBLFNBQVNFLFdBQWpCLENBQXBDLEVBQW1FO0FBQy9ELFlBQUlJLGlCQUFpQk4sU0FBU0UsV0FBVCxDQUFxQkMsUUFBckIsR0FBZ0NDLEtBQWhDLENBQXNDLHVCQUF0QyxDQUFyQjtBQUNBLFlBQUksMEJBQVFFLGNBQVIsS0FBMkIsMEJBQVFBLGVBQWUsQ0FBZixDQUFSLENBQS9CLEVBQTJEO0FBQ3ZELG1CQUFPQSxlQUFlLENBQWYsQ0FBUDtBQUNIO0FBQ0o7QUFDRCxXQUFPRyxTQUFQO0FBQ0gsQ0FSTSIsImZpbGUiOiIyMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZGVmaW5lZH0gZnJvbSBcIi4vTm9ybWFsVXRpbHNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IGlzVHlwZSA9IChpbnN0YW5jZSwgdHlwZU5hbWUpID0+IHtcclxuICAgIGlmICh0eXBlb2YgaW5zdGFuY2UgPT09IFwib2JqZWN0XCIgJiYgZGVmaW5lZChpbnN0YW5jZS5jb25zdHJ1Y3RvcikpIHtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UuY29uc3RydWN0b3IudG9TdHJpbmcoKS5tYXRjaCgvXmZ1bmN0aW9uXFxzKihbXlxccyhdKykvKVsxXSA9PT0gdHlwZU5hbWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnsbvlkI3ljIXlkKtcclxuICogQHBhcmFtIGluc3RhbmNlXHJcbiAqIEBwYXJhbSB0eXBlTmFtZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbmV4cG9ydCBjb25zdCB0eXBlQ29udGFpbmVzID0gKGluc3RhbmNlLCB0eXBlTmFtZSkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBpbnN0YW5jZSA9PT0gXCJvYmplY3RcIiAmJiBkZWZpbmVkKGluc3RhbmNlLmNvbnN0cnVjdG9yKSkge1xyXG4gICAgICAgIGxldCB0eXBlTWF0Y2hHcm91cCA9IGluc3RhbmNlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15mdW5jdGlvblxccyooW15cXHMoXSspLyk7XHJcbiAgICAgICAgaWYgKGRlZmluZWQodHlwZU1hdGNoR3JvdXApICYmIGRlZmluZWQodHlwZU1hdGNoR3JvdXBbMV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlTWF0Y2hHcm91cFsxXS5pbmRleE9mKHR5cGVOYW1lKSAhPT0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VHlwZSA9IChpbnN0YW5jZSkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBpbnN0YW5jZSA9PT0gXCJvYmplY3RcIiAmJiBkZWZpbmVkKGluc3RhbmNlLmNvbnN0cnVjdG9yKSkge1xyXG4gICAgICAgIGxldCB0eXBlTWF0Y2hHcm91cCA9IGluc3RhbmNlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15mdW5jdGlvblxccyooW15cXHMoXSspLyk7XHJcbiAgICAgICAgaWYgKGRlZmluZWQodHlwZU1hdGNoR3JvdXApICYmIGRlZmluZWQodHlwZU1hdGNoR3JvdXBbMV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlTWF0Y2hHcm91cFsxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar Uuid = exports.Uuid = function Uuid() {\n    var d = new Date().getTime();\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : r & 0x7 | 0x8).toString(16);\n    });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVXRpbC9VdWlkLmpzPzc0NzciXSwibmFtZXMiOlsiVXVpZCIsImQiLCJEYXRlIiwiZ2V0VGltZSIsInJlcGxhY2UiLCJjIiwiciIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFPLElBQU1BLHNCQUFPLFNBQVBBLElBQU8sR0FBSTtBQUNwQixRQUFJQyxJQUFJLElBQUlDLElBQUosR0FBV0MsT0FBWCxFQUFSO0FBQ0EsV0FBTyx1Q0FBdUNDLE9BQXZDLENBQStDLE9BQS9DLEVBQXdELFVBQVVDLENBQVYsRUFBYTtBQUN4RSxZQUFJQyxJQUFJLENBQUNMLElBQUlNLEtBQUtDLE1BQUwsS0FBZ0IsRUFBckIsSUFBMkIsRUFBM0IsR0FBZ0MsQ0FBeEM7QUFDQVAsWUFBSU0sS0FBS0UsS0FBTCxDQUFXUixJQUFJLEVBQWYsQ0FBSjtBQUNBLGVBQU8sQ0FBQ0ksTUFBTSxHQUFOLEdBQVlDLENBQVosR0FBaUJBLElBQUksR0FBSixHQUFVLEdBQTVCLEVBQWtDSSxRQUFsQyxDQUEyQyxFQUEzQyxDQUFQO0FBQ0gsS0FKTSxDQUFQO0FBS0gsQ0FQTSIsImZpbGUiOiIyNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBVdWlkID0gKCk9PntcclxuICAgIGxldCBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgIGxldCByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xyXG4gICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XHJcbiAgICAgICAgcmV0dXJuIChjID09PSAneCcgPyByIDogKHIgJiAweDcgfCAweDgpKS50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.DazzlingLabelEntity = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _Cartesian3s = __webpack_require__(13);\n\nvar _Math = __webpack_require__(26);\n\nvar _BaseEntity2 = __webpack_require__(16);\n\nvar _index = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * 无法解决单个entity引用模型的问题\r\n */\nvar DazzlingLabelEntity = exports.DazzlingLabelEntity = function (_BaseEntity) {\n    _inherits(DazzlingLabelEntity, _BaseEntity);\n\n    /**\r\n     *\r\n     * @param config\r\n     * @param modelColor\r\n     * @param width\r\n     * @param timePeriod\r\n     * @param relativeSize\r\n     */\n    function DazzlingLabelEntity(config) {\n        var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n            _ref$modelColor = _ref.modelColor,\n            modelColor = _ref$modelColor === undefined ? Cesium.Color.DARKVIOLET : _ref$modelColor,\n            _ref$line = _ref.line;\n\n        _ref$line = _ref$line === undefined ? {} : _ref$line;\n        var _ref$line$width = _ref$line.width,\n            width = _ref$line$width === undefined ? 5 : _ref$line$width,\n            _ref$ring = _ref.ring;\n        _ref$ring = _ref$ring === undefined ? {} : _ref$ring;\n        var _ref$ring$timePeriod = _ref$ring.timePeriod,\n            timePeriod = _ref$ring$timePeriod === undefined ? 10 : _ref$ring$timePeriod,\n            _ref$ring$relativeSiz = _ref$ring.relativeSize,\n            relativeSize = _ref$ring$relativeSiz === undefined ? 1 : _ref$ring$relativeSiz;\n\n        _classCallCheck(this, DazzlingLabelEntity);\n\n        // let simpleSin = new SimpleSinBuilder().setPeriod(20).setAmplitude(1).setPhase(0).build();\n        var _this = _possibleConstructorReturn(this, (DazzlingLabelEntity.__proto__ || Object.getPrototypeOf(DazzlingLabelEntity)).call(this, config));\n\n        var simpleCos = new _Math.SimpleCosBuilder().setPeriod(timePeriod / 2).setAmplitude(-0.5).setPhase(0).build();\n        var startTime = Cesium.JulianDate.now();\n\n        _this.ringEntity = new Cesium.Entity({\n            position: new Cesium.CallbackProperty(function (time, result) {\n                return _Cartesian3s.Cartesian3s.formatHeight(config.position, (0.5 + simpleCos.calc(Cesium.JulianDate.secondsDifference(Cesium.JulianDate.now(), startTime) % (timePeriod / 2))) * _Cartesian3s.Cartesian3s.toRadians(config.position).height);\n            }, false),\n            model: {\n                uri: _index.__dirpath + "/resources/圆环.glb",\n                scale: new Cesium.CallbackProperty(function (time, result) {\n                    // this.viewer.scene.camera.position\n                    return Cesium.Cartesian3.distance(config.position, _this.viewer.scene.camera.position) * relativeSize / 340;\n                    // return 0.1;\n                }, false),\n                maximumScale: 1,\n                color: modelColor,\n                show: new Cesium.CallbackProperty(function (time, result) {\n                    return _this.selected;\n                }, false)\n            },\n            polyline: {\n                positions: [_Cartesian3s.Cartesian3s.formatHeightZero(config.position), config.position],\n                width: width,\n                material: modelColor\n            }\n        });\n        _this.ringEntity.parent = _this;\n\n        _this.initEvent();\n        _this.selected = false;\n        return _this;\n    }\n\n    _createClass(DazzlingLabelEntity, [{\n        key: "setViewer",\n        value: function setViewer(viewer) {\n            this.viewer = viewer;\n            viewer.entities.add(this);\n            viewer.entities.add(this.ringEntity);\n        }\n    }, {\n        key: "removeViewer",\n        value: function removeViewer(viewer) {\n            viewer.entities.add(this);\n            viewer.entities.add(this.ringEntity);\n        }\n    }]);\n\n    return DazzlingLabelEntity;\n}(_BaseEntity2.BaseEntity);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvRGF0YVNvdXJjZXMvRGF6emxpbmdMYWJlbEVudGl0eS5qcz8yZTFmIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkRhenpsaW5nTGFiZWxFbnRpdHkiLCJjb25maWciLCJtb2RlbENvbG9yIiwiQ29sb3IiLCJEQVJLVklPTEVUIiwibGluZSIsIndpZHRoIiwicmluZyIsInRpbWVQZXJpb2QiLCJyZWxhdGl2ZVNpemUiLCJzaW1wbGVDb3MiLCJTaW1wbGVDb3NCdWlsZGVyIiwic2V0UGVyaW9kIiwic2V0QW1wbGl0dWRlIiwic2V0UGhhc2UiLCJidWlsZCIsInN0YXJ0VGltZSIsIkp1bGlhbkRhdGUiLCJub3ciLCJyaW5nRW50aXR5IiwiRW50aXR5IiwicG9zaXRpb24iLCJDYWxsYmFja1Byb3BlcnR5IiwidGltZSIsInJlc3VsdCIsIkNhcnRlc2lhbjNzIiwiZm9ybWF0SGVpZ2h0IiwiY2FsYyIsInNlY29uZHNEaWZmZXJlbmNlIiwidG9SYWRpYW5zIiwiaGVpZ2h0IiwibW9kZWwiLCJ1cmkiLCJfX2RpcnBhdGgiLCJzY2FsZSIsIkNhcnRlc2lhbjMiLCJkaXN0YW5jZSIsInZpZXdlciIsInNjZW5lIiwiY2FtZXJhIiwibWF4aW11bVNjYWxlIiwiY29sb3IiLCJzaG93Iiwic2VsZWN0ZWQiLCJwb2x5bGluZSIsInBvc2l0aW9ucyIsImZvcm1hdEhlaWdodFplcm8iLCJtYXRlcmlhbCIsInBhcmVudCIsImluaXRFdmVudCIsImVudGl0aWVzIiwiYWRkIiwiQmFzZUVudGl0eSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0lBQVlBLE07O0FBQ1o7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7QUFFQTs7O0lBR2FDLG1CLFdBQUFBLG1COzs7QUFDVDs7Ozs7Ozs7QUFRQSxpQ0FBWUMsTUFBWixFQVNRO0FBQUEsdUZBQUosRUFBSTtBQUFBLG1DQVJKQyxVQVFJO0FBQUEsWUFSSkEsVUFRSSxtQ0FSU0gsT0FBT0ksS0FB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ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcbmltcG9ydCB7Q2FydGVzaWFuM3N9IGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjNzXCI7XHJcbmltcG9ydCB7U2ltcGxlQ29zQnVpbGRlcn0gZnJvbSBcIi4uL1V0aWwvTWF0aFwiXHJcbmltcG9ydCB7QmFzZUVudGl0eX0gZnJvbSBcIi4vQmFzZUVudGl0eVwiO1xyXG5pbXBvcnQge19fZGlycGF0aH0gZnJvbSBcIi4uL2luZGV4XCI7XHJcblxyXG4vKipcclxuICog5peg5rOV6Kej5Yaz5Y2V5LiqZW50aXR55byV55So5qih5Z6L55qE6Zeu6aKYXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF6emxpbmdMYWJlbEVudGl0eSBleHRlbmRzIEJhc2VFbnRpdHkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbmZpZ1xyXG4gICAgICogQHBhcmFtIG1vZGVsQ29sb3JcclxuICAgICAqIEBwYXJhbSB3aWR0aFxyXG4gICAgICogQHBhcmFtIHRpbWVQZXJpb2RcclxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVNpemVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCB7XHJcbiAgICAgICAgbW9kZWxDb2xvciA9IENlc2l1bS5Db2xvci5EQVJLVklPTEVULFxyXG4gICAgICAgIGxpbmU6IHtcclxuICAgICAgICAgICAgd2lkdGggPSA1XHJcbiAgICAgICAgfSA9IHt9LFxyXG4gICAgICAgIHJpbmc6IHtcclxuICAgICAgICAgICAgdGltZVBlcmlvZCA9IDEwLFxyXG4gICAgICAgICAgICByZWxhdGl2ZVNpemUgPSAxXHJcbiAgICAgICAgfSA9IHt9XHJcbiAgICB9ID0ge30pIHtcclxuICAgICAgICBzdXBlcihjb25maWcpXHJcbiAgICAgICAgLy8gbGV0IHNpbXBsZVNpbiA9IG5ldyBTaW1wbGVTaW5CdWlsZGVyKCkuc2V0UGVyaW9kKDIwKS5zZXRBbXBsaXR1ZGUoMSkuc2V0UGhhc2UoMCkuYnVpbGQoKTtcclxuICAgICAgICBsZXQgc2ltcGxlQ29zID0gbmV3IFNpbXBsZUNvc0J1aWxkZXIoKS5zZXRQZXJpb2QodGltZVBlcmlvZCAvIDIpLnNldEFtcGxpdHVkZSgtMC41KS5zZXRQaGFzZSgwKS5idWlsZCgpO1xyXG4gICAgICAgIGxldCBzdGFydFRpbWUgPSBDZXNpdW0uSnVsaWFuRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5yaW5nRW50aXR5ID0gbmV3IENlc2l1bS5FbnRpdHkoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IENlc2l1bS5DYWxsYmFja1Byb3BlcnR5KCh0aW1lLCByZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDYXJ0ZXNpYW4zcy5mb3JtYXRIZWlnaHQoY29uZmlnLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICgwLjUgKyBzaW1wbGVDb3MuY2FsYyhDZXNpdW0uSnVsaWFuRGF0ZS5zZWNvbmRzRGlmZmVyZW5jZShDZXNpdW0uSnVsaWFuRGF0ZS5ub3coKSwgc3RhcnRUaW1lKSAlICh0aW1lUGVyaW9kIC8gMikpKSAqIENhcnRlc2lhbjNzLnRvUmFkaWFucyhjb25maWcucG9zaXRpb24pLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSwgZmFsc2UpLFxyXG4gICAgICAgICAgICBtb2RlbDoge1xyXG4gICAgICAgICAgICAgICAgdXJpOiBfX2RpcnBhdGggKyBcIi9yZXNvdXJjZXMv5ZyG546vLmdsYlwiLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IG5ldyBDZXNpdW0uQ2FsbGJhY2tQcm9wZXJ0eSgodGltZSwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy52aWV3ZXIuc2NlbmUuY2FtZXJhLnBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENlc2l1bS5DYXJ0ZXNpYW4zLmRpc3RhbmNlKGNvbmZpZy5wb3NpdGlvbiwgdGhpcy52aWV3ZXIuc2NlbmUuY2FtZXJhLnBvc2l0aW9uKSAqIHJlbGF0aXZlU2l6ZSAvIDM0MDtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gMC4xO1xyXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgbWF4aW11bVNjYWxlOiAxLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IG1vZGVsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICBzaG93OiBuZXcgQ2VzaXVtLkNhbGxiYWNrUHJvcGVydHkoKHRpbWUsIHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBvbHlsaW5lOiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IFtDYXJ0ZXNpYW4zcy5mb3JtYXRIZWlnaHRaZXJvKGNvbmZpZy5wb3NpdGlvbiksIGNvbmZpZy5wb3NpdGlvbl0sXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogbW9kZWxDb2xvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yaW5nRW50aXR5LnBhcmVudCA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEV2ZW50KCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZpZXdlcih2aWV3ZXIpIHtcclxuICAgICAgICB0aGlzLnZpZXdlciA9IHZpZXdlcjtcclxuICAgICAgICB2aWV3ZXIuZW50aXRpZXMuYWRkKHRoaXMpO1xyXG4gICAgICAgIHZpZXdlci5lbnRpdGllcy5hZGQodGhpcy5yaW5nRW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVWaWV3ZXIodmlld2VyKSB7XHJcbiAgICAgICAgdmlld2VyLmVudGl0aWVzLmFkZCh0aGlzKTtcclxuICAgICAgICB2aWV3ZXIuZW50aXRpZXMuYWRkKHRoaXMucmluZ0VudGl0eSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar SimpleSin = exports.SimpleSin = function () {\n    function SimpleSin(A, k, b) {\n        _classCallCheck(this, SimpleSin);\n\n        this.A = A;\n        this.k = k;\n        this.b = b;\n        return this;\n    }\n\n    _createClass(SimpleSin, [{\n        key: "calc",\n        value: function calc(x) {\n            return Math.sin(this.k * x + this.b) * this.A;\n        }\n    }]);\n\n    return SimpleSin;\n}();\n\nvar SimpleSinBuilder = exports.SimpleSinBuilder = function () {\n    function SimpleSinBuilder() {\n        _classCallCheck(this, SimpleSinBuilder);\n    }\n\n    _createClass(SimpleSinBuilder, [{\n        key: "setPeriod",\n        value: function setPeriod(number) {\n            this.k = 2 * Math.PI / number;\n            return this;\n        }\n    }, {\n        key: "setAmplitude",\n        value: function setAmplitude(number) {\n            this.A = number;\n            return this;\n        }\n    }, {\n        key: "setPhase",\n        value: function setPhase(number) {\n            this.b = number;\n            return this;\n        }\n    }, {\n        key: "build",\n        value: function build() {\n            return new SimpleSin(this.A, this.k, this.b);\n        }\n    }]);\n\n    return SimpleSinBuilder;\n}();\n\nvar simpleCos = exports.simpleCos = function () {\n    function simpleCos(A, k, b) {\n        _classCallCheck(this, simpleCos);\n\n        this.A = A;\n        this.k = k;\n        this.b = b;\n        return this;\n    }\n\n    _createClass(simpleCos, [{\n        key: "calc",\n        value: function calc(x) {\n            return Math.cos(this.k * x + this.b) * this.A;\n        }\n    }]);\n\n    return simpleCos;\n}();\n\nvar SimpleCosBuilder = exports.SimpleCosBuilder = function () {\n    function SimpleCosBuilder() {\n        _classCallCheck(this, SimpleCosBuilder);\n    }\n\n    _createClass(SimpleCosBuilder, [{\n        key: "setPeriod",\n        value: function setPeriod(number) {\n            this.k = 2 * Math.PI / number;\n            return this;\n        }\n    }, {\n        key: "setAmplitude",\n        value: function setAmplitude(number) {\n            this.A = number;\n            return this;\n        }\n    }, {\n        key: "setPhase",\n        value: function setPhase(number) {\n            this.b = number;\n            return this;\n        }\n    }, {\n        key: "build",\n        value: function build() {\n            return new simpleCos(this.A, this.k, this.b);\n        }\n    }]);\n\n    return SimpleCosBuilder;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVXRpbC9NYXRoLmpzPzRiY2QiXSwibmFtZXMiOlsiU2ltcGxlU2luIiwiQSIsImsiLCJiIiwieCIsIk1hdGgiLCJzaW4iLCJTaW1wbGVTaW5CdWlsZGVyIiwibnVtYmVyIiwiUEkiLCJzaW1wbGVDb3MiLCJjb3MiLCJTaW1wbGVDb3NCdWlsZGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sSUFBTUE7QUFDVCx1QkFBWUMsQ0FBWixFQUFlQyxDQUFmLEVBQWtCQyxDQUFsQixFQUFxQjtBQUFBOztBQUNqQixhQUFLRixDQUFMLEdBQVNBLENBQVQ7QUFDQSxhQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDQSxhQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDQSxlQUFPLElBQVA7QUFDSDs7QUFOUTtBQUFBO0FBQUEsNkJBUUpDLENBUkksRUFRRDtBQUNKLG1CQUFPQyxLQUFLQyxHQUFMLENBQVMsS0FBS0osQ0FBTCxHQUFTRSxDQUFULEdBQWEsS0FBS0QsQ0FBM0IsSUFBZ0MsS0FBS0YsQ0FBNUM7QUFDSDtBQVZROztBQUFBO0FBQUEsR0FBTjs7QUFhQSxJQUFNTTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUEsa0NBQ0NDLE1BREQsRUFDUztBQUNkLGlCQUFLTixDQUFMLEdBQVMsSUFBSUcsS0FBS0ksRUFBVCxHQUFjRCxNQUF2QjtBQUNBLG1CQUFPLElBQVA7QUFDSDtBQUpRO0FBQUE7QUFBQSxxQ0FNSUEsTUFOSixFQU1ZO0FBQ2pCLGlCQUFLUCxDQUFMLEdBQVNPLE1BQVQ7QUFDQSxtQkFBTyxJQUFQO0FBQ0g7QUFUUTtBQUFBO0FBQUEsaUNBV0FBLE1BWEEsRUFXUTtBQUNiLGlCQUFLTCxDQUFMLEdBQVNLLE1BQVQ7QUFDQSxtQkFBTyxJQUFQO0FBQ0g7QUFkUTtBQUFBO0FBQUEsZ0NBZ0JEO0FBQ0osbUJBQU8sSUFBSVIsU0FBSixDQUFjLEtBQUtDLENBQW5CLEVBQXNCLEtBQUtDLENBQTNCLEVBQThCLEtBQUtDLENBQW5DLENBQVA7QUFDSDtBQWxCUTs7QUFBQTtBQUFBLEdBQU47O0FBc0JBLElBQU1PO0FBQ1QsdUJBQVlULENBQVosRUFBZUMsQ0FBZixFQUFrQkMsQ0FBbEIsRUFBcUI7QUFBQTs7QUFDakIsYUFBS0YsQ0FBTCxHQUFTQSxDQUFUO0FBQ0EsYUFBS0MsQ0FBTCxHQUFTQSxDQUFUO0FBQ0EsYUFBS0MsQ0FBTCxHQUFTQSxDQUFUO0FBQ0EsZUFBTyxJQUFQO0FBQ0g7O0FBTlE7QUFBQTtBQUFBLDZCQVFKQyxDQVJJLEVBUUQ7QUFDSixtQkFBT0MsS0FBS00sR0FBTCxDQUFTLEtBQUtULENBQUwsR0FBU0UsQ0FBVCxHQUFhLEtBQUtELENBQTNCLElBQWdDLEtBQUtGLENBQTVDO0FBQ0g7QUFWUTs7QUFBQTtBQUFBLEdBQU47O0FBYUEsSUFBTVc7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLGtDQUNDSixNQURELEVBQ1M7QUFDZCxpQkFBS04sQ0FBTCxHQUFTLElBQUlHLEtBQUtJLEVBQVQsR0FBY0QsTUFBdkI7QUFDQSxtQkFBTyxJQUFQO0FBQ0g7QUFKUTtBQUFBO0FBQUEscUNBTUlBLE1BTkosRUFNWTtBQUNqQixpQkFBS1AsQ0FBTCxHQUFTTyxNQUFUO0FBQ0EsbUJBQU8sSUFBUDtBQUNIO0FBVFE7QUFBQTtBQUFBLGlDQVdBQSxNQVhBLEVBV1E7QUFDYixpQkFBS0wsQ0FBTCxHQUFTSyxNQUFUO0FBQ0EsbUJBQU8sSUFBUDtBQUNIO0FBZFE7QUFBQTtBQUFBLGdDQWdCRDtBQUNKLG1CQUFPLElBQUlFLFNBQUosQ0FBYyxLQUFLVCxDQUFuQixFQUFzQixLQUFLQyxDQUEzQixFQUE4QixLQUFLQyxDQUFuQyxDQUFQO0FBQ0g7QUFsQlE7O0FBQUE7QUFBQSxHQUFOIiwiZmlsZSI6IjI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFNpbXBsZVNpbiA9IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKEEsIGssIGIpIHtcclxuICAgICAgICB0aGlzLkEgPSBBO1xyXG4gICAgICAgIHRoaXMuayA9IGs7XHJcbiAgICAgICAgdGhpcy5iID0gYjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKHgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zaW4odGhpcy5rICogeCArIHRoaXMuYikgKiB0aGlzLkE7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTaW1wbGVTaW5CdWlsZGVyID0gY2xhc3Mge1xyXG4gICAgc2V0UGVyaW9kKG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuayA9IDIgKiBNYXRoLlBJIC8gbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFtcGxpdHVkZShudW1iZXIpIHtcclxuICAgICAgICB0aGlzLkEgPSBudW1iZXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGhhc2UobnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5iID0gbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlU2luKHRoaXMuQSwgdGhpcy5rLCB0aGlzLmIpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc2ltcGxlQ29zID0gY2xhc3MgIHtcclxuICAgIGNvbnN0cnVjdG9yKEEsIGssIGIpIHtcclxuICAgICAgICB0aGlzLkEgPSBBO1xyXG4gICAgICAgIHRoaXMuayA9IGs7XHJcbiAgICAgICAgdGhpcy5iID0gYjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKHgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jb3ModGhpcy5rICogeCArIHRoaXMuYikgKiB0aGlzLkE7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTaW1wbGVDb3NCdWlsZGVyID0gY2xhc3Mge1xyXG4gICAgc2V0UGVyaW9kKG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuayA9IDIgKiBNYXRoLlBJIC8gbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFtcGxpdHVkZShudW1iZXIpIHtcclxuICAgICAgICB0aGlzLkEgPSBudW1iZXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGhhc2UobnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5iID0gbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgc2ltcGxlQ29zKHRoaXMuQSwgdGhpcy5rLCB0aGlzLmIpXHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.EditableEntity = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ = __webpack_require__(3);\n\nvar _BaseEntity2 = __webpack_require__(16);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EditableEntity = exports.EditableEntity = function (_BaseEntity) {\n    _inherits(EditableEntity, _BaseEntity);\n\n    function EditableEntity() {\n        _classCallCheck(this, EditableEntity);\n\n        return _possibleConstructorReturn(this, (EditableEntity.__proto__ || Object.getPrototypeOf(EditableEntity)).apply(this, arguments));\n    }\n\n    _createClass(EditableEntity, [{\n        key: "setEditable",\n        value: function setEditable() {\n            var _this2 = this;\n\n            var editable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            var eventSystem = _.EventSystemInstance.getInstance();\n            if (editable === false) {\n                eventSystem.removeListener(this, _.EventType.DRAW);\n                eventSystem.removeListener(this, _.EventType.DRAW_START);\n                eventSystem.removeListener(this, _.EventType.DRAW_END);\n                this._editable = false;\n                return;\n            }\n\n            if (this._editable) return;\n\n            this._editable = true;\n\n            eventSystem.onDragStart(this, function (position) {\n                eventSystem.enableDrawRotation(false);\n                // this._inlineHeight = Cartesian3s.toDegrees(this.position.getValue(0)).height;\n                // this.position = Cartesian3s.formatHeight(this._viewer.scene.camera.pickEllipsoid(position),this._inlineHeight) ;\n                _this2.position = _this2._viewer.scene.camera.pickEllipsoid(position);\n            });\n\n            eventSystem.onDrag(this, function (position) {\n                // this.position = Cartesian3s.formatHeight(this._viewer.scene.camera.pickEllipsoid(position),this._inlineHeight) ;\n                _this2.position = _this2._viewer.scene.camera.pickEllipsoid(position);\n            });\n\n            eventSystem.onDragEnd(this, function (position) {\n                eventSystem.enableDrawRotation(true);\n            });\n        }\n    }]);\n\n    return EditableEntity;\n}(_BaseEntity2.BaseEntity);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvRGF0YVNvdXJjZXMvRWRpdGFibGVFbnRpdHkuanM/ZDBhOCJdLCJuYW1lcyI6WyJDZXNpdW0iLCJFZGl0YWJsZUVudGl0eSIsImVkaXRhYmxlIiwiZXZlbnRTeXN0ZW0iLCJFdmVudFN5c3RlbUluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJyZW1vdmVMaXN0ZW5lciIsIkV2ZW50VHlwZSIsIkRSQVciLCJEUkFXX1NUQVJUIiwiRFJBV19FTkQiLCJfZWRpdGFibGUiLCJvbkRyYWdTdGFydCIsInBvc2l0aW9uIiwiZW5hYmxlRHJhd1JvdGF0aW9uIiwiX3ZpZXdlciIsInNjZW5lIiwiY2FtZXJhIiwicGlja0VsbGlwc29pZCIsIm9uRHJhZyIsIm9uRHJhZ0VuZCIsIkJhc2VFbnRpdHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUNaOztBQUNBOzs7Ozs7Ozs7O0lBRWFDLGMsV0FBQUEsYzs7Ozs7Ozs7Ozs7c0NBRW1CO0FBQUE7O0FBQUEsZ0JBQWhCQyxRQUFnQix1RUFBTCxJQUFLOztBQUN4QixnQkFBSUMsY0FBY0Msc0JBQW9CQyxXQUFwQixFQUFsQjtBQUNBLGdCQUFHSCxhQUFhLEtBQWhCLEVBQXNCO0FBQ2xCQyw0QkFBWUcsY0FBWixDQUEyQixJQUEzQixFQUFnQ0MsWUFBVUMsSUFBMUM7QUFDQUwsNEJBQVlHLGNBQVosQ0FBMkIsSUFBM0IsRUFBZ0NDLFlBQVVFLFVBQTFDO0FBQ0FOLDRCQUFZRyxjQUFaLENBQTJCLElBQTNCLEVBQWdDQyxZQUFVRyxRQUExQztBQUNBLHFCQUFLQyxTQUFMLEdBQWlCLEtBQWpCO0FBQ0E7QUFDSDs7QUFFRCxnQkFBRyxLQUFLQSxTQUFSLEVBQW1COztBQUVuQixpQkFBS0EsU0FBTCxHQUFpQixJQUFqQjs7QUFFQVIsd0JBQVlTLFdBQVosQ0FBd0IsSUFBeEIsRUFBOEIsVUFBQ0MsUUFBRCxFQUFjO0FBQ3hDViw0QkFBWVcsa0JBQVosQ0FBK0IsS0FBL0I7QUFDQTtBQUNBO0FBQ0EsdUJBQUtELFFBQUwsR0FBZ0IsT0FBS0UsT0FBTCxDQUFhQyxLQUFiLENBQW1CQyxNQUFuQixDQUEwQkMsYUFBMUIsQ0FBd0NMLFFBQXhDLENBQWhCO0FBQ0gsYUFMRDs7QUFPQVYsd0JBQVlnQixNQUFaLENBQW1CLElBQW5CLEVBQXlCLFVBQUNOLFFBQUQsRUFBYztBQUNuQztBQUNBLHVCQUFLQSxRQUFMLEdBQWdCLE9BQUtFLE9BQUwsQ0FBYUMsS0FBYixDQUFtQkMsTUFBbkIsQ0FBMEJDLGFBQTFCLENBQXdDTCxRQUF4QyxDQUFoQjtBQUNILGFBSEQ7O0FBS0FWLHdCQUFZaUIsU0FBWixDQUFzQixJQUF0QixFQUE0QixVQUFDUCxRQUFELEVBQWM7QUFDdENWLDRCQUFZVyxrQkFBWixDQUErQixJQUEvQjtBQUNILGFBRkQ7QUFJSDs7OztFQWhDK0JPLHVCIiwiZmlsZSI6IjI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtDYXJ0ZXNpYW4zcywgRXZlbnRTeXN0ZW1JbnN0YW5jZSwgRXZlbnRUeXBlfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHtCYXNlRW50aXR5fSBmcm9tIFwiLi9CYXNlRW50aXR5XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdGFibGVFbnRpdHkgZXh0ZW5kcyBCYXNlRW50aXR5e1xyXG5cclxuICAgIHNldEVkaXRhYmxlKGVkaXRhYmxlID0gdHJ1ZSl7XHJcbiAgICAgICAgbGV0IGV2ZW50U3lzdGVtID0gRXZlbnRTeXN0ZW1JbnN0YW5jZS5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmKGVkaXRhYmxlID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIGV2ZW50U3lzdGVtLnJlbW92ZUxpc3RlbmVyKHRoaXMsRXZlbnRUeXBlLkRSQVcpO1xyXG4gICAgICAgICAgICBldmVudFN5c3RlbS5yZW1vdmVMaXN0ZW5lcih0aGlzLEV2ZW50VHlwZS5EUkFXX1NUQVJUKTtcclxuICAgICAgICAgICAgZXZlbnRTeXN0ZW0ucmVtb3ZlTGlzdGVuZXIodGhpcyxFdmVudFR5cGUuRFJBV19FTkQpO1xyXG4gICAgICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl9lZGl0YWJsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGV2ZW50U3lzdGVtLm9uRHJhZ1N0YXJ0KHRoaXMsIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBldmVudFN5c3RlbS5lbmFibGVEcmF3Um90YXRpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLl9pbmxpbmVIZWlnaHQgPSBDYXJ0ZXNpYW4zcy50b0RlZ3JlZXModGhpcy5wb3NpdGlvbi5nZXRWYWx1ZSgwKSkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyB0aGlzLnBvc2l0aW9uID0gQ2FydGVzaWFuM3MuZm9ybWF0SGVpZ2h0KHRoaXMuX3ZpZXdlci5zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbiksdGhpcy5faW5saW5lSGVpZ2h0KSA7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLl92aWV3ZXIuc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24pIDtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBldmVudFN5c3RlbS5vbkRyYWcodGhpcywgKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucG9zaXRpb24gPSBDYXJ0ZXNpYW4zcy5mb3JtYXRIZWlnaHQodGhpcy5fdmlld2VyLnNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uKSx0aGlzLl9pbmxpbmVIZWlnaHQpIDtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMuX3ZpZXdlci5zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbikgO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGV2ZW50U3lzdGVtLm9uRHJhZ0VuZCh0aGlzLCAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgZXZlbnRTeXN0ZW0uZW5hYmxlRHJhd1JvdGF0aW9uKHRydWUpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.BuildingHightlightBuilder = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ = __webpack_require__(3);\n\nvar _NormalUtils = __webpack_require__(8);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar BuildingHightlightBuilder = exports.BuildingHightlightBuilder = function () {\n    function BuildingHightlightBuilder() {\n        _classCallCheck(this, BuildingHightlightBuilder);\n    }\n\n    _createClass(BuildingHightlightBuilder, [{\n        key: "setPositions",\n        value: function setPositions(positions) {\n            this._position = positions;\n            return this;\n        }\n    }, {\n        key: "setColor",\n        value: function setColor(color) {\n            this._color = color;\n            return this;\n        }\n    }, {\n        key: "setHoverColor",\n        value: function setHoverColor(hoverColor) {\n            this._hoverColor = hoverColor;\n            return this;\n        }\n    }, {\n        key: "setOnClick",\n        value: function setOnClick(clickCallBack) {\n            this.clickCallback = clickCallBack;\n            return this;\n        }\n    }, {\n        key: "setViewer",\n        value: function setViewer(viewer) {\n            this._viewer = viewer;\n            return this;\n        }\n    }, {\n        key: "_setDefault",\n        value: function _setDefault() {\n            if (!(0, _NormalUtils.defined)(this._hoverColor)) {\n                this._hoverColor = Cesium.Color.YELLOW.withAlpha(0.5);\n            }\n            this._hoverColorBytes = this._hoverColor.toBytes();\n            if (!(0, _NormalUtils.defined)(this._color)) {\n                this._color = Cesium.Color.YELLOW.withAlpha(0);\n            }\n            this._colorBytes = this._color.toBytes();\n        }\n    }, {\n        key: "build",\n        value: function build() {\n            var _this = this;\n\n            this._setDefault();\n\n            var eventSystem = _.EventSystemInstance.getInstance();\n            var classificationPrimitive = new Cesium.ClassificationPrimitive({\n                geometryInstances: new Cesium.GeometryInstance({\n                    geometry: Cesium.PolygonGeometry.fromPositions({\n                        vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,\n                        positions: this._position,\n                        extrudedHeight: 100,\n                        height: -50,\n                        closeBottom: true\n                    }),\n                    attributes: {\n                        color: Cesium.ColorGeometryInstanceAttribute.fromColor(this._color),\n                        show: new Cesium.ShowGeometryInstanceAttribute(true)\n                    },\n                    id: \'box-2\'\n                }),\n                classificationType: Cesium.ClassificationType.BOTH //CESIUM_3D_TILE\n            });\n            eventSystem.onMouseMove(classificationPrimitive, function (position, obj) {\n                if (!obj) return; //暂时过滤掉drawhelper的事件\n                console.log(["move in", position, obj]);\n                var attributes = classificationPrimitive.getGeometryInstanceAttributes(\'box-2\');\n                attributes.color = _this._hoverColorBytes;\n            });\n\n            eventSystem.onMouseMoveOut(classificationPrimitive, function (position, obj) {\n                console.log(["move out", position, obj]);\n                var attributes = classificationPrimitive.getGeometryInstanceAttributes(\'box-2\');\n                attributes.color = _this._colorBytes;\n            });\n\n            this.clickCallback && eventSystem.onLeftClick(classificationPrimitive, function (position) {\n                typeof _this.clickCallback === "function" && _this.clickCallback(position, classificationPrimitive);\n            });\n\n            return classificationPrimitive;\n        }\n    }]);\n\n    return BuildingHightlightBuilder;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvRGF0YVNvdXJjZXMvQnVpbGRpbmdIaWdodGxpZ2h0QnVpbGRlci5qcz84MmMwIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkJ1aWxkaW5nSGlnaHRsaWdodEJ1aWxkZXIiLCJwb3NpdGlvbnMiLCJfcG9zaXRpb24iLCJjb2xvciIsIl9jb2xvciIsImhvdmVyQ29sb3IiLCJfaG92ZXJDb2xvciIsImNsaWNrQ2FsbEJhY2siLCJjbGlja0NhbGxiYWNrIiwidmlld2VyIiwiX3ZpZXdlciIsIkNvbG9yIiwiWUVMTE9XIiwid2l0aEFscGhhIiwiX2hvdmVyQ29sb3JCeXRlcyIsInRvQnl0ZXMiLCJfY29sb3JCeXRlcyIsIl9zZXREZWZhdWx0IiwiZXZlbnRTeXN0ZW0iLCJFdmVudFN5c3RlbUluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSIsIkNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlIiwiZ2VvbWV0cnlJbnN0YW5jZXMiLCJHZW9tZXRyeUluc3RhbmNlIiwiZ2VvbWV0cnkiLCJQb2x5Z29uR2VvbWV0cnkiLCJmcm9tUG9zaXRpb25zIiwidmVydGV4Rm9ybWF0IiwiUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UiLCJWRVJURVhfRk9STUFUIiwiZXh0cnVkZWRIZWlnaHQiLCJoZWlnaHQiLCJjbG9zZUJvdHRvbSIsImF0dHJpYnV0ZXMiLCJDb2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUiLCJmcm9tQ29sb3IiLCJzaG93IiwiU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUiLCJpZCIsImNsYXNzaWZpY2F0aW9uVHlwZSIsIkNsYXNzaWZpY2F0aW9uVHlwZSIsIkJPVEgiLCJvbk1vdXNlTW92ZSIsInBvc2l0aW9uIiwib2JqIiwiY29uc29sZSIsImxvZyIsImdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzIiwib25Nb3VzZU1vdmVPdXQiLCJvbkxlZnRDbGljayJdLCJtYXBw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QUFqQjtBQUNBZCwyQkFBVy9CLEtBQVgsR0FBbUIsTUFBS2EsV0FBeEI7QUFDSCxhQUpEOztBQU1BLGlCQUFLUixhQUFMLElBQXNCVSxZQUFZZ0MsV0FBWixDQUF3QjdCLHVCQUF4QixFQUFpRCxVQUFDdUIsUUFBRCxFQUFjO0FBQ2pGLHVCQUFPLE1BQUtwQyxhQUFaLEtBQThCLFVBQTlCLElBQTRDLE1BQUtBLGFBQUwsQ0FBbUJvQyxRQUFuQixFQUE2QnZCLHVCQUE3QixDQUE1QztBQUNILGFBRnFCLENBQXRCOztBQUlBLG1CQUFPQSx1QkFBUDtBQUNIIiwiZmlsZSI6IjI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtFdmVudFN5c3RlbUluc3RhbmNlfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHtkZWZpbmVkfSBmcm9tIFwiLi4vVXRpbC9Ob3JtYWxVdGlsc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsZGluZ0hpZ2h0bGlnaHRCdWlsZGVyIHtcclxuXHJcbiAgICBzZXRQb3NpdGlvbnMocG9zaXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29sb3IoY29sb3IpIHtcclxuICAgICAgICB0aGlzLl9jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEhvdmVyQ29sb3IoaG92ZXJDb2xvcikge1xyXG4gICAgICAgIHRoaXMuX2hvdmVyQ29sb3IgPSBob3ZlckNvbG9yO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE9uQ2xpY2soY2xpY2tDYWxsQmFjaykge1xyXG4gICAgICAgIHRoaXMuY2xpY2tDYWxsYmFjayA9IGNsaWNrQ2FsbEJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Vmlld2VyKHZpZXdlcikge1xyXG4gICAgICAgIHRoaXMuX3ZpZXdlciA9IHZpZXdlcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RGVmYXVsdCgpIHtcclxuICAgICAgICBpZiAoIWRlZmluZWQodGhpcy5faG92ZXJDb2xvcikpIHtcclxuICAgICAgICAgICAgdGhpcy5faG92ZXJDb2xvciA9IENlc2l1bS5Db2xvci5ZRUxMT1cud2l0aEFscGhhKDAuNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2hvdmVyQ29sb3JCeXRlcyA9IHRoaXMuX2hvdmVyQ29sb3IudG9CeXRlcygpO1xyXG4gICAgICAgIGlmICghZGVmaW5lZCh0aGlzLl9jb2xvcikpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29sb3IgPSBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY29sb3JCeXRlcyA9IHRoaXMuX2NvbG9yLnRvQnl0ZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZCgpIHtcclxuICAgICAgICB0aGlzLl9zZXREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCBldmVudFN5c3RlbSA9IEV2ZW50U3lzdGVtSW5zdGFuY2UuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBsZXQgY2xhc3NpZmljYXRpb25QcmltaXRpdmUgPSBuZXcgQ2VzaXVtLkNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IG5ldyBDZXNpdW0uR2VvbWV0cnlJbnN0YW5jZSh7XHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogQ2VzaXVtLlBvbHlnb25HZW9tZXRyeS5mcm9tUG9zaXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5QZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZS5WRVJURVhfRk9STUFULFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogdGhpcy5fcG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cnVkZWRIZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IC01MCxcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJvdHRvbTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKHRoaXMuX2NvbG9yKSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93OiBuZXcgQ2VzaXVtLlNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlKHRydWUpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaWQ6ICdib3gtMidcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogQ2VzaXVtLkNsYXNzaWZpY2F0aW9uVHlwZS5CT1RILy9DRVNJVU1fM0RfVElMRVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50U3lzdGVtLm9uTW91c2VNb3ZlKGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLCAocG9zaXRpb24sb2JqKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKCFvYmopIHJldHVybjsvL+aaguaXtui/h+a7pOaOiWRyYXdoZWxwZXLnmoTkuovku7ZcclxuICAgICAgICAgICAgY29uc29sZS5sb2coW1wibW92ZSBpblwiLHBvc2l0aW9uLG9ial0pXHJcbiAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoJ2JveC0yJyk7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY29sb3IgPSB0aGlzLl9ob3ZlckNvbG9yQnl0ZXM7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXZlbnRTeXN0ZW0ub25Nb3VzZU1vdmVPdXQoY2xhc3NpZmljYXRpb25QcmltaXRpdmUsIChwb3NpdGlvbixvYmopID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coW1wibW92ZSBvdXRcIixwb3NpdGlvbixvYmpdKVxyXG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKCdib3gtMicpO1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNvbG9yID0gdGhpcy5fY29sb3JCeXRlcztcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLmNsaWNrQ2FsbGJhY2sgJiYgZXZlbnRTeXN0ZW0ub25MZWZ0Q2xpY2soY2xhc3NpZmljYXRpb25QcmltaXRpdmUsIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5jbGlja0NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgJiYgdGhpcy5jbGlja0NhbGxiYWNrKHBvc2l0aW9uLCBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlO1xyXG4gICAgfVxyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.cesium1_50Patch = undefined;\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\r\n * cesium 1.50 ， 加载模型时报错的问题\r\n */\nvar cesium1_50Patch = exports.cesium1_50Patch = function cesium1_50Patch() {\n    var fixGltf = function fixGltf(gltf) {\n        if (!gltf.extensionsUsed) {\n            return;\n        }\n\n        var v = gltf.extensionsUsed.indexOf('KHR_technique_webgl');\n        var t = gltf.extensionsRequired.indexOf('KHR_technique_webgl');\n        // 中招了。。\n        if (v !== -1) {\n            gltf.extensionsRequired.splice(t, 1, 'KHR_techniques_webgl');\n            gltf.extensionsUsed.splice(v, 1, 'KHR_techniques_webgl');\n            gltf.extensions = gltf.extensions || {};\n            gltf.extensions['KHR_techniques_webgl'] = {};\n            gltf.extensions['KHR_techniques_webgl'].programs = gltf.programs;\n            gltf.extensions['KHR_techniques_webgl'].shaders = gltf.shaders;\n            gltf.extensions['KHR_techniques_webgl'].techniques = gltf.techniques;\n            var techniques = gltf.extensions['KHR_techniques_webgl'].techniques;\n\n            gltf.materials.forEach(function (mat, index) {\n                gltf.materials[index].extensions['KHR_technique_webgl'].values = gltf.materials[index].values;\n                gltf.materials[index].extensions['KHR_techniques_webgl'] = gltf.materials[index].extensions['KHR_technique_webgl'];\n\n                var vtxfMaterialExtension = gltf.materials[index].extensions['KHR_techniques_webgl'];\n\n                for (var value in vtxfMaterialExtension.values) {\n                    var us = techniques[vtxfMaterialExtension.technique].uniforms;\n                    for (var key in us) {\n                        if (us[key] === value) {\n                            vtxfMaterialExtension.values[key] = vtxfMaterialExtension.values[value];\n                            delete vtxfMaterialExtension.values[value];\n                            break;\n                        }\n                    }\n                }\n                ;\n            });\n\n            techniques.forEach(function (t) {\n                for (var attribute in t.attributes) {\n                    var name = t.attributes[attribute];\n                    t.attributes[attribute] = t.parameters[name];\n                }\n                ;\n\n                for (var uniform in t.uniforms) {\n                    var name = t.uniforms[uniform];\n                    t.uniforms[uniform] = t.parameters[name];\n                }\n                ;\n            });\n        }\n    };\n\n    Object.defineProperties(Cesium.Model.prototype, {\n        _cachedGltf: {\n            set: function set(value) {\n                this._vtxf_cachedGltf = value;\n                if (this._vtxf_cachedGltf && this._vtxf_cachedGltf._gltf) {\n                    fixGltf(this._vtxf_cachedGltf._gltf);\n                }\n            },\n            get: function get() {\n                return this._vtxf_cachedGltf;\n            }\n        }\n    });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvV2lkZ2V0cy9QYXRjaHMuanM/YmYyMiJdLCJuYW1lcyI6WyJDZXNpdW0iLCJjZXNpdW0xXzUwUGF0Y2giLCJmaXhHbHRmIiwiZ2x0ZiIsImV4dGVuc2lvbnNVc2VkIiwidiIsImluZGV4T2YiLCJ0IiwiZXh0ZW5zaW9uc1JlcXVpcmVkIiwic3BsaWNlIiwiZXh0ZW5zaW9ucyIsInByb2dyYW1zIiwic2hhZGVycyIsInRlY2huaXF1ZXMiLCJtYXRlcmlhbHMiLCJmb3JFYWNoIiwibWF0IiwiaW5kZXgiLCJ2YWx1ZXMiLCJ2dHhmTWF0ZXJpYWxFeHRlbnNpb24iLCJ2YWx1ZSIsInVzIiwidGVjaG5pcXVlIiwidW5pZm9ybXMiLCJrZXkiLCJhdHRyaWJ1dGUiLCJhdHRyaWJ1dGVzIiwibmFtZSIsInBhcmFtZXRlcnMiLCJ1bmlmb3JtIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydGllcyIsIk1vZGVsIiwicHJvdG90eXBlIiwiX2NhY2hlZEdsdGYiLCJzZXQiLCJfdnR4Zl9jYWNoZWRHbHRmIiwiX2dsdGYiLCJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7OztBQUVaOzs7QUFHTyxJQUFNQyw0Q0FBa0IsU0FBbEJBLGVBQWtCLEdBQU07QUFDakMsUUFBSUMsVUFBVSxTQUFWQSxPQUFVLENBQVVDLElBQVYsRUFBZ0I7QUFDMUIsWUFBSSxDQUFDQSxLQUFLQyxjQUFWLEVBQTBCO0FBQ3RCO0FBQ0g7O0FBRUQsWUFBSUMsSUFBSUYsS0FBS0MsY0FBTCxDQUFvQkUsT0FBcEIsQ0FBNEIscUJBQTVCLENBQVI7QUFDQSxZQUFJQyxJQUFJSixLQUFLSyxrQkFBTCxDQUF3QkYsT0FBeEIsQ0FBZ0MscUJBQWhDLENBQVI7QUFDQTtBQUNBLFlBQUlELE1BQU0sQ0FBQyxDQUFYLEVBQWM7QUFDVkYsaUJBQUtLLGtCQUFMLENBQXdCQyxNQUF4QixDQUErQkYsQ0FBL0IsRUFBa0MsQ0FBbEMsRUFBcUMsc0JBQXJD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QUNiLHVCQUFPLEtBQUtGLGdCQUFaO0FBQ0g7QUFUUTtBQUQrQixLQUFoRDtBQWFILENBbkVNIiwiZmlsZSI6IjI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuXHJcbi8qKlxyXG4gKiBjZXNpdW0gMS41MCDvvIwg5Yqg6L295qih5Z6L5pe25oql6ZSZ55qE6Zeu6aKYXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY2VzaXVtMV81MFBhdGNoID0gKCkgPT4ge1xyXG4gICAgdmFyIGZpeEdsdGYgPSBmdW5jdGlvbiAoZ2x0Zikge1xyXG4gICAgICAgIGlmICghZ2x0Zi5leHRlbnNpb25zVXNlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdiA9IGdsdGYuZXh0ZW5zaW9uc1VzZWQuaW5kZXhPZignS0hSX3RlY2huaXF1ZV93ZWJnbCcpO1xyXG4gICAgICAgIHZhciB0ID0gZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZignS0hSX3RlY2huaXF1ZV93ZWJnbCcpO1xyXG4gICAgICAgIC8vIOS4reaLm+S6huOAguOAglxyXG4gICAgICAgIGlmICh2ICE9PSAtMSkge1xyXG4gICAgICAgICAgICBnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZC5zcGxpY2UodCwgMSwgJ0tIUl90ZWNobmlxdWVzX3dlYmdsJyk7XHJcbiAgICAgICAgICAgIGdsdGYuZXh0ZW5zaW9uc1VzZWQuc3BsaWNlKHYsIDEsICdLSFJfdGVjaG5pcXVlc193ZWJnbCcpO1xyXG4gICAgICAgICAgICBnbHRmLmV4dGVuc2lvbnMgPSBnbHRmLmV4dGVuc2lvbnMgfHwge307XHJcbiAgICAgICAgICAgIGdsdGYuZXh0ZW5zaW9uc1snS0hSX3RlY2huaXF1ZXNfd2ViZ2wnXSA9IHt9O1xyXG4gICAgICAgICAgICBnbHRmLmV4dGVuc2lvbnNbJ0tIUl90ZWNobmlxdWVzX3dlYmdsJ10ucHJvZ3JhbXMgPSBnbHRmLnByb2dyYW1zO1xyXG4gICAgICAgICAgICBnbHRmLmV4dGVuc2lvbnNbJ0tIUl90ZWNobmlxdWVzX3dlYmdsJ10uc2hhZGVycyA9IGdsdGYuc2hhZGVycztcclxuICAgICAgICAgICAgZ2x0Zi5leHRlbnNpb25zWydLSFJfdGVjaG5pcXVlc193ZWJnbCddLnRlY2huaXF1ZXMgPSBnbHRmLnRlY2huaXF1ZXM7XHJcbiAgICAgICAgICAgIHZhciB0ZWNobmlxdWVzID0gZ2x0Zi5leHRlbnNpb25zWydLSFJfdGVjaG5pcXVlc193ZWJnbCddLnRlY2huaXF1ZXM7XHJcblxyXG4gICAgICAgICAgICBnbHRmLm1hdGVyaWFscy5mb3JFYWNoKGZ1bmN0aW9uIChtYXQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBnbHRmLm1hdGVyaWFsc1tpbmRleF0uZXh0ZW5zaW9uc1snS0hSX3RlY2huaXF1ZV93ZWJnbCddLnZhbHVlcyA9IGdsdGYubWF0ZXJpYWxzW2luZGV4XS52YWx1ZXM7XHJcbiAgICAgICAgICAgICAgICBnbHRmLm1hdGVyaWFsc1tpbmRleF0uZXh0ZW5zaW9uc1snS0hSX3RlY2huaXF1ZXNfd2ViZ2wnXSA9IGdsdGYubWF0ZXJpYWxzW2luZGV4XS5leHRlbnNpb25zWydLSFJfdGVjaG5pcXVlX3dlYmdsJ107XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHZ0eGZNYXRlcmlhbEV4dGVuc2lvbiA9IGdsdGYubWF0ZXJpYWxzW2luZGV4XS5leHRlbnNpb25zWydLSFJfdGVjaG5pcXVlc193ZWJnbCddO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHZhbHVlIGluIHZ0eGZNYXRlcmlhbEV4dGVuc2lvbi52YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXMgPSB0ZWNobmlxdWVzW3Z0eGZNYXRlcmlhbEV4dGVuc2lvbi50ZWNobmlxdWVdLnVuaWZvcm1zO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNba2V5XSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ0eGZNYXRlcmlhbEV4dGVuc2lvbi52YWx1ZXNba2V5XSA9IHZ0eGZNYXRlcmlhbEV4dGVuc2lvbi52YWx1ZXNbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZ0eGZNYXRlcmlhbEV4dGVuc2lvbi52YWx1ZXNbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGVjaG5pcXVlcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhdHRyaWJ1dGUgaW4gdC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0LmF0dHJpYnV0ZXNbYXR0cmlidXRlXTtcclxuICAgICAgICAgICAgICAgICAgICB0LmF0dHJpYnV0ZXNbYXR0cmlidXRlXSA9IHQucGFyYW1ldGVyc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB1bmlmb3JtIGluIHQudW5pZm9ybXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHQudW5pZm9ybXNbdW5pZm9ybV07XHJcbiAgICAgICAgICAgICAgICAgICAgdC51bmlmb3Jtc1t1bmlmb3JtXSA9IHQucGFyYW1ldGVyc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENlc2l1bS5Nb2RlbC5wcm90b3R5cGUsIHtcclxuICAgICAgICBfY2FjaGVkR2x0Zjoge1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdnR4Zl9jYWNoZWRHbHRmID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdnR4Zl9jYWNoZWRHbHRmICYmIHRoaXMuX3Z0eGZfY2FjaGVkR2x0Zi5fZ2x0Zikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpeEdsdGYodGhpcy5fdnR4Zl9jYWNoZWRHbHRmLl9nbHRmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdnR4Zl9jYWNoZWRHbHRmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.DrawHelper = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 使用es6的方式 ，重新组织drawHelper\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nvar _Tooltip = __webpack_require__(31);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _CirclePrimitive = __webpack_require__(18);\n\nvar _EditableBillboard = __webpack_require__(17);\n\nvar _EllipsePrimitive = __webpack_require__(32);\n\nvar _ExtentPrimitive = __webpack_require__(33);\n\nvar _PolygonPrimitive = __webpack_require__(19);\n\nvar _PolylinePrimitive = __webpack_require__(20);\n\nvar _PolygonHandler = __webpack_require__(34);\n\nvar _PolylineHandler = __webpack_require__(35);\n\nvar _PolySharpPrimitive = __webpack_require__(9);\n\nvar _PolyshapeHandler = __webpack_require__(10);\n\nvar _ExtentHandler = __webpack_require__(36);\n\nvar _CircleHandler = __webpack_require__(37);\n\nvar _util = __webpack_require__(1);\n\nvar _DrawHelperWidget = __webpack_require__(38);\n\nvar _ = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n//todo 用EventSystem接管drawHelper的事件\nvar DrawHelper = exports.DrawHelper = function () {\n    function DrawHelper(viewer) {\n        _classCallCheck(this, DrawHelper);\n\n        this.eventSystem = _.EventSystemInstance.getInstance(viewer);\n        this._viewer = viewer;\n        this._scene = viewer.scene;\n        this._tooltip = new _Tooltip.Tooltip(viewer.container);\n        this._surfaces = [];\n        //适配\n        Cesium.defined(Cesium.ContextLimits) && (Cesium.ContextLimits._maximumAliasedLineWidth = 10);\n\n        // this.initialiseHandlers();\n        //\n        // this.enhancePrimitives();\n        (0, _EventHelper.enhanceWithListeners)(this);\n    }\n\n    _createClass(DrawHelper, [{\n        key: "addToolbar",\n        value: function addToolbar(container, options) {\n            options = (0, _util.copyOptions)(options, { container: container });\n            return new _DrawHelperWidget.DrawHelperWidget(this, options);\n        }\n    }, {\n        key: "startDrawing",\n        value: function startDrawing(cleanUp) {\n            // undo any current edit of shapes\n            this.disableAllEditMode();\n            // check for cleanUp first\n            if (this.editCleanUp) {\n                this.editCleanUp();\n            }\n            this.editCleanUp = cleanUp;\n            this.muteHandlers(true);\n        }\n    }, {\n        key: "stopDrawing",\n        value: function stopDrawing() {\n            // check for cleanUp first\n            if (this.editCleanUp) {\n                this.editCleanUp();\n                this.editCleanUp = null;\n            }\n            this.muteHandlers(false);\n        }\n    }, {\n        key: "muteHandlers",\n        value: function muteHandlers(muted) {\n            this._handlersMuted = muted;\n        }\n\n        // make sure only one shape is highlighted at a time\n\n    }, {\n        key: "disableAllHighlights",\n        value: function disableAllHighlights() {\n            this.setHighlighted(undefined);\n        }\n    }, {\n        key: "setHighlighted",\n        value: function setHighlighted(surface) {\n            if (this._highlightedSurface && !this._highlightedSurface.isDestroyed() && this._highlightedSurface != surface) {\n                this._highlightedSurface.setHighlighted(false);\n            }\n            this._highlightedSurface = surface;\n        }\n    }, {\n        key: "disableAllEditMode",\n        value: function disableAllEditMode() {\n            this.setEdited(undefined);\n        }\n    }, {\n        key: "setEdited",\n        value: function setEdited(surface) {\n            if (this._editedSurface && !this._editedSurface.isDestroyed()) {\n                this._editedSurface.setEditMode(false);\n            }\n            this._editedSurface = surface;\n        }\n    }, {\n        key: "createBillboardGroup",\n        value: function createBillboardGroup(points, options, callbacks) {\n            var markers = new _BillboardGroup.BillboardGroup(this, options);\n            markers.addBillboards(points, callbacks);\n            return markers;\n        }\n    }, {\n        key: "startDrawingMarker",\n        value: function startDrawingMarker(options) {}\n    }, {\n        key: "startDrawingPolygon",\n        value: function startDrawingPolygon(options) {\n            new _PolygonHandler.PolygonHandler().start(options, this);\n        }\n    }, {\n        key: "startDrawingPolyline",\n        value: function startDrawingPolyline(options) {\n            new _PolylineHandler.PolylineHandler().start(options, this);\n        }\n    }, {\n        key: "startDrawingPolyshape",\n        value: function startDrawingPolyshape(options) {\n            new _PolyshapeHandler.PolyshapeHandler().start(options, this);\n        }\n    }, {\n        key: "startDrawingExtent",\n        value: function startDrawingExtent(options) {\n            new _ExtentHandler.ExtentHandler().start(options, this);\n        }\n    }, {\n        key: "startDrawingCircle",\n        value: function startDrawingCircle(options) {\n            new _CircleHandler.CircleHandler().start(options, this);\n        }\n    }, {\n        key: "enhancePrimitives",\n        value: function enhancePrimitives() {}\n    }, {\n        key: "createEditableCirclePrimitive",\n        value: function createEditableCirclePrimitive(options) {\n            return new _CirclePrimitive.CirclePrimitive(options, this);\n        }\n    }, {\n        key: "createEditableBillboard",\n        value: function createEditableBillboard(options) {\n            return new _EditableBillboard.EditableBillboard(options, this.viewer);\n        }\n    }, {\n        key: "createEditableEllipsePrimitive",\n        value: function createEditableEllipsePrimitive(options) {\n            return new _EllipsePrimitive.EllipsePrimitive(options, this);\n        }\n    }, {\n        key: "createEditableExtentPrimitive",\n        value: function createEditableExtentPrimitive(options) {\n            return new _ExtentPrimitive.ExtentPrimitive(options, this);\n        }\n    }, {\n        key: "createEditablePolygonPrimitive",\n        value: function createEditablePolygonPrimitive(options) {\n            return new _PolygonPrimitive.PolygonPrimitive(options, this);\n        }\n    }, {\n        key: "createEditablePolylinePrimitive",\n        value: function createEditablePolylinePrimitive(options) {\n            return new _PolylinePrimitive.PolylinePrimitive(options, this);\n        }\n\n        /**\r\n         * 绑定触发编辑的点击事件\r\n         * @param surface\r\n         */\n\n    }, {\n        key: "registerEditableShape",\n        value: function registerEditableShape(surface) {\n            var _this = this;\n\n            this.eventSystem.onMouseMove(surface, function (position) {\n                surface.setHighlighted(true);\n                if (!surface._editMode) {\n                    _this._tooltip.showAt(position, "Click to edit this shape");\n                }\n            });\n\n            this.eventSystem.onMouseMoveOut(surface, function (position) {\n                surface.setHighlighted(false);\n                _this._tooltip.setVisible(false);\n            });\n\n            this.eventSystem.onLeftClick(surface, function () {\n                surface.setEditMode(true);\n            });\n            // setListener(surface, \'mouseMove\', function (position) {\n            //     surface.setHighlighted(true);\n            //     if (!surface._editMode) {\n            //         this._tooltip.showAt(position, "Click to edit this shape");\n            //     }\n            // });\n            // hide the highlighting when mouse is leaving the polygon\n            // setListener(surface, \'mouseOut\', function (position) {\n            //     surface.setHighlighted(false);\n            //     this._tooltip.setVisible(false);\n            // });\n            // setListener(surface, \'leftClick\', function (position) {\n            //     surface.setEditMode(true);\n            // });\n        }\n    }, {\n        key: "viewer",\n        get: function get() {\n            return this._viewer;\n        },\n        set: function set(value) {\n            this._viewer = value;\n        }\n    }, {\n        key: "scene",\n        get: function get() {\n            return this._scene;\n        },\n        set: function set(value) {\n            this._scene = value;\n        }\n    }, {\n        key: "tooltip",\n        get: function get() {\n            return this._tooltip;\n        },\n        set: function set(value) {\n            this._tooltip = value;\n        }\n    }, {\n        key: "surfaces",\n        get: function get() {\n            return this._surfaces;\n        },\n        set: function set(value) {\n            this._surfaces = value;\n        }\n    }]);\n\n    return DrawHelper;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvRHJhd0hlbHBlclYyLmpzPzU1MjciXSwibmFtZXMiOlsiQ2VzaXVtIiwiRHJhd0hlbHBlciIsInZpZXdlciIsImV2ZW50U3lzdGVtIiwiRXZlbnRTeXN0ZW1JbnN0YW5jZSIsImdldEluc3RhbmNlIiwiX3ZpZXdlciIsIl9zY2VuZSIsInNjZW5lIiwiX3Rvb2x0aXAiLCJUb29sdGlwIiwiY29udGFpbmVyIiwiX3N1cmZhY2VzIiwiZGVmaW5lZCIsIkNvbnRleHRMaW1pdHMiLCJfbWF4aW11bUFsaWFzZWRMaW5lV2lkdGgiLCJvcHRpb25zIiwiRHJhd0hlbHBlcldpZGdldCIsImNsZWFuVXAiLCJkaXNhYmxlQWxsRWRpdE1vZGUiLCJlZGl0Q2xlYW5VcCIsIm11dGVIYW5kbGVycyIsIm11dGVkIiwiX2hhbmRsZXJzTXV0ZWQiLCJzZXRIaWdobGlnaHRlZCIsInVuZGVmaW5lZCIsInN1cmZhY2UiLCJfaGlnaGxpZ2h0ZWRTdXJmYWNlIiwiaXNEZXN0cm95ZWQiLCJzZXRFZGl0ZWQiLCJfZWRpdGVkU3VyZmFjZSIsInNldEVkaXRNb2RlIiwicG9pbnRzIiwiY2FsbGJhY2tzIiwibWFya2VycyIsIkJpbGxib2FyZEdyb3VwIiwiYWRkQmlsbGJvYXJkcyIsIlBvbHlnb25IYW5kbGVyIiwic3RhcnQiLCJQb2x5bGluZUhhbmRsZXIiLCJQb2x5c2hhcGVIYW5kbGVyIiwiRXh0ZW50SGFuZGxlciIsIkNpcmNsZUhhbmRsZXIiLCJDaXJjbGVQcmltaXRpdmUiLCJFZGl0YWJsZUJpbGxib2FyZCIsIkVsbGlwc2VQcmltaXRpdmUiLCJFeHRlbnRQcmltaXRpdmUiLCJQb2x5Z29uUHJpbWl0aXZlIiwiUG9seWxpbmVQcmltaXRpdmUiLCJvbk1vdXNlTW92ZSIsInBvc2l0aW9uIiwiX2VkaXRNb2RlIiwic2hvd0F0Iiwib25Nb3VzZU1vdmVPdXQiLCJzZXRWaXNpYmxlIiwib25MZWZ0Q2xp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QVIsQ0FBdUIsSUFBdkI7QUFDQSxvQkFBSSxDQUFDRSxRQUFReUIsU0FBYixFQUF3QjtBQUNwQiwwQkFBSzFDLFFBQUwsQ0FBYzJDLE1BQWQsQ0FBcUJGLFFBQXJCLEVBQStCLDBCQUEvQjtBQUNIO0FBQ0osYUFMRDs7QUFPQSxpQkFBSy9DLFdBQUwsQ0FBaUJrRCxjQUFqQixDQUFnQzNCLE9BQWhDLEVBQXdDLFVBQUN3QixRQUFELEVBQVk7QUFDaER4Qix3QkFBUUYsY0FBUixDQUF1QixLQUF2QjtBQUNBLHNCQUFLZixRQUFMLENBQWM2QyxVQUFkLENBQXlCLEtBQXpCO0FBQ0gsYUFIRDs7QUFLQSxpQkFBS25ELFdBQUwsQ0FBaUJvRCxXQUFqQixDQUE2QjdCLE9BQTdCLEVBQXFDLFlBQUk7QUFDckNBLHdCQUFRSyxXQUFSLENBQW9CLElBQXBCO0FBQ0gsYUFGRDtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7OzRCQUdZO0FBQ1QsbUJBQU8sS0FBS3pCLE9BQVo7QUFDSCxTOzBCQUVVa0QsSyxFQUFPO0FBQ2QsaUJBQUtsRCxPQUFMLEdBQWVrRCxLQUFmO0FBQ0g7Ozs0QkFFVztBQUNSLG1CQUFPLEtBQUtqRCxNQUFaO0FBQ0gsUzswQkFFU2lELEssRUFBTztBQUNiLGlCQUFLakQsTUFBTCxHQUFjaUQsS0FBZDtBQUNIOzs7NEJBRWE7QUFDVixtQkFBTyxLQUFLL0MsUUFBWjtBQUNILFM7MEJBRVcrQyxLLEVBQU87QUFDZixpQkFBSy9DLFFBQUwsR0FBZ0IrQyxLQUFoQjtBQUNIOzs7NEJBRWM7QUFDWCxtQkFBTyxLQUFLNUMsU0FBWjtBQUNILFM7MEJBRVk0QyxLLEVBQU87QUFDaEIsaUJBQUs1QyxTQUFMLEdBQWlCNEMsS0FBakI7QUFDSCIsImZpbGUiOiIzMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDkvb/nlKhlczbnmoTmlrnlvI8g77yM6YeN5paw57uE57uHZHJhd0hlbHBlclxyXG4gKi9cclxuaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtCaWxsYm9hcmRHcm91cH0gZnJvbSBcIi4vcHJpbWl0aXZlL0JpbGxib2FyZEdyb3VwXCI7XHJcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcIi4vd2lkZ2V0L1Rvb2x0aXBcIjtcclxuaW1wb3J0IHtlbmhhbmNlV2l0aExpc3RlbmVycywgc2V0TGlzdGVuZXJ9IGZyb20gXCIuL3V0aWwvRXZlbnRIZWxwZXJcIjtcclxuaW1wb3J0IHtDaXJjbGVQcmltaXRpdmV9IGZyb20gXCIuL3ByaW1pdGl2ZS9DaXJjbGVQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtFZGl0YWJsZUJpbGxib2FyZH0gZnJvbSBcIi4vcHJpbWl0aXZlL0VkaXRhYmxlQmlsbGJvYXJkXCI7XHJcbmltcG9ydCB7RWxsaXBzZVByaW1pdGl2ZX0gZnJvbSBcIi4vcHJpbWl0aXZlL0VsbGlwc2VQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtFeHRlbnRQcmltaXRpdmV9IGZyb20gXCIuL3ByaW1pdGl2ZS9FeHRlbnRQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtQb2x5Z29uUHJpbWl0aXZlfSBmcm9tIFwiLi9wcmltaXRpdmUvUG9seWdvblByaW1pdGl2ZVwiO1xyXG5pbXBvcnQge1BvbHlsaW5lUHJpbWl0aXZlfSBmcm9tIFwiLi9wcmltaXRpdmUvUG9seWxpbmVQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtQb2x5Z29uSGFuZGxlcn0gZnJvbSBcIi4vaGFuZGxlci9Qb2x5Z29uSGFuZGxlclwiO1xyXG5pbXBvcnQge1BvbHlsaW5lSGFuZGxlcn0gZnJvbSBcIi4vaGFuZGxlci9Qb2x5bGluZUhhbmRsZXJcIjtcclxuaW1wb3J0IHtQb2x5U2hhcnBQcmltaXRpdmV9IGZyb20gXCIuL3ByaW1pdGl2ZS9Qb2x5U2hhcnBQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtQb2x5c2hhcGVIYW5kbGVyfSBmcm9tIFwiLi9oYW5kbGVyL1BvbHlzaGFwZUhhbmRsZXJcIjtcclxuaW1wb3J0IHtFeHRlbnRIYW5kbGVyfSBmcm9tIFwiLi9oYW5kbGVyL0V4dGVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHtDaXJjbGVIYW5kbGVyfSBmcm9tIFwiLi9oYW5kbGVyL0NpcmNsZUhhbmRsZXJcIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4vdXRpbC91dGlsXCI7XHJcbmltcG9ydCB7RHJhd0hlbHBlcldpZGdldH0gZnJvbSBcIi4vd2lkZ2V0L0RyYXdIZWxwZXJXaWRnZXRcIjtcclxuaW1wb3J0IHtFdmVudFN5c3RlbUluc3RhbmNlfSBmcm9tIFwiLi4vLi5cIjtcclxuXHJcbi8vdG9kbyDnlKhFdmVudFN5c3RlbeaOpeeuoWRyYXdIZWxwZXLnmoTkuovku7ZcclxuZXhwb3J0IGNsYXNzIERyYXdIZWxwZXIge1xyXG4gICAgY29uc3RydWN0b3Iodmlld2VyKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudFN5c3RlbSA9IEV2ZW50U3lzdGVtSW5zdGFuY2UuZ2V0SW5zdGFuY2Uodmlld2VyKTtcclxuICAgICAgICB0aGlzLl92aWV3ZXIgPSB2aWV3ZXI7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUgPSB2aWV3ZXIuc2NlbmU7XHJcbiAgICAgICAgdGhpcy5fdG9vbHRpcCA9IG5ldyBUb29sdGlwKHZpZXdlci5jb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuX3N1cmZhY2VzID0gW107XHJcbiAgICAgICAgLy/pgILphY1cclxuICAgICAgICAoQ2VzaXVtLmRlZmluZWQoQ2VzaXVtLkNvbnRleHRMaW1pdHMpKSAmJiAoXHJcbiAgICAgICAgICAgIENlc2l1bS5Db250ZXh0TGltaXRzLl9tYXhpbXVtQWxpYXNlZExpbmVXaWR0aCA9IDEwKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5pbml0aWFsaXNlSGFuZGxlcnMoKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHRoaXMuZW5oYW5jZVByaW1pdGl2ZXMoKTtcclxuICAgICAgICBlbmhhbmNlV2l0aExpc3RlbmVycyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb29sYmFyKGNvbnRhaW5lciwgb3B0aW9ucyl7XHJcbiAgICAgICAgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIHtjb250YWluZXI6IGNvbnRhaW5lcn0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRHJhd0hlbHBlcldpZGdldCh0aGlzLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmcoY2xlYW5VcCkge1xyXG4gICAgICAgIC8vIHVuZG8gYW55IGN1cnJlbnQgZWRpdCBvZiBzaGFwZXNcclxuICAgICAgICB0aGlzLmRpc2FibGVBbGxFZGl0TW9kZSgpO1xyXG4gICAgICAgIC8vIGNoZWNrIGZvciBjbGVhblVwIGZpcnN0XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdENsZWFuVXApIHtcclxuICAgICAgICAgICAgdGhpcy5lZGl0Q2xlYW5VcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVkaXRDbGVhblVwID0gY2xlYW5VcDtcclxuICAgICAgICB0aGlzLm11dGVIYW5kbGVycyh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wRHJhd2luZygpIHtcclxuICAgICAgICAvLyBjaGVjayBmb3IgY2xlYW5VcCBmaXJzdFxyXG4gICAgICAgIGlmICh0aGlzLmVkaXRDbGVhblVwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdENsZWFuVXAoKTtcclxuICAgICAgICAgICAgdGhpcy5lZGl0Q2xlYW5VcCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubXV0ZUhhbmRsZXJzKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBtdXRlSGFuZGxlcnMobXV0ZWQpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVyc011dGVkID0gbXV0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBzdXJlIG9ubHkgb25lIHNoYXBlIGlzIGhpZ2hsaWdodGVkIGF0IGEgdGltZVxyXG4gICAgZGlzYWJsZUFsbEhpZ2hsaWdodHMoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRIaWdobGlnaHRlZCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEhpZ2hsaWdodGVkKHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5faGlnaGxpZ2h0ZWRTdXJmYWNlICYmICF0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UuaXNEZXN0cm95ZWQoKSAmJiB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UgIT0gc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2Uuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UgPSBzdXJmYWNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVBbGxFZGl0TW9kZSgpIHtcclxuICAgICAgICB0aGlzLnNldEVkaXRlZCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEVkaXRlZChzdXJmYWNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRlZFN1cmZhY2UgJiYgIXRoaXMuX2VkaXRlZFN1cmZhY2UuaXNEZXN0cm95ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lZGl0ZWRTdXJmYWNlLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZWRpdGVkU3VyZmFjZSA9IHN1cmZhY2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNyZWF0ZUJpbGxib2FyZEdyb3VwKHBvaW50cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgdmFyIG1hcmtlcnMgPSBuZXcgQmlsbGJvYXJkR3JvdXAodGhpcywgb3B0aW9ucyk7XHJcbiAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmRzKHBvaW50cywgY2FsbGJhY2tzKTtcclxuICAgICAgICByZXR1cm4gbWFya2VycztcclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmdNYXJrZXIob3B0aW9ucykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmdQb2x5Z29uKG9wdGlvbnMpIHtcclxuICAgICAgICBuZXcgUG9seWdvbkhhbmRsZXIoKS5zdGFydChvcHRpb25zLHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0RHJhd2luZ1BvbHlsaW5lKG9wdGlvbnMpIHtcclxuICAgICAgICBuZXcgUG9seWxpbmVIYW5kbGVyKCkuc3RhcnQob3B0aW9ucyx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmdQb2x5c2hhcGUob3B0aW9ucykge1xyXG4gICAgICAgIG5ldyBQb2x5c2hhcGVIYW5kbGVyKCkuc3RhcnQob3B0aW9ucyx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmdFeHRlbnQob3B0aW9ucykge1xyXG4gICAgICAgIG5ldyBFeHRlbnRIYW5kbGVyKCkuc3RhcnQob3B0aW9ucyx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydERyYXdpbmdDaXJjbGUob3B0aW9ucykge1xyXG4gICAgICAgIG5ldyBDaXJjbGVIYW5kbGVyKCkuc3RhcnQob3B0aW9ucyx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmhhbmNlUHJpbWl0aXZlcygpIHtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNyZWF0ZUVkaXRhYmxlQ2lyY2xlUHJpbWl0aXZlKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENpcmNsZVByaW1pdGl2ZShvcHRpb25zLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVFZGl0YWJsZUJpbGxib2FyZChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0YWJsZUJpbGxib2FyZChvcHRpb25zLCB0aGlzLnZpZXdlcik7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRWRpdGFibGVFbGxpcHNlUHJpbWl0aXZlKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVsbGlwc2VQcmltaXRpdmUob3B0aW9ucywgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRWRpdGFibGVFeHRlbnRQcmltaXRpdmUob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRXh0ZW50UHJpbWl0aXZlKG9wdGlvbnMsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUVkaXRhYmxlUG9seWdvblByaW1pdGl2ZShvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uUHJpbWl0aXZlKG9wdGlvbnMsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUVkaXRhYmxlUG9seWxpbmVQcmltaXRpdmUob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9seWxpbmVQcmltaXRpdmUob3B0aW9ucywgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5Hlrprop6blj5HnvJbovpHnmoTngrnlh7vkuovku7ZcclxuICAgICAqIEBwYXJhbSBzdXJmYWNlXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyRWRpdGFibGVTaGFwZShzdXJmYWNlKXtcclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uTW91c2VNb3ZlKHN1cmZhY2UsKHBvc2l0aW9uKT0+e1xyXG4gICAgICAgICAgICBzdXJmYWNlLnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoIXN1cmZhY2UuX2VkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b29sdGlwLnNob3dBdChwb3NpdGlvbiwgXCJDbGljayB0byBlZGl0IHRoaXMgc2hhcGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uTW91c2VNb3ZlT3V0KHN1cmZhY2UsKHBvc2l0aW9uKT0+e1xyXG4gICAgICAgICAgICBzdXJmYWNlLnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5fdG9vbHRpcC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50U3lzdGVtLm9uTGVmdENsaWNrKHN1cmZhY2UsKCk9PntcclxuICAgICAgICAgICAgc3VyZmFjZS5zZXRFZGl0TW9kZSh0cnVlKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldExpc3RlbmVyKHN1cmZhY2UsICdtb3VzZU1vdmUnLCBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICAvLyAgICAgc3VyZmFjZS5zZXRIaWdobGlnaHRlZCh0cnVlKTtcclxuICAgICAgICAvLyAgICAgaWYgKCFzdXJmYWNlLl9lZGl0TW9kZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5fdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiQ2xpY2sgdG8gZWRpdCB0aGlzIHNoYXBlXCIpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgLy8gaGlkZSB0aGUgaGlnaGxpZ2h0aW5nIHdoZW4gbW91c2UgaXMgbGVhdmluZyB0aGUgcG9seWdvblxyXG4gICAgICAgIC8vIHNldExpc3RlbmVyKHN1cmZhY2UsICdtb3VzZU91dCcsIGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgIC8vICAgICBzdXJmYWNlLnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5fdG9vbHRpcC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICAvLyBzZXRMaXN0ZW5lcihzdXJmYWNlLCAnbGVmdENsaWNrJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgLy8gICAgIHN1cmZhY2Uuc2V0RWRpdE1vZGUodHJ1ZSk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldCB2aWV3ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdlcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdmlld2VyKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdmlld2VyID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNjZW5lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2NlbmUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zY2VuZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0b29sdGlwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b29sdGlwO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0b29sdGlwKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdG9vbHRpcCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXJmYWNlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3VyZmFjZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHN1cmZhY2VzKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fc3VyZmFjZXMgPSB2YWx1ZTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///30\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar Tooltip = exports.Tooltip = function () {\n    function Tooltip(frameDiv) {\n        _classCallCheck(this, Tooltip);\n\n        var div = document.createElement(\'DIV\');\n        div.className = "twipsy right";\n\n        var arrow = document.createElement(\'DIV\');\n        arrow.className = "twipsy-arrow";\n        div.appendChild(arrow);\n\n        var title = document.createElement(\'DIV\');\n        title.className = "twipsy-inner";\n\n        div.appendChild(title);\n\n        this._div = div;\n        this._title = title;\n\n        // add to frame div and display coordinates\n        frameDiv.appendChild(div);\n        this.addEvent();\n        this.setVisible(false);\n    }\n\n    _createClass(Tooltip, [{\n        key: \'setVisible\',\n        value: function setVisible(visible) {\n            this._div.style.display = visible ? \'block\' : \'none\';\n        }\n    }, {\n        key: \'showAt\',\n        value: function showAt(position, message) {\n            if (position && message) {\n                this.setVisible(true);\n                this._title.innerHTML = message;\n                // this._div.style.left = position.x + 10 + "px";\n                // this._div.style.top = (position.y - this._div.clientHeight / 2) + "px";\n            }\n        }\n    }, {\n        key: \'show\',\n        value: function show(message) {\n            if (message) {\n                this.setVisible(true);\n                this._title.innerHTML = message;\n            }\n        }\n    }, {\n        key: \'addEvent\',\n        value: function addEvent() {\n            var me = this;\n            var count = 0;\n            document.body.addEventListener("mousemove", function (ev) {\n                if (me._div.style.display === \'block\' && (count = count++ % 3) === 0) {\n                    me._div.style.left = ev.offsetX + 20 + "px";\n                    me._div.style.top = ev.offsetY - me._div.clientHeight / 2 + "px";\n                }\n            });\n        }\n    }]);\n\n    return Tooltip;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvd2lkZ2V0L1Rvb2x0aXAuanM/MTAxMSJdLCJuYW1lcyI6WyJUb29sdGlwIiwiZnJhbWVEaXYiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcnJvdyIsImFwcGVuZENoaWxkIiwidGl0bGUiLCJfZGl2IiwiX3RpdGxlIiwiYWRkRXZlbnQiLCJzZXRWaXNpYmxlIiwidmlzaWJsZSIsInN0eWxlIiwiZGlzcGxheSIsInBvc2l0aW9uIiwibWVzc2FnZSIsImlubmVySFRNTCIsIm1lIiwiY291bnQiLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwibGVmdCIsIm9mZnNldFgiLCJ0b3AiLCJvZmZzZXRZIiwiY2xpZW50SGVpZ2h0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQWFBLE8sV0FBQUEsTztBQUNULHFCQUFZQyxRQUFaLEVBQXNCO0FBQUE7O0FBQ2xCLFlBQUlDLE1BQU1DLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNBRixZQUFJRyxTQUFKLEdBQWdCLGNBQWhCOztBQUVBLFlBQUlDLFFBQVFILFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBWjtBQUNBRSxjQUFNRCxTQUFOLEdBQWtCLGNBQWxCO0FBQ0FILFlBQUlLLFdBQUosQ0FBZ0JELEtBQWhCOztBQUVBLFlBQUlFLFFBQVFMLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBWjtBQUNBSSxjQUFNSCxTQUFOLEdBQWtCLGNBQWxCOztBQUVBSCxZQUFJSyxXQUFKLENBQWdCQyxLQUFoQjs7QUFFQSxhQUFLQyxJQUFMLEdBQVlQLEdBQVo7QUFDQSxhQUFLUSxNQUFMLEdBQWNGLEtBQWQ7O0FBRUE7QUFDQVAsaUJBQVNNLFdBQVQsQ0FBcUJMLEdBQXJCO0FBQ0EsYUFBS1MsUUFBTDtBQUNBLGFBQUtDLFVBQUwsQ0FBZ0IsS0FBaEI7QUFDSDs7OzttQ0FFVUMsTyxFQUFTO0FBQ2hCLGlCQUFLSixJQUFMLENBQVVLLEtBQVYsQ0FBZ0JDLE9BQWhCLEdBQTBCRixVQUFVLE9BQVYsR0FBb0IsTUFBOUM7QUFDSDs7OytCQUVNRyxRLEVBQVVDLE8sRUFBUztBQUN0QixnQkFBSUQsWUFBWUMsT0FBaEIsRUFBeUI7QUFDckIscUJBQUtMLFVBQUwsQ0FBZ0IsSUFBaEI7QUFDQSxxQkFBS0YsTUFBTCxDQUFZUSxTQUFaLEdBQXdCRCxPQUF4QjtBQUNBO0FBQ0E7QUFDSDtBQUNKOzs7NkJBRUlBLE8sRUFBUztBQUNWLGdCQUFJQSxPQUFKLEVBQWE7QUFDVCxxQkFBS0wsVUFBTCxDQUFnQixJQUFoQjtBQUNBLHFCQUFLRixNQUFMLENBQVlRLFNBQVosR0FBd0JELE9BQXhCO0FBQ0g7QUFDSjs7O21DQUVVO0FBQ1AsZ0JBQUlFLEtBQUssSUFBVDtBQUNBLGdCQUFJQyxRQUFRLENBQVo7QUFDQWpCLHFCQUFTa0IsSUFBVCxDQUFjQyxnQkFBZCxDQUErQixXQUEvQixFQUE0QyxVQUFVQyxFQUFWLEVBQWM7QUFDdEQsb0JBQUlKLEdBQUdWLElBQUgsQ0FBUUssS0FBUixDQUFjQyxPQUFkLEtBQTBCLE9BQTFCLElBQXFDLENBQUNLLFFBQVVBLE9BQUQsR0FBWSxDQUF0QixNQUE4QixDQUF2RSxFQUEwRTtBQUN0RUQsdUJBQUdWLElBQUgsQ0FBUUssS0FBUixDQUFjVSxJQUFkLEdBQXFCRCxHQUFHRSxPQUFILEdBQWEsRUFBYixHQUFrQixJQUF2QztBQUNBTix1QkFBR1YsSUFBSCxDQUFRSyxLQUFSLENBQWNZLEdBQWQsR0FBcUJILEdBQUdJLE9BQUgsR0FBYVIsR0FBR1YsSUFBSCxDQUFRbUIsWUFBUixHQUF1QixDQUFyQyxHQUEwQyxJQUE5RDtBQUNIO0FBQ0osYUFMRDtBQU1IIiwiZmlsZSI6IjMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFRvb2x0aXAge1xyXG4gICAgY29uc3RydWN0b3IoZnJhbWVEaXYpIHtcclxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9IFwidHdpcHN5IHJpZ2h0XCI7XHJcblxyXG4gICAgICAgIGxldCBhcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIGFycm93LmNsYXNzTmFtZSA9IFwidHdpcHN5LWFycm93XCI7XHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGFycm93KTtcclxuXHJcbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJ0d2lwc3ktaW5uZXJcIjtcclxuXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGl2ID0gZGl2O1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0byBmcmFtZSBkaXYgYW5kIGRpc3BsYXkgY29vcmRpbmF0ZXNcclxuICAgICAgICBmcmFtZURpdi5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnQoKTtcclxuICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZpc2libGUodmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMuX2Rpdi5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0F0KHBvc2l0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uICYmIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl90aXRsZS5pbm5lckhUTUwgPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLl9kaXYuc3R5bGUubGVmdCA9IHBvc2l0aW9uLnggKyAxMCArIFwicHhcIjtcclxuICAgICAgICAgICAgLy8gdGhpcy5fZGl2LnN0eWxlLnRvcCA9IChwb3NpdGlvbi55IC0gdGhpcy5fZGl2LmNsaWVudEhlaWdodCAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93KG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlLmlubmVySFRNTCA9IG1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEV2ZW50KCkge1xyXG4gICAgICAgIGxldCBtZSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgIGlmIChtZS5fZGl2LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycgJiYgKGNvdW50ID0gKChjb3VudCsrKSAlIDMpKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbWUuX2Rpdi5zdHlsZS5sZWZ0ID0gZXYub2Zmc2V0WCArIDIwICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgbWUuX2Rpdi5zdHlsZS50b3AgPSAoZXYub2Zmc2V0WSAtIG1lLl9kaXYuY2xpZW50SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///31\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.EllipsePrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _ChangeablePrimitive2 = __webpack_require__(6);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _EventHelper = __webpack_require__(4);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EllipsePrimitive = exports.EllipsePrimitive = function (_ChangeablePrimitive) {\n    _inherits(EllipsePrimitive, _ChangeablePrimitive);\n\n    function EllipsePrimitive(options, drawHelper) {\n        _classCallCheck(this, EllipsePrimitive);\n\n        var _this = _possibleConstructorReturn(this, (EllipsePrimitive.__proto__ || Object.getPrototypeOf(EllipsePrimitive)).call(this));\n\n        if (!(Cesium.defined(options.center) && Cesium.defined(options.semiMajorAxis) && Cesium.defined(options.semiMinorAxis))) {\n            throw new Cesium.DeveloperError(\'Center and semi major and semi minor axis are required\');\n        }\n        _this._drawHelper = drawHelper;\n\n        options = (0, _util.copyOptions)(options, _DefaultValue.defaultEllipseOptions);\n\n        _this.initialiseOptions(options);\n        drawHelper.registerEditableShape(_this);\n        (0, _EventHelper.enhanceWithListeners)(_this);\n\n        return _this;\n    }\n\n    _createClass(EllipsePrimitive, [{\n        key: "setCenter",\n        value: function setCenter(center) {\n            this.setAttribute(\'center\', center);\n        }\n    }, {\n        key: "setSemiMajorAxis",\n        value: function setSemiMajorAxis(semiMajorAxis) {\n            if (semiMajorAxis < this.getSemiMinorAxis()) return;\n            this.setAttribute(\'semiMajorAxis\', semiMajorAxis);\n        }\n    }, {\n        key: "setSemiMinorAxis",\n        value: function setSemiMinorAxis(semiMinorAxis) {\n            if (semiMinorAxis > this.getSemiMajorAxis()) return;\n            this.setAttribute(\'semiMinorAxis\', semiMinorAxis);\n        }\n    }, {\n        key: "setRotation",\n        value: function setRotation(rotation) {\n            return this.setAttribute(\'rotation\', rotation);\n        }\n    }, {\n        key: "getCenter",\n        value: function getCenter() {\n            return this.getAttribute(\'center\');\n        }\n    }, {\n        key: "getSemiMajorAxis",\n        value: function getSemiMajorAxis() {\n            return this.getAttribute(\'semiMajorAxis\');\n        }\n    }, {\n        key: "getSemiMinorAxis",\n        value: function getSemiMinorAxis() {\n            return this.getAttribute(\'semiMinorAxis\');\n        }\n    }, {\n        key: "getRotation",\n        value: function getRotation() {\n            return this.getAttribute(\'rotation\');\n        }\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n\n            if (!(Cesium.defined(this.center) && Cesium.defined(this.semiMajorAxis) && Cesium.defined(this.semiMinorAxis))) {\n                return;\n            }\n\n            return new Cesium.EllipseGeometry({\n                ellipsoid: this.ellipsoid,\n                center: this.center,\n                semiMajorAxis: this.semiMajorAxis,\n                semiMinorAxis: this.semiMinorAxis,\n                rotation: this.rotation,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                granularity: this.granularity\n            });\n        }\n    }, {\n        key: "getOutlineGeometry",\n        value: function getOutlineGeometry() {\n            return new Cesium.EllipseOutlineGeometry({\n                center: this.getCenter(),\n                semiMajorAxis: this.getSemiMajorAxis(),\n                semiMinorAxis: this.getSemiMinorAxis(),\n                rotation: this.getRotation()\n            });\n        }\n    }, {\n        key: "setEditMode",\n        value: function setEditMode() {\n            var _this2 = this;\n\n            var editMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            // if no change\n            if (this._editMode == editMode) {\n                return;\n            }\n            var drawHelper = this._drawHelper;\n            var scene = drawHelper.scene;\n            var ellipse = this;\n            var getMarkerPositions = function getMarkerPositions() {\n                return Cesium.Shapes.computeEllipseBoundary(_DefaultValue.ellipsoid, _this2.getCenter(), _this2.getSemiMajorAxis(), _this2.getSemiMinorAxis(), _this2.getRotation() + Math.PI / 2, Math.PI / 2.0).splice(0, 4);\n            };\n\n            var onEdited = function onEdited() {\n                _this2.executeListeners({\n                    name: \'onEdited\',\n                    center: _this2.getCenter(),\n                    semiMajorAxis: _this2.getSemiMajorAxis(),\n                    semiMinorAxis: _this2.getSemiMinorAxis(),\n                    rotation: 0\n                });\n            };\n\n            drawHelper.disableAllHighlights();\n            // display markers\n            if (editMode) {\n                // make sure all other shapes are not in edit mode before starting the editing of this shape\n                drawHelper.setEdited(this);\n                var _self = this;\n                // create the markers and handlers for the editing\n                if (this._markers == null) {\n                    var thisDragBillboard = this.dragBillboard ? this.dragBillboard : dragBillboard;\n\n                    var markers = new _.BillboardGroup(drawHelper, thisDragBillboard);\n\n                    var handleMarkerChanges = {\n                        dragHandlers: {\n                            onDrag: function onDrag(index, position) {\n                                var distance = Cesium.Cartesian3.distance(ellipse.getCenter(), position);\n                                if (index % 2 == 0) {\n                                    ellipse.setSemiMajorAxis(distance);\n                                } else {\n                                    ellipse.setSemiMinorAxis(distance);\n                                }\n                                markers.updateBillboardsPositions(getMarkerPositions());\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                onEdited();\n                            }\n                        },\n                        tooltip: function tooltip() {\n                            return "Drag to change the excentricity and radius";\n                        }\n                    };\n                    markers.addBillboards(getMarkerPositions(), handleMarkerChanges);\n                    this._markers = markers;\n                    // add a handler for clicking in the globe\n                    this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                    this._globeClickhandler.setInputAction(function (movement) {\n                        var pickedObject = scene.pick(movement.position);\n                        if (!(pickedObject && pickedObject.primitive)) {\n                            _self.setEditMode(false);\n                        }\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                    // set on top of the polygon\n                    markers.setOnTop();\n                }\n                this._editMode = true;\n            } else {\n                if (this._markers != null) {\n                    this._markers.remove();\n                    this._markers = null;\n                    this._globeClickhandler.destroy();\n                }\n                this._editMode = false;\n            }\n        }\n    }]);\n\n    return EllipsePrimitive;\n}(_ChangeablePrimitive2.ChangeablePrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0VsbGlwc2VQcmltaXRpdmUuanM/NmZhMCJdLCJuYW1lcyI6WyJDZXNpdW0iLCJFbGxpcHNlUHJpbWl0aXZlIiwib3B0aW9ucyIsImRyYXdIZWxwZXIiLCJkZWZpbmVkIiwiY2VudGVyIiwic2VtaU1ham9yQXhpcyIsInNlbWlNaW5vckF4aXMiLCJEZXZlbG9wZXJFcnJvciIsIl9kcmF3SGVscGVyIiwiZGVmYXVsdEVsbGlwc2VPcHRpb25zIiwiaW5pdGlhbGlzZU9wdGlvbnMiLCJyZWdpc3RlckVkaXRhYmxlU2hhcGUiLCJzZXRBdHRyaWJ1dGUiLCJnZXRTZW1pTWlub3JBeGlzIiwiZ2V0U2VtaU1ham9yQXhpcyIsInJvdGF0aW9uIiwiZ2V0QXR0cmlidXRlIiwiRWxsaXBzZUdlb21ldHJ5IiwiZWxsaXBzb2lkIiwiaGVpZ2h0IiwidmVydGV4Rm9ybWF0IiwiRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2UiLCJWRVJURVhfRk9STUFUIiwic3RSb3RhdGlvbiIsInRleHR1cmVSb3RhdGlvbkFuZ2xlIiwiZ3JhbnVsYXJpdHkiLCJFbGxpcHNlT3V0bGluZUdlb21ldHJ5IiwiZ2V0Q2VudGVyIiwiZ2V0Um90YXRpb24iLCJlZGl0TW9kZSIsIl9lZGl0TW9kZSIsInNjZW5lIiwiZWxsaXBzZSIsImdldE1hcmtlclBvc2l0aW9ucyIsIlNoYXBlcyIsImNvbXB1dGVFbGxpcHNlQm91bmRhcnkiLCJNYXRoIiwiUEkiLCJzcGxpY2UiLCJvbkVkaXRlZCIsImV4ZWN1dGVMaXN0ZW5lcnMiLCJuYW1lIiwiZGlzYWJsZUFsbEhpZ2hsaWdodHMiLCJzZXRFZGl0ZWQiLCJfc2VsZiIsIl9tYXJrZXJzIiwidGhpc0RyYWdCaWxsYm9hcmQiLCJkcmFnQmlsbGJvYXJkIiwibWFya2VycyIsIl8iLCJCaWxsYm9hcmRHcm91cCIsImhhbmRsZU1hcmtlckNoYW5nZXMiLCJkcmFnSGFuZGxlcnMiLCJvbkRyYWciLCJpbmRleCIsInBvc2l0aW9uIiwiZGlzdGFuY2UiLCJDYXJ0ZXNpYW4zIiwic2V0U2VtaU1ham9yQXhpcyIsInNldFNlbWlNaW5vckF4aXMiLCJ1cGRhdGVCaWxsYm9hcmRzUG9zaXRpb25zIiwib25EcmFnRW5kIiwidG9vbHRpcCIsImFkZEJpbGxib2FyZHMiLCJfZ2xvYmVDbGlja2hhbmRsZXIiLCJTY3JlZW5TcGFjZUV2ZW50SGFuZGxlciIsImNhbnZhcyIsInNldElucHV0QWN0aW9uIiwibW92ZW1lbnQiLCJwaWNrZWRPYmplY3QiLCJwaWNrIiwicHJpbWl0aXZlIiwic2V0RWRpdE1vZGUiLCJTY3JlZW5TcGFjZUV2ZW50VHlwZSIsIkxFRlRfQ0xJQ0siLCJzZXRPblRvcCIsInJlbW92ZSIsImRlc3Ryb3kiLCJDaGFuZ2VhYmxlUHJpbWl0aXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7SUFBWUEsTTs7QUFDWjs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztJQUVhQyxnQixXQUFBQSxnQjs7O0FBQ1QsOEJBQVlDLE9BQVosRUFBb0JDLFVBQXBCLEVBQWdDO0FBQUE7O0FBQUE7O0FBRzVCLFlBQUksRUFBRUgsT0FBT0ksT0FBUCxDQUFlRixRQUFRRyxNQUF2QixLQUFrQ0wsT0FBT0ksT0FBUCxDQUFlRixRQUFRSSxhQUF2QixDQUFsQyxJQUEyRU4sT0FBT0ksT0FBUCxDQUFlRixRQUFRSyxhQUF2QixDQUE3RSxDQUFKLEVBQXlIO0FBQ3JILGtCQUFNLElBQUlQLE9BQU9RLGNBQVgsQ0FBMEIsd0RBQTFCLENBQU47QUFDSDtBQUNELGNBQUtDLFdBQUwsR0FBbUJOLFVBQW5COztBQUVBRCxrQkFBVSx1QkFBWUEsT0FBWixFQUFxQlEsbUNBQXJCLENBQVY7O0FBRUEsY0FBS0MsaUJBQUwsQ0FBdUJULE9BQXZCO0FBQ0FDLG1CQUFXUyxxQkFBWDtBQUNBOztBQVo0QjtBQWMvQjs7OztrQ0FFU1AsTSxFQUFRO0FBQ2QsaUJBQUtRLFlBQUwsQ0FBa0IsUUFB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akUsT0FBT2tFLHVCQUFYLENBQW1DbEMsTUFBTW1DLE1BQXpDLENBQTFCO0FBQ0EseUJBQUtGLGtCQUFMLENBQXdCRyxjQUF4QixDQUNJLFVBQVVDLFFBQVYsRUFBb0I7QUFDaEIsNEJBQUlDLGVBQWV0QyxNQUFNdUMsSUFBTixDQUFXRixTQUFTYixRQUFwQixDQUFuQjtBQUNBLDRCQUFJLEVBQUVjLGdCQUFnQkEsYUFBYUUsU0FBL0IsQ0FBSixFQUErQztBQUMzQzNCLGtDQUFNNEIsV0FBTixDQUFrQixLQUFsQjtBQUNIO0FBQ0oscUJBTkwsRUFNT3pFLE9BQU8wRSxvQkFBUCxDQUE0QkMsVUFObkM7O0FBUUE7QUFDQTFCLDRCQUFRMkIsUUFBUjtBQUNIO0FBQ0QscUJBQUs3QyxTQUFMLEdBQWlCLElBQWpCO0FBQ0gsYUE3Q0QsTUE2Q087QUFDSCxvQkFBSSxLQUFLZSxRQUFMLElBQWlCLElBQXJCLEVBQTJCO0FBQ3ZCLHlCQUFLQSxRQUFMLENBQWMrQixNQUFkO0FBQ0EseUJBQUsvQixRQUFMLEdBQWdCLElBQWhCO0FBQ0EseUJBQUttQixrQkFBTCxDQUF3QmEsT0FBeEI7QUFDSDtBQUNELHFCQUFLL0MsU0FBTCxHQUFpQixLQUFqQjtBQUNIO0FBQ0o7Ozs7RUE1SmlDZ0QseUMiLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge0NoYW5nZWFibGVQcmltaXRpdmV9IGZyb20gXCIuL0NoYW5nZWFibGVQcmltaXRpdmVcIjtcclxuaW1wb3J0IHtjb3B5T3B0aW9uc30gZnJvbSBcIi4uL3V0aWwvdXRpbFwiO1xyXG5pbXBvcnQge2RlZmF1bHRFbGxpcHNlT3B0aW9ucyxlbGxpcHNvaWR9IGZyb20gXCIuLi9jb25zdGFudC9EZWZhdWx0VmFsdWVcIjtcclxuaW1wb3J0IHtlbmhhbmNlV2l0aExpc3RlbmVyc30gZnJvbSBcIi4uL3V0aWwvRXZlbnRIZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFbGxpcHNlUHJpbWl0aXZlIGV4dGVuZHMgQ2hhbmdlYWJsZVByaW1pdGl2ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLGRyYXdIZWxwZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICBpZiAoIShDZXNpdW0uZGVmaW5lZChvcHRpb25zLmNlbnRlcikgJiYgQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5zZW1pTWFqb3JBeGlzKSAmJiBDZXNpdW0uZGVmaW5lZChvcHRpb25zLnNlbWlNaW5vckF4aXMpKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQ2VzaXVtLkRldmVsb3BlckVycm9yKCdDZW50ZXIgYW5kIHNlbWkgbWFqb3IgYW5kIHNlbWkgbWlub3IgYXhpcyBhcmUgcmVxdWlyZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0RWxsaXBzZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxpc2VPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGRyYXdIZWxwZXIucmVnaXN0ZXJFZGl0YWJsZVNoYXBlKHRoaXMpO1xyXG4gICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHRoaXMpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRDZW50ZXIoY2VudGVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2NlbnRlcicsIGNlbnRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2VtaU1ham9yQXhpcyhzZW1pTWFqb3JBeGlzKSB7XHJcbiAgICAgICAgaWYgKHNlbWlNYWpvckF4aXMgPCB0aGlzLmdldFNlbWlNaW5vckF4aXMoKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdzZW1pTWFqb3JBeGlzJywgc2VtaU1ham9yQXhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNldFNlbWlNaW5vckF4aXMoc2VtaU1pbm9yQXhpcykge1xyXG4gICAgICAgIGlmIChzZW1pTWlub3JBeGlzID4gdGhpcy5nZXRTZW1pTWFqb3JBeGlzKCkpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnc2VtaU1pbm9yQXhpcycsIHNlbWlNaW5vckF4aXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRSb3RhdGlvbihyb3RhdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldEF0dHJpYnV0ZSgncm90YXRpb24nLCByb3RhdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldENlbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2NlbnRlcicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRTZW1pTWFqb3JBeGlzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgnc2VtaU1ham9yQXhpcycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRTZW1pTWlub3JBeGlzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgnc2VtaU1pbm9yQXhpcycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRSb3RhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldEdlb21ldHJ5KCkge1xyXG5cclxuICAgICAgICBpZiAoIShDZXNpdW0uZGVmaW5lZCh0aGlzLmNlbnRlcikgJiYgQ2VzaXVtLmRlZmluZWQodGhpcy5zZW1pTWFqb3JBeGlzKSAmJiBDZXNpdW0uZGVmaW5lZCh0aGlzLnNlbWlNaW5vckF4aXMpKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5FbGxpcHNlR2VvbWV0cnkoe1xyXG4gICAgICAgICAgICBlbGxpcHNvaWQ6IHRoaXMuZWxsaXBzb2lkLFxyXG4gICAgICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLFxyXG4gICAgICAgICAgICBzZW1pTWFqb3JBeGlzOiB0aGlzLnNlbWlNYWpvckF4aXMsXHJcbiAgICAgICAgICAgIHNlbWlNaW5vckF4aXM6IHRoaXMuc2VtaU1pbm9yQXhpcyxcclxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQsXHJcbiAgICAgICAgICAgIHN0Um90YXRpb246IHRoaXMudGV4dHVyZVJvdGF0aW9uQW5nbGUsXHJcbiAgICAgICAgICAgIGdyYW51bGFyaXR5OiB0aGlzLmdyYW51bGFyaXR5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldE91dGxpbmVHZW9tZXRyeSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uRWxsaXBzZU91dGxpbmVHZW9tZXRyeSh7XHJcbiAgICAgICAgICAgIGNlbnRlcjogdGhpcy5nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgc2VtaU1ham9yQXhpczogdGhpcy5nZXRTZW1pTWFqb3JBeGlzKCksXHJcbiAgICAgICAgICAgIHNlbWlNaW5vckF4aXM6IHRoaXMuZ2V0U2VtaU1pbm9yQXhpcygpLFxyXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RWRpdE1vZGUoZWRpdE1vZGUgPSB0cnVlKXtcclxuICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICBpZiAodGhpcy5fZWRpdE1vZGUgPT0gZWRpdE1vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZHJhd0hlbHBlciA9IHRoaXMuX2RyYXdIZWxwZXI7XHJcbiAgICAgICAgdmFyIHNjZW5lID0gZHJhd0hlbHBlci5zY2VuZTtcclxuICAgICAgICB2YXIgZWxsaXBzZSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgZ2V0TWFya2VyUG9zaXRpb25zID0gKCk9PntcclxuICAgICAgICAgICAgcmV0dXJuIENlc2l1bS5TaGFwZXMuY29tcHV0ZUVsbGlwc2VCb3VuZGFyeShlbGxpcHNvaWQsIHRoaXMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0U2VtaU1ham9yQXhpcygpLCB0aGlzLmdldFNlbWlNaW5vckF4aXMoKSwgdGhpcy5nZXRSb3RhdGlvbigpICsgTWF0aC5QSSAvIDIsIE1hdGguUEkgLyAyLjApLnNwbGljZSgwLCA0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9uRWRpdGVkID0gKCk9PntcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlTGlzdGVuZXJzKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdvbkVkaXRlZCcsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHRoaXMuZ2V0Q2VudGVyKCksXHJcbiAgICAgICAgICAgICAgICBzZW1pTWFqb3JBeGlzOiB0aGlzLmdldFNlbWlNYWpvckF4aXMoKSxcclxuICAgICAgICAgICAgICAgIHNlbWlNaW5vckF4aXM6IHRoaXMuZ2V0U2VtaU1pbm9yQXhpcygpLFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkcmF3SGVscGVyLmRpc2FibGVBbGxIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgLy8gZGlzcGxheSBtYXJrZXJzXHJcbiAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgb3RoZXIgc2hhcGVzIGFyZSBub3QgaW4gZWRpdCBtb2RlIGJlZm9yZSBzdGFydGluZyB0aGUgZWRpdGluZyBvZiB0aGlzIHNoYXBlXHJcbiAgICAgICAgICAgIGRyYXdIZWxwZXIuc2V0RWRpdGVkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG1hcmtlcnMgYW5kIGhhbmRsZXJzIGZvciB0aGUgZWRpdGluZ1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0RyYWdCaWxsYm9hcmQgPSB0aGlzLmRyYWdCaWxsYm9hcmQ/IHRoaXMuZHJhZ0JpbGxib2FyZDogZHJhZ0JpbGxib2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IG5ldyBfLkJpbGxib2FyZEdyb3VwKGRyYXdIZWxwZXIsdGhpc0RyYWdCaWxsYm9hcmQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlTWFya2VyQ2hhbmdlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkcmFnSGFuZGxlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShlbGxpcHNlLmdldENlbnRlcigpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnNldFNlbWlNYWpvckF4aXMoZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnNldFNlbWlNaW5vckF4aXMoZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy51cGRhdGVCaWxsYm9hcmRzUG9zaXRpb25zKGdldE1hcmtlclBvc2l0aW9ucygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRyYWcgdG8gY2hhbmdlIHRoZSBleGNlbnRyaWNpdHkgYW5kIHJhZGl1c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoZ2V0TWFya2VyUG9zaXRpb25zKCksIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG1hcmtlcnM7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgYSBoYW5kbGVyIGZvciBjbGlja2luZyBpbiB0aGUgZ2xvYmVcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2xvYmVDbGlja2hhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBzY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGlja2VkT2JqZWN0ICYmIHBpY2tlZE9iamVjdC5wcmltaXRpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRFZGl0TW9kZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IG9uIHRvcCBvZiB0aGUgcG9seWdvblxyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5zZXRPblRvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRNb2RlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.ExtentPrimitive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _ChangeablePrimitive2 = __webpack_require__(6);\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _constructHelper = __webpack_require__(7);\n\nvar _EventHelper = __webpack_require__(4);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ExtentPrimitive = exports.ExtentPrimitive = function (_ChangeablePrimitive) {\n    _inherits(ExtentPrimitive, _ChangeablePrimitive);\n\n    function ExtentPrimitive(options, drawHelper) {\n        _classCallCheck(this, ExtentPrimitive);\n\n        var _this = _possibleConstructorReturn(this, (ExtentPrimitive.__proto__ || Object.getPrototypeOf(ExtentPrimitive)).call(this));\n\n        if (!Cesium.defined(options.extent)) {\n            throw new Cesium.DeveloperError(\'Extent is required\');\n        }\n\n        _this._drawHelper = drawHelper;\n\n        options = (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions);\n\n        _this.initialiseOptions(options);\n\n        _this.setExtent(options.extent);\n        drawHelper.registerEditableShape(_this);\n        (0, _EventHelper.enhanceWithListeners)(_this);\n        return _this;\n    }\n\n    _createClass(ExtentPrimitive, [{\n        key: "setExtent",\n        value: function setExtent(extent) {\n            this.setAttribute(\'extent\', extent);\n        }\n    }, {\n        key: "getExtent",\n        value: function getExtent() {\n            return this.getAttribute(\'extent\');\n        }\n    }, {\n        key: "getGeometry",\n        value: function getGeometry() {\n\n            if (!Cesium.defined(this.extent)) {\n                return;\n            }\n\n            return new Cesium.RectangleGeometry({\n                rectangle: this.extent,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        }\n    }, {\n        key: "getOutlineGeometry",\n        value: function getOutlineGeometry() {\n            return new Cesium.RectangleOutlineGeometry({\n                rectangle: this.extent\n            });\n        }\n    }, {\n        key: "setEditMode",\n        value: function setEditMode() {\n            var _this2 = this;\n\n            var editMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            // if no change\n            if (this._editMode == editMode) {\n                return;\n            }\n\n            var onEdited = function onEdited() {\n                _this2.executeListeners({ name: \'onEdited\', extent: _this2.extent });\n            };\n            var extent = this;\n            var drawHelper = this._drawHelper;\n            drawHelper.disableAllHighlights();\n            // display markers\n            if (editMode) {\n                // make sure all other shapes are not in edit mode before starting the editing of this shape\n                drawHelper.setEdited(this);\n                // create the markers and handlers for the editing\n                if (this._markers == null) {\n                    var thisDragBillboard = this.dragBillboard ? this.dragBillboard : _DefaultValue.dragBillboard;\n                    var thisDragHalfBillboard = this.dragHalfBillboard ? this.dragHalfBillboard : _DefaultValue.dragBillboard;\n\n                    var markers = new _BillboardGroup.BillboardGroup(drawHelper, thisDragHalfBillboard);\n\n                    var handleMarkerChanges = {\n                        dragHandlers: {\n                            onDrag: function onDrag(index, position) {\n                                var corner = markers.getBillboard((index + 2) % 4).position;\n                                extent.setExtent((0, _constructHelper.getExtent)(_DefaultValue.ellipsoid.cartesianToCartographic(corner), _DefaultValue.ellipsoid.cartesianToCartographic(position)));\n                                markers.updateBillboardsPositions((0, _constructHelper.getExtentCorners)(extent.extent));\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                onEdited();\n                            }\n                        },\n                        tooltip: function tooltip() {\n                            return "Drag to change the corners of this extent";\n                        }\n                    };\n                    markers.addBillboards((0, _constructHelper.getExtentCorners)(extent.extent), handleMarkerChanges);\n                    this._markers = markers;\n                    // add a handler for clicking in the globe\n                    this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(drawHelper._scene.canvas);\n\n                    this._globeClickhandler.setInputAction(function (movement) {\n                        var pickedObject = drawHelper._scene.pick(movement.position);\n                        // disable edit if pickedobject is different or not an object\n                        try {\n                            if (!(pickedObject && !pickedObject.isDestroyed() && pickedObject.primitive)) {\n                                _this2.setEditMode(false);\n                            }\n                        } catch (e) {\n                            _this2.setEditMode(false);\n                        }\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                    // set on top of the polygon\n                    markers.setOnTop();\n                }\n                this._editMode = true;\n            } else {\n                if (this._markers != null) {\n                    this._markers.remove();\n                    this._markers = null;\n                    this._globeClickhandler.destroy();\n                }\n                this._editMode = false;\n            }\n        }\n    }]);\n\n    return ExtentPrimitive;\n}(_ChangeablePrimitive2.ChangeablePrimitive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvcHJpbWl0aXZlL0V4dGVudFByaW1pdGl2ZS5qcz8yZmMyIl0sIm5hbWVzIjpbIkNlc2l1bSIsIkV4dGVudFByaW1pdGl2ZSIsIm9wdGlvbnMiLCJkcmF3SGVscGVyIiwiZGVmaW5lZCIsImV4dGVudCIsIkRldmVsb3BlckVycm9yIiwiX2RyYXdIZWxwZXIiLCJkZWZhdWx0U3VyZmFjZU9wdGlvbnMiLCJpbml0aWFsaXNlT3B0aW9ucyIsInNldEV4dGVudCIsInJlZ2lzdGVyRWRpdGFibGVTaGFwZSIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIlJlY3RhbmdsZUdlb21ldHJ5IiwicmVjdGFuZ2xlIiwiaGVpZ2h0IiwidmVydGV4Rm9ybWF0IiwiRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2UiLCJWRVJURVhfRk9STUFUIiwic3RSb3RhdGlvbiIsInRleHR1cmVSb3RhdGlvbkFuZ2xlIiwiZWxsaXBzb2lkIiwiZ3JhbnVsYXJpdHkiLCJSZWN0YW5nbGVPdXRsaW5lR2VvbWV0cnkiLCJlZGl0TW9kZSIsIl9lZGl0TW9kZSIsIm9uRWRpdGVkIiwiZXhlY3V0ZUxpc3RlbmVycyIsIm5hbWUiLCJkaXNhYmxlQWxsSGlnaGxpZ2h0cyIsInNldEVkaXRlZCIsIl9tYXJrZXJzIiwidGhpc0RyYWdCaWxsYm9hcmQiLCJkcmFnQmlsbGJvYXJkIiwidGhpc0RyYWdIYWxmQmlsbGJvYXJkIiwiZHJhZ0hhbGZCaWxsYm9hcmQiLCJtYXJrZXJzIiwiQmlsbGJvYXJkR3JvdXAiLCJoYW5kbGVNYXJrZXJDaGFuZ2VzIiwiZHJhZ0hhbmRsZXJzIiwib25EcmFnIiwiaW5kZXgiLCJwb3NpdGlvbiIsImNvcm5lciIsImdldEJpbGxib2FyZCIsImNhcnRlc2lhblRvQ2FydG9ncmFwaGljIiwidXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyIsIm9uRHJhZ0VuZCIsInRvb2x0aXAiLCJhZGRCaWxsYm9hcmRzIiwiX2dsb2JlQ2xpY2toYW5kbGVyIiwiU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIiLCJfc2NlbmUiLCJjYW52YXMiLCJzZXRJbnB1dEFjdGlvbiIsIm1vdmVtZW50IiwicGlja2VkT2JqZWN0IiwicGljayIsImlzRGVzdHJveWVkIiwicHJpbWl0aXZlIiwic2V0RWRpdE1vZGUiLCJlIiwiU2NyZWVuU3BhY2VFdmVudFR5cGUiLCJMRUZUX0NMSUNLIiwic2V0T25Ub3AiLCJyZW1vdmUiLCJkZXN0cm95IiwiQ2hhbmdlYWJsZVByaW1pdGl2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0lBQVlBLE07O0FBQ1o7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7SUFFYUMsZSxXQUFBQSxlOzs7QUFDVCw2QkFBWUMsT0FBWixFQUFvQkMsVUFBcEIsRUFBZ0M7QUFBQTs7QUFBQTs7QUFFNUIsWUFBSSxDQUFDSCxPQUFPSSxPQUFQLENBQWVGLFFBQVFHLE1BQXZCLENBQUwsRUFBcUM7QUFDakMsa0JBQU0sSUFBSUwsT0FBT00sY0FBWCxDQUEwQixvQkFBMUIsQ0FBTjtBQUNIOztBQUVELGNBQUtDLFdBQUwsR0FBbUJKLFVBQW5COztBQUVBRCxrQkFBVSx1QkFBWUEsT0FBWixFQUFxQk0sbUNBQXJCLENBQVY7O0FBRUEsY0FBS0MsaUJBQUwsQ0FBdUJQLE9BQXZCOztBQUVBLGNBQUtRLFNBQUwsQ0FBZVIsUUFBUUcsTUFBdkI7QUFDQUYsbUJBQVdRLHFCQUFYO0FBQ0E7QUFkNEI7QUFlL0I7Ozs7a0NBRVNOLE0sRUFBUTtBQUNkLGlCQUFLTyxZQUFMLENBQWtCLFFBQWxCLEVBQTRCUCxNQUE1QjtBQUNIOzs7b0NBRVc7QUFDUixtQkFBTyxLQUFLUSxZQUFMLENBQWtCLFFBQWxCLENBQVA7QUFDSDs7O3NDQUVhOztBQUVWLGdCQUFJLENBQUNiLE9BQU9JLE9BQVAsQ0FBZSxLQUFLQyxNQUFwQixDQUFMLEVBQWtDO0FBQzlCO0FBQ0g7O0FBRUQsbUJBQU8sSUFBSUws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Q1IsbUNBQUtELFdBQUwsQ0FBaUIsS0FBakI7QUFDSDtBQUNKLHFCQVZMLEVBVU83RCxPQUFPK0Qsb0JBQVAsQ0FBNEJDLFVBVm5DOztBQVlBO0FBQ0EzQiw0QkFBUTRCLFFBQVI7QUFDSDtBQUNELHFCQUFLdkMsU0FBTCxHQUFpQixJQUFqQjtBQUNILGFBOUNELE1BOENPO0FBQ0gsb0JBQUksS0FBS00sUUFBTCxJQUFpQixJQUFyQixFQUEyQjtBQUN2Qix5QkFBS0EsUUFBTCxDQUFja0MsTUFBZDtBQUNBLHlCQUFLbEMsUUFBTCxHQUFnQixJQUFoQjtBQUNBLHlCQUFLbUIsa0JBQUwsQ0FBd0JnQixPQUF4QjtBQUNIO0FBQ0QscUJBQUt6QyxTQUFMLEdBQWlCLEtBQWpCO0FBQ0g7QUFDSjs7OztFQWpIZ0MwQyx5QyIsImZpbGUiOiIzMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q2hhbmdlYWJsZVByaW1pdGl2ZX0gZnJvbSBcIi4vQ2hhbmdlYWJsZVByaW1pdGl2ZVwiO1xyXG5pbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge2NvcHlPcHRpb25zfSBmcm9tIFwiLi4vdXRpbC91dGlsXCI7XHJcbmltcG9ydCB7ZGVmYXVsdFN1cmZhY2VPcHRpb25zLCBkcmFnQmlsbGJvYXJkLGVsbGlwc29pZH0gZnJvbSBcIi4uL2NvbnN0YW50L0RlZmF1bHRWYWx1ZVwiO1xyXG5pbXBvcnQge2dldEV4dGVudCwgZ2V0RXh0ZW50Q29ybmVyc30gZnJvbSBcIi4uL3V0aWwvY29uc3RydWN0SGVscGVyXCI7XHJcbmltcG9ydCB7ZW5oYW5jZVdpdGhMaXN0ZW5lcnN9IGZyb20gXCIuLi91dGlsL0V2ZW50SGVscGVyXCI7XHJcbmltcG9ydCB7QmlsbGJvYXJkR3JvdXB9IGZyb20gXCIuL0JpbGxib2FyZEdyb3VwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW50UHJpbWl0aXZlIGV4dGVuZHMgQ2hhbmdlYWJsZVByaW1pdGl2ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLGRyYXdIZWxwZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGlmICghQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5leHRlbnQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ0V4dGVudCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0U3VyZmFjZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxpc2VPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLnNldEV4dGVudChvcHRpb25zLmV4dGVudCk7XHJcbiAgICAgICAgZHJhd0hlbHBlci5yZWdpc3RlckVkaXRhYmxlU2hhcGUodGhpcyk7XHJcbiAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnModGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXh0ZW50KGV4dGVudCkge1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdleHRlbnQnLCBleHRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEV4dGVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2V4dGVudCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEdlb21ldHJ5KCkge1xyXG5cclxuICAgICAgICBpZiAoIUNlc2l1bS5kZWZpbmVkKHRoaXMuZXh0ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5SZWN0YW5nbGVHZW9tZXRyeSh7XHJcbiAgICAgICAgICAgIHJlY3RhbmdsZTogdGhpcy5leHRlbnQsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQsXHJcbiAgICAgICAgICAgIHN0Um90YXRpb246IHRoaXMudGV4dHVyZVJvdGF0aW9uQW5nbGUsXHJcbiAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWQsXHJcbiAgICAgICAgICAgIGdyYW51bGFyaXR5OiB0aGlzLmdyYW51bGFyaXR5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldE91dGxpbmVHZW9tZXRyeSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5SZWN0YW5nbGVPdXRsaW5lR2VvbWV0cnkoe1xyXG4gICAgICAgICAgICByZWN0YW5nbGU6IHRoaXMuZXh0ZW50XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RWRpdE1vZGUoZWRpdE1vZGUgPSB0cnVlKXtcclxuICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICBpZiAodGhpcy5fZWRpdE1vZGUgPT0gZWRpdE1vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb25FZGl0ZWQgPSAoKT0+eyB0aGlzLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdvbkVkaXRlZCcsIGV4dGVudDogdGhpcy5leHRlbnR9KTt9XHJcbiAgICAgICAgY29uc3QgZXh0ZW50ID0gdGhpcztcclxuICAgICAgICB2YXIgZHJhd0hlbHBlciA9IHRoaXMuX2RyYXdIZWxwZXI7XHJcbiAgICAgICAgZHJhd0hlbHBlci5kaXNhYmxlQWxsSGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIC8vIGRpc3BsYXkgbWFya2Vyc1xyXG4gICAgICAgIGlmIChlZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgYWxsIG90aGVyIHNoYXBlcyBhcmUgbm90IGluIGVkaXQgbW9kZSBiZWZvcmUgc3RhcnRpbmcgdGhlIGVkaXRpbmcgb2YgdGhpcyBzaGFwZVxyXG4gICAgICAgICAgICBkcmF3SGVscGVyLnNldEVkaXRlZCh0aGlzKTtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBtYXJrZXJzIGFuZCBoYW5kbGVycyBmb3IgdGhlIGVkaXRpbmdcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcmtlcnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaXNEcmFnQmlsbGJvYXJkID0gdGhpcy5kcmFnQmlsbGJvYXJkPyB0aGlzLmRyYWdCaWxsYm9hcmQ6IGRyYWdCaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0RyYWdIYWxmQmlsbGJvYXJkID0gdGhpcy5kcmFnSGFsZkJpbGxib2FyZD8gdGhpcy5kcmFnSGFsZkJpbGxib2FyZDogZHJhZ0JpbGxib2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IG5ldyBCaWxsYm9hcmRHcm91cChkcmF3SGVscGVyLHRoaXNEcmFnSGFsZkJpbGxib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZU1hcmtlckNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0hhbmRsZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvcm5lciA9IG1hcmtlcnMuZ2V0QmlsbGJvYXJkKChpbmRleCArIDIpICUgNCkucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnQuc2V0RXh0ZW50KGdldEV4dGVudChlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY29ybmVyKSwgZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHBvc2l0aW9uKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy51cGRhdGVCaWxsYm9hcmRzUG9zaXRpb25zKGdldEV4dGVudENvcm5lcnMoZXh0ZW50LmV4dGVudCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiRHJhZyB0byBjaGFuZ2UgdGhlIGNvcm5lcnMgb2YgdGhpcyBleHRlbnRcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmRzKGdldEV4dGVudENvcm5lcnMoZXh0ZW50LmV4dGVudCksIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG1hcmtlcnM7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgYSBoYW5kbGVyIGZvciBjbGlja2luZyBpbiB0aGUgZ2xvYmVcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihkcmF3SGVscGVyLl9zY2VuZS5jYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBkcmF3SGVscGVyLl9zY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBlZGl0IGlmIHBpY2tlZG9iamVjdCBpcyBkaWZmZXJlbnQgb3Igbm90IGFuIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGlja2VkT2JqZWN0ICYmICFwaWNrZWRPYmplY3QuaXNEZXN0cm95ZWQoKSAmJiBwaWNrZWRPYmplY3QucHJpbWl0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RWRpdE1vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgb24gdG9wIG9mIHRoZSBwb2x5Z29uXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzLnNldE9uVG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlcnMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9lZGl0TW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///33\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolygonHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _PolyshapeHandler2 = __webpack_require__(10);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolygonHandler = exports.PolygonHandler = function (_PolyshapeHandler) {\n    _inherits(PolygonHandler, _PolyshapeHandler);\n\n    function PolygonHandler() {\n        _classCallCheck(this, PolygonHandler);\n\n        return _possibleConstructorReturn(this, (PolygonHandler.__proto__ || Object.getPrototypeOf(PolygonHandler)).apply(this, arguments));\n    }\n\n    _createClass(PolygonHandler, [{\n        key: "start",\n        value: function start(options, drawHelper) {\n            _get(PolygonHandler.prototype.__proto__ || Object.getPrototypeOf(PolygonHandler.prototype), "start", this).call(this, options, drawHelper, true);\n        }\n    }]);\n\n    return PolygonHandler;\n}(_PolyshapeHandler2.PolyshapeHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9Qb2x5Z29uSGFuZGxlci5qcz9lN2U3Il0sIm5hbWVzIjpbIkNlc2l1bSIsIlBvbHlnb25IYW5kbGVyIiwib3B0aW9ucyIsImRyYXdIZWxwZXIiLCJQb2x5c2hhcGVIYW5kbGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztJQUFZQSxNOztBQUVaOzs7Ozs7Ozs7O0lBRWFDLGMsV0FBQUEsYzs7Ozs7Ozs7Ozs7OEJBQ0hDLE8sRUFBU0MsVSxFQUFXO0FBQ3RCLGtJQUFZRCxPQUFaLEVBQXFCQyxVQUFyQixFQUFnQyxJQUFoQztBQUNIOzs7O0VBSCtCQyxtQyIsImZpbGUiOiIzNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcblxyXG5pbXBvcnQge1BvbHlzaGFwZUhhbmRsZXJ9IGZyb20gXCIuL1BvbHlzaGFwZUhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uSGFuZGxlciBleHRlbmRzIFBvbHlzaGFwZUhhbmRsZXJ7XHJcbiAgICBzdGFydChvcHRpb25zLCBkcmF3SGVscGVyKXtcclxuICAgICAgICBzdXBlci5zdGFydChvcHRpb25zLCBkcmF3SGVscGVyLHRydWUpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.PolylineHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _PolyshapeHandler2 = __webpack_require__(10);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PolylineHandler = exports.PolylineHandler = function (_PolyshapeHandler) {\n    _inherits(PolylineHandler, _PolyshapeHandler);\n\n    function PolylineHandler() {\n        _classCallCheck(this, PolylineHandler);\n\n        return _possibleConstructorReturn(this, (PolylineHandler.__proto__ || Object.getPrototypeOf(PolylineHandler)).apply(this, arguments));\n    }\n\n    _createClass(PolylineHandler, [{\n        key: "start",\n        value: function start(options, drawHelper) {\n            _get(PolylineHandler.prototype.__proto__ || Object.getPrototypeOf(PolylineHandler.prototype), "start", this).call(this, options, drawHelper, false);\n        }\n    }]);\n\n    return PolylineHandler;\n}(_PolyshapeHandler2.PolyshapeHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9Qb2x5bGluZUhhbmRsZXIuanM/YTBmMCJdLCJuYW1lcyI6WyJDZXNpdW0iLCJQb2x5bGluZUhhbmRsZXIiLCJvcHRpb25zIiwiZHJhd0hlbHBlciIsIlBvbHlzaGFwZUhhbmRsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0lBQVlBLE07O0FBRVo7Ozs7Ozs7Ozs7SUFFYUMsZSxXQUFBQSxlOzs7Ozs7Ozs7Ozs4QkFDSEMsTyxFQUFTQyxVLEVBQVc7QUFDdEIsb0lBQVlELE9BQVosRUFBcUJDLFVBQXJCLEVBQWdDLEtBQWhDO0FBQ0g7Ozs7RUFIZ0NDLG1DIiwiZmlsZSI6IjM1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuXHJcbmltcG9ydCB7UG9seXNoYXBlSGFuZGxlcn0gZnJvbSBcIi4vUG9seXNoYXBlSGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvbHlsaW5lSGFuZGxlciBleHRlbmRzIFBvbHlzaGFwZUhhbmRsZXJ7XHJcbiAgICBzdGFydChvcHRpb25zLCBkcmF3SGVscGVyKXtcclxuICAgICAgICBzdXBlci5zdGFydChvcHRpb25zLCBkcmF3SGVscGVyLGZhbHNlKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///35\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.ExtentHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _BaseHandler2 = __webpack_require__(11);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nvar _constructHelper = __webpack_require__(7);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ExtentHandler = exports.ExtentHandler = function (_BaseHandler) {\n    _inherits(ExtentHandler, _BaseHandler);\n\n    function ExtentHandler() {\n        _classCallCheck(this, ExtentHandler);\n\n        return _possibleConstructorReturn(this, (ExtentHandler.__proto__ || Object.getPrototypeOf(ExtentHandler)).apply(this, arguments));\n    }\n\n    _createClass(ExtentHandler, [{\n        key: "start",\n        value: function start(options, drawHelper) {\n            var _this2 = this;\n\n            this.drawHelper = drawHelper;\n            this.options = (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions);\n\n            var scene = drawHelper.scene;\n            var viewer = drawHelper.viewer;\n            this.primitives = drawHelper.scene.primitives;\n            var tooltip = drawHelper.tooltip;\n\n            var firstPoint = null;\n            this.extent = null;\n            this.markers = null;\n\n            var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n            drawHelper.startDrawing(function () {\n                if (_this2.extent != null) {\n                    _this2.primitives && _this2.primitives.remove(_this2.extent);\n                }\n                _this2.markers && _this2.markers.remove();\n                mouseHandler && mouseHandler.destroy();\n                tooltip && tooltip.setVisible(false);\n            });\n\n            // Now wait for start\n            mouseHandler.setInputAction(function (movement) {\n                if (movement.position != null) {\n                    // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n                    var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n\n                    if (cartesian) {\n                        if (_this2.extent == null) {\n                            // create the rectangle\n                            firstPoint = _DefaultValue.ellipsoid.cartesianToCartographic(cartesian);\n                            var value = (0, _constructHelper.getExtent)(firstPoint, firstPoint);\n                            _this2.updateExtent(value);\n                        } else {\n                            drawHelper.stopDrawing();\n                            if (typeof options.callback == \'function\') {\n                                options.callback((0, _constructHelper.getExtent)(firstPoint, _DefaultValue.ellipsoid.cartesianToCartographic(cartesian), drawHelper));\n                            }\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n\n            mouseHandler.setInputAction(function (movement) {\n                var position = movement.endPosition;\n                if (position != null) {\n                    if (_this2.extent == null) {\n                        tooltip.showAt(position, "<p>Click to start drawing rectangle</p>");\n                    } else {\n                        // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                        var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                        if (cartesian) {\n                            var extent = (0, _constructHelper.getExtent)(firstPoint, _DefaultValue.ellipsoid.cartesianToCartographic(cartesian));\n                            _this2.updateExtent(extent);\n                            tooltip.showAt(position, "<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>");\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n        }\n    }, {\n        key: "updateExtent",\n        value: function updateExtent(value) {\n            if (this.extent == null) {\n                this.extent = this.drawHelper.createEditableExtentPrimitive({\n                    extent: value,\n                    material: this.options.material\n                });\n                this.extent.asynchronous = false;\n                this.primitives.add(this.extent);\n            }\n            this.extent.setExtent(value);\n            this.extent.rectangle = value;\n            // update the markers\n            var corners = (0, _constructHelper.getExtentCorners)(value);\n            // create if they do not yet exist\n            if (this.markers == null) {\n                this.markers = new _BillboardGroup.BillboardGroup(this.drawHelper, _DefaultValue.defaultBillboard);\n                this.markers.addBillboards(corners);\n            } else {\n                this.markers.updateBillboardsPositions(corners);\n            }\n        }\n    }]);\n\n    return ExtentHandler;\n}(_BaseHandler2.BaseHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9FeHRlbnRIYW5kbGVyLmpzPzVhYTIiXSwibmFtZXMiOlsiQ2VzaXVtIiwiRXh0ZW50SGFuZGxlciIsIm9wdGlvbnMiLCJkcmF3SGVscGVyIiwiZGVmYXVsdFN1cmZhY2VPcHRpb25zIiwic2NlbmUiLCJ2aWV3ZXIiLCJwcmltaXRpdmVzIiwidG9vbHRpcCIsImZpcnN0UG9pbnQiLCJleHRlbnQiLCJtYXJrZXJzIiwibW91c2VIYW5kbGVyIiwiU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIiLCJjYW52YXMiLCJzdGFydERyYXdpbmciLCJyZW1vdmUiLCJkZXN0cm95Iiwic2V0VmlzaWJsZSIsInNldElucHV0QWN0aW9uIiwibW92ZW1lbnQiLCJwb3NpdGlvbiIsImNhcnRlc2lhbiIsInN0cmF0ZWd5IiwicGlja1N0cmF0ZWd5IiwiZWxsaXBzb2lkIiwiY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMiLCJ2YWx1ZSIsInVwZGF0ZUV4dGVudCIsInN0b3BEcmF3aW5nIiwiY2FsbGJhY2siLCJTY3JlZW5TcGFjZUV2ZW50VHlwZSIsIkxFRlRfRE9XTiIsImVuZFBvc2l0aW9uIiwic2hvd0F0IiwiTU9VU0VfTU9WRSIsImNyZWF0ZUVkaXRhYmxlRXh0ZW50UHJpbWl0aXZlIiwibWF0ZXJpYWwiLCJhc3luY2hyb25vdXMiLCJhZGQiLCJzZXRFeHRlbnQiLCJyZWN0YW5nbGUiLCJjb3JuZXJzIiwiQmlsbGJvYXJkR3JvdXAiLCJkZWZhdWx0QmlsbGJvYXJkIiwiYWRkQmlsbGJvYXJkcyIsInVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMiLCJCYXNlSGFuZGxlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0lBQVlBLE07O0FBRVo7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7SUFFYUMsYSxXQUFBQSxhOzs7Ozs7Ozs7Ozs4QkFDSEMsTyxFQUFTQyxVLEVB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LEssRUFBTztBQUNoQixnQkFBSSxLQUFLakIsTUFBTCxJQUFlLElBQW5CLEVBQXlCO0FBQ3JCLHFCQUFLQSxNQUFMLEdBQWMsS0FBS1AsVUFBTCxDQUFnQmlDLDZCQUFoQixDQUE4QztBQUN4RDFCLDRCQUFRaUIsS0FEZ0Q7QUFFeERVLDhCQUFVLEtBQUtuQyxPQUFMLENBQWFtQztBQUZpQyxpQkFBOUMsQ0FBZDtBQUlBLHFCQUFLM0IsTUFBTCxDQUFZNEIsWUFBWixHQUEyQixLQUEzQjtBQUNBLHFCQUFLL0IsVUFBTCxDQUFnQmdDLEdBQWhCLENBQW9CLEtBQUs3QixNQUF6QjtBQUNIO0FBQ0QsaUJBQUtBLE1BQUwsQ0FBWThCLFNBQVosQ0FBc0JiLEtBQXRCO0FBQ0EsaUJBQUtqQixNQUFMLENBQVkrQixTQUFaLEdBQXdCZCxLQUF4QjtBQUNBO0FBQ0EsZ0JBQUllLFVBQVUsdUNBQWlCZixLQUFqQixDQUFkO0FBQ0E7QUFDQSxnQkFBSSxLQUFLaEIsT0FBTCxJQUFnQixJQUFwQixFQUEwQjtBQUN0QixxQkFBS0EsT0FBTCxHQUFlLElBQUlnQyw4QkFBSixDQUFtQixLQUFLeEMsVUFBeEIsRUFBb0N5Qyw4QkFBcEMsQ0FBZjtBQUNBLHFCQUFLakMsT0FBTCxDQUFha0MsYUFBYixDQUEyQkgsT0FBM0I7QUFDSCxhQUhELE1BR087QUFDSCxxQkFBSy9CLE9BQUwsQ0FBYW1DLHlCQUFiLENBQXVDSixPQUF2QztBQUNIO0FBQ0o7Ozs7RUF4RjhCSyx5QiIsImZpbGUiOiIzNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENlc2l1bSBmcm9tIFwiQ2VzaXVtXCI7XHJcblxyXG5pbXBvcnQge0Jhc2VIYW5kbGVyfSBmcm9tIFwiLi9CYXNlSGFuZGxlclwiO1xyXG5pbXBvcnQge2NvcHlPcHRpb25zfSBmcm9tIFwiLi4vdXRpbC91dGlsXCI7XHJcbmltcG9ydCB7ZGVmYXVsdEJpbGxib2FyZCwgZGVmYXVsdFN1cmZhY2VPcHRpb25zLGVsbGlwc29pZH0gZnJvbSBcIi4uL2NvbnN0YW50L0RlZmF1bHRWYWx1ZVwiO1xyXG5pbXBvcnQge0JpbGxib2FyZEdyb3VwfSBmcm9tIFwiLi4vcHJpbWl0aXZlL0JpbGxib2FyZEdyb3VwXCI7XHJcbmltcG9ydCB7Z2V0RXh0ZW50LCBnZXRFeHRlbnRDb3JuZXJzfSBmcm9tIFwiLi4vdXRpbC9jb25zdHJ1Y3RIZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFeHRlbnRIYW5kbGVyIGV4dGVuZHMgQmFzZUhhbmRsZXIge1xyXG4gICAgc3RhcnQob3B0aW9ucywgZHJhd0hlbHBlcikge1xyXG4gICAgICAgIHRoaXMuZHJhd0hlbHBlciA9IGRyYXdIZWxwZXI7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFN1cmZhY2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgbGV0IHNjZW5lID0gZHJhd0hlbHBlci5zY2VuZTtcclxuICAgICAgICBsZXQgdmlld2VyID0gZHJhd0hlbHBlci52aWV3ZXI7XHJcbiAgICAgICAgdGhpcy5wcmltaXRpdmVzID0gZHJhd0hlbHBlci5zY2VuZS5wcmltaXRpdmVzO1xyXG4gICAgICAgIGxldCB0b29sdGlwID0gZHJhd0hlbHBlci50b29sdGlwO1xyXG5cclxuICAgICAgICBsZXQgZmlyc3RQb2ludCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHRlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWFya2VycyA9IG51bGw7XHJcblxyXG4gICAgICAgIGxldCBtb3VzZUhhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKHNjZW5lLmNhbnZhcyk7XHJcblxyXG4gICAgICAgIGRyYXdIZWxwZXIuc3RhcnREcmF3aW5nKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dGVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmltaXRpdmVzICYmIHRoaXMucHJpbWl0aXZlcy5yZW1vdmUodGhpcy5leHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzICYmIHRoaXMubWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIG1vdXNlSGFuZGxlciAmJiBtb3VzZUhhbmRsZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcCAmJiB0b29sdGlwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gTm93IHdhaXQgZm9yIHN0YXJ0XHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKCAobW92ZW1lbnQpID0+e1xyXG4gICAgICAgICAgICBpZiAobW92ZW1lbnQucG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LnBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KG1vdmVtZW50LnBvc2l0aW9uLCB2aWV3ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRlbnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIHJlY3RhbmdsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFBvaW50ID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGdldEV4dGVudChmaXJzdFBvaW50LCBmaXJzdFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRlbnQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RvcERyYXdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2soZ2V0RXh0ZW50KGZpcnN0UG9pbnQsIGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhjYXJ0ZXNpYW4pLCBkcmF3SGVscGVyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1dOKTtcclxuXHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKCAobW92ZW1lbnQpPT4ge1xyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBtb3ZlbWVudC5lbmRQb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dGVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gc3RhcnQgZHJhd2luZyByZWN0YW5nbGU8L3A+XCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgY2FydGVzaWFuID0gc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KHBvc2l0aW9uLCB2aWV3ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FydGVzaWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHRlbnQgPSBnZXRFeHRlbnQoZmlyc3RQb2ludCwgZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dGVudChleHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLnNob3dBdChwb3NpdGlvbiwgXCI8cD5EcmFnIHRvIGNoYW5nZSByZWN0YW5nbGUgZXh0ZW50PC9wPjxwPkNsaWNrIGFnYWluIHRvIGZpbmlzaCBkcmF3aW5nPC9wPlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTU9VU0VfTU9WRSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUV4dGVudCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmV4dGVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50ID0gdGhpcy5kcmF3SGVscGVyLmNyZWF0ZUVkaXRhYmxlRXh0ZW50UHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgIGV4dGVudDogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5vcHRpb25zLm1hdGVyaWFsLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmV4dGVudC5hc3luY2hyb25vdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wcmltaXRpdmVzLmFkZCh0aGlzLmV4dGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXh0ZW50LnNldEV4dGVudCh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5leHRlbnQucmVjdGFuZ2xlID0gdmFsdWU7XHJcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBtYXJrZXJzXHJcbiAgICAgICAgbGV0IGNvcm5lcnMgPSBnZXRFeHRlbnRDb3JuZXJzKHZhbHVlKTtcclxuICAgICAgICAvLyBjcmVhdGUgaWYgdGhleSBkbyBub3QgeWV0IGV4aXN0XHJcbiAgICAgICAgaWYgKHRoaXMubWFya2VycyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFya2VycyA9IG5ldyBCaWxsYm9hcmRHcm91cCh0aGlzLmRyYXdIZWxwZXIsIGRlZmF1bHRCaWxsYm9hcmQpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMuYWRkQmlsbGJvYXJkcyhjb3JuZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMudXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyhjb3JuZXJzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///36\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.CircleHandler = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _BaseHandler2 = __webpack_require__(11);\n\nvar _util = __webpack_require__(1);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _CirclePrimitive = __webpack_require__(18);\n\nvar _BillboardGroup = __webpack_require__(5);\n\nvar _constructHelper = __webpack_require__(7);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CircleHandler = exports.CircleHandler = function (_BaseHandler) {\n    _inherits(CircleHandler, _BaseHandler);\n\n    function CircleHandler() {\n        _classCallCheck(this, CircleHandler);\n\n        return _possibleConstructorReturn(this, (CircleHandler.__proto__ || Object.getPrototypeOf(CircleHandler)).apply(this, arguments));\n    }\n\n    _createClass(CircleHandler, [{\n        key: "start",\n        value: function start(options, drawHelper) {\n            options = (0, _util.copyOptions)(options, _DefaultValue.defaultSurfaceOptions);\n            var mouseHandler = new Cesium.ScreenSpaceEventHandler(drawHelper.scene.canvas);\n\n            var circle = null;\n            var markers = null;\n            var scene = drawHelper.scene;\n            var viewer = drawHelper.viewer;\n            var primitives = drawHelper.scene.primitives;\n            var tooltip = drawHelper.tooltip;\n\n            drawHelper.startDrawing(function () {\n                if (circle != null) {\n                    primitives && primitives.remove(circle);\n                }\n                markers && markers.remove();\n                mouseHandler && mouseHandler.destroy();\n                tooltip && tooltip.setVisible(false);\n            });\n\n            mouseHandler.setInputAction(function (movement) {\n                if (movement.position != null) {\n                    // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n                    // var cartesian = scene.pickPosition(movement.position);\n                    // cartesian = getCesiumHightZero(cartesian);\n                    // var cartesian = pickPosition(movement.position);\n                    var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n                    if (cartesian) {\n                        if (circle == null) {\n                            // create the circle\n                            // circle = new CirclePrimitive({\n                            //     center: cartesian,\n                            //     radius: 0,\n                            //     asynchronous: false,\n                            //     material: options.material\n                            // });\n                            circle = drawHelper.createEditableCirclePrimitive({\n                                center: cartesian,\n                                radius: 0,\n                                asynchronous: false,\n                                material: options.material\n                            });\n                            primitives.add(circle);\n                            markers = new _BillboardGroup.BillboardGroup(drawHelper, _DefaultValue.defaultBillboard);\n                            markers.addBillboards([cartesian]);\n                        } else {\n                            if (typeof options.callback == \'function\') {\n                                options.callback(circle.getCenter(), circle.getRadius(), drawHelper);\n                            }\n                            drawHelper.stopDrawing();\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n\n            mouseHandler.setInputAction(function (movement) {\n                var position = movement.endPosition;\n                if (position != null) {\n                    if (circle == null) {\n                        tooltip.showAt(position, "<p>Click to start drawing the circle</p>");\n                    } else {\n                        // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                        // var cartesian = scene.pickPosition(position);\n                        var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                        if (cartesian) {\n                            // Cesium.Cartographic.fromCartesian(circle.getCenter())\n                            circle.setRadius(Cesium.Cartesian3.distance((0, _constructHelper.getCesiumHightZero)(circle.getCenter()), (0, _constructHelper.getCesiumHightZero)(cartesian)));\n                            // circle.setRadius(Cesium.Cartesian3.distance(circle.getCenter(), cartesian));\n                            markers.updateBillboardsPositions(cartesian);\n                            tooltip.showAt(position, "<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>");\n                        }\n                    }\n                }\n            }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n        }\n    }]);\n\n    return CircleHandler;\n}(_BaseHandler2.BaseHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvaGFuZGxlci9DaXJjbGVIYW5kbGVyLmpzP2E4YmYiXSwibmFtZXMiOlsiQ2VzaXVtIiwiQ2lyY2xlSGFuZGxlciIsIm9wdGlvbnMiLCJkcmF3SGVscGVyIiwiZGVmYXVsdFN1cmZhY2VPcHRpb25zIiwibW91c2VIYW5kbGVyIiwiU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIiLCJzY2VuZSIsImNhbnZhcyIsImNpcmNsZSIsIm1hcmtlcnMiLCJ2aWV3ZXIiLCJwcmltaXRpdmVzIiwidG9vbHRpcCIsInN0YXJ0RHJhd2luZyIsInJlbW92ZSIsImRlc3Ryb3kiLCJzZXRWaXNpYmxlIiwic2V0SW5wdXRBY3Rpb24iLCJtb3ZlbWVudCIsInBvc2l0aW9uIiwiY2FydGVzaWFuIiwic3RyYXRlZ3kiLCJwaWNrU3RyYXRlZ3kiLCJjcmVhdGVFZGl0YWJsZUNpcmNsZVByaW1pdGl2ZSIsImNlbnRlciIsInJhZGl1cyIsImFzeW5jaHJvbm91cyIsIm1hdGVyaWFsIiwiYWRkIiwiQmlsbGJvYXJkR3JvdXAiLCJkZWZhdWx0QmlsbGJvYXJkIiwiYWRkQmlsbGJvYXJkcyIsImNhbGxiYWNrIiwiZ2V0Q2VudGVyIiwiZ2V0UmFkaXVzIiwic3RvcERyYXdpbmciLCJTY3JlZW5TcGFjZUV2ZW50VHlwZSIsIkxFRlRfRE9XTiIsImVuZFBvc2l0aW9uIiwic2hvd0F0Iiwic2V0UmFkaXVzIiwiQ2FydGVzaWFuMyIsImRpc3RhbmNlIiwidXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyIsIk1PVVNFX01PVkUiLCJCYXNlSGFuZGxlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0lBQVlBLE07O0FBQ1o7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7SUFFYUMsYSxXQUFBQSxhOzs7Ozs7Ozs7Ozs4QkFDSEMsTyxFQUFTQyxVLEVBQVk7QUFDdkJELHNCQUFVLHVCQUFZQSxP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QW5CRCxFQW1CR3BCLE9BQU9xQyxvQkFBUCxDQUE0QlEsVUFuQi9CO0FBcUJIOzs7O0VBOUU4QkMseUIiLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge0Jhc2VIYW5kbGVyfSBmcm9tIFwiLi9CYXNlSGFuZGxlclwiO1xyXG5pbXBvcnQge2NvcHlPcHRpb25zfSBmcm9tIFwiLi4vdXRpbC91dGlsXCI7XHJcbmltcG9ydCB7ZGVmYXVsdEJpbGxib2FyZCwgZGVmYXVsdFN1cmZhY2VPcHRpb25zfSBmcm9tIFwiLi4vY29uc3RhbnQvRGVmYXVsdFZhbHVlXCI7XHJcbmltcG9ydCB7Q2lyY2xlUHJpbWl0aXZlfSBmcm9tIFwiLi4vcHJpbWl0aXZlL0NpcmNsZVByaW1pdGl2ZVwiO1xyXG5pbXBvcnQge0JpbGxib2FyZEdyb3VwfSBmcm9tIFwiLi4vcHJpbWl0aXZlL0JpbGxib2FyZEdyb3VwXCI7XHJcbmltcG9ydCB7Z2V0Q2VzaXVtSGlnaHRaZXJvfSBmcm9tIFwiLi4vdXRpbC9jb25zdHJ1Y3RIZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDaXJjbGVIYW5kbGVyIGV4dGVuZHMgQmFzZUhhbmRsZXIge1xyXG4gICAgc3RhcnQob3B0aW9ucywgZHJhd0hlbHBlcikge1xyXG4gICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0U3VyZmFjZU9wdGlvbnMpO1xyXG4gICAgICAgIGxldCBtb3VzZUhhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKGRyYXdIZWxwZXIuc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgbGV0IGNpcmNsZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IG1hcmtlcnMgPSBudWxsO1xyXG4gICAgICAgIGxldCBzY2VuZSA9IGRyYXdIZWxwZXIuc2NlbmU7XHJcbiAgICAgICAgbGV0IHZpZXdlciA9IGRyYXdIZWxwZXIudmlld2VyO1xyXG4gICAgICAgIGxldCBwcmltaXRpdmVzID0gZHJhd0hlbHBlci5zY2VuZS5wcmltaXRpdmVzO1xyXG4gICAgICAgIGxldCB0b29sdGlwID0gZHJhd0hlbHBlci50b29sdGlwO1xyXG5cclxuICAgICAgICBkcmF3SGVscGVyLnN0YXJ0RHJhd2luZygoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaXJjbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlcyAmJiBwcmltaXRpdmVzLnJlbW92ZShjaXJjbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hcmtlcnMgJiYgbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgbW91c2VIYW5kbGVyICYmIG1vdXNlSGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAgJiYgdG9vbHRpcC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobW92ZW1lbnQucG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LnBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLnBpY2tQb3NpdGlvbihtb3ZlbWVudC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvLyBjYXJ0ZXNpYW4gPSBnZXRDZXNpdW1IaWdodFplcm8oY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBwaWNrUG9zaXRpb24obW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KG1vdmVtZW50LnBvc2l0aW9uLCB2aWV3ZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaXJjbGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaXJjbGUgPSBuZXcgQ2lyY2xlUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNlbnRlcjogY2FydGVzaWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYXN5bmNocm9ub3VzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIG1hdGVyaWFsOiBvcHRpb25zLm1hdGVyaWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGUgPSBkcmF3SGVscGVyLmNyZWF0ZUVkaXRhYmxlQ2lyY2xlUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogY2FydGVzaWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmNocm9ub3VzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBvcHRpb25zLm1hdGVyaWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZXMuYWRkKGNpcmNsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMgPSBuZXcgQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlciwgZGVmYXVsdEJpbGxib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkQmlsbGJvYXJkcyhbY2FydGVzaWFuXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2soY2lyY2xlLmdldENlbnRlcigpLCBjaXJjbGUuZ2V0UmFkaXVzKCksIGRyYXdIZWxwZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RvcERyYXdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1dOKTtcclxuXHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKChtb3ZlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBtb3ZlbWVudC5lbmRQb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaXJjbGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuc2hvd0F0KHBvc2l0aW9uLCBcIjxwPkNsaWNrIHRvIHN0YXJ0IGRyYXdpbmcgdGhlIGNpcmNsZTwvcD5cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgY2FydGVzaWFuID0gc2NlbmUucGlja1Bvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FydGVzaWFuID0gb3B0aW9ucy5zdHJhdGVneS5waWNrU3RyYXRlZ3kocG9zaXRpb24sIHZpZXdlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKGNpcmNsZS5nZXRDZW50ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlLnNldFJhZGl1cyhDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShnZXRDZXNpdW1IaWdodFplcm8oY2lyY2xlLmdldENlbnRlcigpKSwgZ2V0Q2VzaXVtSGlnaHRaZXJvKGNhcnRlc2lhbikpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2lyY2xlLnNldFJhZGl1cyhDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShjaXJjbGUuZ2V0Q2VudGVyKCksIGNhcnRlc2lhbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+TW92ZSBtb3VzZSB0byBjaGFuZ2UgY2lyY2xlIHJhZGl1czwvcD48cD5DbGljayBhZ2FpbiB0byBmaW5pc2ggZHJhd2luZzwvcD5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLk1PVVNFX01PVkUpO1xyXG5cclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///37\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.DrawHelperWidget = undefined;\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _constructHelper = __webpack_require__(7);\n\nvar _DefaultValue = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nvar _EventHelper = __webpack_require__(4);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DrawHelperWidget = exports.DrawHelperWidget = function DrawHelperWidget(drawHelper, options) {\n    var _this = this;\n\n    _classCallCheck(this, DrawHelperWidget);\n\n    // container must be specified\n    if (!Cesium.defined(options.container)) {\n        throw new Cesium.DeveloperError('Container is required');\n    }\n\n    var drawOptions = {\n        markerIcon: \" marker\",\n        polylineIcon: \" polyline\",\n        polygonIcon: \" polygon\",\n        circleIcon: \" circle\",\n        extentIcon: \" extent\",\n        clearIcon: \" clear\",\n        polylineDrawingOptions: _DefaultValue.defaultPolylineOptions,\n        polygonDrawingOptions: _DefaultValue.defaultPolygonOptions,\n        extentDrawingOptions: _DefaultValue.defaultExtentOptions,\n        circleDrawingOptions: _DefaultValue.defaultCircleOptions,\n        strategy: {\n            pickStrategy: options.pickStrategy ? options.pickStrategy : _DefaultValue.defaultPickStrategy\n        }\n    };\n    (0, _util.fillOptions)(options, drawOptions);\n\n    var toolbar = document.createElement('DIV');\n    toolbar.className = \"toolbar\";\n    options.container.appendChild(toolbar);\n\n    var scene = drawHelper._scene;\n\n    options.buttons.indexOf(\"marker\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'marker', options.markerIcon, 'Click to start drawing a 2D marker', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'markerClick'\n        });\n\n        drawHelper.startDrawingMarker({\n            callback: function callback(position) {\n                _self.executeListeners({ name: 'markerCreated', position: position });\n            },\n            strategy: options.strategy\n        });\n    });\n\n    options.buttons.indexOf(\"polyline\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'polyline', options.polylineIcon, 'Click to start drawing a 2D polyline', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'polylineClick'\n        });\n\n        drawHelper.startDrawingPolyline({\n            callback: function callback(positions) {\n                _this.executeListeners({ name: 'polylineCreated', positions: positions });\n            },\n            strategy: options.strategy\n        });\n    });\n\n    options.buttons.indexOf(\"polygon\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'polygon', options.polygonIcon, 'Click to start drawing a 2D polygon', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'polygonClick'\n        });\n\n        drawHelper.startDrawingPolygon({\n            callback: function callback(positions) {\n                _this.executeListeners({ name: 'polygonCreated', positions: positions });\n            },\n            strategy: options.strategy\n        });\n    });\n\n    options.buttons.indexOf(\"extent\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'extent', options.extentIcon, 'Click to start drawing an Extent', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'extentClick'\n        });\n\n        drawHelper.startDrawingExtent({\n            callback: function callback(extent) {\n                _this.executeListeners({ name: 'extentCreated', extent: extent });\n            },\n            strategy: options.strategy\n        });\n    });\n\n    options.buttons.indexOf(\"circle\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'circle', options.circleIcon, 'Click to start drawing a Circle', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'circleClick'\n        });\n\n        drawHelper.startDrawingCircle({\n            callback: function callback(center, radius) {\n                _this.executeListeners({ name: 'circleCreated', center: center, radius: radius });\n            },\n            strategy: options.strategy\n        });\n    });\n\n    // add a clear button at the end\n    // add a divider first\n    var div = document.createElement('DIV');\n    div.className = 'divider';\n    toolbar.appendChild(div);\n\n    options.buttons.indexOf(\"clear\") !== -1 && (0, _constructHelper.createIconDiv)(toolbar, 'clear', options.clearIcon, 'Remove all primitives', function () {\n        typeof options.clickCallback === 'function' && options.clickCallback({\n            name: 'clearClick'\n        });\n\n        scene.primitives.removeAll();\n    });\n\n    (0, _EventHelper.enhanceWithListeners)(this);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyVjIvd2lkZ2V0L0RyYXdIZWxwZXJXaWRnZXQuanM/NzY0OSJdLCJuYW1lcyI6WyJDZXNpdW0iLCJEcmF3SGVscGVyV2lkZ2V0IiwiZHJhd0hlbHBlciIsIm9wdGlvbnMiLCJkZWZpbmVkIiwiY29udGFpbmVyIiwiRGV2ZWxvcGVyRXJyb3IiLCJkcmF3T3B0aW9ucyIsIm1hcmtlckljb24iLCJwb2x5bGluZUljb24iLCJwb2x5Z29uSWNvbiIsImNpcmNsZUljb24iLCJleHRlbnRJY29uIiwiY2xlYXJJY29uIiwicG9seWxpbmVEcmF3aW5nT3B0aW9ucyIsImRlZmF1bHRQb2x5bGluZU9wdGlvbnMiLCJwb2x5Z29uRHJhd2luZ09wdGlvbnMiLCJkZWZhdWx0UG9seWdvbk9wdGlvbnMiLCJleHRlbnREcmF3aW5nT3B0aW9ucyIsImRlZmF1bHRFeHRlbnRPcHRpb25zIiwiY2lyY2xlRHJhd2luZ09wdGlvbnMiLCJkZWZhdWx0Q2lyY2xlT3B0aW9ucyIsInN0cmF0ZWd5IiwicGlja1N0cmF0ZWd5IiwiZGVmYXVsdFBpY2tTdHJhdGVneSIsInRvb2xiYXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsInNjZW5lIiwiX3NjZW5lIiwiYnV0dG9ucyIsImluZGV4T2YiLCJjbGlja0NhbGxiYWNrIiwibmFtZSIsInN0YXJ0RHJhd2luZ01hcmtlciIsImNhbGxiYWNrIiwicG9zaXRpb24iLCJfc2VsZiIsImV4ZWN1dGVMaXN0ZW5lcnMiLCJzdGFydERyYXdpbmdQb2x5bGluZSIsInBvc2l0aW9ucyIsInN0YXJ0RHJhd2luZ1BvbHlnb24iLCJzdGFydERyYXdpbmdFeHRlbnQiLCJleHRlbnQiLCJzdGFydERyYXdpbmdDaXJjbGUiLCJjZW50ZXIiLCJyYWRpdXMiLCJkaXYiLCJwcmltaXRpdmVzIiwicmVtb3ZlQWxsIl0sIm1hcHBpbmdzIjoi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QyxFQUF3Q0MsUUFBUUEsTUFBaEQsRUFBdEI7QUFDSCxhQUh5QjtBQUkxQjFCLHNCQUFVbkIsUUFBUW1CO0FBSlEsU0FBOUI7QUFNSCxLQVoyQyxDQUE1Qzs7QUFjQTtBQUNBO0FBQ0EsUUFBSTJCLE1BQU12QixTQUFTQyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQXNCLFFBQUlyQixTQUFKLEdBQWdCLFNBQWhCO0FBQ0FILFlBQVFJLFdBQVIsQ0FBb0JvQixHQUFwQjs7QUFFQTlDLFlBQVE2QixPQUFSLENBQWdCQyxPQUFoQixDQUF3QixPQUF4QixNQUFxQyxDQUFDLENBQXRDLElBQ0Esb0NBQWNSLE9BQWQsRUFBdUIsT0FBdkIsRUFBZ0N0QixRQUFRVSxTQUF4QyxFQUFtRCx1QkFBbkQsRUFBNkUsWUFBSztBQUM5RSxlQUFPVixRQUFRK0IsYUFBZixLQUFpQyxVQUFqQyxJQUNBL0IsUUFBUStCLGFBQVIsQ0FBc0I7QUFDbEJDLGtCQUFNO0FBRFksU0FBdEIsQ0FEQTs7QUFLQUwsY0FBTW9CLFVBQU4sQ0FBaUJDLFNBQWpCO0FBQ0gsS0FQRCxDQURBOztBQVVBLDJDQUFxQixJQUFyQjtBQUVILEMiLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDZXNpdW0gZnJvbSBcIkNlc2l1bVwiO1xyXG5pbXBvcnQge2NyZWF0ZUljb25EaXZ9IGZyb20gXCIuLi91dGlsL2NvbnN0cnVjdEhlbHBlclwiXHJcbmltcG9ydCB7XHJcbiAgICBkZWZhdWx0UG9seWdvbk9wdGlvbnMsXHJcbiAgICBkZWZhdWx0UG9seWxpbmVPcHRpb25zLFxyXG4gICAgZGVmYXVsdEV4dGVudE9wdGlvbnMsXHJcbiAgICBkZWZhdWx0Q2lyY2xlT3B0aW9ucyxcclxuICAgIGRlZmF1bHRQaWNrU3RyYXRlZ3lcclxufSBmcm9tIFwiLi4vY29uc3RhbnQvRGVmYXVsdFZhbHVlXCJcclxuXHJcbmltcG9ydCB7ZmlsbE9wdGlvbnN9IGZyb20gXCIuLi91dGlsL3V0aWxcIlxyXG5pbXBvcnQge2VuaGFuY2VXaXRoTGlzdGVuZXJzfSBmcm9tICAnLi4vdXRpbC9FdmVudEhlbHBlcidcclxuXHJcbmV4cG9ydCBjbGFzcyBEcmF3SGVscGVyV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGRyYXdIZWxwZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICAvLyBjb250YWluZXIgbXVzdCBiZSBzcGVjaWZpZWRcclxuICAgICAgICBpZiAoIShDZXNpdW0uZGVmaW5lZChvcHRpb25zLmNvbnRhaW5lcikpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ0NvbnRhaW5lciBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRyYXdPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtYXJrZXJJY29uOiBcIiBtYXJrZXJcIixcclxuICAgICAgICAgICAgcG9seWxpbmVJY29uOiBcIiBwb2x5bGluZVwiLFxyXG4gICAgICAgICAgICBwb2x5Z29uSWNvbjogXCIgcG9seWdvblwiLFxyXG4gICAgICAgICAgICBjaXJjbGVJY29uOiBcIiBjaXJjbGVcIixcclxuICAgICAgICAgICAgZXh0ZW50SWNvbjogXCIgZXh0ZW50XCIsXHJcbiAgICAgICAgICAgIGNsZWFySWNvbjogXCIgY2xlYXJcIixcclxuICAgICAgICAgICAgcG9seWxpbmVEcmF3aW5nT3B0aW9uczogZGVmYXVsdFBvbHlsaW5lT3B0aW9ucyxcclxuICAgICAgICAgICAgcG9seWdvbkRyYXdpbmdPcHRpb25zOiBkZWZhdWx0UG9seWdvbk9wdGlvbnMsXHJcbiAgICAgICAgICAgIGV4dGVudERyYXdpbmdPcHRpb25zOiBkZWZhdWx0RXh0ZW50T3B0aW9ucyxcclxuICAgICAgICAgICAgY2lyY2xlRHJhd2luZ09wdGlvbnM6IGRlZmF1bHRDaXJjbGVPcHRpb25zLFxyXG4gICAgICAgICAgICBzdHJhdGVneToge1xyXG4gICAgICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBvcHRpb25zLnBpY2tTdHJhdGVneSA/IG9wdGlvbnMucGlja1N0cmF0ZWd5IDogZGVmYXVsdFBpY2tTdHJhdGVneVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmaWxsT3B0aW9ucyhvcHRpb25zLCBkcmF3T3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGxldCB0b29sYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgdG9vbGJhci5jbGFzc05hbWUgPSBcInRvb2xiYXJcIjtcclxuICAgICAgICBvcHRpb25zLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b29sYmFyKTtcclxuXHJcbiAgICAgICAgbGV0IHNjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG5cclxuICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcIm1hcmtlclwiKSAhPT0gLTEgJiYgY3JlYXRlSWNvbkRpdih0b29sYmFyLCAnbWFya2VyJywgb3B0aW9ucy5tYXJrZXJJY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhIDJEIG1hcmtlcicsICAoKSA9PntcclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2xpY2tDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ21hcmtlckNsaWNrJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RhcnREcmF3aW5nTWFya2VyKHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAgKHBvc2l0aW9uKSA9PntcclxuICAgICAgICAgICAgICAgICAgICBfc2VsZi5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnbWFya2VyQ3JlYXRlZCcsIHBvc2l0aW9uOiBwb3NpdGlvbn0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiBvcHRpb25zLnN0cmF0ZWd5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG9wdGlvbnMuYnV0dG9ucy5pbmRleE9mKFwicG9seWxpbmVcIikgIT09IC0xICYmIGNyZWF0ZUljb25EaXYodG9vbGJhciwgJ3BvbHlsaW5lJywgb3B0aW9ucy5wb2x5bGluZUljb24sICdDbGljayB0byBzdGFydCBkcmF3aW5nIGEgMkQgcG9seWxpbmUnLCAgKCk9PiB7XHJcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmNsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5jbGlja0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdwb2x5bGluZUNsaWNrJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RhcnREcmF3aW5nUG9seWxpbmUoe1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICAocG9zaXRpb25zKSA9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdwb2x5bGluZUNyZWF0ZWQnLCBwb3NpdGlvbnM6IHBvc2l0aW9uc30pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiBvcHRpb25zLnN0cmF0ZWd5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG9wdGlvbnMuYnV0dG9ucy5pbmRleE9mKFwicG9seWdvblwiKSAhPT0gLTEgJiYgY3JlYXRlSWNvbkRpdih0b29sYmFyLCAncG9seWdvbicsIG9wdGlvbnMucG9seWdvbkljb24sICdDbGljayB0byBzdGFydCBkcmF3aW5nIGEgMkQgcG9seWdvbicsICAoKSA9PntcclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2xpY2tDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3BvbHlnb25DbGljaydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBkcmF3SGVscGVyLnN0YXJ0RHJhd2luZ1BvbHlnb24oe1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICAocG9zaXRpb25zKSA9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdwb2x5Z29uQ3JlYXRlZCcsIHBvc2l0aW9uczogcG9zaXRpb25zfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3RyYXRlZ3k6IG9wdGlvbnMuc3RyYXRlZ3lcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgb3B0aW9ucy5idXR0b25zLmluZGV4T2YoXCJleHRlbnRcIikgIT09IC0xICYmIGNyZWF0ZUljb25EaXYodG9vbGJhciwgJ2V4dGVudCcsIG9wdGlvbnMuZXh0ZW50SWNvbiwgJ0NsaWNrIHRvIHN0YXJ0IGRyYXdpbmcgYW4gRXh0ZW50JywgICgpPT4ge1xyXG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgIG9wdGlvbnMuY2xpY2tDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZXh0ZW50Q2xpY2snXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZHJhd0hlbHBlci5zdGFydERyYXdpbmdFeHRlbnQoe1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICAoZXh0ZW50KT0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdleHRlbnRDcmVhdGVkJywgZXh0ZW50OiBleHRlbnR9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdHJhdGVneTogb3B0aW9ucy5zdHJhdGVneVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcImNpcmNsZVwiKSAhPT0gLTEgJiYgY3JlYXRlSWNvbkRpdih0b29sYmFyLCAnY2lyY2xlJywgb3B0aW9ucy5jaXJjbGVJY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhIENpcmNsZScsICAoKT0+IHtcclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2xpY2tDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NpcmNsZUNsaWNrJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RhcnREcmF3aW5nQ2lyY2xlKHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAgKGNlbnRlciwgcmFkaXVzKSA9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdjaXJjbGVDcmVhdGVkJywgY2VudGVyOiBjZW50ZXIsIHJhZGl1czogcmFkaXVzfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3RyYXRlZ3k6IG9wdGlvbnMuc3RyYXRlZ3lcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gYWRkIGEgY2xlYXIgYnV0dG9uIGF0IHRoZSBlbmRcclxuICAgICAgICAvLyBhZGQgYSBkaXZpZGVyIGZpcnN0XHJcbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAnZGl2aWRlcic7XHJcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcImNsZWFyXCIpICE9PSAtMSAmJlxyXG4gICAgICAgIGNyZWF0ZUljb25EaXYodG9vbGJhciwgJ2NsZWFyJywgb3B0aW9ucy5jbGVhckljb24sICdSZW1vdmUgYWxsIHByaW1pdGl2ZXMnLCAgKCk9PiB7XHJcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmNsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5jbGlja0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjbGVhckNsaWNrJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNjZW5lLnByaW1pdGl2ZXMucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHRoaXMpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///38\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ChoiceHelper = ChoiceHelper;\n\nvar _Cesium = __webpack_require__(0);\n\nvar Cesium = _interopRequireWildcard(_Cesium);\n\nvar _index = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// export const ChoiceHelper =  factory(Cesium,DrawHelper);\n\n\n/**\r\n * @param {Object} config\r\n * @param {Object} config.viewer - Cesium.viewer对象\r\n * @param {Object} config.toolbar - toolbar,为空则不创建\r\n * @param {Element} config.toolbar.container - toolbar所在容器\r\n * @param {string[]} config.toolbar.buttons - 包括 'polygon', 'circle', 'extent' 代表多边形、圆形、矩形\r\n * @param {Object} config.dom - dom事件绑定模式\r\n * @param {Element} config.polygon - 绑定开始画polygon的事件\r\n * @param {Element} config.marker - 绑定开始画marker的事件\r\n * @param {Element} config.extent - 绑定开始画extent的事件\r\n * @param {Element} config.circle - 绑定开始画circle的事件\r\n * @param {Element} config.clear - 清空绘制事件\r\n * @param {Element} config.cancel - 结束绘制事件\r\n * @param {Array} config.callbacks - 选择回调，可配置多种选择回调\r\n * @param {function(Cesium.Entity):boolean} config.callbacks.choice[].filter - 过滤器，即选择器,确认为需要选择的对象，返回ture\r\n * @param {function(Cesium.Entity[])} config.callbacks.choice[].onChoice - 选择回调\r\n * @param {function(Cesium.Cartesian3)} config.callbacks.marker - marker创建回调\r\n * @param {function} config.callbacks.afterClick - 工具栏点击回调\r\n * {\r\n *     viewer: viewer对象,\r\n *     toolbar:{\r\n *         container: toolbar所在容器,\r\n *         buttons: [],//\r\n *     },\r\n *     dom:{//\r\n *             polygon: function | dom ,\r\n *             marker: function | dom ,\r\n *             extent: function | dom ,\r\n *             circle: function | dom ,\r\n *             clear : dom,\r\n *             cancel : dom\r\n *     },\r\n *     callbacks:{\r\n *          choice:[{\r\n *             filter: function\r\n *             onChoice: function\r\n *         }],\r\n *         marker: function,\r\n *         afterClick: function,\r\n *     }\r\n * }\r\n * @constructor\r\n */\n/*   if (typeof exports === 'object' && typeof module === 'object')\r\n       module.exports = factory(require('Cesium'), require('DrawHelper'));\r\n   else if (typeof define === 'function' && define.amd)\r\n       define('ChoiceHelper', [ 'Cesium', 'DrawHelper'], factory);\r\n   else {\r\n       root.ChoiceHelper = factory(root.Cesium, root.DrawHelper);\r\n   }*/\nfunction ChoiceHelper(config) {\n    this._cesiumViewer = config.viewer;\n    this.util = new Util(this._cesiumViewer);\n\n    this._scene = this._cesiumViewer.scene;\n    this._drawHelper = new _index.DrawHelper(this._cesiumViewer);\n    this._option = config;\n    this._afterClick = config.callbacks.afterClick;\n\n    this._primitives = [];\n    var me = this;\n\n    if (Cesium.defined(config.toolbar) && Cesium.defined(config.toolbar.container)) {\n        this._toolbarContainer = config.toolbar.container;\n\n        this._toolbar = this._drawHelper.addToolbar(this._toolbarContainer, {\n            buttons: config.toolbar.buttons,\n            clickCallback: function clickCallback(event) {\n                //移除之前绘制的\n                me._afterClick && me._afterClick();\n                me.util.getWithDefault(me._primitives, []).forEach(function (element, index) {\n                    me._scene.primitives.remove(element);\n                });\n            },\n            //点位选取策略配置\n            pickStrategy: pickStrategy\n        });\n    } else if (Cesium.defined(config.dom)) {\n        this._toolbar = this._drawHelper.addToolbar(document.body, { buttons: [] });\n        var toolbar = this._toolbar;\n        config.dom.polygon && function () {\n            var lastOnclick = config.dom.polygon.onclick;\n            config.dom.polygon.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n\n                me._afterClick && me._afterClick();\n                me._drawHelper.startDrawingPolygon({\n                    callback: function callback(positions, self) {\n                        toolbar.executeListeners({ name: 'polygonCreated', positions: positions });\n                    },\n                    strategy: {\n                        pickStrategy: pickStrategy\n                    }\n                });\n            };\n            // $(config.dom.polygon).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.startDrawingPolygon({\n            //         callback: function (positions, self) {\n            //             toolbar.executeListeners({name: 'polygonCreated', positions: positions});\n            //         },\n            //         strategy: {\n            //             pickStrategy: pickStrategy\n            //         }\n            //     });\n            // });\n        }();\n        config.dom.polygon && function () {\n            var lastOnclick = config.dom.polyline.onclick;\n            config.dom.polyline.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n                me._drawHelper.startDrawingPolyline({\n                    callback: function callback(positions, self) {\n                        toolbar.executeListeners({ name: 'polylineCreated', positions: positions });\n                    },\n                    strategy: {\n                        pickStrategy: pickStrategy\n                    }\n                });\n            };\n            // $(config.dom.polyline).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.startDrawingPolyline({\n            //         callback: function (positions, self) {\n            //             toolbar.executeListeners({name: 'polylineCreated', positions: positions});\n            //         },\n            //         strategy: {\n            //             pickStrategy: pickStrategy\n            //         }\n            //     });\n            // });\n        }();\n        config.dom.marker && function () {\n            var lastOnclick = config.dom.marker.onclick;\n            config.dom.marker.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n                me._drawHelper.startDrawingMarker({\n                    callback: function callback(position, self) {\n                        toolbar.executeListeners({ name: 'markerCreated', position: position });\n                    },\n                    strategy: {\n                        pickStrategy: pickStrategy\n                    }\n                });\n            };\n            // $(config.dom.marker).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.startDrawingMarker({\n            //         callback: function (position, self) {\n            //             toolbar.executeListeners({name: 'markerCreated', position: position});\n            //         },\n            //         strategy: {\n            //             pickStrategy: pickStrategy\n            //         }\n            //     });\n            // });\n        }();\n        config.dom.extent && function () {\n            var lastOnclick = config.dom.extent.onclick;\n\n            config.dom.extent.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n                me._drawHelper.startDrawingExtent({\n                    callback: function callback(extent, self) {\n                        toolbar.executeListeners({ name: 'extentCreated', extent: extent });\n                    },\n                    strategy: {\n                        pickStrategy: pickStrategy\n                    }\n                });\n            };\n            // $(config.dom.extent).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.startDrawingExtent({\n            //         callback: function (extent, self) {\n            //             toolbar.executeListeners({name: 'extentCreated', extent: extent});\n            //         },\n            //         strategy: {\n            //             pickStrategy: pickStrategy\n            //         }\n            //     });\n            // });\n        }();\n        config.dom.circle && function () {\n            var lastOnclick = config.dom.circle.onclick;\n\n            config.dom.circle.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n                me._drawHelper.startDrawingCircle({\n                    callback: function callback(center, radius, self) {\n                        toolbar.executeListeners({ name: 'circleCreated', center: center, radius: radius });\n                    },\n                    strategy: {\n                        pickStrategy: pickStrategy\n                    }\n                });\n            };\n            // $(config.dom.circle).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.startDrawingCircle({\n            //         callback: function (center, radius, self) {\n            //             toolbar.executeListeners({name: 'circleCreated', center: center, radius: radius});\n            //         },\n            //         strategy: {\n            //             pickStrategy: pickStrategy\n            //         }\n            //     });\n            // });\n        }();\n        config.dom.clear && function () {\n            var lastOnclick = config.dom.clear.onclick;\n\n            config.dom.clear.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n            };\n            // $(config.dom.clear).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //\n            // });\n        }();\n        config.dom.cancel && function () {\n            var lastOnclick = config.dom.cancel.onclick;\n\n            config.dom.cancel.onclick = function (e) {\n                lastOnclick && lastOnclick(e);\n                me._afterClick && me._afterClick();\n                me._drawHelper.stopDrawing();\n            };\n            // $(config.dom.cancel).on('click', function (e) {\n            //     me._afterClick && me._afterClick();\n            //     me._drawHelper.stopDrawing()\n            // });\n        }();\n    } else {\n        console.error(\"传入参数有误！\");\n        return;\n    }\n    this._eventInit();\n}\n\nvar pickStrategy = function pickStrategy(position, viewer) {\n    if (Cesium.defined(viewer.scene.pick(position)) && viewer.scene.pickPositionSupported) {\n        return viewer.scene.pickPosition(position);\n        // var fromCartesian = Cesium.Cartographic.fromCartesian(viewer.scene.pickPosition(position));\n        // return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n    } else {\n        var fromCartesian = Cesium.Cartographic.fromCartesian(viewer.scene.camera.pickEllipsoid(position));\n        return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n    }\n};\n\nChoiceHelper.prototype._optionReload = function () {};\n\nChoiceHelper.prototype._eventInit = function () {\n    var me = this;\n    me._toolbar.addListener('polygonCreated', function (event) {\n        var polygon = new _index.DrawHelper.PolygonPrimitive({\n            positions: event.positions,\n            material: Cesium.Material.fromType('Checkerboard')\n        });\n\n        console.log(event);\n        var LatLngPaths = [];\n\n        me.util.getWithDefault(event.positions, []).forEach(function (position, index) {\n            LatLngPaths.push(me.util.Cartesian3ToLatLng(position));\n        });\n\n        me._filterExecuter(function (entities) {\n            var parseEntities = [];\n            me.util.getWithDefault(entities, []).forEach(function (entity, index) {\n                var latlng = Cesium.Cartographic.fromCartesian(entity.position.getValue(0));\n                if (me.util._isInPolygon(latlng, LatLngPaths)) {\n                    parseEntities.push(entity);\n                }\n            });\n            return parseEntities;\n        });\n    });\n    // circle.center :  Cartesian3\n    // circle.ellipsoid._maximumRadius : number\n    // circle.ellipsoid._minimumRadius : number\n    me._toolbar.addListener('circleCreated', function (event) {\n\n        // var r = event.radius\n        me._filterExecuter(function (entities) {\n            var parseEntities = [];\n\n            me.util.getWithDefault(entities, []).forEach(function (entity, index) {\n                var latlng = Cesium.Cartographic.fromCartesian(entity.position.getValue(0));\n                var groundPosition = Cesium.Cartesian3.fromRadians(latlng.longitude, latlng.latitude, 0.0);\n                if (Cesium.Cartesian3.distance(me.util.getCesiumHightZero(event.center), groundPosition) <= event.radius) {\n                    parseEntities.push(entity);\n                }\n            });\n\n            return parseEntities;\n        });\n    });\n\n    //Cesium.Rectangle.subsample(e.extent)\n    me._toolbar.addListener('extentCreated', function (e) {\n        var extent = e.extent;\n\n        me._filterExecuter(function (entities) {\n            var parseEntities = [];\n\n            me.util.getWithDefault(entities, []).forEach(function (entity, index) {\n                var cartesian3ToLatLng = me.util.Cartesian3ToLatLng(entity.position.getValue(0));\n                if (extent.west <= cartesian3ToLatLng.longitude && extent.east >= cartesian3ToLatLng.longitude && extent.south <= cartesian3ToLatLng.latitude && extent.north >= cartesian3ToLatLng.latitude) {\n                    parseEntities.push(entity);\n                }\n            });\n\n            return parseEntities;\n        });\n    });\n\n    me._toolbar.addListener('markerCreated', function (event) {\n        me._option.callbacks.marker(event.position);\n        // loggingMessage('Marker created at ' + event.position.toString());\n        // create one common billboard collection for all billboards\n        // var b = new Cesium.BillboardCollection();\n        // viewer.scene.primitives.add(b);\n        // var billboard = b.add({\n        //     show : true,\n        //     position : event.position,\n        //     pixelOffset : new Cesium.Cartesian2(0, 0),\n        //     eyeOffset : new Cesium.Cartesian3(0.0, 0.0, 0.0),\n        //     horizontalOrigin : Cesium.HorizontalOrigin.CENTER,\n        //     verticalOrigin : Cesium.VerticalOrigin.CENTER,\n        //     scale : 1.0,\n        //     image: './img/glyphicons_242_google_maps.png',\n        //     color : new Cesium.Color(1.0, 1.0, 1.0, 1.0)\n        // });\n        // billboard.setEditable();\n    });\n};\n\nChoiceHelper.prototype.setOption = function (option) {};\n\nChoiceHelper.prototype._callBack = function () {};\n\nChoiceHelper.prototype._filterExecuter = function (containsCallback) {\n    var me = this;\n    //选出在圈内的entities\n    var containEntities = containsCallback(me._cesiumViewer.entities.values);\n\n    me.util.getWithDefault(me._option.callbacks.choice, []).forEach(function (callback, index) {\n        var entities = [];\n        //过滤出需要的entity\n        me.util.getWithDefault(containEntities, []).forEach(function (entity, index2) {\n            if (callback.filter(entity)) entities.push(entity);\n        });\n        //callback\n        callback.onChoice(entities);\n    });\n};\n\nfunction Util(viewer) {\n    this._viewer = viewer;\n    this._ellipsoid = this._viewer.scene.globe._ellipsoid;\n}\n\n/**\r\n * 将Cartesian3转为经纬度\r\n * @param cartesian3\r\n * @returns {{height:number,latitude:number,longitude:number}}\r\n */\nUtil.prototype.Cartesian3ToLatLng = function (cartesian3) {\n    // return  Cesium.Cartographic.fromCartesian(cartesian3);\n    return this._ellipsoid.cartesianToCartographic(cartesian3);\n};\n/**\r\n * 但是Cesium不支持此类\r\n * @param cartesian3\r\n * @return {{height: *, latitude: *, longitude: *}}\r\n * @constructor\r\n */\nUtil.prototype.Cartesian3ToDegrees = function (cartesian3) {\n    var cartographic = this._ellipsoid.cartesianToCartographic(cartesian3);\n    var degree = {\n        height: cartographic.height,\n        latitude: Cesium.Math.toDegrees(cartographic.latitude),\n        longitude: Cesium.Math.toDegrees(cartographic.longitude)\n    };\n    return degree;\n};\n\nUtil.prototype.getWithDefault = function (element, defaultElement) {\n    return element ? element : defaultElement;\n};\n\n/**\r\n * 获取当前点位的近地点位\r\n * @param {Cesium.Cartesian3} cartesian3\r\n * @return {Cesium.Cartesian3}\r\n */\nUtil.prototype.getCesiumHightZero = function (cartesian3) {\n    var fromCartesian = Cesium.Cartographic.fromCartesian(cartesian3);\n    return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n};\n\n/**\r\n * 修正当前点位的高度\r\n * @param {Cesium.Cartesian3} cartesian3\r\n * @param {number} heightPlus\r\n * @return {Cesium.Cartesian3}\r\n */\nUtil.prototype.formatHetightPlusNumber = function (cartesian3, heightPlus) {\n    var fromCartesian = Cesium.Cartographic.fromCartesian(cartesian3);\n    return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, fromCartesian.height + heightPlus);\n};\n\n/**\r\n *\r\n * @param position\r\n * @param paths\r\n */\nUtil.prototype._isInPolygon = function (position, paths) {\n    var x = position.longitude;\n    var y = position.latitude;\n\n    var isum,\n        icount,\n        index = 0;\n    var dLon1 = 0,\n        dLon2 = 0,\n        dLat1 = 0,\n        dLat2 = 0,\n        dLon;\n\n    if (paths.size < 3) {\n        return false;\n    }\n\n    isum = 0;\n    icount = paths.length;\n\n    for (index = 0; index < icount - 1; index++) {\n        if (index === icount - 1) {\n            dLon1 = paths[index].longitude;\n            dLat1 = paths[index].latitude;\n            dLon2 = paths[0].longitude;\n            dLat2 = paths[0].latitude;\n        } else {\n            dLon1 = paths[index].longitude;\n            dLat1 = paths[index].latitude;\n            dLon2 = paths[index + 1].longitude;\n            dLat2 = paths[index + 1].latitude;\n        }\n\n        if (y >= dLat1 && y < dLat2 || y >= dLat2 && y < dLat1) {\n            if (Math.abs(dLat1 - dLat2) > 0) {\n                dLon = dLon1 - (dLon1 - dLon2) * (dLat1 - y) / (dLat1 - dLat2);\n                if (dLon < x) isum++;\n            }\n        }\n    }\n\n    return isum % 2 !== 0;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9DaG9pY2VIZWxwZXIuanM/NTJiNiJdLCJuYW1lcyI6WyJDaG9pY2VIZWxwZXIiLCJDZXNpdW0iLCJjb25maWciLCJfY2VzaXVtVmlld2VyIiwidmlld2VyIiwidXRpbCIsIlV0aWwiLCJfc2NlbmUiLCJzY2VuZSIsIl9kcmF3SGVscGVyIiwiRHJhd0hlbHBlciIsIl9vcHRpb24iLCJfYWZ0ZXJDbGljayIsImNhbGxiYWNrcyIsImFmdGVyQ2xpY2siLCJfcHJpbWl0aXZlcyIsIm1lIiwiZGVmaW5lZCIsInRvb2xiYXIiLCJjb250YWluZXIiLCJfdG9vbGJhckNvbnRhaW5lciIsIl90b29sYmFyIiwiYWRkVG9vbGJhciIsImJ1dHRvbnMiLCJjbGlja0NhbGxiYWNrIiwiZXZlbnQiLCJnZXRXaXRoRGVmYXVsdCIsImZvckVhY2giLCJlbGVtZW50IiwiaW5kZXgiLCJwcmltaXRpdmVzIiwicmVtb3ZlIiwicGlja1N0cmF0ZWd5IiwiZG9tIiwiZG9jdW1lbnQiLCJib2R5IiwicG9seWdvbiIsImxhc3RPbmNsaWNrIiwib25jbGljayIsImUiLCJzdGFydERyYXdpbmdQb2x5Z29uIiwiY2FsbGJhY2siLCJwb3NpdGlvbnMiLCJzZWxmIiwiZXhlY3V0ZUxpc3RlbmVycyIsIm5hbWUiLCJzdHJhdGVneSIsInBvbHlsaW5lIiwic3RhcnREcmF3aW5nUG9seWxpbmUiLCJtYXJrZXIiLCJzdGFydERyYXdpbmdNYXJrZXIiLCJwb3NpdGlvbiIsImV4dGVudCIsInN0YXJ0RHJhd2luZ0V4dGVudCIsImNpcmNsZSIsInN0YXJ0RHJhd2luZ0NpcmNsZSIsImNlbnRlciIsInJhZGl1cyIsImNsZWFyIiwiY2FuY2VsIiwic3RvcERyYXdpbmciLCJjb25zb2xlIiwiZXJyb3IiLCJfZXZlbnRJbml0IiwicGljayIsInBpY2tQb3NpdGlvblN1cHBvcnRlZCIsInBpY2tQb3NpdGlvbiIsImZyb21DYXJ0ZXNpYW4iLCJDYXJ0b2dyYXBoaWMiLCJjYW1lcmEiLCJwaWNrRWxsaXBzb2lkIiwiQ2FydGVzaWFuMyIsImZyb21SYWRpYW5zIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJwcm90b3R5cGUiLCJfb3B0aW9uUmVsb2FkIiwiYWRkTGlzdGVuZXIiLCJQb2x5Z29uUHJpbWl0aXZlIiwibWF0ZXJpYWwiLCJNYXRlcmlhbCIsImZyb21UeXBlIiwibG9nIiwiTGF0TG5nUGF0aHMiLCJwdXNoIiwiQ2FydGVzaWFuM1RvTGF0TG5nIiwiX2ZpbHRlckV4ZWN1dGVyIiwiZW50aXRpZXMiLCJwYXJzZUVudGl0aWVzIiwiZW50aXR5IiwibGF0bG5nIiwiZ2V0VmFsdWUiLCJfaXNJblBvbHlnb24iLCJncm91bmRQb3NpdGlvbiIsImRpc3RhbmNlIiwiZ2V0Q2VzaXVtSGlnaHRaZXJvIiwiY2FydGVzaWFuM1RvTGF0TG5nIiwid2VzdCIsImVhc3QiLCJzb3V0aCIsIm5vcnRoIiwic2V0T3B0aW9uIiwib3B0aW9uIiwiX2NhbGxCYWNrIiwiY29udGFpbnNDYWxsYmFjayIsImNvbnRhaW5FbnRpdGllcyIsInZhbHVlcyIsImNob2ljZSIsImluZGV4MiIsImZpbHRlciIsIm9uQ2hvaWNlIiwiX3ZpZXdlciIsIl9lbGxpcHNvaWQiLCJnbG9iZSIsImNhcnRlc2lhbjMiLCJjYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyIsIkNhcnRlc2lhbjNUb0RlZ3JlZXMiLCJjYXJ0b2dyYXBoaWMiLCJkZWdyZWUiLCJoZWlnaHQiLCJNYXRoIiwidG9EZWdyZWVzIiwiZGVmYXVsdEVsZW1lbnQiLCJmb3JtYXRIZXRpZ2h0UGx1c051bWJlciIsImhlaWdodFBsdXMiLCJwYXRocyIsIngiLCJ5IiwiaXN1bSIsImljb3VudCIsImRMb24xIiwiZExvbjIiLCJkTGF0MSIsImRMYXQyIiwiZExvbiIsInNpemUiLCJsZW5ndGgiLCJhYnMiXSwibWFwcGluZ3MiOiI7Ozs7O1FBd0RnQkEsWSxHQUFBQSxZOztBQWpEaEI7O0lBQVlDLE07O0FBQ1o7Ozs7QUFFQTs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFiQTs7Ozs7OztBQXdETyxTQUFTRCxZQUFULENBQXNCRSxNQUF0QixFQUE4QjtBQUNqQyxTQUFLQyxhQUFMLEdBQXFCRCxPQUFPRSxNQUE1QjtBQUNBLFNBQUtDLElBQUwsR0FBWSxJQUFJQyxJQUFKLENBQVMsS0FBS0gsYUFBZCxDQUFaOztBQUVBLFNBQUtJLE1BQUwsR0FBYyxLQUFLSixhQUFMLENBQW1CSyxLQUFqQztBQUNBLFNBQUtDLFdBQUwsR0FBbUIsSUFBSUMsaUJBQUosQ0FBZSxLQUFLUCxhQUFwQixDQUFuQjtBQUNBLFNBQUtRLE9BQUwsR0FBZVQsTUFBZjtBQUNBLFNBQUtVLFdBQUwsR0FBbUJWLE9BQU9XLFNBQVAsQ0FBaUJDLFVBQXBDOztBQUVBLFNBQUtDLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxRQUFJQyxLQUFLLElBQVQ7O0FBRUEsUUFBSWYsT0FBT2dCLE9BQVAsQ0FBZWYsT0FBT2dCLE9BQXRCLEtBQWtDakIsT0FBT2dCLE9BQVAsQ0FBZWYsT0FBT2dCLE9BQVAsQ0FBZUMsU0FBOUIsQ0FBdEMsRUFBZ0Y7QUFDNUUsYUFBS0MsaUJBQUwsR0FBeUJsQixPQUFPZ0IsT0FBUCxDQUFlQyxTQUF4Qzs7QUFFQSxhQUFLRSxRQUFMLEdBQWdCLEtBQUtaLFdBQUwsQ0FBaUJhLFVBQWpCLENBQTRCLEtBQUtGLGlCQUFqQyxFQUFvRDtBQUNoRUcscUJBQVNyQixPQUFPZ0IsT0FBUCxDQUFlSyxPQUR3QztBQUVoRUMsMkJBQWUsdUJBQVVDLEtBQVYsRUFBaUI7QUFDNUI7QUFDQVQsbUJBQUdKLFdBQUgsSUFBa0JJLEdBQUdKLFdBQUgsRUFBbEI7QUFDQUksbUJBQUdYLElBQUgsQ0FBUXFCLGNBQVIsQ0FBdUJWLEdBQUdELFdBQTFCLEVBQXVDLEVBQXZDLEVBQTJDWSxPQUEzQyxDQUFtRCxVQUFVQyxPQUFWLEVBQW1CQyxLQUFuQixFQUEwQjtBQUN6RWIsdUJBQUdULE1BQUgsQ0FBVXVCLFVBQVYsQ0FBcUJDLE1BQXJCLENBQTRCSCxPQUE1QjtBQUNILGlCQUZEO0FBR0gsYUFSK0Q7QUFTaEU7QUFDQUksMEJBQWNBO0FBVmtELFNBQXBELENBQWhCO0FBWUgsS0FmRCxNQWVPLElBQUkvQixPQUFPZ0IsT0FBUCxDQUFlZixPQUFPK0IsR0FBdEIsQ0FBSixFQUFnQztBQUNuQyxhQUFLWixRQUFMLEdBQWdCLEtBQUtaLFdBQUwsQ0FBaUJhLFVBQWpCLENBQTRCWSxTQUFTQyxJQUFyQyxFQUEyQyxFQUFDWixTQUFTLEVBQVYsRUFBM0MsQ0FBaEI7QUFDQSxZQUFJTCxVQUFVLEtBQUtHLFFBQW5CO0FBQ0FuQixlQUFPK0IsR0FBUCxDQUFXRyxPQUFYLElBQXNCLFlBQVk7QUFDOUIsZ0JBQUlDLGNBQWNuQyxPQUFPK0IsR0FBUCxDQUFXRyxPQUFYLENBQW1CRSxPQUFyQztBQUNBcEMsbUJBQU8rQixHQUFQLENBQVdHLE9BQVgsQ0FBbUJFLE9BQW5CLEdBQTZCLFVBQVVDLENBQVYsRUFBYTtBQUN0Q0YsK0JBQWVBLFlBQVlFLENBQVosQ0FBZjs7QUFFQXZCLG1CQUFHSixXQUFILElBQWtCSSxHQUFHSixXQUFILEVBQWxCO0FBQ0FJLG1CQUFHUCxXQUFILENBQWUrQixtQkFBZixDQUFtQztBQUMvQkMsOEJBQVUsa0JBQVVDLFNBQVYsRUFBcUJDLElBQXJCLEVBQTJCO0FBQ2pDekIsZ0NBQVEwQixnQkFBUixDQUF5QixFQUFDQyxNQUFNLGdCQUFQLEVBQXlCSCxXQUFXQSxTQUFwQyxFQUF6QjtBQUNILHFCQUg4QjtBQUkvQkksOEJBQVU7QUFDTmQsc0NBQWNBO0FBRFI7QUFKcUIsaUJBQW5DO0FBUUgsYUFaRDtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSCxTQTFCcUIsRUFBdEI7QUEyQkE5QixlQUFPK0IsR0FBUCxDQUFXRyxPQUFYLElBQXNCLFlBQVk7QUFDOUIsZ0JBQUlDLGNBQWNuQyxPQUFPK0IsR0FBUCxDQUFXYyxRQUFYLENBQW9CVCxPQUF0QztBQUNBcEMsbUJBQU8rQixHQUFQLENBQVdjLFFBQVgsQ0FBb0JULE9BQXBCLEdBQThCLFVBQVVDLENBQVYsRUFBYTtBQUN2Q0YsK0JBQWVBLFlBQVlFLENBQVosQ0FBZjtBQUNBdkIsbUJBQUdKLFdBQUgsSUFBa0JJLEdBQUdKLFdBQUgsRUFBbEI7QUFDQUksbUJBQUdQLFdBQUgsQ0FBZXVDLG9CQUFmLENBQW9DO0FBQ2hDUCw4QkFBVSxrQkFBVUMsU0FBVixFQUFxQkMsSUFBckIsRUFBMkI7QUFDakN6QixnQ0FBUTBCLGdCQUFSLENBQXlCLEVBQUNDLE1BQU0saUJBQVAsRUFBMEJILFdBQVdBLFNBQXJDLEVBQXpCO0FBQ0gscUJBSCtCO0FBSWhDSSw4QkFBVTtBQUNOZCxzQ0FBY0E7QUFEUjtBQUpzQixpQkFBcEM7QUFRSCxhQVhEO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNILFNBekJxQixFQUF0QjtBQTBCQTlCLGVBQU8rQixHQUFQLENBQVdnQixNQUFYLElBQXFCLFlBQVk7QUFDN0IsZ0JBQUlaLGNBQWNuQyxPQUFPK0IsR0FBUCxDQUFXZ0IsTUFBWCxDQUFrQlgsT0FBcEM7QUFDQXBDLG1CQUFPK0IsR0FBUCxDQUFXZ0IsTUFBWCxDQUFrQlgsT0FBbEIsR0FBNEIsVUFBVUMsQ0FBVixFQUFhO0FBQ3JDRiwrQkFBZUEsWUFBWUUsQ0FBWixDQUFmO0FBQ0F2QixtQkFBR0osV0FBSCxJQUFrQkksR0FBR0osV0FBSCxFQUFsQjtBQUNBSSxtQkFBR1AsV0FBSCxDQUFleUMsa0JBQWYsQ0FBa0M7QUFDOUJULDhCQUFVLGtCQUFVVSxRQUFWLEVBQW9CUixJQUFwQixFQUEwQjtBQUNoQ3pCLGdDQUFRMEIsZ0JBQVIsQ0FBeUIsRUFBQ0MsTUFBTSxlQUFQLEVBQXdCTSxVQUFVQSxRQUFsQyxFQUF6QjtBQUNILHFCQUg2QjtBQUk5QkwsOEJBQVU7QUFDTmQsc0NBQWNBO0FBRFI7QUFKb0IsaUJBQWxDO0FBUUgsYUFYRDtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSCxTQXpCb0IsRUFBckI7QUEwQkE5QixlQUFPK0IsR0FBUCxDQUFXbUIsTUFBWCxJQUFxQixZQUFZO0FBQzdCLGdCQUFJZixjQUFjbkMsT0FBTytCLEdBQVAsQ0FBV21CLE1BQVgsQ0FBa0JkLE9BQXBDOztBQUVBcEMsbUJBQU8rQixHQUFQLENBQVdtQixNQUFYLENBQWtCZCxPQUFsQixHQUE0QixVQUFVQyxDQUFWLEVBQWE7QUFDckNGLCtCQUFlQSxZQUFZRSxDQUFaLENBQWY7QUFDQXZCLG1CQUFHSixXQUFILElBQWtCSSxHQUFHSixXQUFILEVBQWxCO0FBQ0FJLG1CQUFHUCxXQUFILENBQWU0QyxrQkFBZixDQUFrQztBQUM5QlosOEJBQVUsa0JBQVVXLE1BQVYsRUFBa0JULElBQWxCLEVBQXdCO0FBQzlCekIsZ0NBQVEwQixnQkFBUixDQUF5QixFQUFDQyxNQUFNLGVBQVAsRUFBd0JPLFFBQVFBLE1BQWhDLEVBQXpCO0FBQ0gscUJBSDZCO0FBSTlCTiw4QkFBVTtBQUNOZCxzQ0FBY0E7QUFEUjtBQUpvQixpQkFBbEM7QUFRSCxhQVhEO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNILFNBMUJvQixFQUFyQjtBQTJCQTlCLGVBQU8rQixHQUFQLENBQVdxQixNQUFYLElBQXFCLFlBQVk7QUFDN0IsZ0JBQUlqQixjQUFjbkMsT0FBTytCLEdBQVAsQ0FBV3FCLE1BQVgsQ0FBa0JoQixPQUFwQzs7QUFFQXBDLG1CQUFPK0IsR0FBUCxDQUFXcUIsTUFBWCxDQUFrQmhCLE9BQWxCLEdBQTRCLFVBQVVDLENBQVYsRUFBYTtBQUNyQ0YsK0JBQWVBLFlBQVlFLENBQVosQ0FBZjtBQUNBdkIsbUJBQUdKLFdBQUgsSUFBa0JJLEdBQUdKLFdBQUgsRUFBbEI7QUFDQUksbUJBQUdQLFdBQUgsQ0FBZThDLGtCQUFmLENBQWtDO0FBQzlCZCw4QkFBVSxrQkFBVWUsTUFBVixFQUFrQkMsTUFBbEIsRUFBMEJkLElBQTFCLEVBQWdDO0FBQ3RDekIsZ0NBQVEwQixnQkFBUixDQUF5QixFQUFDQyxNQUFNLGVBQVAsRUFBd0JXLFFBQVFBLE1BQWhDLEVBQXdDQyxRQUFRQSxNQUFoRCxFQUF6QjtBQUNILHFCQUg2QjtBQUk5QlgsOEJBQVU7QUFDTmQsc0NBQWNBO0FBRFI7QUFKb0IsaUJBQWxDO0FBUUgsYUFYRDtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSCxTQTFCb0IsRUFBckI7QUEyQkE5QixlQUFPK0IsR0FBUCxDQUFXeUIsS0FBWCxJQUFvQixZQUFZO0FBQzVCLGdCQUFJckIsY0FBY25DLE9BQU8rQixHQUFQLENBQVd5QixLQUFYLENBQWlCcEIsT0FBbkM7O0FBRUFwQyxtQkFBTytCLEdBQVAsQ0FBV3lCLEtBQVgsQ0FBaUJwQixPQUFqQixHQUEyQixVQUFVQyxDQUFWLEVBQWE7QUFDcENGLCtCQUFlQSxZQUFZRSxDQUFaLENBQWY7QUFDQXZCLG1CQUFHSixXQUFILElBQWtCSSxHQUFHSixXQUFILEVBQWxCO0FBQ0gsYUFIRDtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0gsU0FYbUIsRUFBcEI7QUFZQVYsZUFBTytCLEdBQVAsQ0FBVzBCLE1BQVgsSUFBcUIsWUFBWTtBQUM3QixnQkFBSXRCLGNBQWNuQyxPQUFPK0IsR0FBUCxDQUFXMEIsTUFBWCxDQUFrQnJCLE9BQXBDOztBQUVBcEMsbUJBQU8rQixHQUFQLENBQVcwQixNQUFYLENBQWtCckIsT0FBbEIsR0FBNEIsVUFBVUMsQ0FBVixFQUFhO0FBQ3JDRiwrQkFBZUEsWUFBWUUsQ0FBWixDQUFmO0FBQ0F2QixtQkFBR0osV0FBSCxJQUFrQkksR0FBR0osV0FBSCxFQUFsQjtBQUNBSSxtQkFBR1AsV0FBSCxDQUFlbUQsV0FBZjtBQUNILGFBSkQ7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNILFNBWm9CLEVBQXJCO0FBYUgsS0FqS00sTUFpS0E7QUFDSEMsZ0JBQVFDLEtBQVIsQ0FBYyxTQUFkO0FBQ0E7QUFDSDtBQUNELFNBQUtDLFVBQUw7QUFDSDs7QUFFRCxJQUFJL0IsZUFBZSxTQUFmQSxZQUFlLENBQVVtQixRQUFWLEVBQW9CL0MsTUFBcEIsRUFBNEI7QUFDM0MsUUFBSUgsT0FBT2dCLE9BQVAsQ0FBZWIsT0FBT0ksS0FBUCxDQUFhd0QsSUFBYixDQUFrQmIsUUFBbEIsQ0FBZixLQUErQy9DLE9BQU9JLEtBQVAsQ0FBYXlELHFCQUFoRSxFQUF1RjtBQUNuRixlQUFPN0QsT0FBT0ksS0FBUCxDQUFhMEQsWUFBYixDQUEwQmYsUUFBMUIsQ0FBUDtBQUNBO0FBQ0E7QUFDSCxLQUpELE1BSU87QUFDSCxZQUFJZ0IsZ0JBQWdCbEUsT0FBT21FLFlBQVAsQ0FBb0JELGFBQXBCLENBQWtDL0QsT0FBT0ksS0FBUCxDQUFhNkQsTUFBYixDQUFvQkMsYUFBcEIsQ0FBa0NuQixRQUFsQyxDQUFsQyxDQUFwQjtBQUNBLGVBQU9sRCxPQUFPc0UsVUFBUCxDQUFrQkMsV0FBbEIsQ0FBOEJMLGNBQWNNLFNBQTVDLEVBQXVETixjQUFjTyxRQUFyRSxFQUErRSxDQUEvRSxDQUFQO0FBQ0g7QUFDSixDQVREOztBQVdBMUUsYUFBYTJFLFNBQWIsQ0FBdUJDLGFBQXZCLEdBQXVDLFlBQVksQ0FFbEQsQ0FGRDs7QUFJQTVFLGFBQWEyRSxTQUFiLENBQXVCWixVQUF2QixHQUFvQyxZQUFZO0FBQzVDLFFBQUkvQyxLQUFLLElBQVQ7QUFDQUEsT0FBR0ssUUFBSCxDQUFZd0QsV0FBWixDQUF3QixnQkFBeEIsRUFBMEMsVUFBVXBELEtBQVYsRUFBaUI7QUFDdkQsWUFBSVcsVUFBVSxJQUFJMUIsa0JBQVdvRSxnQkFBZixDQUFnQztBQUMxQ3BDLHVCQUFXakIsTUFBTWlCLFNBRHlCO0FBRTFDcUMsc0JBQVU5RSxPQUFPK0UsUUFBUCxDQUFnQkMsUUFBaEIsQ0FBeUIsY0FBekI7QUFGZ0MsU0FBaEMsQ0FBZDs7QUFLQXBCLGdCQUFRcUIsR0FBUixDQUFZekQsS0FBWjtBQUNBLFlBQUkwRCxjQUFjLEVBQWxCOztBQUVBbkUsV0FBR1gsSUFBSCxDQUFRcUIsY0FBUixDQUF1QkQsTUFBTWlCLFNBQTdCLEVBQXdDLEVBQXhDLEVBQTRDZixPQUE1QyxDQUFvRCxVQUFVd0IsUUFBVixFQUFvQnRCLEtBQXBCLEVBQTJCO0FBQzNFc0Qsd0JBQVlDLElBQVosQ0FBaUJwRSxHQUFHWCxJQUFILENBQVFnRixrQkFBUixDQUEyQmxDLFFBQTNCLENBQWpCO0FBQ0gsU0FGRDs7QUFLQW5DLFdBQUdzRSxlQUFILENBQW1CLFVBQVVDLFFBQVYsRUFBb0I7QUFDbkMsZ0JBQUlDLGdCQUFnQixFQUFwQjtBQUNBeEUsZUFBR1gsSUFBSCxDQUFRcUIsY0FBUixDQUF1QjZELFFBQXZCLEVBQWlDLEVBQWpDLEVBQXFDNUQsT0FBckMsQ0FBNkMsVUFBVThELE1BQVYsRUFBa0I1RCxLQUFsQixFQUF5QjtBQUNsRSxvQkFBSTZELFNBQVN6RixPQUFPbUUsWUFBUCxDQUFvQkQsYUFBcEIsQ0FBa0NzQixPQUFPdEMsUUFBUCxDQUFnQndDLFFBQWhCLENBQXlCLENBQXpCLENBQWxDLENBQWI7QUFDQSxvQkFBSTNFLEdBQUdYLElBQUgsQ0FBUXVGLFlBQVIsQ0FBcUJGLE1BQXJCLEVBQTZCUCxXQUE3QixDQUFKLEVBQStDO0FBQzNDSyxrQ0FBY0osSUFBZCxDQUFtQkssTUFBbkI7QUFDSDtBQUNKLGFBTEQ7QUFNQSxtQkFBT0QsYUFBUDtBQUNILFNBVEQ7QUFZSCxLQTFCRDtBQTJCQTtBQUNBO0FBQ0E7QUFDQXhFLE9BQUdLLFFBQUgsQ0FBWXdELFdBQVosQ0FBd0IsZUFBeEIsRUFBeUMsVUFBVXBELEtBQVYsRUFBaUI7O0FBRXREO0FBQ0FULFdBQUdzRSxlQUFILENBQW1CLFVBQVVDLFFBQVYsRUFBb0I7QUFDbkMsZ0JBQUlDLGdCQUFnQixFQUFwQjs7QUFFQXhFLGVBQUdYLElBQUgsQ0FBUXFCLGNBQVIsQ0FBdUI2RCxRQUF2QixFQUFpQyxFQUFqQyxFQUFxQzVELE9BQXJDLENBQTZDLFVBQVU4RCxNQUFWLEVBQWtCNUQsS0FBbEIsRUFBeUI7QUFDbEUsb0JBQUk2RCxTQUFTekYsT0FBT21FLFlBQVAsQ0FBb0JELGFBQXBCLENBQWtDc0IsT0FBT3RDLFFBQVAsQ0FBZ0J3QyxRQUFoQixDQUF5QixDQUF6QixDQUFsQyxDQUFiO0FBQ0Esb0JBQUlFLGlCQUFpQjVGLE9BQU9zRSxVQUFQLENBQWtCQyxXQUFsQixDQUE4QmtCLE9BQU9qQixTQUFyQyxFQUFnRGlCLE9BQU9oQixRQUF2RCxFQUFpRSxHQUFqRSxDQUFyQjtBQUNBLG9CQUFJekUsT0FBT3NFLFVBQVAsQ0FBa0J1QixRQUFsQixDQUEyQjlFLEdBQUdYLElBQUgsQ0FBUTBGLGtCQUFSLENBQTJCdEUsTUFBTStCLE1BQWpDLENBQTNCLEVBQXFFcUMsY0FBckUsS0FBd0ZwRSxNQUFNZ0MsTUFBbEcsRUFBMEc7QUFDdEcrQixrQ0FBY0osSUFBZCxDQUFtQkssTUFBbkI7QUFDSDtBQUNKLGFBTkQ7O0FBUUEsbUJBQU9ELGFBQVA7QUFDSCxTQVpEO0FBYUgsS0FoQkQ7O0FBa0JBO0FBQ0F4RSxPQUFHSyxRQUFILENBQVl3RCxXQUFaLENBQXdCLGVBQXhCLEVBQXlDLFVBQVV0QyxDQUFWLEVBQWE7QUFDbEQsWUFBSWEsU0FBU2IsRUFBRWEsTUFBZjs7QUFFQXBDLFdBQUdzRSxlQUFILENBQW1CLFVBQVVDLFFBQVYsRUFBb0I7QUFDbkMsZ0JBQUlDLGdCQUFnQixFQUFwQjs7QUFFQXhFLGVBQUdYLElBQUgsQ0FBUXFCLGNBQVIsQ0FBdUI2RCxRQUF2QixFQUFpQyxFQUFqQyxFQUFxQzVELE9BQXJDLENBQTZDLFVBQVU4RCxNQUFWLEVBQWtCNUQsS0FBbEIsRUFBeUI7QUFDbEUsb0JBQUltRSxxQkFBcUJoRixHQUFHWCxJQUFILENBQVFnRixrQkFBUixDQUEyQkksT0FBT3RDLFFBQVAsQ0FBZ0J3QyxRQUFoQixDQUF5QixDQUF6QixDQUEzQixDQUF6QjtBQUNBLG9CQUFJdkMsT0FBTzZDLElBQVAsSUFBZUQsbUJBQW1CdkIsU0FBbEMsSUFBK0NyQixPQUFPOEMsSUFBUCxJQUFlRixtQkFBbUJ2QixTQUFqRixJQUNHckIsT0FBTytDLEtBQVAsSUFBZ0JILG1CQUFtQnRCLFFBRHRDLElBQ2tEdEIsT0FBT2dELEtBQVAsSUFBZ0JKLG1CQUFtQnRCLFFBRHpGLEVBQ21HO0FBQy9GYyxrQ0FBY0osSUFBZCxDQUFtQkssTUFBbkI7QUFDSDtBQUNKLGFBTkQ7O0FBUUEsbUJBQU9ELGFBQVA7QUFDSCxTQVpEO0FBYUgsS0FoQkQ7O0FBa0JBeEUsT0FBR0ssUUFBSCxDQUFZd0QsV0FBWixDQUF3QixlQUF4QixFQUF5QyxVQUFVcEQsS0FBVixFQUFpQjtBQUN0RFQsV0FBR0wsT0FBSCxDQUFXRSxTQUFYLENBQXFCb0MsTUFBckIsQ0FBNEJ4QixNQUFNMEIsUUFBbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNILEtBbEJEO0FBbUJILENBeEZEOztBQTJGQW5ELGFBQWEyRSxTQUFiLENBQXVCMEIsU0FBdkIsR0FBbUMsVUFBVUMsTUFBVixFQUFrQixDQUVwRCxDQUZEOztBQUlBdEcsYUFBYTJFLFNBQWIsQ0FBdUI0QixTQUF2QixHQUFtQyxZQUFZLENBRTlDLENBRkQ7O0FBSUF2RyxhQUFhMkUsU0FBYixDQUF1QlcsZUFBdkIsR0FBeUMsVUFBVWtCLGdCQUFWLEVBQTRCO0FBQ2pFLFFBQUl4RixLQUFLLElBQVQ7QUFDQTtBQUNBLFFBQUl5RixrQkFBa0JELGlCQUFpQnhGLEdBQUdiLGFBQUgsQ0FBaUJvRixRQUFqQixDQUEwQm1CLE1BQTNDLENBQXRCOztBQUVBMUYsT0FBR1gsSUFBSCxDQUFRcUIsY0FBUixDQUF1QlYsR0FBR0wsT0FBSCxDQUFXRSxTQUFYLENBQXFCOEYsTUFBNUMsRUFBb0QsRUFBcEQsRUFBd0RoRixPQUF4RCxDQUFnRSxVQUFVYyxRQUFWLEVBQW9CWixLQUFwQixFQUEyQjtBQUN2RixZQUFJMEQsV0FBVyxFQUFmO0FBQ0E7QUFDQXZFLFdBQUdYLElBQUgsQ0FBUXFCLGNBQVIsQ0FBdUIrRSxlQUF2QixFQUF3QyxFQUF4QyxFQUE0QzlFLE9BQTVDLENBQW9ELFVBQVU4RCxNQUFWLEVBQWtCbUIsTUFBbEIsRUFBMEI7QUFDMUUsZ0JBQUluRSxTQUFTb0UsTUFBVCxDQUFnQnBCLE1BQWhCLENBQUosRUFBNkJGLFNBQVNILElBQVQsQ0FBY0ssTUFBZDtBQUNoQyxTQUZEO0FBR0E7QUFDQWhELGlCQUFTcUUsUUFBVCxDQUFrQnZCLFFBQWxCO0FBQ0gsS0FSRDtBQVVILENBZkQ7O0FBa0JBLFNBQVNqRixJQUFULENBQWNGLE1BQWQsRUFBc0I7QUFDbEIsU0FBSzJHLE9BQUwsR0FBZTNHLE1BQWY7QUFDQSxTQUFLNEcsVUFBTCxHQUFrQixLQUFLRCxPQUFMLENBQWF2RyxLQUFiLENBQW1CeUcsS0FBbkIsQ0FBeUJELFVBQTNDO0FBQ0g7O0FBRUQ7Ozs7O0FBS0ExRyxLQUFLcUUsU0FBTCxDQUFlVSxrQkFBZixHQUFvQyxVQUFVNkIsVUFBVixFQUFzQjtBQUN0RDtBQUNBLFdBQU8sS0FBS0YsVUFBTCxDQUFnQkcsdUJBQWhCLENBQXdDRCxVQUF4QyxDQUFQO0FBQ0gsQ0FIRDtBQUlBOzs7Ozs7QUFNQTVHLEtBQUtxRSxTQUFMLENBQWV5QyxtQkFBZixHQUFxQyxVQUFVRixVQUFWLEVBQXNCO0FBQ3ZELFFBQUlHLGVBQWUsS0FBS0wsVUFBTCxDQUFnQkcsdUJBQWhCLENBQXdDRCxVQUF4QyxDQUFuQjtBQUNBLFFBQUlJLFNBQVM7QUFDVEMsZ0JBQVFGLGFBQWFFLE1BRFo7QUFFVDdDLGtCQUFVekUsT0FBT3VILElBQVAsQ0FBWUMsU0FBWixDQUFzQkosYUFBYTNDLFFBQW5DLENBRkQ7QUFHVEQsbUJBQVd4RSxPQUFPdUgsSUFBUCxDQUFZQyxTQUFaLENBQXNCSixhQUFhNUMsU0FBbkM7QUFIRixLQUFiO0FBS0EsV0FBTzZDLE1BQVA7QUFDSCxDQVJEOztBQVVBaEgsS0FBS3FFLFNBQUwsQ0FBZWpELGNBQWYsR0FBZ0MsVUFBVUUsT0FBVixFQUFtQjhGLGNBQW5CLEVBQW1DO0FBQy9ELFdBQU85RixVQUFVQSxPQUFWLEdBQW9COEYsY0FBM0I7QUFDSCxDQUZEOztBQUlBOzs7OztBQUtBcEgsS0FBS3FFLFNBQUwsQ0FBZW9CLGtCQUFmLEdBQW9DLFVBQVVtQixVQUFWLEVBQXNCO0FBQ3RELFFBQUkvQyxnQkFBZ0JsRSxPQUFPbUUsWUFBUCxDQUFvQkQsYUFBcEIsQ0FBa0MrQyxVQUFsQyxDQUFwQjtBQUNBLFdBQU9qSCxPQUFPc0UsVUFBUCxDQUFrQkMsV0FBbEIsQ0FBOEJMLGNBQWNNLFNBQTVDLEVBQXVETixjQUFjTyxRQUFyRSxFQUErRSxDQUEvRSxDQUFQO0FBQ0gsQ0FIRDs7QUFLQTs7Ozs7O0FBTUFwRSxLQUFLcUUsU0FBTCxDQUFlZ0QsdUJBQWYsR0FBeUMsVUFBVVQsVUFBVixFQUFzQlUsVUFBdEIsRUFBa0M7QUFDdkUsUUFBSXpELGdCQUFnQmxFLE9BQU9tRSxZQUFQLENBQW9CRCxhQUFwQixDQUFrQytDLFVBQWxDLENBQXBCO0FBQ0EsV0FBT2pILE9BQU9zRSxVQUFQLENBQWtCQyxXQUFsQixDQUE4QkwsY0FBY00sU0FBNUMsRUFBdUROLGNBQWNPLFFBQXJFLEVBQStFUCxjQUFjb0QsTUFBZCxHQUF1QkssVUFBdEcsQ0FBUDtBQUVILENBSkQ7O0FBTUE7Ozs7O0FBS0F0SCxLQUFLcUUsU0FBTCxDQUFlaUIsWUFBZixHQUE4QixVQUFVekMsUUFBVixFQUFvQjBFLEtBQXBCLEVBQTJCO0FBQ3JELFFBQUlDLElBQUkzRSxTQUFTc0IsU0FBakI7QUFDQSxRQUFJc0QsSUFBSTVFLFNBQVN1QixRQUFqQjs7QUFFQSxRQUFJc0QsSUFBSjtBQUFBLFFBQVVDLE1BQVY7QUFBQSxRQUFrQnBHLFFBQVEsQ0FBMUI7QUFDQSxRQUFJcUcsUUFBUSxDQUFaO0FBQUEsUUFBZUMsUUFBUSxDQUF2QjtBQUFBLFFBQTBCQyxRQUFRLENBQWxDO0FBQUEsUUFBcUNDLFFBQVEsQ0FBN0M7QUFBQSxRQUFnREMsSUFBaEQ7O0FBRUEsUUFBSVQsTUFBTVUsSUFBTixHQUFhLENBQWpCLEVBQW9CO0FBQ2hCLGVBQU8sS0FBUDtBQUNIOztBQUVEUCxXQUFPLENBQVA7QUFDQUMsYUFBU0osTUFBTVcsTUFBZjs7QUFFQSxTQUFLM0csUUFBUSxDQUFiLEVBQWdCQSxRQUFRb0csU0FBUyxDQUFqQyxFQUFvQ3BHLE9BQXBDLEVBQTZDO0FBQ3pDLFlBQUlBLFVBQVVvRyxTQUFTLENBQXZCLEVBQTBCO0FBQ3RCQyxvQkFBUUwsTUFBTWhHLEtBQU4sRUFBYTRDLFNBQXJCO0FBQ0EyRCxvQkFBUVAsTUFBTWhHLEtBQU4sRUFBYTZDLFFBQXJCO0FBQ0F5RCxvQkFBUU4sTUFBTSxDQUFOLEVBQVNwRCxTQUFqQjtBQUNBNEQsb0JBQVFSLE1BQU0sQ0FBTixFQUFTbkQsUUFBakI7QUFDSCxTQUxELE1BTUs7QUFDRHdELG9CQUFRTCxNQUFNaEcsS0FBTixFQUFhNEMsU0FBckI7QUFDQTJELG9CQUFRUCxNQUFNaEcsS0FBTixFQUFhNkMsUUFBckI7QUFDQXlELG9CQUFRTixNQUFNaEcsUUFBUSxDQUFkLEVBQWlCNEMsU0FBekI7QUFDQTRELG9CQUFRUixNQUFNaEcsUUFBUSxDQUFkLEVBQWlCNkMsUUFBekI7QUFDSDs7QUFFRCxZQUFNcUQsS0FBS0ssS0FBTixJQUFpQkwsSUFBSU0sS0FBdEIsSUFBbUNOLEtBQUtNLEtBQU4sSUFBaUJOLElBQUlLLEtBQTNELEVBQW9FO0FBQ2hFLGdCQUFJWixLQUFLaUIsR0FBTCxDQUFTTCxRQUFRQyxLQUFqQixJQUEwQixDQUE5QixFQUFpQztBQUM3QkMsdUJBQU9KLFFBQVMsQ0FBQ0EsUUFBUUMsS0FBVCxLQUFtQkMsUUFBUUwsQ0FBM0IsQ0FBRCxJQUFtQ0ssUUFBUUMsS0FBM0MsQ0FBZjtBQUNBLG9CQUFJQyxPQUFPUixDQUFYLEVBQ0lFO0FBQ1A7QUFDSjtBQUNKOztBQUVELFdBQVFBLE9BQU8sQ0FBUixLQUFlLENBQXRCO0FBQ0gsQ0F0Q0QiLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnQ2VzaXVtJyksIHJlcXVpcmUoJ0RyYXdIZWxwZXInKSk7XHJcbiAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcclxuICAgICAgIGRlZmluZSgnQ2hvaWNlSGVscGVyJywgWyAnQ2VzaXVtJywgJ0RyYXdIZWxwZXInXSwgZmFjdG9yeSk7XHJcbiAgIGVsc2Uge1xyXG4gICAgICAgcm9vdC5DaG9pY2VIZWxwZXIgPSBmYWN0b3J5KHJvb3QuQ2VzaXVtLCByb290LkRyYXdIZWxwZXIpO1xyXG4gICB9Ki9cclxuaW1wb3J0ICogYXMgQ2VzaXVtIGZyb20gXCJDZXNpdW1cIjtcclxuaW1wb3J0IHtEcmF3SGVscGVyfSBmcm9tIFwiLi4vaW5kZXhcIlxyXG5cclxuLy8gZXhwb3J0IGNvbnN0IENob2ljZUhlbHBlciA9ICBmYWN0b3J5KENlc2l1bSxEcmF3SGVscGVyKTtcclxuXHJcblxyXG4vKipcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xyXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnLnZpZXdlciAtIENlc2l1bS52aWV3ZXLlr7nosaFcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZy50b29sYmFyIC0gdG9vbGJhcizkuLrnqbrliJnkuI3liJvlu7pcclxuICogQHBhcmFtIHtFbGVtZW50fSBjb25maWcudG9vbGJhci5jb250YWluZXIgLSB0b29sYmFy5omA5Zyo5a655ZmoXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGNvbmZpZy50b29sYmFyLmJ1dHRvbnMgLSDljIXmi6wgJ3BvbHlnb24nLCAnY2lyY2xlJywgJ2V4dGVudCcg5Luj6KGo5aSa6L655b2i44CB5ZyG5b2i44CB55+p5b2iXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcuZG9tIC0gZG9t5LqL5Lu257uR5a6a5qih5byPXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29uZmlnLnBvbHlnb24gLSDnu5HlrprlvIDlp4vnlLtwb2x5Z29u55qE5LqL5Lu2XHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29uZmlnLm1hcmtlciAtIOe7keWumuW8gOWni+eUu21hcmtlcueahOS6i+S7tlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbmZpZy5leHRlbnQgLSDnu5HlrprlvIDlp4vnlLtleHRlbnTnmoTkuovku7ZcclxuICogQHBhcmFtIHtFbGVtZW50fSBjb25maWcuY2lyY2xlIC0g57uR5a6a5byA5aeL55S7Y2lyY2xl55qE5LqL5Lu2XHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29uZmlnLmNsZWFyIC0g5riF56m657uY5Yi25LqL5Lu2XHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29uZmlnLmNhbmNlbCAtIOe7k+adn+e7mOWItuS6i+S7tlxyXG4gKiBAcGFyYW0ge0FycmF5fSBjb25maWcuY2FsbGJhY2tzIC0g6YCJ5oup5Zue6LCD77yM5Y+v6YWN572u5aSa56eN6YCJ5oup5Zue6LCDXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oQ2VzaXVtLkVudGl0eSk6Ym9vbGVhbn0gY29uZmlnLmNhbGxiYWNrcy5jaG9pY2VbXS5maWx0ZXIgLSDov4fmu6TlmajvvIzljbPpgInmi6nlmags56Gu6K6k5Li66ZyA6KaB6YCJ5oup55qE5a+56LGh77yM6L+U5ZuedHVyZVxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKENlc2l1bS5FbnRpdHlbXSl9IGNvbmZpZy5jYWxsYmFja3MuY2hvaWNlW10ub25DaG9pY2UgLSDpgInmi6nlm57osINcclxuICogQHBhcmFtIHtmdW5jdGlvbihDZXNpdW0uQ2FydGVzaWFuMyl9IGNvbmZpZy5jYWxsYmFja3MubWFya2VyIC0gbWFya2Vy5Yib5bu65Zue6LCDXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNvbmZpZy5jYWxsYmFja3MuYWZ0ZXJDbGljayAtIOW3peWFt+agj+eCueWHu+Wbnuiwg1xyXG4gKiB7XHJcbiAqICAgICB2aWV3ZXI6IHZpZXdlcuWvueixoSxcclxuICogICAgIHRvb2xiYXI6e1xyXG4gKiAgICAgICAgIGNvbnRhaW5lcjogdG9vbGJhcuaJgOWcqOWuueWZqCxcclxuICogICAgICAgICBidXR0b25zOiBbXSwvL1xyXG4gKiAgICAgfSxcclxuICogICAgIGRvbTp7Ly9cclxuICogICAgICAgICAgICAgcG9seWdvbjogZnVuY3Rpb24gfCBkb20gLFxyXG4gKiAgICAgICAgICAgICBtYXJrZXI6IGZ1bmN0aW9uIHwgZG9tICxcclxuICogICAgICAgICAgICAgZXh0ZW50OiBmdW5jdGlvbiB8IGRvbSAsXHJcbiAqICAgICAgICAgICAgIGNpcmNsZTogZnVuY3Rpb24gfCBkb20gLFxyXG4gKiAgICAgICAgICAgICBjbGVhciA6IGRvbSxcclxuICogICAgICAgICAgICAgY2FuY2VsIDogZG9tXHJcbiAqICAgICB9LFxyXG4gKiAgICAgY2FsbGJhY2tzOntcclxuICogICAgICAgICAgY2hvaWNlOlt7XHJcbiAqICAgICAgICAgICAgIGZpbHRlcjogZnVuY3Rpb25cclxuICogICAgICAgICAgICAgb25DaG9pY2U6IGZ1bmN0aW9uXHJcbiAqICAgICAgICAgfV0sXHJcbiAqICAgICAgICAgbWFya2VyOiBmdW5jdGlvbixcclxuICogICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbixcclxuICogICAgIH1cclxuICogfVxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBDaG9pY2VIZWxwZXIoY29uZmlnKSB7XHJcbiAgICB0aGlzLl9jZXNpdW1WaWV3ZXIgPSBjb25maWcudmlld2VyO1xyXG4gICAgdGhpcy51dGlsID0gbmV3IFV0aWwodGhpcy5fY2VzaXVtVmlld2VyKTtcclxuXHJcbiAgICB0aGlzLl9zY2VuZSA9IHRoaXMuX2Nlc2l1bVZpZXdlci5zY2VuZTtcclxuICAgIHRoaXMuX2RyYXdIZWxwZXIgPSBuZXcgRHJhd0hlbHBlcih0aGlzLl9jZXNpdW1WaWV3ZXIpO1xyXG4gICAgdGhpcy5fb3B0aW9uID0gY29uZmlnO1xyXG4gICAgdGhpcy5fYWZ0ZXJDbGljayA9IGNvbmZpZy5jYWxsYmFja3MuYWZ0ZXJDbGljaztcclxuXHJcbiAgICB0aGlzLl9wcmltaXRpdmVzID0gW107XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG5cclxuICAgIGlmIChDZXNpdW0uZGVmaW5lZChjb25maWcudG9vbGJhcikgJiYgQ2VzaXVtLmRlZmluZWQoY29uZmlnLnRvb2xiYXIuY29udGFpbmVyKSkge1xyXG4gICAgICAgIHRoaXMuX3Rvb2xiYXJDb250YWluZXIgPSBjb25maWcudG9vbGJhci5jb250YWluZXI7XHJcblxyXG4gICAgICAgIHRoaXMuX3Rvb2xiYXIgPSB0aGlzLl9kcmF3SGVscGVyLmFkZFRvb2xiYXIodGhpcy5fdG9vbGJhckNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICBidXR0b25zOiBjb25maWcudG9vbGJhci5idXR0b25zLFxyXG4gICAgICAgICAgICBjbGlja0NhbGxiYWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8v56e76Zmk5LmL5YmN57uY5Yi255qEXHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUudXRpbC5nZXRXaXRoRGVmYXVsdChtZS5fcHJpbWl0aXZlcywgW10pLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3NjZW5lLnByaW1pdGl2ZXMucmVtb3ZlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy/ngrnkvY3pgInlj5bnrZbnlaXphY3nva5cclxuICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBwaWNrU3RyYXRlZ3lcclxuICAgICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChDZXNpdW0uZGVmaW5lZChjb25maWcuZG9tKSkge1xyXG4gICAgICAgIHRoaXMuX3Rvb2xiYXIgPSB0aGlzLl9kcmF3SGVscGVyLmFkZFRvb2xiYXIoZG9jdW1lbnQuYm9keSwge2J1dHRvbnM6IFtdfSk7XHJcbiAgICAgICAgdmFyIHRvb2xiYXIgPSB0aGlzLl90b29sYmFyO1xyXG4gICAgICAgIGNvbmZpZy5kb20ucG9seWdvbiAmJiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0T25jbGljayA9IGNvbmZpZy5kb20ucG9seWdvbi5vbmNsaWNrO1xyXG4gICAgICAgICAgICBjb25maWcuZG9tLnBvbHlnb24ub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0T25jbGljayAmJiBsYXN0T25jbGljayhlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2RyYXdIZWxwZXIuc3RhcnREcmF3aW5nUG9seWdvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChwb3NpdGlvbnMsIHNlbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhci5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAncG9seWdvbkNyZWF0ZWQnLCBwb3NpdGlvbnM6IHBvc2l0aW9uc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBwaWNrU3RyYXRlZ3lcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAkKGNvbmZpZy5kb20ucG9seWdvbikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtZS5fZHJhd0hlbHBlci5zdGFydERyYXdpbmdQb2x5Z29uKHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHBvc2l0aW9ucywgc2VsZikge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0b29sYmFyLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdwb2x5Z29uQ3JlYXRlZCcsIHBvc2l0aW9uczogcG9zaXRpb25zfSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gICAgICAgICBzdHJhdGVneToge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBwaWNrU3RyYXRlZ3k6IHBpY2tTdHJhdGVneVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9KCk7XHJcbiAgICAgICAgY29uZmlnLmRvbS5wb2x5Z29uICYmIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmNsaWNrID0gY29uZmlnLmRvbS5wb2x5bGluZS5vbmNsaWNrO1xyXG4gICAgICAgICAgICBjb25maWcuZG9tLnBvbHlsaW5lLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdE9uY2xpY2sgJiYgbGFzdE9uY2xpY2soZSk7XHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2RyYXdIZWxwZXIuc3RhcnREcmF3aW5nUG9seWxpbmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocG9zaXRpb25zLCBzZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXIuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ3BvbHlsaW5lQ3JlYXRlZCcsIHBvc2l0aW9uczogcG9zaXRpb25zfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJhdGVneToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaWNrU3RyYXRlZ3k6IHBpY2tTdHJhdGVneVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICQoY29uZmlnLmRvbS5wb2x5bGluZSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtZS5fZHJhd0hlbHBlci5zdGFydERyYXdpbmdQb2x5bGluZSh7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChwb3NpdGlvbnMsIHNlbGYpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdG9vbGJhci5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAncG9seWxpbmVDcmVhdGVkJywgcG9zaXRpb25zOiBwb3NpdGlvbnN9KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHBpY2tTdHJhdGVneTogcGlja1N0cmF0ZWd5XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH0oKTtcclxuICAgICAgICBjb25maWcuZG9tLm1hcmtlciAmJiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0T25jbGljayA9IGNvbmZpZy5kb20ubWFya2VyLm9uY2xpY2s7XHJcbiAgICAgICAgICAgIGNvbmZpZy5kb20ubWFya2VyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdE9uY2xpY2sgJiYgbGFzdE9uY2xpY2soZSk7XHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2RyYXdIZWxwZXIuc3RhcnREcmF3aW5nTWFya2VyKHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHBvc2l0aW9uLCBzZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXIuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ21hcmtlckNyZWF0ZWQnLCBwb3NpdGlvbjogcG9zaXRpb259KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tTdHJhdGVneTogcGlja1N0cmF0ZWd5XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gJChjb25maWcuZG9tLm1hcmtlcikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtZS5fZHJhd0hlbHBlci5zdGFydERyYXdpbmdNYXJrZXIoe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocG9zaXRpb24sIHNlbGYpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdG9vbGJhci5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnbWFya2VyQ3JlYXRlZCcsIHBvc2l0aW9uOiBwb3NpdGlvbn0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBwaWNrU3RyYXRlZ3lcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSgpO1xyXG4gICAgICAgIGNvbmZpZy5kb20uZXh0ZW50ICYmIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmNsaWNrID0gY29uZmlnLmRvbS5leHRlbnQub25jbGljaztcclxuXHJcbiAgICAgICAgICAgIGNvbmZpZy5kb20uZXh0ZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdE9uY2xpY2sgJiYgbGFzdE9uY2xpY2soZSk7XHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2RyYXdIZWxwZXIuc3RhcnREcmF3aW5nRXh0ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGV4dGVudCwgc2VsZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdleHRlbnRDcmVhdGVkJywgZXh0ZW50OiBleHRlbnR9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tTdHJhdGVneTogcGlja1N0cmF0ZWd5XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gJChjb25maWcuZG9tLmV4dGVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtZS5fZHJhd0hlbHBlci5zdGFydERyYXdpbmdFeHRlbnQoe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZXh0ZW50LCBzZWxmKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRvb2xiYXIuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ2V4dGVudENyZWF0ZWQnLCBleHRlbnQ6IGV4dGVudH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBwaWNrU3RyYXRlZ3lcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSgpO1xyXG4gICAgICAgIGNvbmZpZy5kb20uY2lyY2xlICYmIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmNsaWNrID0gY29uZmlnLmRvbS5jaXJjbGUub25jbGljaztcclxuXHJcbiAgICAgICAgICAgIGNvbmZpZy5kb20uY2lyY2xlLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdE9uY2xpY2sgJiYgbGFzdE9uY2xpY2soZSk7XHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2RyYXdIZWxwZXIuc3RhcnREcmF3aW5nQ2lyY2xlKHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNlbnRlciwgcmFkaXVzLCBzZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXIuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ2NpcmNsZUNyZWF0ZWQnLCBjZW50ZXI6IGNlbnRlciwgcmFkaXVzOiByYWRpdXN9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tTdHJhdGVneTogcGlja1N0cmF0ZWd5XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gJChjb25maWcuZG9tLmNpcmNsZSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBtZS5fZHJhd0hlbHBlci5zdGFydERyYXdpbmdDaXJjbGUoe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoY2VudGVyLCByYWRpdXMsIHNlbGYpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdG9vbGJhci5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnY2lyY2xlQ3JlYXRlZCcsIGNlbnRlcjogY2VudGVyLCByYWRpdXM6IHJhZGl1c30pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3RyYXRlZ3k6IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBwaWNrU3RyYXRlZ3lcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSgpO1xyXG4gICAgICAgIGNvbmZpZy5kb20uY2xlYXIgJiYgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdE9uY2xpY2sgPSBjb25maWcuZG9tLmNsZWFyLm9uY2xpY2s7XHJcblxyXG4gICAgICAgICAgICBjb25maWcuZG9tLmNsZWFyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdE9uY2xpY2sgJiYgbGFzdE9uY2xpY2soZSk7XHJcbiAgICAgICAgICAgICAgICBtZS5fYWZ0ZXJDbGljayAmJiBtZS5fYWZ0ZXJDbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICQoY29uZmlnLmRvbS5jbGVhcikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9hZnRlckNsaWNrICYmIG1lLl9hZnRlckNsaWNrKCk7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH0oKTtcclxuICAgICAgICBjb25maWcuZG9tLmNhbmNlbCAmJiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0T25jbGljayA9IGNvbmZpZy5kb20uY2FuY2VsLm9uY2xpY2s7XHJcblxyXG4gICAgICAgICAgICBjb25maWcuZG9tLmNhbmNlbC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGxhc3RPbmNsaWNrICYmIGxhc3RPbmNsaWNrKGUpO1xyXG4gICAgICAgICAgICAgICAgbWUuX2FmdGVyQ2xpY2sgJiYgbWUuX2FmdGVyQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgIG1lLl9kcmF3SGVscGVyLnN0b3BEcmF3aW5nKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAkKGNvbmZpZy5kb20uY2FuY2VsKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgbWUuX2FmdGVyQ2xpY2sgJiYgbWUuX2FmdGVyQ2xpY2soKTtcclxuICAgICAgICAgICAgLy8gICAgIG1lLl9kcmF3SGVscGVyLnN0b3BEcmF3aW5nKClcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi5Lyg5YWl5Y+C5pWw5pyJ6K+v77yBXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2V2ZW50SW5pdCgpO1xyXG59XHJcblxyXG52YXIgcGlja1N0cmF0ZWd5ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCB2aWV3ZXIpIHtcclxuICAgIGlmIChDZXNpdW0uZGVmaW5lZCh2aWV3ZXIuc2NlbmUucGljayhwb3NpdGlvbikpICYmIHZpZXdlci5zY2VuZS5waWNrUG9zaXRpb25TdXBwb3J0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdmlld2VyLnNjZW5lLnBpY2tQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgLy8gdmFyIGZyb21DYXJ0ZXNpYW4gPSBDZXNpdW0uQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4odmlld2VyLnNjZW5lLnBpY2tQb3NpdGlvbihwb3NpdGlvbikpO1xyXG4gICAgICAgIC8vIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhmcm9tQ2FydGVzaWFuLmxvbmdpdHVkZSwgZnJvbUNhcnRlc2lhbi5sYXRpdHVkZSwgMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBmcm9tQ2FydGVzaWFuID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKHZpZXdlci5zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbikpO1xyXG4gICAgICAgIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhmcm9tQ2FydGVzaWFuLmxvbmdpdHVkZSwgZnJvbUNhcnRlc2lhbi5sYXRpdHVkZSwgMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5DaG9pY2VIZWxwZXIucHJvdG90eXBlLl9vcHRpb25SZWxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG59XHJcblxyXG5DaG9pY2VIZWxwZXIucHJvdG90eXBlLl9ldmVudEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuX3Rvb2xiYXIuYWRkTGlzdGVuZXIoJ3BvbHlnb25DcmVhdGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHBvbHlnb24gPSBuZXcgRHJhd0hlbHBlci5Qb2x5Z29uUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgcG9zaXRpb25zOiBldmVudC5wb3NpdGlvbnMsXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uTWF0ZXJpYWwuZnJvbVR5cGUoJ0NoZWNrZXJib2FyZCcpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KVxyXG4gICAgICAgIHZhciBMYXRMbmdQYXRocyA9IFtdO1xyXG5cclxuICAgICAgICBtZS51dGlsLmdldFdpdGhEZWZhdWx0KGV2ZW50LnBvc2l0aW9ucywgW10pLmZvckVhY2goZnVuY3Rpb24gKHBvc2l0aW9uLCBpbmRleCkge1xyXG4gICAgICAgICAgICBMYXRMbmdQYXRocy5wdXNoKG1lLnV0aWwuQ2FydGVzaWFuM1RvTGF0TG5nKHBvc2l0aW9uKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBtZS5fZmlsdGVyRXhlY3V0ZXIoZnVuY3Rpb24gKGVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZUVudGl0aWVzID0gW107XHJcbiAgICAgICAgICAgIG1lLnV0aWwuZ2V0V2l0aERlZmF1bHQoZW50aXRpZXMsIFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRpdHksIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF0bG5nID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKGVudGl0eS5wb3NpdGlvbi5nZXRWYWx1ZSgwKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWUudXRpbC5faXNJblBvbHlnb24obGF0bG5nLCBMYXRMbmdQYXRocykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUVudGl0aWVzLnB1c2goZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudGl0aWVzO1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgIH0pO1xyXG4gICAgLy8gY2lyY2xlLmNlbnRlciA6ICBDYXJ0ZXNpYW4zXHJcbiAgICAvLyBjaXJjbGUuZWxsaXBzb2lkLl9tYXhpbXVtUmFkaXVzIDogbnVtYmVyXHJcbiAgICAvLyBjaXJjbGUuZWxsaXBzb2lkLl9taW5pbXVtUmFkaXVzIDogbnVtYmVyXHJcbiAgICBtZS5fdG9vbGJhci5hZGRMaXN0ZW5lcignY2lyY2xlQ3JlYXRlZCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cclxuICAgICAgICAvLyB2YXIgciA9IGV2ZW50LnJhZGl1c1xyXG4gICAgICAgIG1lLl9maWx0ZXJFeGVjdXRlcihmdW5jdGlvbiAoZW50aXRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlRW50aXRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIG1lLnV0aWwuZ2V0V2l0aERlZmF1bHQoZW50aXRpZXMsIFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRpdHksIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF0bG5nID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKGVudGl0eS5wb3NpdGlvbi5nZXRWYWx1ZSgwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdW5kUG9zaXRpb24gPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhsYXRsbmcubG9uZ2l0dWRlLCBsYXRsbmcubGF0aXR1ZGUsIDAuMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ2VzaXVtLkNhcnRlc2lhbjMuZGlzdGFuY2UobWUudXRpbC5nZXRDZXNpdW1IaWdodFplcm8oZXZlbnQuY2VudGVyKSwgZ3JvdW5kUG9zaXRpb24pIDw9IGV2ZW50LnJhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRW50aXRpZXMucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRW50aXRpZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL0Nlc2l1bS5SZWN0YW5nbGUuc3Vic2FtcGxlKGUuZXh0ZW50KVxyXG4gICAgbWUuX3Rvb2xiYXIuYWRkTGlzdGVuZXIoJ2V4dGVudENyZWF0ZWQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBleHRlbnQgPSBlLmV4dGVudDtcclxuXHJcbiAgICAgICAgbWUuX2ZpbHRlckV4ZWN1dGVyKGZ1bmN0aW9uIChlbnRpdGllcykge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VFbnRpdGllcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbWUudXRpbC5nZXRXaXRoRGVmYXVsdChlbnRpdGllcywgW10pLmZvckVhY2goZnVuY3Rpb24gKGVudGl0eSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4zVG9MYXRMbmcgPSBtZS51dGlsLkNhcnRlc2lhbjNUb0xhdExuZyhlbnRpdHkucG9zaXRpb24uZ2V0VmFsdWUoMCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVudC53ZXN0IDw9IGNhcnRlc2lhbjNUb0xhdExuZy5sb25naXR1ZGUgJiYgZXh0ZW50LmVhc3QgPj0gY2FydGVzaWFuM1RvTGF0TG5nLmxvbmdpdHVkZVxyXG4gICAgICAgICAgICAgICAgICAgICYmIGV4dGVudC5zb3V0aCA8PSBjYXJ0ZXNpYW4zVG9MYXRMbmcubGF0aXR1ZGUgJiYgZXh0ZW50Lm5vcnRoID49IGNhcnRlc2lhbjNUb0xhdExuZy5sYXRpdHVkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRW50aXRpZXMucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRW50aXRpZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtZS5fdG9vbGJhci5hZGRMaXN0ZW5lcignbWFya2VyQ3JlYXRlZCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIG1lLl9vcHRpb24uY2FsbGJhY2tzLm1hcmtlcihldmVudC5wb3NpdGlvbik7XHJcbiAgICAgICAgLy8gbG9nZ2luZ01lc3NhZ2UoJ01hcmtlciBjcmVhdGVkIGF0ICcgKyBldmVudC5wb3NpdGlvbi50b1N0cmluZygpKTtcclxuICAgICAgICAvLyBjcmVhdGUgb25lIGNvbW1vbiBiaWxsYm9hcmQgY29sbGVjdGlvbiBmb3IgYWxsIGJpbGxib2FyZHNcclxuICAgICAgICAvLyB2YXIgYiA9IG5ldyBDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbigpO1xyXG4gICAgICAgIC8vIHZpZXdlci5zY2VuZS5wcmltaXRpdmVzLmFkZChiKTtcclxuICAgICAgICAvLyB2YXIgYmlsbGJvYXJkID0gYi5hZGQoe1xyXG4gICAgICAgIC8vICAgICBzaG93IDogdHJ1ZSxcclxuICAgICAgICAvLyAgICAgcG9zaXRpb24gOiBldmVudC5wb3NpdGlvbixcclxuICAgICAgICAvLyAgICAgcGl4ZWxPZmZzZXQgOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoMCwgMCksXHJcbiAgICAgICAgLy8gICAgIGV5ZU9mZnNldCA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMC4wKSxcclxuICAgICAgICAvLyAgICAgaG9yaXpvbnRhbE9yaWdpbiA6IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLkNFTlRFUixcclxuICAgICAgICAvLyAgICAgdmVydGljYWxPcmlnaW4gOiBDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSLFxyXG4gICAgICAgIC8vICAgICBzY2FsZSA6IDEuMCxcclxuICAgICAgICAvLyAgICAgaW1hZ2U6ICcuL2ltZy9nbHlwaGljb25zXzI0Ml9nb29nbGVfbWFwcy5wbmcnLFxyXG4gICAgICAgIC8vICAgICBjb2xvciA6IG5ldyBDZXNpdW0uQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIC8vIGJpbGxib2FyZC5zZXRFZGl0YWJsZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5DaG9pY2VIZWxwZXIucHJvdG90eXBlLnNldE9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb24pIHtcclxuXHJcbn1cclxuXHJcbkNob2ljZUhlbHBlci5wcm90b3R5cGUuX2NhbGxCYWNrID0gZnVuY3Rpb24gKCkge1xyXG5cclxufVxyXG5cclxuQ2hvaWNlSGVscGVyLnByb3RvdHlwZS5fZmlsdGVyRXhlY3V0ZXIgPSBmdW5jdGlvbiAoY29udGFpbnNDYWxsYmFjaykge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIC8v6YCJ5Ye65Zyo5ZyI5YaF55qEZW50aXRpZXNcclxuICAgIHZhciBjb250YWluRW50aXRpZXMgPSBjb250YWluc0NhbGxiYWNrKG1lLl9jZXNpdW1WaWV3ZXIuZW50aXRpZXMudmFsdWVzKTtcclxuXHJcbiAgICBtZS51dGlsLmdldFdpdGhEZWZhdWx0KG1lLl9vcHRpb24uY2FsbGJhY2tzLmNob2ljZSwgW10pLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrLCBpbmRleCkge1xyXG4gICAgICAgIHZhciBlbnRpdGllcyA9IFtdO1xyXG4gICAgICAgIC8v6L+H5ruk5Ye66ZyA6KaB55qEZW50aXR5XHJcbiAgICAgICAgbWUudXRpbC5nZXRXaXRoRGVmYXVsdChjb250YWluRW50aXRpZXMsIFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRpdHksIGluZGV4Mikge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2suZmlsdGVyKGVudGl0eSkpIGVudGl0aWVzLnB1c2goZW50aXR5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vY2FsbGJhY2tcclxuICAgICAgICBjYWxsYmFjay5vbkNob2ljZShlbnRpdGllcyk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBVdGlsKHZpZXdlcikge1xyXG4gICAgdGhpcy5fdmlld2VyID0gdmlld2VyO1xyXG4gICAgdGhpcy5fZWxsaXBzb2lkID0gdGhpcy5fdmlld2VyLnNjZW5lLmdsb2JlLl9lbGxpcHNvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlsIZDYXJ0ZXNpYW4z6L2s5Li657uP57qs5bqmXHJcbiAqIEBwYXJhbSBjYXJ0ZXNpYW4zXHJcbiAqIEByZXR1cm5zIHt7aGVpZ2h0Om51bWJlcixsYXRpdHVkZTpudW1iZXIsbG9uZ2l0dWRlOm51bWJlcn19XHJcbiAqL1xyXG5VdGlsLnByb3RvdHlwZS5DYXJ0ZXNpYW4zVG9MYXRMbmcgPSBmdW5jdGlvbiAoY2FydGVzaWFuMykge1xyXG4gICAgLy8gcmV0dXJuICBDZXNpdW0uQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4oY2FydGVzaWFuMyk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbjMpO1xyXG59XHJcbi8qKlxyXG4gKiDkvYbmmK9DZXNpdW3kuI3mlK/mjIHmraTnsbtcclxuICogQHBhcmFtIGNhcnRlc2lhbjNcclxuICogQHJldHVybiB7e2hlaWdodDogKiwgbGF0aXR1ZGU6ICosIGxvbmdpdHVkZTogKn19XHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuVXRpbC5wcm90b3R5cGUuQ2FydGVzaWFuM1RvRGVncmVlcyA9IGZ1bmN0aW9uIChjYXJ0ZXNpYW4zKSB7XHJcbiAgICB2YXIgY2FydG9ncmFwaGljID0gdGhpcy5fZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbjMpO1xyXG4gICAgdmFyIGRlZ3JlZSA9IHtcclxuICAgICAgICBoZWlnaHQ6IGNhcnRvZ3JhcGhpYy5oZWlnaHQsXHJcbiAgICAgICAgbGF0aXR1ZGU6IENlc2l1bS5NYXRoLnRvRGVncmVlcyhjYXJ0b2dyYXBoaWMubGF0aXR1ZGUpLFxyXG4gICAgICAgIGxvbmdpdHVkZTogQ2VzaXVtLk1hdGgudG9EZWdyZWVzKGNhcnRvZ3JhcGhpYy5sb25naXR1ZGUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVncmVlO1xyXG59XHJcblxyXG5VdGlsLnByb3RvdHlwZS5nZXRXaXRoRGVmYXVsdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBkZWZhdWx0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQgPyBlbGVtZW50IDogZGVmYXVsdEVsZW1lbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5blvZPliY3ngrnkvY3nmoTov5HlnLDngrnkvY1cclxuICogQHBhcmFtIHtDZXNpdW0uQ2FydGVzaWFuM30gY2FydGVzaWFuM1xyXG4gKiBAcmV0dXJuIHtDZXNpdW0uQ2FydGVzaWFuM31cclxuICovXHJcblV0aWwucHJvdG90eXBlLmdldENlc2l1bUhpZ2h0WmVybyA9IGZ1bmN0aW9uIChjYXJ0ZXNpYW4zKSB7XHJcbiAgICB2YXIgZnJvbUNhcnRlc2lhbiA9IENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbUNhcnRlc2lhbihjYXJ0ZXNpYW4zKTtcclxuICAgIHJldHVybiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhmcm9tQ2FydGVzaWFuLmxvbmdpdHVkZSwgZnJvbUNhcnRlc2lhbi5sYXRpdHVkZSwgMCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkv67mraPlvZPliY3ngrnkvY3nmoTpq5jluqZcclxuICogQHBhcmFtIHtDZXNpdW0uQ2FydGVzaWFuM30gY2FydGVzaWFuM1xyXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0UGx1c1xyXG4gKiBAcmV0dXJuIHtDZXNpdW0uQ2FydGVzaWFuM31cclxuICovXHJcblV0aWwucHJvdG90eXBlLmZvcm1hdEhldGlnaHRQbHVzTnVtYmVyID0gZnVuY3Rpb24gKGNhcnRlc2lhbjMsIGhlaWdodFBsdXMpIHtcclxuICAgIHZhciBmcm9tQ2FydGVzaWFuID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKGNhcnRlc2lhbjMpO1xyXG4gICAgcmV0dXJuIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKGZyb21DYXJ0ZXNpYW4ubG9uZ2l0dWRlLCBmcm9tQ2FydGVzaWFuLmxhdGl0dWRlLCBmcm9tQ2FydGVzaWFuLmhlaWdodCArIGhlaWdodFBsdXMpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwb3NpdGlvblxyXG4gKiBAcGFyYW0gcGF0aHNcclxuICovXHJcblV0aWwucHJvdG90eXBlLl9pc0luUG9seWdvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgcGF0aHMpIHtcclxuICAgIHZhciB4ID0gcG9zaXRpb24ubG9uZ2l0dWRlO1xyXG4gICAgdmFyIHkgPSBwb3NpdGlvbi5sYXRpdHVkZTtcclxuXHJcbiAgICB2YXIgaXN1bSwgaWNvdW50LCBpbmRleCA9IDA7XHJcbiAgICB2YXIgZExvbjEgPSAwLCBkTG9uMiA9IDAsIGRMYXQxID0gMCwgZExhdDIgPSAwLCBkTG9uO1xyXG5cclxuICAgIGlmIChwYXRocy5zaXplIDwgMykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc3VtID0gMDtcclxuICAgIGljb3VudCA9IHBhdGhzLmxlbmd0aDtcclxuXHJcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBpY291bnQgLSAxOyBpbmRleCsrKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSBpY291bnQgLSAxKSB7XHJcbiAgICAgICAgICAgIGRMb24xID0gcGF0aHNbaW5kZXhdLmxvbmdpdHVkZTtcclxuICAgICAgICAgICAgZExhdDEgPSBwYXRoc1tpbmRleF0ubGF0aXR1ZGU7XHJcbiAgICAgICAgICAgIGRMb24yID0gcGF0aHNbMF0ubG9uZ2l0dWRlO1xyXG4gICAgICAgICAgICBkTGF0MiA9IHBhdGhzWzBdLmxhdGl0dWRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZExvbjEgPSBwYXRoc1tpbmRleF0ubG9uZ2l0dWRlO1xyXG4gICAgICAgICAgICBkTGF0MSA9IHBhdGhzW2luZGV4XS5sYXRpdHVkZTtcclxuICAgICAgICAgICAgZExvbjIgPSBwYXRoc1tpbmRleCArIDFdLmxvbmdpdHVkZTtcclxuICAgICAgICAgICAgZExhdDIgPSBwYXRoc1tpbmRleCArIDFdLmxhdGl0dWRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCgoeSA+PSBkTGF0MSkgJiYgKHkgPCBkTGF0MikpIHx8ICgoeSA+PSBkTGF0MikgJiYgKHkgPCBkTGF0MSkpKSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkTGF0MSAtIGRMYXQyKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRMb24gPSBkTG9uMSAtICgoZExvbjEgLSBkTG9uMikgKiAoZExhdDEgLSB5KSkgLyAoZExhdDEgLSBkTGF0Mik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZExvbiA8IHgpXHJcbiAgICAgICAgICAgICAgICAgICAgaXN1bSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoaXN1bSAlIDIpICE9PSAwO1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///39\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvU2NlbmUvQ2FtZXJhcy5jc3M/MWRkMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///40\n")},function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\r\n * Created by thomas on 9/01/14.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * (c) www.geocento.com\r\n * www.metaaps.com\r\n * <pre>\r\n *      update:\r\n *          2018-9-17:\r\n *              - pickStrategy属性兼容性\r\n *              - 适配stopDrawing在未开始标绘的情况\r\n *          2019-9-24:\r\n *              - 对属性带有modeType:billboard的entity加入setEditable(boolean)的方法,用于改变位置\r\n * </pre>\r\n *\r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n    if (( false ? undefined : _typeof(exports)) === 'object' && ( false ? undefined : _typeof(module)) === 'object') module.exports = factory(__webpack_require__(0));else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}\n})(window, function (Cesium) {\n    // static variables\n    var ellipsoid = Cesium.Ellipsoid.WGS84;\n\n    /**\r\n     *\r\n     * @param { Cesium.Cartesian2} position\r\n     * @param {Cesium.Viewer} viewer\r\n     * @return {Cesium.Cartesian3}\r\n     */\n    var defaultPickStrategy = function defaultPickStrategy(position, viewer) {\n        return viewer.scene.camera.pickEllipsoid(position);\n    };\n\n    /**\r\n     * @constructor\r\n     * @param cesiumWidget\r\n     * @private\r\n     */\n    function _(cesiumWidget) {\n        this._viewer = cesiumWidget;\n        this._scene = cesiumWidget.scene;\n        this._tooltip = createTooltip(cesiumWidget.container);\n        this._surfaces = [];\n        //适配\n        Cesium.defined(Cesium.ContextLimits) && (Cesium.ContextLimits._maximumAliasedLineWidth = 10);\n\n        this.initialiseHandlers();\n\n        this.enhancePrimitives();\n        enhanceWithListeners(this);\n    }\n\n    _.prototype.initialiseHandlers = function () {\n        var scene = this._scene;\n        var _self = this;\n        // scene events\n        var handler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n        function callPrimitiveCallback(name, position) {\n            if (_self._handlersMuted == true) return;\n            var pickedObject = scene.pick(position);\n            if (pickedObject && pickedObject.primitive && pickedObject.primitive[name]) {\n                pickedObject.primitive[name](position);\n            }\n            if (pickedObject && pickedObject.id && pickedObject.id.constructor.toString().match(/^function\\s*([^\\s(]+)/)[1] === \"Entity\" && pickedObject.id[name]) {\n                pickedObject.id[name](position);\n            }\n        }\n\n        handler.setInputAction(function (movement) {\n            callPrimitiveCallback('leftClick', movement.position);\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n        handler.setInputAction(function (movement) {\n            callPrimitiveCallback('leftDoubleClick', movement.position);\n        }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n        var mouseOutObject;\n        handler.setInputAction(function (movement) {\n            var markPosition = {\n                x: movement.endPosition.x,\n                y: movement.endPosition.y\n            };\n\n            if (_self._handlersMuted == true) return;\n            var pickedObject = scene.pick(markPosition);\n            if (mouseOutObject && (!pickedObject || mouseOutObject != pickedObject.primitive)) {\n                !(mouseOutObject.isDestroyed && mouseOutObject.isDestroyed()) && mouseOutObject.mouseOut(markPosition);\n                mouseOutObject = null;\n            }\n            if (pickedObject && pickedObject.primitive) {\n                pickedObject = pickedObject.primitive;\n                if (pickedObject.mouseOut) {\n                    mouseOutObject = pickedObject;\n                }\n                if (pickedObject.mouseMove) {\n                    pickedObject.mouseMove(markPosition);\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n        handler.setInputAction(function (movement) {\n            callPrimitiveCallback('leftUp', movement.position);\n        }, Cesium.ScreenSpaceEventType.LEFT_UP);\n        handler.setInputAction(function (movement) {\n            callPrimitiveCallback('leftDown', movement.position);\n        }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n    };\n\n    _.prototype.setListener = function (primitive, type, callback) {\n        primitive[type] = callback;\n    };\n\n    _.prototype.muteHandlers = function (muted) {\n        this._handlersMuted = muted;\n    };\n\n    // register event handling for an editable shape\n    // shape should implement setEditMode and setHighlighted\n    _.prototype.registerEditableShape = function (surface) {\n        var _self = this;\n\n        // handlers for interactions\n        // highlight polygon when mouse is entering\n        setListener(surface, 'mouseMove', function (position) {\n            surface.setHighlighted(true);\n            if (!surface._editMode) {\n                _self._tooltip.showAt(position, \"Click to edit this shape\");\n            }\n        });\n        // hide the highlighting when mouse is leaving the polygon\n        setListener(surface, 'mouseOut', function (position) {\n            surface.setHighlighted(false);\n            _self._tooltip.setVisible(false);\n        });\n        setListener(surface, 'leftClick', function (position) {\n            surface.setEditMode(true);\n        });\n    };\n\n    _.prototype.startDrawing = function (cleanUp) {\n        // undo any current edit of shapes\n        this.disableAllEditMode();\n        // check for cleanUp first\n        if (this.editCleanUp) {\n            this.editCleanUp();\n        }\n        this.editCleanUp = cleanUp;\n        this.muteHandlers(true);\n    };\n\n    _.prototype.stopDrawing = function () {\n        // check for cleanUp first\n        if (this.editCleanUp) {\n            this.editCleanUp();\n            this.editCleanUp = null;\n        }\n        this.muteHandlers(false);\n    };\n\n    // make sure only one shape is highlighted at a time\n    _.prototype.disableAllHighlights = function () {\n        this.setHighlighted(undefined);\n    };\n\n    _.prototype.setHighlighted = function (surface) {\n        if (this._highlightedSurface && !this._highlightedSurface.isDestroyed() && this._highlightedSurface != surface) {\n            this._highlightedSurface.setHighlighted(false);\n        }\n        this._highlightedSurface = surface;\n    };\n\n    _.prototype.disableAllEditMode = function () {\n        this.setEdited(undefined);\n    };\n\n    _.prototype.setEdited = function (surface) {\n        if (this._editedSurface && !this._editedSurface.isDestroyed()) {\n            this._editedSurface.setEditMode(false);\n        }\n        this._editedSurface = surface;\n    };\n\n    var material = Cesium.Material.fromType(Cesium.Material.ColorType);\n    material.uniforms.color = new Cesium.Color(1.0, 1.0, 0.0, 0.5);\n\n    var defaultShapeOptions = {\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        textureRotationAngle: 0.0,\n        height: 0.0,\n        asynchronous: true,\n        show: true,\n        debugShowBoundingVolume: false,\n        strategy: {\n            pickStrategy: defaultPickStrategy\n        }\n    };\n\n    var defaultSurfaceOptions = copyOptions(defaultShapeOptions, {\n        appearance: new Cesium.EllipsoidSurfaceAppearance({\n            aboveGround: false\n        }),\n        material: material,\n        granularity: Math.PI / 180.0,\n        strategy: {\n            pickStrategy: defaultPickStrategy\n        }\n    });\n\n    var defaultPolygonOptions = copyOptions(defaultShapeOptions, {});\n    var defaultExtentOptions = copyOptions(defaultShapeOptions, {});\n    var defaultCircleOptions = copyOptions(defaultShapeOptions, {});\n    var defaultEllipseOptions = copyOptions(defaultSurfaceOptions, { rotation: 0 });\n\n    var defaultPolylineOptions = copyOptions(defaultShapeOptions, {\n        width: 5,\n        geodesic: true,\n        granularity: 10000,\n        appearance: new Cesium.PolylineMaterialAppearance({\n            aboveGround: false\n        }),\n        material: material\n    });\n\n    //    Cesium.Polygon.prototype.setStrokeStyle = setStrokeStyle;\n    //\n    //    Cesium.Polygon.prototype.drawOutline = drawOutline;\n    //\n\n    var ChangeablePrimitive = function () {\n        function _() {}\n\n        _.prototype.initialiseOptions = function (options) {\n\n            fillOptions(this, options);\n\n            this._ellipsoid = undefined;\n            this._granularity = undefined;\n            this._height = undefined;\n            this._textureRotationAngle = undefined;\n            this._id = undefined;\n\n            // set the flags to initiate a first drawing\n            this._createPrimitive = true;\n            this._primitive = undefined;\n            this._outlinePolygon = undefined;\n        };\n\n        _.prototype.setAttribute = function (name, value) {\n            this[name] = value;\n            this._createPrimitive = true;\n        };\n\n        _.prototype.getAttribute = function (name) {\n            return this[name];\n        };\n\n        /**\r\n         * @private\r\n         */\n        _.prototype.update = function (context, frameState, commandList) {\n\n            if (!Cesium.defined(this.ellipsoid)) {\n                throw new Cesium.DeveloperError('this.ellipsoid must be defined.');\n            }\n\n            if (!Cesium.defined(this.appearance)) {\n                throw new Cesium.DeveloperError('this.material must be defined.');\n            }\n\n            if (this.granularity < 0.0) {\n                throw new Cesium.DeveloperError('this.granularity and scene2D/scene3D overrides must be greater than zero.');\n            }\n\n            if (!this.show) {\n                return;\n            }\n\n            if (!this._createPrimitive && !Cesium.defined(this._primitive)) {\n                // No positions/hierarchy to draw\n                return;\n            }\n\n            if (this._createPrimitive || this._ellipsoid !== this.ellipsoid || this._granularity !== this.granularity || this._height !== this.height || this._textureRotationAngle !== this.textureRotationAngle || this._id !== this.id) {\n\n                var geometry = this.getGeometry();\n                if (!geometry) {\n                    return;\n                }\n\n                this._createPrimitive = false;\n                this._ellipsoid = this.ellipsoid;\n                this._granularity = this.granularity;\n                this._height = this.height;\n                this._textureRotationAngle = this.textureRotationAngle;\n                this._id = this.id;\n\n                this._primitive = this._primitive && this._primitive.destroy();\n                var me = this;\n                this._primitive = new Cesium.Primitive({\n                    geometryInstances: new Cesium.GeometryInstance({\n                        geometry: geometry,\n                        id: this.id,\n                        pickPrimitive: this\n                    }),\n                    appearance: this.appearance,\n                    asynchronous: this.asynchronous\n                });\n                // this._primitive = new Cesium.GroundPrimitive({\n                //     geometryInstances: new Cesium.GeometryInstance({\n                //         geometry: geometry,\n                //         id: me.id,\n                //         pickPrimitive: me\n                //     }),\n                //     attributes: {\n                //         // color :  Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.BLUE.withAlpha(0.5))\n                //         color: Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)\n                //     }\n                // });\n\n                this._outlinePolygon = this._outlinePolygon && this._outlinePolygon.destroy();\n                if (this.strokeColor && this.getOutlineGeometry) {\n                    // create the highlighting frame\n                    this._outlinePolygon = new Cesium.Primitive({\n                        geometryInstances: new Cesium.GeometryInstance({\n                            geometry: this.getOutlineGeometry(),\n                            attributes: {\n                                color: Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)\n                            }\n                        }),\n                        appearance: new Cesium.PerInstanceColorAppearance({\n                            flat: true,\n                            renderState: {\n                                depthTest: {\n                                    enabled: true\n                                },\n                                lineWidth: Math.min(this.strokeWidth || 4.0)\n                            }\n                        })\n                    });\n                }\n            }\n\n            var primitive = this._primitive;\n            // primitive.appearance.material = this.material;\n            // primitive.appearance = this.appearance;\n            primitive.appearance.material = this.material;\n            // primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n            primitive.update(context, frameState, commandList);\n            //debug\n            // console.log(context)\n            // console.log(frameState)\n            // console.log(commandList)\n            this._outlinePolygon && this._outlinePolygon.update(context, frameState, commandList);\n        };\n\n        _.prototype.isDestroyed = function () {\n            return false;\n        };\n\n        _.prototype.destroy = function () {\n            this._primitive = this._primitive && this._primitive.destroy();\n            return Cesium.destroyObject(this);\n        };\n\n        _.prototype.setStrokeStyle = function (strokeColor, strokeWidth) {\n            if (!this.strokeColor || !this.strokeColor.equals(strokeColor) || this.strokeWidth != strokeWidth) {\n                this._createPrimitive = true;\n                this.strokeColor = strokeColor;\n                this.strokeWidth = strokeWidth;\n            }\n        };\n\n        return _;\n    }();\n\n    _.ExtentPrimitive = function () {\n        function _(options) {\n\n            if (!Cesium.defined(options.extent)) {\n                throw new Cesium.DeveloperError('Extent is required');\n            }\n\n            options = copyOptions(options, defaultSurfaceOptions);\n\n            this.initialiseOptions(options);\n\n            this.setExtent(options.extent);\n        }\n\n        _.prototype = new ChangeablePrimitive();\n\n        _.prototype.setExtent = function (extent) {\n            this.setAttribute('extent', extent);\n        };\n\n        _.prototype.getExtent = function () {\n            return this.getAttribute('extent');\n        };\n\n        _.prototype.getGeometry = function () {\n\n            if (!Cesium.defined(this.extent)) {\n                return;\n            }\n\n            return new Cesium.RectangleGeometry({\n                rectangle: this.extent,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        };\n\n        _.prototype.getOutlineGeometry = function () {\n            return new Cesium.RectangleOutlineGeometry({\n                rectangle: this.extent\n            });\n        };\n\n        return _;\n    }();\n\n    _.PolygonPrimitive = function () {\n\n        function _(options) {\n\n            options = copyOptions(options, defaultSurfaceOptions);\n\n            this.initialiseOptions(options);\n\n            this.isPolygon = true;\n        }\n\n        _.prototype = new ChangeablePrimitive();\n\n        _.prototype.setPositions = function (positions) {\n            this.setAttribute('positions', positions);\n        };\n\n        _.prototype.getPositions = function () {\n            return this.getAttribute('positions');\n        };\n\n        _.prototype.getGeometry = function () {\n\n            if (!Cesium.defined(this.positions) || this.positions.length < 3) {\n                return;\n            }\n\n            return Cesium.PolygonGeometry.fromPositions({\n                positions: this.positions,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        };\n\n        _.prototype.getOutlineGeometry = function () {\n            return Cesium.PolygonOutlineGeometry.fromPositions({\n                positions: this.getPositions()\n            });\n        };\n\n        return _;\n    }();\n\n    _.CirclePrimitive = function () {\n\n        function _(options) {\n\n            if (!(Cesium.defined(options.center) && Cesium.defined(options.radius))) {\n                throw new Cesium.DeveloperError('Center and radius are required');\n            }\n\n            options = copyOptions(options, defaultSurfaceOptions);\n\n            this.initialiseOptions(options);\n\n            this.setRadius(options.radius);\n        }\n\n        _.prototype = new ChangeablePrimitive();\n\n        _.prototype.setCenter = function (center) {\n            this.setAttribute('center', center);\n        };\n\n        _.prototype.setRadius = function (radius) {\n            this.setAttribute('radius', Math.max(0.1, radius));\n        };\n\n        _.prototype.getCenter = function () {\n            return this.getAttribute('center');\n        };\n\n        _.prototype.getRadius = function () {\n            return this.getAttribute('radius');\n        };\n\n        _.prototype.getGeometry = function () {\n\n            if (!(Cesium.defined(this.center) && Cesium.defined(this.radius))) {\n                return;\n            }\n\n            return new Cesium.CircleGeometry({\n                center: this.center,\n                radius: this.radius,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle,\n                ellipsoid: this.ellipsoid,\n                granularity: this.granularity\n            });\n        };\n\n        _.prototype.getOutlineGeometry = function () {\n            return new Cesium.CircleOutlineGeometry({\n                center: this.getCenter(),\n                radius: this.getRadius()\n            });\n        };\n\n        return _;\n    }();\n\n    _.EllipsePrimitive = function () {\n        function _(options) {\n\n            if (!(Cesium.defined(options.center) && Cesium.defined(options.semiMajorAxis) && Cesium.defined(options.semiMinorAxis))) {\n                throw new Cesium.DeveloperError('Center and semi major and semi minor axis are required');\n            }\n\n            options = copyOptions(options, defaultEllipseOptions);\n\n            this.initialiseOptions(options);\n        }\n\n        _.prototype = new ChangeablePrimitive();\n\n        _.prototype.setCenter = function (center) {\n            this.setAttribute('center', center);\n        };\n\n        _.prototype.setSemiMajorAxis = function (semiMajorAxis) {\n            if (semiMajorAxis < this.getSemiMinorAxis()) return;\n            this.setAttribute('semiMajorAxis', semiMajorAxis);\n        };\n\n        _.prototype.setSemiMinorAxis = function (semiMinorAxis) {\n            if (semiMinorAxis > this.getSemiMajorAxis()) return;\n            this.setAttribute('semiMinorAxis', semiMinorAxis);\n        };\n\n        _.prototype.setRotation = function (rotation) {\n            return this.setAttribute('rotation', rotation);\n        };\n\n        _.prototype.getCenter = function () {\n            return this.getAttribute('center');\n        };\n\n        _.prototype.getSemiMajorAxis = function () {\n            return this.getAttribute('semiMajorAxis');\n        };\n\n        _.prototype.getSemiMinorAxis = function () {\n            return this.getAttribute('semiMinorAxis');\n        };\n\n        _.prototype.getRotation = function () {\n            return this.getAttribute('rotation');\n        };\n\n        _.prototype.getGeometry = function () {\n            var _ref;\n\n            if (!(Cesium.defined(this.center) && Cesium.defined(this.semiMajorAxis) && Cesium.defined(this.semiMinorAxis))) {\n                return;\n            }\n\n            return new Cesium.EllipseGeometry((_ref = {\n                ellipsoid: this.ellipsoid,\n                center: this.center,\n                semiMajorAxis: this.semiMajorAxis,\n                semiMinorAxis: this.semiMinorAxis,\n                rotation: this.rotation,\n                height: this.height,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                stRotation: this.textureRotationAngle\n            }, _defineProperty(_ref, 'ellipsoid', this.ellipsoid), _defineProperty(_ref, 'granularity', this.granularity), _ref));\n        };\n\n        _.prototype.getOutlineGeometry = function () {\n            return new Cesium.EllipseOutlineGeometry({\n                center: this.getCenter(),\n                semiMajorAxis: this.getSemiMajorAxis(),\n                semiMinorAxis: this.getSemiMinorAxis(),\n                rotation: this.getRotation()\n            });\n        };\n\n        return _;\n    }();\n\n    _.PolylinePrimitive = function () {\n\n        function _(options) {\n\n            options = copyOptions(options, defaultPolylineOptions);\n\n            this.initialiseOptions(options);\n        }\n\n        _.prototype = new ChangeablePrimitive();\n\n        _.prototype.setPositions = function (positions) {\n            this.setAttribute('positions', positions);\n        };\n\n        _.prototype.setWidth = function (width) {\n            this.setAttribute('width', width);\n        };\n\n        _.prototype.setGeodesic = function (geodesic) {\n            this.setAttribute('geodesic', geodesic);\n        };\n\n        _.prototype.getPositions = function () {\n            return this.getAttribute('positions');\n        };\n\n        _.prototype.getWidth = function () {\n            return this.getAttribute('width');\n        };\n\n        _.prototype.getGeodesic = function (geodesic) {\n            return this.getAttribute('geodesic');\n        };\n\n        _.prototype.getGeometry = function () {\n\n            if (!Cesium.defined(this.positions) || this.positions.length < 2) {\n                return;\n            }\n\n            return new Cesium.PolylineGeometry({\n                positions: this.positions,\n                height: this.height,\n                width: this.width < 1 ? 1 : this.width,\n                vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,\n                ellipsoid: this.ellipsoid\n            });\n        };\n\n        return _;\n    }();\n\n    var defaultBillboard = {\n        iconUrl: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==\",\n        shiftX: 0,\n        shiftY: 0,\n        strategy: {\n            pickStrategy: defaultPickStrategy\n        }\n    };\n\n    var dragBillboard = {\n        iconUrl: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==\",\n        shiftX: 0,\n        shiftY: 0\n    };\n\n    var dragHalfBillboard = {\n        iconUrl: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABCklEQVQoU5XRMUiEcBTH8e8/iBQMAoXAULBRqTWwGxvaagi3GxqjpragMWhrKhobbpOG2hoaL6G18MYTlIRAIUjQCDKU7mhwqDd/Hvze7wn+MWJi67qeA1aBZWAeeAfGwJMQ4qNxLf6Bm8A2sAEsAq/APXAD3DULE7wG7AF9YOZXsi9gAFwKIR5bXJZlX5KkU2Cp44SXqqqOZFketDjLsgNVVc+A2Q78mef5oaZp5y2O43jXMIwTQO/AaZIkx6ZpXrU4DMOebdv7gNeR2R+NRheO4wxbHEWRlKbpjuu6W0AP0Jp0wDAIgltd168ty6qmPfu+LxdFsQ6sAAvAG/CsKMqD53nltOe/PvEbmPRTDApQ3d8AAAAASUVORK5CYII=\",\n        shiftX: 0,\n        shiftY: 0\n    };\n\n    _.prototype.createBillboardGroup = function (points, options, callbacks) {\n        var markers = new _.BillboardGroup(this, options);\n        markers.addBillboards(points, callbacks);\n        return markers;\n    };\n\n    _.BillboardGroup = function (drawHelper, options) {\n\n        this._drawHelper = drawHelper;\n        this._scene = drawHelper._scene;\n\n        this._options = copyOptions(options, defaultBillboard);\n\n        // create one common billboard collection for all billboards\n        var b = new Cesium.BillboardCollection();\n        this._scene.primitives.add(b);\n        this._billboards = b;\n        // keep an ordered list of billboards\n        this._orderedBillboards = [];\n    };\n\n    _.BillboardGroup.prototype.createBillboard = function (position, callbacks) {\n\n        var billboard = this._billboards.add({\n            show: true,\n            position: position,\n            pixelOffset: new Cesium.Cartesian2(this._options.shiftX, this._options.shiftY),\n            eyeOffset: new Cesium.Cartesian3(0.0, 0.0, 0.0),\n            horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n            verticalOrigin: Cesium.VerticalOrigin.CENTER,\n            scale: 1.0,\n            image: this._options.iconUrl,\n            color: new Cesium.Color(1.0, 1.0, 1.0, 1.0)\n        });\n\n        // if editable\n        if (callbacks) {\n            var enableRotation = function enableRotation(enable) {\n                screenSpaceCameraController.enableRotate = enable;\n            };\n\n            var getIndex = function getIndex() {\n                // find index\n                for (var i = 0, I = _self._orderedBillboards.length; i < I && _self._orderedBillboards[i] != billboard; ++i) {}\n                return i;\n            };\n\n            var _self = this;\n            var screenSpaceCameraController = this._scene.screenSpaceCameraController;\n\n            if (callbacks.dragHandlers) {\n                var _self = this;\n                setListener(billboard, 'leftDown', function (position) {\n                    // TODO - start the drag handlers here\n                    // create handlers for mouseOut and leftUp for the billboard and a mouseMove\n                    function onDrag(position) {\n                        billboard.position = position;\n                        // find index\n                        for (var i = 0, I = _self._orderedBillboards.length; i < I && _self._orderedBillboards[i] != billboard; ++i) {}\n                        callbacks.dragHandlers.onDrag && callbacks.dragHandlers.onDrag(getIndex(), position);\n                    }\n\n                    function onDragEnd(position) {\n                        handler.destroy();\n                        enableRotation(true);\n                        callbacks.dragHandlers.onDragEnd && callbacks.dragHandlers.onDragEnd(getIndex(), position);\n                    }\n\n                    var handler = new Cesium.ScreenSpaceEventHandler(_self._scene.canvas);\n\n                    handler.setInputAction(function (movement) {\n                        var cartesian = _self._scene.camera.pickEllipsoid(movement.endPosition, ellipsoid);\n                        if (cartesian) {\n                            onDrag(cartesian);\n                        } else {\n                            onDragEnd(cartesian);\n                        }\n                    }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n\n                    handler.setInputAction(function (movement) {\n                        onDragEnd(_self._scene.camera.pickEllipsoid(movement.position, ellipsoid));\n                    }, Cesium.ScreenSpaceEventType.LEFT_UP);\n\n                    enableRotation(false);\n\n                    callbacks.dragHandlers.onDragStart && callbacks.dragHandlers.onDragStart(getIndex(), _self._scene.camera.pickEllipsoid(position, ellipsoid));\n                });\n            }\n            if (callbacks.onDoubleClick) {\n                setListener(billboard, 'leftDoubleClick', function (position) {\n                    callbacks.onDoubleClick(getIndex());\n                });\n            }\n            if (callbacks.onClick) {\n                setListener(billboard, 'leftClick', function (position) {\n                    callbacks.onClick(getIndex());\n                });\n            }\n            if (callbacks.tooltip) {\n                setListener(billboard, 'mouseMove', function (position) {\n                    _self._drawHelper._tooltip.showAt(position, callbacks.tooltip());\n                });\n                setListener(billboard, 'mouseOut', function (position) {\n                    _self._drawHelper._tooltip.setVisible(false);\n                });\n            }\n        }\n\n        return billboard;\n    };\n\n    _.BillboardGroup.prototype.insertBillboard = function (index, position, callbacks) {\n        this._orderedBillboards.splice(index, 0, this.createBillboard(position, callbacks));\n    };\n\n    _.BillboardGroup.prototype.addBillboard = function (position, callbacks) {\n        this._orderedBillboards.push(this.createBillboard(position, callbacks));\n    };\n\n    _.BillboardGroup.prototype.addBillboards = function (positions, callbacks) {\n        var index = 0;\n        for (; index < positions.length; index++) {\n            this.addBillboard(positions[index], callbacks);\n        }\n    };\n\n    _.BillboardGroup.prototype.updateBillboardsPositions = function (positions) {\n        var index = 0;\n        for (; index < positions.length; index++) {\n            this.getBillboard(index).position = positions[index];\n        }\n    };\n\n    _.BillboardGroup.prototype.countBillboards = function () {\n        return this._orderedBillboards.length;\n    };\n\n    _.BillboardGroup.prototype.getBillboard = function (index) {\n        return this._orderedBillboards[index];\n    };\n\n    _.BillboardGroup.prototype.removeBillboard = function (index) {\n        this._billboards.remove(this.getBillboard(index));\n        this._orderedBillboards.splice(index, 1);\n    };\n\n    _.BillboardGroup.prototype.remove = function () {\n        this._billboards = this._billboards && this._billboards.removeAll() && this._billboards.destroy();\n    };\n\n    _.BillboardGroup.prototype.setOnTop = function () {\n        this._scene.primitives.raiseToTop(this._billboards);\n    };\n\n    _.prototype.startDrawingMarker = function (options) {\n\n        var options = copyOptions(options, defaultBillboard);\n\n        this.startDrawing(function () {\n            markers && markers.remove();\n            mouseHandler && mouseHandler.destroy();\n            tooltip && tooltip.setVisible(false);\n        });\n\n        var _self = this;\n        var scene = this._scene;\n        var viewer = this._viewer;\n\n        var primitives = scene.primitives;\n        var tooltip = this._tooltip;\n\n        var markers = new _.BillboardGroup(this, options);\n\n        var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n        // Now wait for start\n        mouseHandler.setInputAction(function (movement) {\n            if (movement.position != null) {\n                // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n                var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n                if (cartesian) {\n                    markers.addBillboard(cartesian);\n                    _self.stopDrawing();\n                    options.callback(cartesian, _self);\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n        mouseHandler.setInputAction(function (movement) {\n            var position = movement.endPosition;\n            if (position != null) {\n                // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                var cartesian = options.strategy.pickStrategy(position, viewer);\n                if (cartesian) {\n                    tooltip.showAt(position, \"<p>Click to add your marker. Position is: </p>\" + getDisplayLatLngString(ellipsoid.cartesianToCartographic(cartesian)));\n                } else {\n                    tooltip.showAt(position, \"<p>Click on the globe to add your marker.</p>\");\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n    };\n\n    _.prototype.startDrawingPolygon = function (options) {\n        // var options = copyOptions(options, defaultSurfaceOptions);\n        this.startDrawingPolyshape(true, options);\n    };\n\n    _.prototype.startDrawingPolyline = function (options) {\n        // var options = copyOptions(options, defaultPolylineOptions);\n        this.startDrawingPolyshape(false, options);\n    };\n\n    _.prototype.startDrawingPolyshape = function (isPolygon, options) {\n        options = isPolygon ? copyOptions(options, defaultSurfaceOptions) : copyOptions(options, defaultPolylineOptions);\n\n        this.startDrawing(function () {\n            primitives && primitives.remove(poly);\n            markers && markers.remove();\n            mouseHandler && mouseHandler.destroy();\n            tooltip && tooltip.setVisible(false);\n        });\n\n        var _self = this;\n        var scene = this._scene;\n        var viewer = this._viewer;\n        var primitives = scene.primitives;\n        var tooltip = this._tooltip;\n\n        var minPoints = isPolygon ? 3 : 2;\n        var poly;\n        if (isPolygon) {\n            poly = new _.PolygonPrimitive(options);\n        } else {\n            poly = new _.PolylinePrimitive(options);\n        }\n        poly.asynchronous = false;\n        primitives.add(poly);\n\n        var positions = [];\n        var markers = new _.BillboardGroup(this, defaultBillboard);\n\n        var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n        mouseHandler.setInputAction(function (movement) {\n\n            var position = movement.position;\n            if (position != null) {\n                if (positions.length < minPoints /*+ 2*/) {\n                        return;\n                    } else {\n                    // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                    var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n\n                    if (cartesian) {\n                        _self.stopDrawing();\n                        if (typeof options.callback == 'function') {\n                            // remove overlapping ones\n                            var index = positions.length - 1;\n                            options.callback(positions, _self);\n                        }\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\n        // Now wait for start\n        mouseHandler.setInputAction(function (movement) {\n\n            var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n            cartesian = getCesiumHightZero(cartesian);\n\n            if (movement.position != null) {\n                // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n\n                if (cartesian) {\n                    // first click\n                    if (positions.length == 0) {\n                        positions.push(cartesian.clone());\n                        markers.addBillboard(positions[0]);\n                    }\n                    if (positions.length >= minPoints) {\n                        poly.positions = positions;\n                        poly._createPrimitive = true;\n                    }\n                    // add new point to polygon\n                    // this one will move with the mouse\n                    positions.push(cartesian);\n                    // add marker at the new position\n                    markers.addBillboard(cartesian);\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n        mouseHandler.setInputAction(function (movement) {\n            var position = movement.endPosition;\n            if (position != null) {\n                if (positions.length == 0) {\n                    tooltip.showAt(position, \"<p>Click to add first point</p>\");\n                } else {\n                    // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                    // var cartesian = scene.pickPosition(position);\n                    // cartesian = getCesiumHightZero(cartesian);\n                    var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                    if (cartesian) {\n                        positions.pop();\n                        // make sure it is slightly different\n                        // cartesian.y += (1 + Math.random());\n                        cartesian.y += Cesium.Math.EPSILON7;\n                        positions.push(cartesian);\n                        if (positions.length >= minPoints) {\n                            poly.positions = positions;\n                            poly._createPrimitive = true;\n                        }\n                        // update marker\n                        markers.getBillboard(positions.length - 1).position = cartesian;\n                        // show tooltip\n                        tooltip.showAt(position, \"<p>Click to add new point (\" + positions.length + \")</p>\" + (positions.length > minPoints ? \"<p>Double click to finish drawing</p>\" : \"\"));\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n    };\n\n    function getExtentCorners(value) {\n        return ellipsoid.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(value), Cesium.Rectangle.northeast(value), Cesium.Rectangle.southeast(value), Cesium.Rectangle.southwest(value)]);\n    }\n\n    _.prototype.startDrawingExtent = function (options) {\n\n        var options = copyOptions(options, defaultSurfaceOptions);\n\n        this.startDrawing(function () {\n            if (extent != null) {\n                primitives && primitives.remove(extent);\n            }\n            markers && markers.remove();\n            mouseHandler && mouseHandler.destroy();\n            tooltip && tooltip.setVisible(false);\n        });\n\n        var _self = this;\n        var scene = this._scene;\n        var viewer = this._viewer;\n        var primitives = this._scene.primitives;\n        var tooltip = this._tooltip;\n\n        var firstPoint = null;\n        var extent = null;\n        var markers = null;\n\n        var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n        function updateExtent(value) {\n            if (extent == null) {\n                extent = new _.ExtentPrimitive({ extent: value, material: options.material });\n                extent.asynchronous = false;\n                primitives.add(extent);\n            }\n            extent.setExtent(value);\n            extent.rectangle = value;\n            // update the markers\n            var corners = getExtentCorners(value);\n            // create if they do not yet exist\n            if (markers == null) {\n                markers = new _.BillboardGroup(_self, defaultBillboard);\n                markers.addBillboards(corners);\n            } else {\n                markers.updateBillboardsPositions(corners);\n            }\n        }\n\n        // Now wait for start\n        mouseHandler.setInputAction(function (movement) {\n            if (movement.position != null) {\n                // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n                var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n\n                if (cartesian) {\n                    if (extent == null) {\n                        // create the rectangle\n                        firstPoint = ellipsoid.cartesianToCartographic(cartesian);\n                        var value = getExtent(firstPoint, firstPoint);\n                        updateExtent(value);\n                    } else {\n                        _self.stopDrawing();\n                        if (typeof options.callback == 'function') {\n                            options.callback(getExtent(firstPoint, ellipsoid.cartesianToCartographic(cartesian), _self));\n                        }\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n\n        mouseHandler.setInputAction(function (movement) {\n            var position = movement.endPosition;\n            if (position != null) {\n                if (extent == null) {\n                    tooltip.showAt(position, \"<p>Click to start drawing rectangle</p>\");\n                } else {\n                    // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                    var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                    if (cartesian) {\n                        var value = getExtent(firstPoint, ellipsoid.cartesianToCartographic(cartesian));\n                        updateExtent(value);\n                        tooltip.showAt(position, \"<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>\");\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n    };\n\n    _.prototype.startDrawingCircle = function (options) {\n\n        var options = copyOptions(options, defaultSurfaceOptions);\n\n        this.startDrawing(function cleanUp() {\n            if (circle != null) {\n                primitives && primitives.remove(circle);\n            }\n            markers && markers.remove();\n            mouseHandler && mouseHandler.destroy();\n            tooltip && tooltip.setVisible(false);\n        });\n\n        var _self = this;\n        var scene = this._scene;\n        var viewer = this._viewer;\n        var primitives = this._scene.primitives;\n        var tooltip = this._tooltip;\n\n        var circle = null;\n        var markers = null;\n\n        var mouseHandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n\n        function pickPosition(position) {\n            if (Cesium.defined(viewer.scene.pick(position))) {\n                return getCesiumHightZero(viewer.scene.pickPosition(position));\n            } else {\n                return getCesiumHightZero(viewer.scene.camera.pickEllipsoid(position));\n            }\n        }\n\n        // Now wait for start\n        mouseHandler.setInputAction(function (movement) {\n            if (movement.position != null) {\n                // var cartesian = scene.camera.pickEllipsoid(movement.position, ellipsoid);\n                // var cartesian = scene.pickPosition(movement.position);\n                // cartesian = getCesiumHightZero(cartesian);\n                // var cartesian = pickPosition(movement.position);\n                var cartesian = options.strategy.pickStrategy(movement.position, viewer);\n                if (cartesian) {\n                    if (circle == null) {\n                        // create the circle\n                        circle = new _.CirclePrimitive({\n                            center: cartesian,\n                            radius: 0,\n                            asynchronous: false,\n                            material: options.material\n                        });\n                        primitives.add(circle);\n                        markers = new _.BillboardGroup(_self, defaultBillboard);\n                        markers.addBillboards([cartesian]);\n                    } else {\n                        if (typeof options.callback == 'function') {\n                            options.callback(circle.getCenter(), circle.getRadius(), _self);\n                        }\n                        _self.stopDrawing();\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.LEFT_DOWN);\n\n        mouseHandler.setInputAction(function (movement) {\n            var position = movement.endPosition;\n            if (position != null) {\n                if (circle == null) {\n                    tooltip.showAt(position, \"<p>Click to start drawing the circle</p>\");\n                } else {\n                    // var cartesian = scene.camera.pickEllipsoid(position, ellipsoid);\n                    // var cartesian = scene.pickPosition(position);\n                    var cartesian = options.strategy.pickStrategy(position, viewer);\n\n                    if (cartesian) {\n                        // Cesium.Cartographic.fromCartesian(circle.getCenter())\n                        circle.setRadius(Cesium.Cartesian3.distance(getCesiumHightZero(circle.getCenter()), getCesiumHightZero(cartesian)));\n                        // circle.setRadius(Cesium.Cartesian3.distance(circle.getCenter(), cartesian));\n                        markers.updateBillboardsPositions(cartesian);\n                        tooltip.showAt(position, \"<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>\");\n                    }\n                }\n            }\n        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n    };\n\n    _.prototype.enhancePrimitives = function () {\n\n        var drawHelper = this;\n\n        Cesium.Billboard.prototype.setEditable = function () {\n\n            if (this._editable) {\n                return;\n            }\n\n            this._editable = true;\n\n            var billboard = this;\n\n            var _self = this;\n\n            function enableRotation(enable) {\n                drawHelper._scene.screenSpaceCameraController.enableRotate = enable;\n            }\n\n            setListener(billboard, 'leftDown', function (position) {\n                // TODO - start the drag handlers here\n                // create handlers for mouseOut and leftUp for the billboard and a mouseMove\n                function onDrag(position) {\n                    billboard.position = position;\n                    _self.executeListeners({ name: 'drag', positions: position });\n                }\n\n                function onDragEnd(position) {\n                    handler.destroy();\n                    enableRotation(true);\n                    _self.executeListeners({ name: 'dragEnd', positions: position });\n                }\n\n                var handler = new Cesium.ScreenSpaceEventHandler(drawHelper._scene.canvas);\n\n                handler.setInputAction(function (movement) {\n                    var cartesian = drawHelper._scene.camera.pickEllipsoid(movement.endPosition, ellipsoid);\n                    if (cartesian) {\n                        onDrag(cartesian);\n                    } else {\n                        onDragEnd(cartesian);\n                    }\n                }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n\n                handler.setInputAction(function (movement) {\n                    onDragEnd(drawHelper._scene.camera.pickEllipsoid(movement.position, ellipsoid));\n                }, Cesium.ScreenSpaceEventType.LEFT_UP);\n\n                enableRotation(false);\n            });\n\n            enhanceWithListeners(billboard);\n        };\n\n        Cesium.Entity.prototype.setEditable = function (editable) {\n            if (editable === false) {\n                var billboard = this;\n                removeListener(billboard, 'leftDown');\n                this._editable = false;\n                return;\n            }\n\n            if (this.modeType !== 'billboard' || this._editable) {\n                return;\n            }\n\n            this._editable = true;\n\n            var billboard = this;\n\n            var _self = this;\n\n            function enableRotation(enable) {\n                drawHelper._scene.screenSpaceCameraController.enableRotate = enable;\n            }\n\n            setListener(billboard, 'leftDown', function (position) {\n                // TODO - start the drag handlers here\n                // create handlers for mouseOut and leftUp for the billboard and a mouseMove\n                function onDrag(position) {\n                    billboard.position = position;\n                    _self.executeListeners({ name: 'drag', positions: position });\n                }\n\n                function onDragEnd(position) {\n                    handler.destroy();\n                    enableRotation(true);\n                    _self.executeListeners({ name: 'dragEnd', positions: position });\n                }\n\n                var handler = new Cesium.ScreenSpaceEventHandler(drawHelper._scene.canvas);\n\n                handler.setInputAction(function (movement) {\n                    var cartesian = drawHelper._scene.camera.pickEllipsoid(movement.endPosition, ellipsoid);\n                    if (cartesian) {\n                        onDrag(cartesian);\n                    } else {\n                        onDragEnd(cartesian);\n                    }\n                }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\n\n                handler.setInputAction(function (movement) {\n                    onDragEnd(drawHelper._scene.camera.pickEllipsoid(movement.position, ellipsoid));\n                }, Cesium.ScreenSpaceEventType.LEFT_UP);\n\n                enableRotation(false);\n            });\n\n            enhanceWithListeners(billboard);\n        };\n\n        function setHighlighted(highlighted) {\n\n            var scene = drawHelper._scene;\n\n            // if no change\n            // if already highlighted, the outline polygon will be available\n            if (this._highlighted && this._highlighted == highlighted) {\n                return;\n            }\n            // disable if already in edit mode\n            if (this._editMode === true) {\n                return;\n            }\n            this._highlighted = highlighted;\n            // highlight by creating an outline polygon matching the polygon points\n            if (highlighted) {\n                // make sure all other shapes are not highlighted\n                drawHelper.setHighlighted(this);\n                this._strokeColor = this.strokeColor;\n                this.setStrokeStyle(Cesium.Color.fromCssColorString('white'), this.strokeWidth);\n            } else {\n                if (this._strokeColor) {\n                    this.setStrokeStyle(this._strokeColor, this.strokeWidth);\n                } else {\n                    this.setStrokeStyle(undefined, undefined);\n                }\n            }\n        }\n\n        function setEditMode(editMode) {\n            // if no change\n            if (this._editMode == editMode) {\n                return;\n            }\n            // make sure all other shapes are not in edit mode before starting the editing of this shape\n            drawHelper.disableAllHighlights();\n            // display markers\n            if (editMode) {\n                drawHelper.setEdited(this);\n                var scene = drawHelper._scene;\n                var _self = this;\n                // create the markers and handlers for the editing\n                if (this._markers == null) {\n\n                    // function for updating the edit markers around a certain point\n                    var updateHalfMarkers = function updateHalfMarkers(index, positions) {\n                        // update the half markers before and after the index\n                        var editIndex = index - 1 < 0 ? positions.length - 1 : index - 1;\n                        if (editIndex < editMarkers.countBillboards()) {\n                            editMarkers.getBillboard(editIndex).position = calculateHalfMarkerPosition(editIndex);\n                        }\n                        editIndex = index;\n                        if (editIndex < editMarkers.countBillboards()) {\n                            editMarkers.getBillboard(editIndex).position = calculateHalfMarkerPosition(editIndex);\n                        }\n                    };\n\n                    var onEdited = function onEdited() {\n                        _self.executeListeners({ name: 'onEdited', positions: _self.positions });\n                    };\n\n                    var calculateHalfMarkerPosition = function calculateHalfMarkerPosition(index) {\n                        var positions = _self.positions;\n                        return ellipsoid.cartographicToCartesian(new Cesium.EllipsoidGeodesic(ellipsoid.cartesianToCartographic(positions[index]), ellipsoid.cartesianToCartographic(positions[index < positions.length - 1 ? index + 1 : 0])).interpolateUsingFraction(0.5));\n                    };\n\n                    var thisDragBillboard = this.dragBillboard ? this.dragBillboard : dragBillboard;\n                    var thisDragHalfBillboard = this.dragHalfBillboard ? this.dragHalfBillboard : dragBillboard;\n                    var markers = new _.BillboardGroup(drawHelper, thisDragBillboard);\n                    var editMarkers = new _.BillboardGroup(drawHelper, thisDragHalfBillboard);\n\n                    var handleMarkerChanges = {\n                        dragHandlers: {\n                            onDrag: function onDrag(index, position) {\n                                _self.positions[index] = position;\n                                updateHalfMarkers(index, _self.positions);\n                                _self._createPrimitive = true;\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                _self._createPrimitive = true;\n                                onEdited();\n                            }\n                        },\n                        onDoubleClick: function onDoubleClick(index) {\n                            if (_self.positions.length < 4) {\n                                return;\n                            }\n                            // remove the point and the corresponding markers\n                            _self.positions.splice(index, 1);\n                            _self._createPrimitive = true;\n                            markers.removeBillboard(index);\n                            editMarkers.removeBillboard(index);\n                            updateHalfMarkers(index, _self.positions);\n                            onEdited();\n                        },\n                        tooltip: function tooltip() {\n                            if (_self.positions.length > 3) {\n                                return \"Double click to remove this point\";\n                            }\n                        }\n                    };\n                    // add billboards and keep an ordered list of them for the polygon edges\n                    markers.addBillboards(_self.positions, handleMarkerChanges);\n                    this._markers = markers;\n\n                    var halfPositions = [];\n                    var index = 0;\n                    var length = _self.positions.length + (this.isPolygon ? 0 : -1);\n                    for (; index < length; index++) {\n                        halfPositions.push(calculateHalfMarkerPosition(index));\n                    }\n                    var handleEditMarkerChanges = {\n                        dragHandlers: {\n                            onDragStart: function onDragStart(index, position) {\n                                // add a new position to the polygon but not a new marker yet\n                                this.index = index + 1;\n                                _self.positions.splice(this.index, 0, position);\n                                _self._createPrimitive = true;\n                            },\n                            onDrag: function onDrag(index, position) {\n                                _self.positions[this.index] = position;\n                                _self._createPrimitive = true;\n                            },\n                            onDragEnd: function onDragEnd(index, position) {\n                                // create new sets of makers for editing\n                                markers.insertBillboard(this.index, position, handleMarkerChanges);\n                                editMarkers.getBillboard(this.index - 1).position = calculateHalfMarkerPosition(this.index - 1);\n                                editMarkers.insertBillboard(this.index, calculateHalfMarkerPosition(this.index), handleEditMarkerChanges);\n                                _self._createPrimitive = true;\n                                onEdited();\n                            }\n                        },\n                        tooltip: function tooltip() {\n                            return \"Drag to create a new point\";\n                        }\n                    };\n                    editMarkers.addBillboards(halfPositions, handleEditMarkerChanges);\n                    this._editMarkers = editMarkers;\n                    // add a handler for clicking in the globe\n                    this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                    this._globeClickhandler.setInputAction(function (movement) {\n                        var pickedObject = scene.pick(movement.position);\n                        if (!(pickedObject && pickedObject.primitive)) {\n                            _self.setEditMode(false);\n                        }\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                    // set on top of the polygon\n                    markers.setOnTop();\n                    editMarkers.setOnTop();\n                }\n                this._editMode = true;\n            } else {\n                if (this._markers != null) {\n                    this._markers.remove();\n                    this._editMarkers.remove();\n                    this._markers = null;\n                    this._editMarkers = null;\n                    this._globeClickhandler.destroy();\n                }\n                this._editMode = false;\n            }\n        }\n\n        _.PolylinePrimitive.prototype.setEditable = function () {\n\n            if (this.setEditMode) {\n                return;\n            }\n\n            var polyline = this;\n            polyline.isPolygon = false;\n            polyline.asynchronous = false;\n\n            drawHelper.registerEditableShape(polyline);\n\n            polyline.setEditMode = setEditMode;\n\n            var originalWidth = this.width;\n\n            polyline.setHighlighted = function (highlighted) {\n                // disable if already in edit mode\n                if (this._editMode === true) {\n                    return;\n                }\n                if (highlighted) {\n                    drawHelper.setHighlighted(this);\n                    this.setWidth(originalWidth * 2);\n                } else {\n                    this.setWidth(originalWidth);\n                }\n            };\n\n            polyline.getExtent = function () {\n                return Cesium.Extent.fromCartographicArray(ellipsoid.cartesianArrayToCartographicArray(this.positions));\n            };\n\n            enhanceWithListeners(polyline);\n\n            polyline.setEditMode(false);\n        };\n\n        _.PolygonPrimitive.prototype.setEditable = function () {\n\n            var polygon = this;\n            polygon.asynchronous = false;\n\n            var scene = drawHelper._scene;\n\n            drawHelper.registerEditableShape(polygon);\n\n            polygon.setEditMode = setEditMode;\n\n            polygon.setHighlighted = setHighlighted;\n\n            enhanceWithListeners(polygon);\n\n            polygon.setEditMode(false);\n        };\n\n        _.ExtentPrimitive.prototype.setEditable = function () {\n\n            if (this.setEditMode) {\n                return;\n            }\n\n            var extent = this;\n            var scene = drawHelper._scene;\n\n            drawHelper.registerEditableShape(extent);\n            extent.asynchronous = false;\n\n            extent.setEditMode = function (editMode) {\n                // if no change\n                if (this._editMode == editMode) {\n                    return;\n                }\n                drawHelper.disableAllHighlights();\n                // display markers\n                if (editMode) {\n                    // make sure all other shapes are not in edit mode before starting the editing of this shape\n                    drawHelper.setEdited(this);\n                    // create the markers and handlers for the editing\n                    if (this._markers == null) {\n                        var onEdited = function onEdited() {\n                            extent.executeListeners({ name: 'onEdited', extent: extent.extent });\n                        };\n\n                        var thisDragBillboard = this.dragBillboard ? this.dragBillboard : dragBillboard;\n                        var thisDragHalfBillboard = this.dragHalfBillboard ? this.dragHalfBillboard : dragBillboard;\n\n                        var markers = new _.BillboardGroup(drawHelper, thisDragHalfBillboard);\n\n                        var handleMarkerChanges = {\n                            dragHandlers: {\n                                onDrag: function onDrag(index, position) {\n                                    var corner = markers.getBillboard((index + 2) % 4).position;\n                                    extent.setExtent(getExtent(ellipsoid.cartesianToCartographic(corner), ellipsoid.cartesianToCartographic(position)));\n                                    markers.updateBillboardsPositions(getExtentCorners(extent.extent));\n                                },\n                                onDragEnd: function onDragEnd(index, position) {\n                                    onEdited();\n                                }\n                            },\n                            tooltip: function tooltip() {\n                                return \"Drag to change the corners of this extent\";\n                            }\n                        };\n                        markers.addBillboards(getExtentCorners(extent.extent), handleMarkerChanges);\n                        this._markers = markers;\n                        // add a handler for clicking in the globe\n                        this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                        this._globeClickhandler.setInputAction(function (movement) {\n                            var pickedObject = scene.pick(movement.position);\n                            // disable edit if pickedobject is different or not an object\n                            try {\n                                if (!(pickedObject && !pickedObject.isDestroyed() && pickedObject.primitive)) {\n                                    extent.setEditMode(false);\n                                }\n                            } catch (e) {\n                                extent.setEditMode(false);\n                            }\n                        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                        // set on top of the polygon\n                        markers.setOnTop();\n                    }\n                    this._editMode = true;\n                } else {\n                    if (this._markers != null) {\n                        this._markers.remove();\n                        this._markers = null;\n                        this._globeClickhandler.destroy();\n                    }\n                    this._editMode = false;\n                }\n            };\n\n            extent.setHighlighted = setHighlighted;\n\n            enhanceWithListeners(extent);\n\n            extent.setEditMode(false);\n        };\n\n        _.EllipsePrimitive.prototype.setEditable = function () {\n\n            if (this.setEditMode) {\n                return;\n            }\n\n            var ellipse = this;\n            var scene = drawHelper._scene;\n\n            ellipse.asynchronous = false;\n\n            drawHelper.registerEditableShape(ellipse);\n\n            ellipse.setEditMode = function (editMode) {\n                // if no change\n                if (this._editMode == editMode) {\n                    return;\n                }\n                drawHelper.disableAllHighlights();\n                // display markers\n                if (editMode) {\n                    // make sure all other shapes are not in edit mode before starting the editing of this shape\n                    drawHelper.setEdited(this);\n                    var _self = this;\n                    // create the markers and handlers for the editing\n                    if (this._markers == null) {\n                        var getMarkerPositions = function getMarkerPositions() {\n                            return Cesium.Shapes.computeEllipseBoundary(ellipsoid, ellipse.getCenter(), ellipse.getSemiMajorAxis(), ellipse.getSemiMinorAxis(), ellipse.getRotation() + Math.PI / 2, Math.PI / 2.0).splice(0, 4);\n                        };\n\n                        var onEdited = function onEdited() {\n                            ellipse.executeListeners({\n                                name: 'onEdited',\n                                center: ellipse.getCenter(),\n                                semiMajorAxis: ellipse.getSemiMajorAxis(),\n                                semiMinorAxis: ellipse.getSemiMinorAxis(),\n                                rotation: 0\n                            });\n                        };\n\n                        var thisDragBillboard = this.dragBillboard ? this.dragBillboard : dragBillboard;\n\n                        var markers = new _.BillboardGroup(drawHelper, thisDragBillboard);\n\n                        var handleMarkerChanges = {\n                            dragHandlers: {\n                                onDrag: function onDrag(index, position) {\n                                    var distance = Cesium.Cartesian3.distance(ellipse.getCenter(), position);\n                                    if (index % 2 == 0) {\n                                        ellipse.setSemiMajorAxis(distance);\n                                    } else {\n                                        ellipse.setSemiMinorAxis(distance);\n                                    }\n                                    markers.updateBillboardsPositions(getMarkerPositions());\n                                },\n                                onDragEnd: function onDragEnd(index, position) {\n                                    onEdited();\n                                }\n                            },\n                            tooltip: function tooltip() {\n                                return \"Drag to change the excentricity and radius\";\n                            }\n                        };\n                        markers.addBillboards(getMarkerPositions(), handleMarkerChanges);\n                        this._markers = markers;\n                        // add a handler for clicking in the globe\n                        this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                        this._globeClickhandler.setInputAction(function (movement) {\n                            var pickedObject = scene.pick(movement.position);\n                            if (!(pickedObject && pickedObject.primitive)) {\n                                _self.setEditMode(false);\n                            }\n                        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                        // set on top of the polygon\n                        markers.setOnTop();\n                    }\n                    this._editMode = true;\n                } else {\n                    if (this._markers != null) {\n                        this._markers.remove();\n                        this._markers = null;\n                        this._globeClickhandler.destroy();\n                    }\n                    this._editMode = false;\n                }\n            };\n\n            ellipse.setHighlighted = setHighlighted;\n\n            enhanceWithListeners(ellipse);\n\n            ellipse.setEditMode(false);\n        };\n\n        _.CirclePrimitive.prototype.getCircleCartesianCoordinates = function (granularity) {\n            var geometry = Cesium.CircleOutlineGeometry.createGeometry(new Cesium.CircleOutlineGeometry({\n                ellipsoid: ellipsoid,\n                center: this.getCenter(),\n                radius: this.getRadius(),\n                granularity: granularity\n            }));\n            var count = 0,\n                value,\n                values = [];\n            for (; count < geometry.attributes.position.values.length; count += 3) {\n                value = geometry.attributes.position.values;\n                values.push(new Cesium.Cartesian3(value[count], value[count + 1], value[count + 2]));\n            }\n            return values;\n        };\n\n        _.CirclePrimitive.prototype.setEditable = function () {\n\n            if (this.setEditMode) {\n                return;\n            }\n\n            var circle = this;\n            var scene = drawHelper._scene;\n\n            circle.asynchronous = false;\n\n            drawHelper.registerEditableShape(circle);\n\n            circle.setEditMode = function (editMode) {\n                // if no change\n                if (this._editMode == editMode) {\n                    return;\n                }\n                drawHelper.disableAllHighlights();\n                // display markers\n                if (editMode) {\n                    // make sure all other shapes are not in edit mode before starting the editing of this shape\n                    drawHelper.setEdited(this);\n                    var _self = this;\n                    // create the markers and handlers for the editing\n                    if (this._markers == null) {\n                        var getMarkerPositions = function getMarkerPositions() {\n                            // return _self.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO);\n                            return _self.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO);\n                        };\n\n                        var onEdited = function onEdited() {\n                            circle.executeListeners({\n                                name: 'onEdited',\n                                center: circle.getCenter(),\n                                radius: circle.getRadius()\n                            });\n                        };\n\n                        var thisDragBillboard = this.dragBillboard ? this.dragBillboard : dragBillboard;\n\n                        var markers = new _.BillboardGroup(drawHelper, thisDragBillboard);\n\n                        var handleMarkerChanges = {\n                            dragHandlers: {\n                                onDrag: function onDrag(index, position) {\n                                    circle.setRadius(Cesium.Cartesian3.distance(circle.getCenter(), position));\n                                    markers.updateBillboardsPositions(getMarkerPositions());\n                                },\n                                onDragEnd: function onDragEnd(index, position) {\n                                    onEdited();\n                                }\n                            },\n                            tooltip: function tooltip() {\n                                return \"Drag to change the radius\";\n                            }\n                        };\n                        markers.addBillboards(getMarkerPositions(), handleMarkerChanges);\n                        this._markers = markers;\n                        // add a handler for clicking in the globe\n                        this._globeClickhandler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\n                        this._globeClickhandler.setInputAction(function (movement) {\n                            var pickedObject = scene.pick(movement.position);\n                            if (!(pickedObject && pickedObject.primitive)) {\n                                _self.setEditMode(false);\n                            }\n                        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n                        // set on top of the polygon\n                        markers.setOnTop();\n                    }\n                    this._editMode = true;\n                } else {\n                    if (this._markers != null) {\n                        this._markers.remove();\n                        this._markers = null;\n                        this._globeClickhandler.destroy();\n                    }\n                    this._editMode = false;\n                }\n            };\n\n            circle.setHighlighted = setHighlighted;\n\n            enhanceWithListeners(circle);\n\n            circle.setEditMode(false);\n        };\n    };\n\n    _.DrawHelperWidget = function () {\n\n        // constructor\n        function _(drawHelper, options) {\n\n            // container must be specified\n            if (!Cesium.defined(options.container)) {\n                throw new Cesium.DeveloperError('Container is required');\n            }\n\n            var drawOptions = {\n                // markerIcon: \"./img/glyphicons_242_google_maps.png\",\n                // polylineIcon: \"./img/glyphicons_097_vector_path_line.png\",\n                // polygonIcon: \"./img/glyphicons_096_vector_path_polygon.png\",\n                // circleIcon: \"./img/glyphicons_095_vector_path_circle.png\",\n                // extentIcon: \"./img/glyphicons_094_vector_path_square.png\",\n                // clearIcon: \"./img/glyphicons_067_cleaning.png\",\n                markerIcon: \" marker\",\n                polylineIcon: \" polyline\",\n                polygonIcon: \" polygon\",\n                circleIcon: \" circle\",\n                extentIcon: \" extent\",\n                clearIcon: \" clear\",\n                polylineDrawingOptions: defaultPolylineOptions,\n                polygonDrawingOptions: defaultPolygonOptions,\n                extentDrawingOptions: defaultExtentOptions,\n                circleDrawingOptions: defaultCircleOptions,\n                strategy: {\n                    pickStrategy: options.pickStrategy ? options.pickStrategy : defaultPickStrategy\n                }\n            };\n\n            fillOptions(options, drawOptions);\n\n            var _self = this;\n\n            var toolbar = document.createElement('DIV');\n            toolbar.className = \"toolbar\";\n            options.container.appendChild(toolbar);\n\n            function addIcon(id, url, title, callback) {\n                var div = document.createElement('DIV');\n                div.className = 'button' + url;\n                div.title = title;\n                toolbar.appendChild(div);\n                div.onclick = callback;\n                // var span = document.createElement('SPAN');\n                // div.appendChild(span);\n                // var image = document.createElement('IMG');\n                // image.src = url;\n                // span.appendChild(image);\n                return div;\n            }\n\n            var scene = drawHelper._scene;\n            // console.log(options.buttons)\n\n            options.buttons.indexOf(\"marker\") !== -1 && addIcon('marker', options.markerIcon, 'Click to start drawing a 2D marker', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'markerClick'\n                });\n\n                drawHelper.startDrawingMarker({\n                    callback: function callback(position) {\n                        _self.executeListeners({ name: 'markerCreated', position: position });\n                    },\n                    strategy: options.strategy\n                });\n            });\n\n            options.buttons.indexOf(\"polyline\") !== -1 && addIcon('polyline', options.polylineIcon, 'Click to start drawing a 2D polyline', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'polylineClick'\n                });\n\n                drawHelper.startDrawingPolyline({\n                    callback: function callback(positions) {\n                        _self.executeListeners({ name: 'polylineCreated', positions: positions });\n                    },\n                    strategy: options.strategy\n                });\n            });\n\n            options.buttons.indexOf(\"polygon\") !== -1 && addIcon('polygon', options.polygonIcon, 'Click to start drawing a 2D polygon', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'polygonClick'\n                });\n\n                drawHelper.startDrawingPolygon({\n                    callback: function callback(positions) {\n                        _self.executeListeners({ name: 'polygonCreated', positions: positions });\n                    },\n                    strategy: options.strategy\n                });\n            });\n\n            options.buttons.indexOf(\"extent\") !== -1 && addIcon('extent', options.extentIcon, 'Click to start drawing an Extent', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'extentClick'\n                });\n\n                drawHelper.startDrawingExtent({\n                    callback: function callback(extent) {\n                        _self.executeListeners({ name: 'extentCreated', extent: extent });\n                    },\n                    strategy: options.strategy\n                });\n            });\n\n            options.buttons.indexOf(\"circle\") !== -1 && addIcon('circle', options.circleIcon, 'Click to start drawing a Circle', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'circleClick'\n                });\n\n                drawHelper.startDrawingCircle({\n                    callback: function callback(center, radius) {\n                        _self.executeListeners({ name: 'circleCreated', center: center, radius: radius });\n                    },\n                    strategy: options.strategy\n                });\n            });\n\n            // add a clear button at the end\n            // add a divider first\n            var div = document.createElement('DIV');\n            div.className = 'divider';\n            toolbar.appendChild(div);\n\n            options.buttons.indexOf(\"clear\") !== -1 && addIcon('clear', options.clearIcon, 'Remove all primitives', function () {\n                typeof options.clickCallback === 'function' && options.clickCallback({\n                    name: 'clearClick'\n                });\n\n                scene.primitives.removeAll();\n            });\n\n            enhanceWithListeners(this);\n        }\n\n        return _;\n    }();\n\n    /**\r\n     * 新增工具栏点击回调\r\n     * @param container\r\n     * @param options\r\n     * @param {function(event)} options.clickCallback - event.name包括${toolbarName}Click\r\n     * @returns {_|*}\r\n     */\n    _.prototype.addToolbar = function (container, options) {\n        options = copyOptions(options, { container: container });\n        return new _.DrawHelperWidget(this, options);\n    };\n\n    function getExtent(mn, mx) {\n        var e = new Cesium.Rectangle();\n\n        // Re-order so west < east and south < north\n        e.west = Math.min(mn.longitude, mx.longitude);\n        e.east = Math.max(mn.longitude, mx.longitude);\n        e.south = Math.min(mn.latitude, mx.latitude);\n        e.north = Math.max(mn.latitude, mx.latitude);\n\n        // Check for approx equal (shouldn't require abs due to re-order)\n        var epsilon = Cesium.Math.EPSILON7;\n\n        if (e.east - e.west < epsilon) {\n            e.east += epsilon * 2.0;\n        }\n\n        if (e.north - e.south < epsilon) {\n            e.north += epsilon * 2.0;\n        }\n\n        return e;\n    };\n\n    function createTooltip(frameDiv) {\n\n        var tooltip = function tooltip(frameDiv) {\n\n            var div = document.createElement('DIV');\n            div.className = \"twipsy right\";\n\n            var arrow = document.createElement('DIV');\n            arrow.className = \"twipsy-arrow\";\n            div.appendChild(arrow);\n\n            var title = document.createElement('DIV');\n            title.className = \"twipsy-inner\";\n\n            div.appendChild(title);\n\n            this._div = div;\n            this._title = title;\n\n            // add to frame div and display coordinates\n            frameDiv.appendChild(div);\n            this.addEvent();\n            this.setVisible(false);\n        };\n\n        tooltip.prototype.setVisible = function (visible) {\n            this._div.style.display = visible ? 'block' : 'none';\n        };\n\n        tooltip.prototype.showAt = function (position, message) {\n            if (position && message) {\n                this.setVisible(true);\n                this._title.innerHTML = message;\n                // this._div.style.left = position.x + 10 + \"px\";\n                // this._div.style.top = (position.y - this._div.clientHeight / 2) + \"px\";\n            }\n        };\n\n        tooltip.prototype.show = function (message) {\n            if (message) {\n                this.setVisible(true);\n                this._title.innerHTML = message;\n            }\n        };\n\n        /**\r\n         * 解决拖动到tip上时宕机的问题\r\n         */\n        tooltip.prototype.addEvent = function () {\n            var me = this;\n            var count = 0;\n            document.body.addEventListener(\"mousemove\", function (ev) {\n                if (me._div.style.display === 'block' && (count = count++ % 3) === 0) {\n                    me._div.style.left = ev.offsetX + 20 + \"px\";\n                    me._div.style.top = ev.offsetY - me._div.clientHeight / 2 + \"px\";\n                }\n            });\n        };\n\n        return new tooltip(frameDiv);\n    }\n\n    function getDisplayLatLngString(cartographic, precision) {\n        return cartographic.longitude.toFixed(precision || 3) + \", \" + cartographic.latitude.toFixed(precision || 3);\n    }\n\n    function clone(from, to) {\n        if (from == null || (typeof from === 'undefined' ? 'undefined' : _typeof(from)) != \"object\") return from;\n        if (from.constructor != Object && from.constructor != Array) return from;\n        if (from.constructor == Date || from.constructor == RegExp || from.constructor == Function || from.constructor == String || from.constructor == Number || from.constructor == Boolean) return new from.constructor(from);\n\n        to = to || new from.constructor();\n\n        for (var name in from) {\n            to[name] = typeof to[name] == \"undefined\" ? clone(from[name], null) : to[name];\n        }\n\n        return to;\n    }\n\n    function fillOptions(options, defaultOptions) {\n        options = options || {};\n        var option;\n        for (option in defaultOptions) {\n            if (options[option] === undefined) {\n                options[option] = clone(defaultOptions[option]);\n            }\n        }\n    }\n\n    // shallow copy\n    function copyOptions(options, defaultOptions) {\n        var newOptions = clone(options),\n            option;\n        for (option in defaultOptions) {\n            if (newOptions[option] === undefined) {\n                newOptions[option] = clone(defaultOptions[option]);\n            }\n        }\n        return newOptions;\n    }\n\n    function extendOptions(options, defaultOptions) {\n        var newOptions = clone(options),\n            option;\n        for (option in defaultOptions) {\n            newOptions[option] = clone(defaultOptions[option]);\n        }\n        return newOptions;\n    }\n\n    function setListener(primitive, type, callback) {\n        primitive[type] = callback;\n    }\n\n    function removeListener(primitive, type) {\n        delete primitive[type];\n    }\n\n    function enhanceWithListeners(element) {\n\n        element._listeners = {};\n\n        element.addListener = function (name, callback) {\n            this._listeners[name] = this._listeners[name] || [];\n            this._listeners[name].push(callback);\n            return this._listeners[name].length;\n        };\n\n        element.executeListeners = function (event, defaultCallback) {\n            if (this._listeners[event.name] && this._listeners[event.name].length > 0) {\n                var index = 0;\n                for (; index < this._listeners[event.name].length; index++) {\n                    this._listeners[event.name][index](event);\n                }\n            } else {\n                if (defaultCallback) {\n                    defaultCallback(event);\n                }\n            }\n        };\n    }\n\n    /**\r\n     * 获取当前点位的近地点位\r\n     * @param {Cesium.Cartesian3} cesium3\r\n     * @returns {Cesium.Cartesian3}\r\n     */\n    function getCesiumHightZero(cesium3) {\n        var fromCartesian = Cesium.Cartographic.fromCartesian(cesium3);\n        return Cesium.Cartesian3.fromRadians(fromCartesian.longitude, fromCartesian.latitude, 0);\n    }\n\n    return _;\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(42)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyLmpzPzc0ZDIiXSwibmFtZXMiOlsid2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwid2luZG93IiwiQ2VzaXVtIiwiZWxsaXBzb2lkIiwiRWxsaXBzb2lkIiwiV0dTODQiLCJkZWZhdWx0UGlja1N0cmF0ZWd5IiwicG9zaXRpb24iLCJ2aWV3ZXIiLCJzY2VuZSIsImNhbWVyYSIsInBpY2tFbGxpcHNvaWQiLCJfIiwiY2VzaXVtV2lkZ2V0IiwiX3ZpZXdlciIsIl9zY2VuZSIsIl90b29sdGlwIiwiY3JlYXRlVG9vbHRpcCIsImNvbnRhaW5lciIsIl9zdXJmYWNlcyIsImRlZmluZWQiLCJDb250ZXh0TGltaXRzIiwiX21heGltdW1BbGlhc2VkTGluZVdpZHRoIiwiaW5pdGlhbGlzZUhhbmRsZXJzIiwiZW5oYW5jZVByaW1pdGl2ZXMiLCJlbmhhbmNlV2l0aExpc3RlbmVycyIsInByb3RvdHlwZSIsIl9zZWxmIiwiaGFuZGxlciIsIlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyIiwiY2FudmFzIiwiY2FsbFByaW1pdGl2ZUNhbGxiYWNrIiwibmFtZSIsIl9oYW5kbGVyc011dGVkIiwicGlja2VkT2JqZWN0IiwicGljayIsInByaW1pdGl2ZSIsImlkIiwiY29uc3RydWN0b3IiLCJ0b1N0cmluZyIsIm1hdGNoIiwic2V0SW5wdXRBY3Rpb24iLCJtb3ZlbWVudCIsIlNjcmVlblNwYWNlRXZlbnRUeXBlIiwiTEVGVF9DTElDSyIsIkxFRlRfRE9VQkxFX0NMSUNLIiwibW91c2VPdXRPYmplY3QiLCJtYXJrUG9zaXRpb24iLCJ4IiwiZW5kUG9zaXRpb24iLCJ5IiwiaXNEZXN0cm95ZWQiLCJtb3VzZU91dCIsIm1vdXNlTW92ZSIsIk1PVVNFX01PVkUiLCJMRUZUX1VQIiwiTEVGVF9ET1dOIiwic2V0TGlzdGVuZXIiLCJ0eXBlIiwiY2FsbGJhY2siLCJtdXRlSGFuZGxlcnMiLCJtdXRlZCIsInJlZ2lzdGVyRWRpdGFibGVTaGFwZSIsInN1cmZhY2UiLCJzZXRIaWdobGlnaHRlZCIsIl9lZGl0TW9kZSIsInNob3dBdCIsInNldFZpc2libGUiLCJzZXRFZGl0TW9kZSIsInN0YXJ0RHJhd2luZyIsImNsZWFuVXAiLCJkaXNhYmxlQWxsRWRpdE1vZGUiLCJlZGl0Q2xlYW5VcCIsInN0b3BEcmF3aW5nIiwiZGlzYWJsZUFsbEhpZ2hsaWdodHMiLCJ1bmRlZmluZWQiLCJfaGlnaGxpZ2h0ZWRTdXJmYWNlIiwic2V0RWRpdGVkIiwiX2VkaXRlZFN1cmZhY2UiLCJtYXRlcmlhbCIsIk1hdGVyaWFsIiwiZnJvbVR5cGUiLCJDb2xvclR5cGUiLCJ1bmlmb3JtcyIsImNvbG9yIiwiQ29sb3IiLCJkZWZhdWx0U2hhcGVPcHRpb25zIiwidGV4dHVyZVJvdGF0aW9uQW5nbGUiLCJoZWlnaHQiLCJhc3luY2hyb25vdXMiLCJzaG93IiwiZGVidWdTaG93Qm91bmRpbmdWb2x1bWUiLCJzdHJhdGVneSIsInBpY2tTdHJhdGVneSIsImRlZmF1bHRTdXJmYWNlT3B0aW9ucyIsImNvcHlPcHRpb25zIiwiYXBwZWFyYW5jZSIsIkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlIiwiYWJvdmVHcm91bmQiLCJncmFudWxhcml0eSIsIk1hdGgiLCJQSSIsImRlZmF1bHRQb2x5Z29uT3B0aW9ucyIsImRlZmF1bHRFeHRlbnRPcHRpb25zIiwiZGVmYXVsdENpcmNsZU9wdGlvbnMiLCJkZWZhdWx0RWxsaXBzZU9wdGlvbnMiLCJyb3RhdGlvbiIsImRlZmF1bHRQb2x5bGluZU9wdGlvbnMiLCJ3aWR0aCIsImdlb2Rlc2ljIiwiUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UiLCJDaGFuZ2VhYmxlUHJpbWl0aXZlIiwiaW5pdGlhbGlzZU9wdGlvbnMiLCJvcHRpb25zIiwiZmlsbE9wdGlvbnMiLCJfZWxsaXBzb2lkIiwiX2dyYW51bGFyaXR5IiwiX2hlaWdodCIsIl90ZXh0dXJlUm90YXRpb25BbmdsZSIsIl9pZCIsIl9jcmVhdGVQcmltaXRpdmUiLCJfcHJpbWl0aXZlIiwiX291dGxpbmVQb2x5Z29uIiwic2V0QXR0cmlidXRlIiwidmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJ1cGRhdGUiLCJjb250ZXh0IiwiZnJhbWVTdGF0ZSIsImNvbW1hbmRMaXN0IiwiRGV2ZWxvcGVyRXJyb3IiLCJnZW9tZXRyeSIsImdldEdlb21ldHJ5IiwiZGVzdHJveSIsIm1lIiwiUHJpbWl0aXZlIiwiZ2VvbWV0cnlJbnN0YW5jZXMiLCJHZW9tZXRyeUluc3RhbmNlIiwicGlja1ByaW1pdGl2ZSIsInN0cm9rZUNvbG9yIiwiZ2V0T3V0bGluZUdlb21ldHJ5IiwiYXR0cmlidXRlcyIsIkNvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSIsImZyb21Db2xvciIsIlBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlIiwiZmxhdCIsInJlbmRlclN0YXRlIiwiZGVwdGhUZXN0IiwiZW5hYmxlZCIsImxpbmVXaWR0aCIsIm1pbiIsInN0cm9rZVdpZHRoIiwiZGVzdHJveU9iamVjdCIsInNldFN0cm9rZVN0eWxlIiwiZXF1YWxzIiwiRXh0ZW50UHJpbWl0aXZlIiwiZXh0ZW50Iiwic2V0RXh0ZW50IiwiZ2V0RXh0ZW50IiwiUmVjdGFuZ2xlR2VvbWV0cnkiLCJyZWN0YW5nbGUiLCJ2ZXJ0ZXhGb3JtYXQiLCJWRVJURVhfRk9STUFUIiwic3RSb3RhdGlvbiIsIlJlY3RhbmdsZU91dGxpbmVHZW9tZXRyeSIsIlBvbHlnb25QcmltaXRpdmUiLCJpc1BvbHlnb24iLCJzZXRQb3NpdGlvbnMiLCJwb3NpdGlvbnMiLCJnZXRQb3NpdGlvbnMiLCJsZW5ndGgiLCJQb2x5Z29uR2VvbWV0cnkiLCJmcm9tUG9zaXRpb25zIiwiUG9seWdvbk91dGxpbmVHZW9tZXRyeSIsIkNpcmNsZVByaW1pdGl2ZSIsImNlbnRlciIsInJhZGl1cyIsInNldFJhZGl1cyIsInNldENlbnRlciIsIm1heCIsImdldENlbnRlciIsImdldFJhZGl1cyIsIkNpcmNsZUdlb21ldHJ5IiwiQ2lyY2xlT3V0bGluZUdlb21ldHJ5IiwiRWxsaXBzZVByaW1pdGl2ZSIsInNlbWlNYWpvckF4aXMiLCJzZW1pTWlub3JBeGlzIiwic2V0U2VtaU1ham9yQXhpcyIsImdldFNlbWlNaW5vckF4aXMiLCJzZXRTZW1pTWlub3JBeGlzIiwiZ2V0U2VtaU1ham9yQXhpcyIsInNldFJvdGF0aW9uIiwiZ2V0Um90YXRpb24iLCJFbGxpcHNlR2VvbWV0cnkiLCJFbGxpcHNlT3V0bGluZUdlb21ldHJ5IiwiUG9seWxpbmVQcmltaXRpdmUiLCJzZXRXaWR0aCIsInNldEdlb2Rlc2ljIiwiZ2V0V2lkdGgiLCJnZXRHZW9kZXNpYyIsIlBvbHlsaW5lR2VvbWV0cnkiLCJkZWZhdWx0QmlsbGJvYXJkIiwiaWNvblVybCIsInNoaWZ0WCIsInNoaWZ0WSIsImRyYWdCaWxsYm9hcmQiLCJkcmFnSGFsZkJpbGxib2FyZCIsImNyZWF0ZUJpbGxib2FyZEdyb3VwIiwicG9pbnRzIiwiY2FsbGJhY2tzIiwibWFya2VycyIsIkJpbGxib2FyZEdyb3VwIiwiYWRkQmlsbGJvYXJkcyIsImRyYXdIZWxwZXIiLCJfZHJhd0hlbHBlciIsIl9vcHRpb25zIiwiYiIsIkJpbGxib2FyZENvbGxlY3Rpb24iLCJwcmltaXRpdmVzIiwiYWRkIiwiX2JpbGxib2FyZHMiLCJfb3JkZXJlZEJpbGxib2FyZHMiLCJjcmVhdGVCaWxsYm9hcmQiLCJiaWxsYm9hcmQiLCJwaXhlbE9mZnNldCIsIkNhcnRlc2lhbjIiLCJleWVPZmZzZXQiLCJDYXJ0ZXNpYW4zIiwiaG9yaXpvbnRhbE9yaWdpbiIsIkhvcml6b250YWxPcmlnaW4iLCJDRU5URVIiLCJ2ZXJ0aWNhbE9yaWdpbiIsIlZlcnRpY2FsT3JpZ2luIiwic2NhbGUiLCJpbWFnZSIsImVuYWJsZVJvdGF0aW9uIiwiZW5hYmxlIiwic2NyZWVuU3BhY2VDYW1lcmFDb250cm9sbGVyIiwiZW5hYmxlUm90YXRlIiwiZ2V0SW5kZXgiLCJpIiwiSSIsImRyYWdIYW5kbGVycyIsIm9uRHJhZyIsIm9uRHJhZ0VuZCIsImNhcnRlc2lhbiIsIm9uRHJhZ1N0YXJ0Iiwib25Eb3VibGVDbGljayIsIm9uQ2xpY2siLCJ0b29sdGlwIiwiaW5zZXJ0QmlsbGJvYXJkIiwiaW5kZXgiLCJzcGxpY2UiLCJhZGRCaWxsYm9hcmQiLCJwdXNoIiwidXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyIsImdldEJpbGxib2FyZCIsImNvdW50QmlsbGJvYXJkcyIsInJlbW92ZUJpbGxib2FyZCIsInJlbW92ZSIsInJlbW92ZUFsbCIsInNldE9uVG9wIiwicmFpc2VUb1RvcCIsInN0YXJ0RHJhd2luZ01hcmtlciIsIm1vdXNlSGFuZGxlciIsImdldERpc3BsYXlMYXRMbmdTdHJpbmciLCJjYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyIsInN0YXJ0RHJhd2luZ1BvbHlnb24iLCJzdGFydERyYXdpbmdQb2x5c2hhcGUiLCJzdGFydERyYXdpbmdQb2x5bGluZSIsInBvbHkiLCJtaW5Qb2ludHMiLCJnZXRDZXNpdW1IaWdodFplcm8iLCJjbG9uZSIsInBvcCIsIkVQU0lMT043IiwiZ2V0RXh0ZW50Q29ybmVycyIsImNhcnRvZ3JhcGhpY0FycmF5VG9DYXJ0ZXNpYW5BcnJheSIsIlJlY3RhbmdsZSIsIm5vcnRod2VzdCIsIm5vcnRoZWFzdCIsInNvdXRoZWFzdCIsInNvdXRod2VzdCIsInN0YXJ0RHJhd2luZ0V4dGVudCIsImZpcnN0UG9pbnQiLCJ1cGRhdGVFeHRlbnQiLCJjb3JuZXJzIiwic3RhcnREcmF3aW5nQ2lyY2xlIiwiY2lyY2xlIiwicGlja1Bvc2l0aW9uIiwiZGlzdGFuY2UiLCJCaWxsYm9hcmQiLCJzZXRFZGl0YWJsZSIsIl9lZGl0YWJsZSIsImV4ZWN1dGVMaXN0ZW5lcnMiLCJFbnRpdHkiLCJlZGl0YWJsZSIsInJlbW92ZUxpc3RlbmVyIiwibW9kZVR5cGUiLCJoaWdobGlnaHRlZCIsIl9oaWdobGlnaHRlZCIsIl9zdHJva2VDb2xvciIsImZyb21Dc3NDb2xvclN0cmluZyIsImVkaXRNb2RlIiwiX21hcmtlcnMiLCJ1cGRhdGVIYWxmTWFya2VycyIsImVkaXRJbmRleCIsImVkaXRNYXJrZXJzIiwiY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uIiwib25FZGl0ZWQiLCJjYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbiIsIkVsbGlwc29pZEdlb2Rlc2ljIiwiaW50ZXJwb2xhdGVVc2luZ0ZyYWN0aW9uIiwidGhpc0RyYWdCaWxsYm9hcmQiLCJ0aGlzRHJhZ0hhbGZCaWxsYm9hcmQiLCJoYW5kbGVNYXJrZXJDaGFuZ2VzIiwiaGFsZlBvc2l0aW9ucyIsImhhbmRsZUVkaXRNYXJrZXJDaGFuZ2VzIiwiX2VkaXRNYXJrZXJzIiwiX2dsb2JlQ2xpY2toYW5kbGVyIiwicG9seWxpbmUiLCJvcmlnaW5hbFdpZHRoIiwiRXh0ZW50IiwiZnJvbUNhcnRvZ3JhcGhpY0FycmF5IiwiY2FydGVzaWFuQXJyYXlUb0NhcnRvZ3JhcGhpY0FycmF5IiwicG9seWdvbiIsImNvcm5lciIsImUiLCJlbGxpcHNlIiwiZ2V0TWFya2VyUG9zaXRpb25zIiwiU2hhcGVzIiwiY29tcHV0ZUVsbGlwc2VCb3VuZGFyeSIsImdldENpcmNsZUNhcnRlc2lhbkNvb3JkaW5hdGVzIiwiY3JlYXRlR2VvbWV0cnkiLCJjb3VudCIsInZhbHVlcyIsIlBJX09WRVJfVFdPIiwiRHJhd0hlbHBlcldpZGdldCIsImRyYXdPcHRpb25zIiwibWFya2VySWNvbiIsInBvbHlsaW5lSWNvbiIsInBvbHlnb25JY29uIiwiY2lyY2xlSWNvbiIsImV4dGVudEljb24iLCJjbGVhckljb24iLCJwb2x5bGluZURyYXdpbmdPcHRpb25zIiwicG9seWdvbkRyYXdpbmdPcHRpb25zIiwiZXh0ZW50RHJhd2luZ09wdGlvbnMiLCJjaXJjbGVEcmF3aW5nT3B0aW9ucyIsInRvb2xiYXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImFkZEljb24iLCJ1cmwiLCJ0aXRsZSIsImRpdiIsIm9uY2xpY2siLCJidXR0b25zIiwiaW5kZXhPZiIsImNsaWNrQ2FsbGJhY2siLCJhZGRUb29sYmFyIiwibW4iLCJteCIsIndlc3QiLCJsb25naXR1ZGUiLCJlYXN0Iiwic291dGgiLCJsYXRpdHVkZSIsIm5vcnRoIiwiZXBzaWxvbiIsImZyYW1lRGl2IiwiYXJyb3ciLCJfZGl2IiwiX3RpdGxlIiwiYWRkRXZlbnQiLCJ2aXNpYmxlIiwic3R5bGUiLCJkaXNwbGF5IiwibWVzc2FnZSIsImlubmVySFRNTCIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJsZWZ0Iiwib2Zmc2V0WCIsInRvcCIsIm9mZnNldFkiLCJjbGllbnRIZWlnaHQiLCJjYXJ0b2dyYXBoaWMiLCJwcmVjaXNpb24iLCJ0b0ZpeGVkIiwiZnJvbSIsInRvIiwiT2JqZWN0IiwiQXJyYXkiLCJEYXRlIiwiUmVnRXhwIiwiRnVuY3Rpb24iLCJTdHJpbmciLCJOdW1iZXIiLCJCb29sZWFuIiwiZGVmYXVsdE9wdGlvbnMiLCJvcHRpb24iLCJuZXdPcHRpb25zIiwiZXh0ZW5kT3B0aW9ucyIsImVsZW1lbnQiLCJfbGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJldmVudCIsImRlZmF1bHRDYWxsYmFjayIsImNlc2l1bTMiLCJmcm9tQ2FydGVzaWFuIiwiQ2FydG9ncmFwaGljIiwiZnJvbVJhZGlhbnMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQyxVQUFTQSxnQ0FBVCxDQUEwQ0MsSUFBMUMsRUFBZ0RDLE9BQWhELEVBQXlEO0FBQ3RELFFBQUksOEJBQU9DLE9BQVAsT0FBbUIsUUFBbkIsSUFBK0IsOEJBQU9DLE1BQVAsT0FBa0IsUUFBckQsRUFDSUEsT0FBT0QsT0FBUCxHQUFpQkQsUUFBUUcsbUJBQU9BLENBQUMsQ0FBUixDQUFSLENBQWpCLENBREosS0FFSyxJQUFJLElBQUosRUFDREMsaUNBQXFCLENBQUMsc0JBQUQsQ0FBckIsb0NBQWlDSixPQUFqQztBQUFBO0FBQUE7QUFB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QyxnQkFBZ0IzWixPQUFPNFosWUFBUCxDQUFvQkQsYUFBcEIsQ0FBa0NELE9BQWxDLENBQXBCO0FBQ0EsZUFBTzFaLE9BQU9pTyxVQUFQLENBQWtCNEwsV0FBbEIsQ0FBOEJGLGNBQWMvQyxTQUE1QyxFQUF1RCtDLGNBQWM1QyxRQUFyRSxFQUErRSxDQUEvRSxDQUFQO0FBQ0g7O0FBR0QsV0FBT3JXLENBQVA7QUFDSCxDQWxvRUEsQ0FBRCxDIiwiZmlsZSI6IjQxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdGhvbWFzIG9uIDkvMDEvMTQuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiAoYykgd3d3Lmdlb2NlbnRvLmNvbVxyXG4gKiB3d3cubWV0YWFwcy5jb21cclxuICogPHByZT5cclxuICogICAgICB1cGRhdGU6XHJcbiAqICAgICAgICAgIDIwMTgtOS0xNzpcclxuICogICAgICAgICAgICAgIC0gcGlja1N0cmF0ZWd55bGe5oCn5YW85a655oCnXHJcbiAqICAgICAgICAgICAgICAtIOmAgumFjXN0b3BEcmF3aW5n5Zyo5pyq5byA5aeL5qCH57uY55qE5oOF5Ya1XHJcbiAqICAgICAgICAgIDIwMTktOS0yNDpcclxuICogICAgICAgICAgICAgIC0g5a+55bGe5oCn5bim5pyJbW9kZVR5cGU6YmlsbGJvYXJk55qEZW50aXR55Yqg5YWlc2V0RWRpdGFibGUoYm9vbGVhbinnmoTmlrnms5Us55So5LqO5pS55Y+Y5L2N572uXHJcbiAqIDwvcHJlPlxyXG4gKlxyXG4gKi9cclxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ0Nlc2l1bScpKTtcclxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcclxuICAgICAgICBkZWZpbmUoJ0RyYXdIZWxwZXInLCBbJ0Nlc2l1bSddLCBmYWN0b3J5KTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJvb3QuRHJhd0hlbHBlciA9IGZhY3Rvcnkocm9vdC5DZXNpdW0pO1xyXG4gICAgfVxyXG59KHdpbmRvdywgZnVuY3Rpb24gKENlc2l1bSkge1xyXG4gICAgLy8gc3RhdGljIHZhcmlhYmxlc1xyXG4gICAgdmFyIGVsbGlwc29pZCA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsgQ2VzaXVtLkNhcnRlc2lhbjJ9IHBvc2l0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0Nlc2l1bS5WaWV3ZXJ9IHZpZXdlclxyXG4gICAgICogQHJldHVybiB7Q2VzaXVtLkNhcnRlc2lhbjN9XHJcbiAgICAgKi9cclxuICAgIHZhciBkZWZhdWx0UGlja1N0cmF0ZWd5ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCB2aWV3ZXIpIHtcclxuICAgICAgICByZXR1cm4gdmlld2VyLnNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBjZXNpdW1XaWRnZXRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIF8oY2VzaXVtV2lkZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5fdmlld2VyID0gY2VzaXVtV2lkZ2V0O1xyXG4gICAgICAgIHRoaXMuX3NjZW5lID0gY2VzaXVtV2lkZ2V0LnNjZW5lO1xyXG4gICAgICAgIHRoaXMuX3Rvb2x0aXAgPSBjcmVhdGVUb29sdGlwKGNlc2l1bVdpZGdldC5jb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuX3N1cmZhY2VzID0gW107XHJcbiAgICAgICAgLy/pgILphY1cclxuICAgICAgICAoQ2VzaXVtLmRlZmluZWQoQ2VzaXVtLkNvbnRleHRMaW1pdHMpKSAmJiAoXHJcbiAgICAgICAgICAgIENlc2l1bS5Db250ZXh0TGltaXRzLl9tYXhpbXVtQWxpYXNlZExpbmVXaWR0aCA9IDEwKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXNlSGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbmhhbmNlUHJpbWl0aXZlcygpO1xyXG4gICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLmluaXRpYWxpc2VIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vIHNjZW5lIGV2ZW50c1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxsUHJpbWl0aXZlQ2FsbGJhY2sobmFtZSwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKF9zZWxmLl9oYW5kbGVyc011dGVkID09IHRydWUpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHBpY2tlZE9iamVjdCA9IHNjZW5lLnBpY2socG9zaXRpb24pO1xyXG4gICAgICAgICAgICBpZiAocGlja2VkT2JqZWN0ICYmIHBpY2tlZE9iamVjdC5wcmltaXRpdmUgJiYgcGlja2VkT2JqZWN0LnByaW1pdGl2ZVtuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgcGlja2VkT2JqZWN0LnByaW1pdGl2ZVtuYW1lXShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBpY2tlZE9iamVjdCAmJiBwaWNrZWRPYmplY3QuaWQgJiYgcGlja2VkT2JqZWN0LmlkLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15mdW5jdGlvblxccyooW15cXHMoXSspLylbMV0gPT09IFwiRW50aXR5XCIgJiYgcGlja2VkT2JqZWN0LmlkW25hbWVdKXtcclxuICAgICAgICAgICAgICAgIHBpY2tlZE9iamVjdC5pZFtuYW1lXShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxQcmltaXRpdmVDYWxsYmFjaygnbGVmdENsaWNrJywgbW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcbiAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsUHJpbWl0aXZlQ2FsbGJhY2soJ2xlZnREb3VibGVDbGljaycsIG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfRE9VQkxFX0NMSUNLKTtcclxuICAgICAgICB2YXIgbW91c2VPdXRPYmplY3Q7XHJcbiAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya1Bvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IG1vdmVtZW50LmVuZFBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogbW92ZW1lbnQuZW5kUG9zaXRpb24ueVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3NlbGYuX2hhbmRsZXJzTXV0ZWQgPT0gdHJ1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBpY2tlZE9iamVjdCA9IHNjZW5lLnBpY2sobWFya1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb3VzZU91dE9iamVjdCAmJiAoIXBpY2tlZE9iamVjdCB8fCBtb3VzZU91dE9iamVjdCAhPSBwaWNrZWRPYmplY3QucHJpbWl0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICEobW91c2VPdXRPYmplY3QuaXNEZXN0cm95ZWQgJiYgbW91c2VPdXRPYmplY3QuaXNEZXN0cm95ZWQoKSkgJiYgbW91c2VPdXRPYmplY3QubW91c2VPdXQobWFya1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZU91dE9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocGlja2VkT2JqZWN0ICYmIHBpY2tlZE9iamVjdC5wcmltaXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZWRPYmplY3QgPSBwaWNrZWRPYmplY3QucHJpbWl0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaWNrZWRPYmplY3QubW91c2VPdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VPdXRPYmplY3QgPSBwaWNrZWRPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaWNrZWRPYmplY3QubW91c2VNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tlZE9iamVjdC5tb3VzZU1vdmUobWFya1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFKTtcclxuICAgICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxQcmltaXRpdmVDYWxsYmFjaygnbGVmdFVwJywgbW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9VUCk7XHJcbiAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsUHJpbWl0aXZlQ2FsbGJhY2soJ2xlZnREb3duJywgbW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1dOKTtcclxuICAgIH1cclxuXHJcbiAgICBfLnByb3RvdHlwZS5zZXRMaXN0ZW5lciA9IGZ1bmN0aW9uIChwcmltaXRpdmUsIHR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcHJpbWl0aXZlW3R5cGVdID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUubXV0ZUhhbmRsZXJzID0gZnVuY3Rpb24gKG11dGVkKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlcnNNdXRlZCA9IG11dGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsaW5nIGZvciBhbiBlZGl0YWJsZSBzaGFwZVxyXG4gICAgLy8gc2hhcGUgc2hvdWxkIGltcGxlbWVudCBzZXRFZGl0TW9kZSBhbmQgc2V0SGlnaGxpZ2h0ZWRcclxuICAgIF8ucHJvdG90eXBlLnJlZ2lzdGVyRWRpdGFibGVTaGFwZSA9IGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8gaGFuZGxlcnMgZm9yIGludGVyYWN0aW9uc1xyXG4gICAgICAgIC8vIGhpZ2hsaWdodCBwb2x5Z29uIHdoZW4gbW91c2UgaXMgZW50ZXJpbmdcclxuICAgICAgICBzZXRMaXN0ZW5lcihzdXJmYWNlLCAnbW91c2VNb3ZlJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uuc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmICghc3VyZmFjZS5fZWRpdE1vZGUpIHtcclxuICAgICAgICAgICAgICAgIF9zZWxmLl90b29sdGlwLnNob3dBdChwb3NpdGlvbiwgXCJDbGljayB0byBlZGl0IHRoaXMgc2hhcGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBoaWRlIHRoZSBoaWdobGlnaHRpbmcgd2hlbiBtb3VzZSBpcyBsZWF2aW5nIHRoZSBwb2x5Z29uXHJcbiAgICAgICAgc2V0TGlzdGVuZXIoc3VyZmFjZSwgJ21vdXNlT3V0JywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICBfc2VsZi5fdG9vbHRpcC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXRMaXN0ZW5lcihzdXJmYWNlLCAnbGVmdENsaWNrJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uuc2V0RWRpdE1vZGUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUuc3RhcnREcmF3aW5nID0gZnVuY3Rpb24gKGNsZWFuVXApIHtcclxuICAgICAgICAvLyB1bmRvIGFueSBjdXJyZW50IGVkaXQgb2Ygc2hhcGVzXHJcbiAgICAgICAgdGhpcy5kaXNhYmxlQWxsRWRpdE1vZGUoKTtcclxuICAgICAgICAvLyBjaGVjayBmb3IgY2xlYW5VcCBmaXJzdFxyXG4gICAgICAgIGlmICh0aGlzLmVkaXRDbGVhblVwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdENsZWFuVXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lZGl0Q2xlYW5VcCA9IGNsZWFuVXA7XHJcbiAgICAgICAgdGhpcy5tdXRlSGFuZGxlcnModHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUuc3RvcERyYXdpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIGNsZWFuVXAgZmlyc3RcclxuICAgICAgICBpZiAodGhpcy5lZGl0Q2xlYW5VcCkge1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRDbGVhblVwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdENsZWFuVXAgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm11dGVIYW5kbGVycyhmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBzdXJlIG9ubHkgb25lIHNoYXBlIGlzIGhpZ2hsaWdodGVkIGF0IGEgdGltZVxyXG4gICAgXy5wcm90b3R5cGUuZGlzYWJsZUFsbEhpZ2hsaWdodHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRIaWdobGlnaHRlZCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLnNldEhpZ2hsaWdodGVkID0gZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5faGlnaGxpZ2h0ZWRTdXJmYWNlICYmICF0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UuaXNEZXN0cm95ZWQoKSAmJiB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UgIT0gc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2Uuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9oaWdobGlnaHRlZFN1cmZhY2UgPSBzdXJmYWNlO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLmRpc2FibGVBbGxFZGl0TW9kZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNldEVkaXRlZCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLnNldEVkaXRlZCA9IGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRlZFN1cmZhY2UgJiYgIXRoaXMuX2VkaXRlZFN1cmZhY2UuaXNEZXN0cm95ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lZGl0ZWRTdXJmYWNlLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZWRpdGVkU3VyZmFjZSA9IHN1cmZhY2U7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1hdGVyaWFsID0gQ2VzaXVtLk1hdGVyaWFsLmZyb21UeXBlKENlc2l1bS5NYXRlcmlhbC5Db2xvclR5cGUpO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuY29sb3IgPSBuZXcgQ2VzaXVtLkNvbG9yKDEuMCwgMS4wLCAwLjAsIDAuNSk7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRTaGFwZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgZWxsaXBzb2lkOiBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LFxyXG4gICAgICAgIHRleHR1cmVSb3RhdGlvbkFuZ2xlOiAwLjAsXHJcbiAgICAgICAgaGVpZ2h0OiAwLjAsXHJcbiAgICAgICAgYXN5bmNocm9ub3VzOiB0cnVlLFxyXG4gICAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWU6IGZhbHNlLFxyXG4gICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgIHBpY2tTdHJhdGVneTogZGVmYXVsdFBpY2tTdHJhdGVneVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGVmYXVsdFN1cmZhY2VPcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge1xyXG4gICAgICAgIGFwcGVhcmFuY2U6IG5ldyBDZXNpdW0uRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2Uoe1xyXG4gICAgICAgICAgICBhYm92ZUdyb3VuZDogZmFsc2VcclxuICAgICAgICB9KSxcclxuICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXHJcbiAgICAgICAgZ3JhbnVsYXJpdHk6IE1hdGguUEkgLyAxODAuMCxcclxuICAgICAgICBzdHJhdGVneToge1xyXG4gICAgICAgICAgICBwaWNrU3RyYXRlZ3k6IGRlZmF1bHRQaWNrU3RyYXRlZ3lcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZGVmYXVsdFBvbHlnb25PcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG4gICAgdmFyIGRlZmF1bHRFeHRlbnRPcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG4gICAgdmFyIGRlZmF1bHRDaXJjbGVPcHRpb25zID0gY29weU9wdGlvbnMoZGVmYXVsdFNoYXBlT3B0aW9ucywge30pO1xyXG4gICAgdmFyIGRlZmF1bHRFbGxpcHNlT3B0aW9ucyA9IGNvcHlPcHRpb25zKGRlZmF1bHRTdXJmYWNlT3B0aW9ucywge3JvdGF0aW9uOiAwfSk7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRQb2x5bGluZU9wdGlvbnMgPSBjb3B5T3B0aW9ucyhkZWZhdWx0U2hhcGVPcHRpb25zLCB7XHJcbiAgICAgICAgd2lkdGg6IDUsXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgZ3JhbnVsYXJpdHk6IDEwMDAwLFxyXG4gICAgICAgIGFwcGVhcmFuY2U6IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xyXG4gICAgICAgICAgICBhYm92ZUdyb3VuZDogZmFsc2VcclxuICAgICAgICB9KSxcclxuICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWxcclxuICAgIH0pO1xyXG5cclxuXHJcbi8vICAgIENlc2l1bS5Qb2x5Z29uLnByb3RvdHlwZS5zZXRTdHJva2VTdHlsZSA9IHNldFN0cm9rZVN0eWxlO1xyXG4vL1xyXG4vLyAgICBDZXNpdW0uUG9seWdvbi5wcm90b3R5cGUuZHJhd091dGxpbmUgPSBkcmF3T3V0bGluZTtcclxuLy9cclxuXHJcbiAgICB2YXIgQ2hhbmdlYWJsZVByaW1pdGl2ZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gXygpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmluaXRpYWxpc2VPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICAgIGZpbGxPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZWxsaXBzb2lkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFudWxhcml0eSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlUm90YXRpb25BbmdsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5faWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGZsYWdzIHRvIGluaXRpYXRlIGEgZmlyc3QgZHJhd2luZ1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9wcmltaXRpdmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX291dGxpbmVQb2x5Z29uID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbbmFtZV07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBfLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSwgY29tbWFuZExpc3QpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghQ2VzaXVtLmRlZmluZWQodGhpcy5lbGxpcHNvaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2VzaXVtLkRldmVsb3BlckVycm9yKCd0aGlzLmVsbGlwc29pZCBtdXN0IGJlIGRlZmluZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghQ2VzaXVtLmRlZmluZWQodGhpcy5hcHBlYXJhbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENlc2l1bS5EZXZlbG9wZXJFcnJvcigndGhpcy5tYXRlcmlhbCBtdXN0IGJlIGRlZmluZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdyYW51bGFyaXR5IDwgMC4wKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2VzaXVtLkRldmVsb3BlckVycm9yKCd0aGlzLmdyYW51bGFyaXR5IGFuZCBzY2VuZTJEL3NjZW5lM0Qgb3ZlcnJpZGVzIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaG93KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY3JlYXRlUHJpbWl0aXZlICYmICghQ2VzaXVtLmRlZmluZWQodGhpcy5fcHJpbWl0aXZlKSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIHBvc2l0aW9ucy9oaWVyYXJjaHkgdG8gZHJhd1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fY3JlYXRlUHJpbWl0aXZlIHx8XHJcbiAgICAgICAgICAgICAgICAodGhpcy5fZWxsaXBzb2lkICE9PSB0aGlzLmVsbGlwc29pZCkgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLl9ncmFudWxhcml0eSAhPT0gdGhpcy5ncmFudWxhcml0eSkgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLl9oZWlnaHQgIT09IHRoaXMuaGVpZ2h0KSB8fFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuX3RleHR1cmVSb3RhdGlvbkFuZ2xlICE9PSB0aGlzLnRleHR1cmVSb3RhdGlvbkFuZ2xlKSB8fFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuX2lkICE9PSB0aGlzLmlkKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgICAgICAgICAgIGlmICghZ2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlUHJpbWl0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGxpcHNvaWQgPSB0aGlzLmVsbGlwc29pZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dyYW51bGFyaXR5ID0gdGhpcy5ncmFudWxhcml0eTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGV4dHVyZVJvdGF0aW9uQW5nbGUgPSB0aGlzLnRleHR1cmVSb3RhdGlvbkFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faWQgPSB0aGlzLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3ByaW1pdGl2ZSA9IHRoaXMuX3ByaW1pdGl2ZSAmJiB0aGlzLl9wcmltaXRpdmUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGlja1ByaW1pdGl2ZTogdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IHRoaXMuYXBwZWFyYW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBhc3luY2hyb25vdXM6IHRoaXMuYXN5bmNocm9ub3VzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuX3ByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uR3JvdW5kUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBnZW9tZXRyeUluc3RhbmNlczogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZDogbWUuaWQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBpY2tQcmltaXRpdmU6IG1lXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBjb2xvciA6ICBDZXNpdW0uQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21Db2xvcihDZXNpdW0uQ29sb3IuQkxVRS53aXRoQWxwaGEoMC41KSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKHRoaXMuc3Ryb2tlQ29sb3IpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3V0bGluZVBvbHlnb24gPSB0aGlzLl9vdXRsaW5lUG9seWdvbiAmJiB0aGlzLl9vdXRsaW5lUG9seWdvbi5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJva2VDb2xvciAmJiB0aGlzLmdldE91dGxpbmVHZW9tZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgaGlnaGxpZ2h0aW5nIGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3V0bGluZVBvbHlnb24gPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzOiBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2V0T3V0bGluZUdlb21ldHJ5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKHRoaXMuc3Ryb2tlQ29sb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlOiBuZXcgQ2VzaXVtLlBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJTdGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRoVGVzdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IE1hdGgubWluKHRoaXMuc3Ryb2tlV2lkdGggfHwgNC4wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJpbWl0aXZlID0gdGhpcy5fcHJpbWl0aXZlO1xyXG4gICAgICAgICAgICAvLyBwcmltaXRpdmUuYXBwZWFyYW5jZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIC8vIHByaW1pdGl2ZS5hcHBlYXJhbmNlID0gdGhpcy5hcHBlYXJhbmNlO1xyXG4gICAgICAgICAgICBwcmltaXRpdmUuYXBwZWFyYW5jZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIC8vIHByaW1pdGl2ZS5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS51cGRhdGUoY29udGV4dCwgZnJhbWVTdGF0ZSwgY29tbWFuZExpc3QpO1xyXG4gICAgICAgICAgICAvL2RlYnVnXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbnRleHQpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZyYW1lU3RhdGUpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbW1hbmRMaXN0KVxyXG4gICAgICAgICAgICB0aGlzLl9vdXRsaW5lUG9seWdvbiAmJiB0aGlzLl9vdXRsaW5lUG9seWdvbi51cGRhdGUoY29udGV4dCwgZnJhbWVTdGF0ZSwgY29tbWFuZExpc3QpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ByaW1pdGl2ZSA9IHRoaXMuX3ByaW1pdGl2ZSAmJiB0aGlzLl9wcmltaXRpdmUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ2VzaXVtLmRlc3Ryb3lPYmplY3QodGhpcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuc2V0U3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAoc3Ryb2tlQ29sb3IsIHN0cm9rZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdHJva2VDb2xvciB8fCAhdGhpcy5zdHJva2VDb2xvci5lcXVhbHMoc3Ryb2tlQ29sb3IpIHx8IHRoaXMuc3Ryb2tlV2lkdGggIT0gc3Ryb2tlV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0cm9rZUNvbG9yID0gc3Ryb2tlQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0cm9rZVdpZHRoID0gc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBfLkV4dGVudFByaW1pdGl2ZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gXyhvcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUNlc2l1bS5kZWZpbmVkKG9wdGlvbnMuZXh0ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENlc2l1bS5EZXZlbG9wZXJFcnJvcignRXh0ZW50IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0U3VyZmFjZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlT3B0aW9ucyhvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RXh0ZW50KG9wdGlvbnMuZXh0ZW50KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLnByb3RvdHlwZSA9IG5ldyBDaGFuZ2VhYmxlUHJpbWl0aXZlKCk7XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2V4dGVudCcsIGV4dGVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2V4dGVudCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLmV4dGVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uUmVjdGFuZ2xlR2VvbWV0cnkoe1xyXG4gICAgICAgICAgICAgICAgcmVjdGFuZ2xlOiB0aGlzLmV4dGVudCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5FbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZS5WRVJURVhfRk9STUFULFxyXG4gICAgICAgICAgICAgICAgc3RSb3RhdGlvbjogdGhpcy50ZXh0dXJlUm90YXRpb25BbmdsZSxcclxuICAgICAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWQsXHJcbiAgICAgICAgICAgICAgICBncmFudWxhcml0eTogdGhpcy5ncmFudWxhcml0eVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRPdXRsaW5lR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2VzaXVtLlJlY3RhbmdsZU91dGxpbmVHZW9tZXRyeSh7XHJcbiAgICAgICAgICAgICAgICByZWN0YW5nbGU6IHRoaXMuZXh0ZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF87XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIF8uUG9seWdvblByaW1pdGl2ZSA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF8ob3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRTdXJmYWNlT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpc2VPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pc1BvbHlnb24gPSB0cnVlO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlID0gbmV3IENoYW5nZWFibGVQcmltaXRpdmUoKTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuc2V0UG9zaXRpb25zID0gZnVuY3Rpb24gKHBvc2l0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb25zJywgcG9zaXRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRQb3NpdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgncG9zaXRpb25zJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUNlc2l1bS5kZWZpbmVkKHRoaXMucG9zaXRpb25zKSB8fCB0aGlzLnBvc2l0aW9ucy5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDZXNpdW0uUG9seWdvbkdlb21ldHJ5LmZyb21Qb3NpdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25zOiB0aGlzLnBvc2l0aW9ucyxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5FbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZS5WRVJURVhfRk9STUFULFxyXG4gICAgICAgICAgICAgICAgc3RSb3RhdGlvbjogdGhpcy50ZXh0dXJlUm90YXRpb25BbmdsZSxcclxuICAgICAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWQsXHJcbiAgICAgICAgICAgICAgICBncmFudWxhcml0eTogdGhpcy5ncmFudWxhcml0eVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRPdXRsaW5lR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDZXNpdW0uUG9seWdvbk91dGxpbmVHZW9tZXRyeS5mcm9tUG9zaXRpb25zKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uczogdGhpcy5nZXRQb3NpdGlvbnMoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBfLkNpcmNsZVByaW1pdGl2ZSA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF8ob3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCEoQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5jZW50ZXIpICYmIENlc2l1bS5kZWZpbmVkKG9wdGlvbnMucmFkaXVzKSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ0NlbnRlciBhbmQgcmFkaXVzIGFyZSByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFN1cmZhY2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGlzZU9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFJhZGl1cyhvcHRpb25zLnJhZGl1cyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUgPSBuZXcgQ2hhbmdlYWJsZVByaW1pdGl2ZSgpO1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoY2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjZW50ZXInLCBjZW50ZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLnNldFJhZGl1cyA9IGZ1bmN0aW9uIChyYWRpdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsIE1hdGgubWF4KDAuMSwgcmFkaXVzKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2NlbnRlcicpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdyYWRpdXMnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghKENlc2l1bS5kZWZpbmVkKHRoaXMuY2VudGVyKSAmJiBDZXNpdW0uZGVmaW5lZCh0aGlzLnJhZGl1cykpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2VzaXVtLkNpcmNsZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogdGhpcy5jZW50ZXIsXHJcbiAgICAgICAgICAgICAgICByYWRpdXM6IHRoaXMucmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLkVsbGlwc29pZFN1cmZhY2VBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQsXHJcbiAgICAgICAgICAgICAgICBzdFJvdGF0aW9uOiB0aGlzLnRleHR1cmVSb3RhdGlvbkFuZ2xlLFxyXG4gICAgICAgICAgICAgICAgZWxsaXBzb2lkOiB0aGlzLmVsbGlwc29pZCxcclxuICAgICAgICAgICAgICAgIGdyYW51bGFyaXR5OiB0aGlzLmdyYW51bGFyaXR5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldE91dGxpbmVHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogdGhpcy5nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgICAgIHJhZGl1czogdGhpcy5nZXRSYWRpdXMoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBfLkVsbGlwc2VQcmltaXRpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIF8ob3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCEoQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5jZW50ZXIpICYmIENlc2l1bS5kZWZpbmVkKG9wdGlvbnMuc2VtaU1ham9yQXhpcykgJiYgQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5zZW1pTWlub3JBeGlzKSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDZXNpdW0uRGV2ZWxvcGVyRXJyb3IoJ0NlbnRlciBhbmQgc2VtaSBtYWpvciBhbmQgc2VtaSBtaW5vciBheGlzIGFyZSByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdEVsbGlwc2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGlzZU9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUgPSBuZXcgQ2hhbmdlYWJsZVByaW1pdGl2ZSgpO1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoY2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjZW50ZXInLCBjZW50ZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLnNldFNlbWlNYWpvckF4aXMgPSBmdW5jdGlvbiAoc2VtaU1ham9yQXhpcykge1xyXG4gICAgICAgICAgICBpZiAoc2VtaU1ham9yQXhpcyA8IHRoaXMuZ2V0U2VtaU1pbm9yQXhpcygpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdzZW1pTWFqb3JBeGlzJywgc2VtaU1ham9yQXhpcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuc2V0U2VtaU1pbm9yQXhpcyA9IGZ1bmN0aW9uIChzZW1pTWlub3JBeGlzKSB7XHJcbiAgICAgICAgICAgIGlmIChzZW1pTWlub3JBeGlzID4gdGhpcy5nZXRTZW1pTWFqb3JBeGlzKCkpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3NlbWlNaW5vckF4aXMnLCBzZW1pTWlub3JBeGlzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJywgcm90YXRpb24pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdjZW50ZXInKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRTZW1pTWFqb3JBeGlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3NlbWlNYWpvckF4aXMnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRTZW1pTWlub3JBeGlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3NlbWlNaW5vckF4aXMnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdyb3RhdGlvbicpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCEoQ2VzaXVtLmRlZmluZWQodGhpcy5jZW50ZXIpICYmIENlc2l1bS5kZWZpbmVkKHRoaXMuc2VtaU1ham9yQXhpcykgJiYgQ2VzaXVtLmRlZmluZWQodGhpcy5zZW1pTWlub3JBeGlzKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uRWxsaXBzZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIGVsbGlwc29pZDogdGhpcy5lbGxpcHNvaWQsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLFxyXG4gICAgICAgICAgICAgICAgc2VtaU1ham9yQXhpczogdGhpcy5zZW1pTWFqb3JBeGlzLFxyXG4gICAgICAgICAgICAgICAgc2VtaU1pbm9yQXhpczogdGhpcy5zZW1pTWlub3JBeGlzLFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgdmVydGV4Rm9ybWF0OiBDZXNpdW0uRWxsaXBzb2lkU3VyZmFjZUFwcGVhcmFuY2UuVkVSVEVYX0ZPUk1BVCxcclxuICAgICAgICAgICAgICAgIHN0Um90YXRpb246IHRoaXMudGV4dHVyZVJvdGF0aW9uQW5nbGUsXHJcbiAgICAgICAgICAgICAgICBlbGxpcHNvaWQ6IHRoaXMuZWxsaXBzb2lkLFxyXG4gICAgICAgICAgICAgICAgZ3JhbnVsYXJpdHk6IHRoaXMuZ3JhbnVsYXJpdHlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0T3V0bGluZUdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5FbGxpcHNlT3V0bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogdGhpcy5nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgICAgIHNlbWlNYWpvckF4aXM6IHRoaXMuZ2V0U2VtaU1ham9yQXhpcygpLFxyXG4gICAgICAgICAgICAgICAgc2VtaU1pbm9yQXhpczogdGhpcy5nZXRTZW1pTWlub3JBeGlzKCksXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF87XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIF8uUG9seWxpbmVQcmltaXRpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBfKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0UG9seWxpbmVPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGlzZU9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUgPSBuZXcgQ2hhbmdlYWJsZVByaW1pdGl2ZSgpO1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5zZXRQb3NpdGlvbnMgPSBmdW5jdGlvbiAocG9zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdwb3NpdGlvbnMnLCBwb3NpdGlvbnMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKHdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHdpZHRoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLnByb3RvdHlwZS5zZXRHZW9kZXNpYyA9IGZ1bmN0aW9uIChnZW9kZXNpYykge1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnZ2VvZGVzaWMnLCBnZW9kZXNpYyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0UG9zaXRpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9ucycpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXy5wcm90b3R5cGUuZ2V0R2VvZGVzaWMgPSBmdW5jdGlvbiAoZ2VvZGVzaWMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdnZW9kZXNpYycpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF8ucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFDZXNpdW0uZGVmaW5lZCh0aGlzLnBvc2l0aW9ucykgfHwgdGhpcy5wb3NpdGlvbnMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENlc2l1bS5Qb2x5bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uczogdGhpcy5wb3NpdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGggPCAxID8gMSA6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5FbGxpcHNvaWRTdXJmYWNlQXBwZWFyYW5jZS5WRVJURVhfRk9STUFULFxyXG4gICAgICAgICAgICAgICAgZWxsaXBzb2lkOiB0aGlzLmVsbGlwc29pZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSkoKTtcclxuXHJcblxyXG4gICAgdmFyIGRlZmF1bHRCaWxsYm9hcmQgPSB7XHJcbiAgICAgICAgaWNvblVybDogXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFzQUFBQUxDQVlBQUFDcHJIY21BQUFCYkVsRVFWUW9VMk5rSUFFd3d0UjZlbnF5YzNKeTZqRXpNeXY5Ly8rZmw1R1I4ZlBmdjMvdmZmLysvZEwyN2R0L2d0U0JGWU1VY25Cd2VQajQrQVJZVzF1N2NIRnhpWC85K3ZYbDBhTkg5MnpkdW5YRGp4OC9kb0EwZ0JWN2VYbVorL3I2WmpvNE9NUisvLzZkQ1dZYk96djd2MzM3OWkzZXZuMzc5RzNidHAwRUszWjNkNDl0YW1wcS8vNzl1L1QvLy84WmZ2MzZ4ZkQ3OTIrR2YvLytNYkN3c0R5ZE9IRmk1YzZkT3hlREZUczVPZVYwZEhUMHZYcjFpdlhMbDI4TWYvLytnWHVialkzdDkvVHAwNHIyN2RzM0Jhell5c29xc2FxcXR1WDc5MTlTNklIejdkdlhaek5uVHFrNWR1ellmTEJpWTJOakcyZG50Mnc3Tzlld2YvLyt3ZDM4L3ovRHY3MTd0Njg2ZXZUQTFMTm56eDRCSzNad2NPQjQ5ZXBWaUtPanU3K05qWXNOSHgrL3lLZFBIOTRjUHJ6M3lJRURPemVLaVltdE9YRGd3QTk0T012SXlIQisvLzdkK3YvLy83b01EQXdDREF3TUh4Z1pHUzl6Y25JZWZmTGt5WGQ0T0JNYmlRREhVNkFNKzkxaE1RQUFBQUJKUlU1RXJrSmdnZz09XCIsXHJcbiAgICAgICAgc2hpZnRYOiAwLFxyXG4gICAgICAgIHNoaWZ0WTogMCxcclxuICAgICAgICBzdHJhdGVneToge1xyXG4gICAgICAgICAgICBwaWNrU3RyYXRlZ3k6IGRlZmF1bHRQaWNrU3RyYXRlZ3lcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRyYWdCaWxsYm9hcmQgPSB7XHJcbiAgICAgICAgaWNvblVybDogXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFzQUFBQUxDQVlBQUFDcHJIY21BQUFCYkVsRVFWUW9VMk5rSUFFd3d0UjZlbnF5YzNKeTZqRXpNeXY5Ly8rZmw1R1I4ZlBmdjMvdmZmLysvZEwyN2R0L2d0U0JGWU1VY25Cd2VQajQrQVJZVzF1N2NIRnhpWC85K3ZYbDBhTkg5MnpkdW5YRGp4OC9kb0EwZ0JWN2VYbVorL3I2WmpvNE9NUisvLzZkQ1dZYk96djd2MzM3OWkzZXZuMzc5RzNidHAwRUszWjNkNDl0YW1wcS8vNzl1L1QvLy84WmZ2MzZ4ZkQ3OTIrR2YvLytNYkN3c0R5ZE9IRmk1YzZkT3hlREZUczVPZVYwZEhUMHZYcjFpdlhMbDI4TWYvLytnWHVialkzdDkvVHAwNHIyN2RzM0Jhell5c29xc2FxcXR1WDc5MTlTNklIejdkdlhaek5uVHFrNWR1ellmTEJpWTJOakcyZG50Mnc3Tzlld2YvLyt3ZDM4L3ovRHY3MTd0Njg2ZXZUQTFMTm56eDRCSzNad2NPQjQ5ZXBWaUtPanU3K05qWXNOSHgrL3lLZFBIOTRjUHJ6M3lJRURPemVLaVltdE9YRGd3QTk0T012SXlIQisvLzdkK3YvLy83b01EQXdDREF3TUh4Z1pHUzl6Y25JZWZmTGt5WGQ0T0JNYmlRREhVNkFNKzkxaE1RQUFBQUJKUlU1RXJrSmdnZz09XCIsXHJcbiAgICAgICAgc2hpZnRYOiAwLFxyXG4gICAgICAgIHNoaWZ0WTogMFxyXG4gICAgfVxyXG5cclxuICAgIHZhciBkcmFnSGFsZkJpbGxib2FyZCA9IHtcclxuICAgICAgICBpY29uVXJsOiBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQXNBQUFBTENBWUFBQUNwckhjbUFBQUJDa2xFUVZRb1U1WFJNVWlFY0JUSDhlOC9pQlFNQW9YQVVMQlJxVFd3R3h2YWFnaTNHeHFqcHJhZ01XaHJLaG9iYnBPRzJob2FMNkcxOE1ZVGxJUkFJVWpRQ0RLVTdtaHdxRGQvSHZ6ZTd3bitNV0ppNjdxZUExYUJaV0FlZUFmR3dKTVE0cU54TGY2Qm04QTJzQUVzQXEvQVBYQUQzRFVMRTd3RzdBRjlZT1pYc2k5Z0FGd0tJUjViWEpabFg1S2tVMkNwNDRTWHFxcU9aRmtldERqTHNnTlZWYytBMlE3OG1lZjVvYVpwNXkyTzQzalhNSXdUUU8vQWFaSWt4NlpwWHJVNERNT2ViZHY3Z05lUjJSK05SaGVPNHd4YkhFV1JsS2JwanV1NlcwQVAwSnAwd0RBSWdsdGQxNjh0eTZxbVBmdStMeGRGc1E2c0FBdkFHL0NzS01xRDUzbmx0T2UvUHZFYm1QUlREQXBRM2Q4QUFBQUFTVVZPUks1Q1lJST1cIixcclxuICAgICAgICBzaGlmdFg6IDAsXHJcbiAgICAgICAgc2hpZnRZOiAwXHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUuY3JlYXRlQmlsbGJvYXJkR3JvdXAgPSBmdW5jdGlvbiAocG9pbnRzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcclxuICAgICAgICB2YXIgbWFya2VycyA9IG5ldyBfLkJpbGxib2FyZEdyb3VwKHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIG1hcmtlcnMuYWRkQmlsbGJvYXJkcyhwb2ludHMsIGNhbGxiYWNrcyk7XHJcbiAgICAgICAgcmV0dXJuIG1hcmtlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cCA9IGZ1bmN0aW9uIChkcmF3SGVscGVyLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2RyYXdIZWxwZXIgPSBkcmF3SGVscGVyO1xyXG4gICAgICAgIHRoaXMuX3NjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0QmlsbGJvYXJkKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG9uZSBjb21tb24gYmlsbGJvYXJkIGNvbGxlY3Rpb24gZm9yIGFsbCBiaWxsYm9hcmRzXHJcbiAgICAgICAgdmFyIGIgPSBuZXcgQ2VzaXVtLkJpbGxib2FyZENvbGxlY3Rpb24oKTtcclxuICAgICAgICB0aGlzLl9zY2VuZS5wcmltaXRpdmVzLmFkZChiKTtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRzID0gYjtcclxuICAgICAgICAvLyBrZWVwIGFuIG9yZGVyZWQgbGlzdCBvZiBiaWxsYm9hcmRzXHJcbiAgICAgICAgdGhpcy5fb3JkZXJlZEJpbGxib2FyZHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBfLkJpbGxib2FyZEdyb3VwLnByb3RvdHlwZS5jcmVhdGVCaWxsYm9hcmQgPSBmdW5jdGlvbiAocG9zaXRpb24sIGNhbGxiYWNrcykge1xyXG5cclxuICAgICAgICB2YXIgYmlsbGJvYXJkID0gdGhpcy5fYmlsbGJvYXJkcy5hZGQoe1xyXG4gICAgICAgICAgICBzaG93OiB0cnVlLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHBpeGVsT2Zmc2V0OiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIodGhpcy5fb3B0aW9ucy5zaGlmdFgsIHRoaXMuX29wdGlvbnMuc2hpZnRZKSxcclxuICAgICAgICAgICAgZXllT2Zmc2V0OiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMC4wLCAwLjAsIDAuMCksXHJcbiAgICAgICAgICAgIGhvcml6b250YWxPcmlnaW46IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLkNFTlRFUixcclxuICAgICAgICAgICAgdmVydGljYWxPcmlnaW46IENlc2l1bS5WZXJ0aWNhbE9yaWdpbi5DRU5URVIsXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLjAsXHJcbiAgICAgICAgICAgIGltYWdlOiB0aGlzLl9vcHRpb25zLmljb25VcmwsXHJcbiAgICAgICAgICAgIGNvbG9yOiBuZXcgQ2VzaXVtLkNvbG9yKDEuMCwgMS4wLCAxLjAsIDEuMClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gaWYgZWRpdGFibGVcclxuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBzY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIgPSB0aGlzLl9zY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXI7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBlbmFibGVSb3RhdGlvbihlbmFibGUpIHtcclxuICAgICAgICAgICAgICAgIHNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVSb3RhdGUgPSBlbmFibGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEluZGV4KCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBpbmRleFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIEkgPSBfc2VsZi5fb3JkZXJlZEJpbGxib2FyZHMubGVuZ3RoOyBpIDwgSSAmJiBfc2VsZi5fb3JkZXJlZEJpbGxib2FyZHNbaV0gIT0gYmlsbGJvYXJkOyArK2kpIDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmRyYWdIYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHNldExpc3RlbmVyKGJpbGxib2FyZCwgJ2xlZnREb3duJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAtIHN0YXJ0IHRoZSBkcmFnIGhhbmRsZXJzIGhlcmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgaGFuZGxlcnMgZm9yIG1vdXNlT3V0IGFuZCBsZWZ0VXAgZm9yIHRoZSBiaWxsYm9hcmQgYW5kIGEgbW91c2VNb3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb25EcmFnKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxib2FyZC5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBJID0gX3NlbGYuX29yZGVyZWRCaWxsYm9hcmRzLmxlbmd0aDsgaSA8IEkgJiYgX3NlbGYuX29yZGVyZWRCaWxsYm9hcmRzW2ldICE9IGJpbGxib2FyZDsgKytpKSA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnICYmIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnKGdldEluZGV4KCksIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRHJhZ0VuZChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlUm90YXRpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnRW5kICYmIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnRW5kKGdldEluZGV4KCksIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihfc2VsZi5fc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IF9zZWxmLl9zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5lbmRQb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kKF9zZWxmLl9zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5wb3NpdGlvbiwgZWxsaXBzb2lkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfVVApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVSb3RhdGlvbihmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5kcmFnSGFuZGxlcnMub25EcmFnU3RhcnQgJiYgY2FsbGJhY2tzLmRyYWdIYW5kbGVycy5vbkRyYWdTdGFydChnZXRJbmRleCgpLCBfc2VsZi5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5vbkRvdWJsZUNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRMaXN0ZW5lcihiaWxsYm9hcmQsICdsZWZ0RG91YmxlQ2xpY2snLCBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Mub25Eb3VibGVDbGljayhnZXRJbmRleCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFja3Mub25DbGljaykge1xyXG4gICAgICAgICAgICAgICAgc2V0TGlzdGVuZXIoYmlsbGJvYXJkLCAnbGVmdENsaWNrJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ2xpY2soZ2V0SW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLnRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgIHNldExpc3RlbmVyKGJpbGxib2FyZCwgJ21vdXNlTW92ZScsIGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLl9kcmF3SGVscGVyLl90b29sdGlwLnNob3dBdChwb3NpdGlvbiwgY2FsbGJhY2tzLnRvb2x0aXAoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNldExpc3RlbmVyKGJpbGxib2FyZCwgJ21vdXNlT3V0JywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuX2RyYXdIZWxwZXIuX3Rvb2x0aXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJpbGxib2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBfLkJpbGxib2FyZEdyb3VwLnByb3RvdHlwZS5pbnNlcnRCaWxsYm9hcmQgPSBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uLCBjYWxsYmFja3MpIHtcclxuICAgICAgICB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkcy5zcGxpY2UoaW5kZXgsIDAsIHRoaXMuY3JlYXRlQmlsbGJvYXJkKHBvc2l0aW9uLCBjYWxsYmFja3MpKTtcclxuICAgIH1cclxuXHJcbiAgICBfLkJpbGxib2FyZEdyb3VwLnByb3RvdHlwZS5hZGRCaWxsYm9hcmQgPSBmdW5jdGlvbiAocG9zaXRpb24sIGNhbGxiYWNrcykge1xyXG4gICAgICAgIHRoaXMuX29yZGVyZWRCaWxsYm9hcmRzLnB1c2godGhpcy5jcmVhdGVCaWxsYm9hcmQocG9zaXRpb24sIGNhbGxiYWNrcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF8uQmlsbGJvYXJkR3JvdXAucHJvdG90eXBlLmFkZEJpbGxib2FyZHMgPSBmdW5jdGlvbiAocG9zaXRpb25zLCBjYWxsYmFja3MpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAoOyBpbmRleCA8IHBvc2l0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRCaWxsYm9hcmQocG9zaXRpb25zW2luZGV4XSwgY2FsbGJhY2tzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cC5wcm90b3R5cGUudXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbnMpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAoOyBpbmRleCA8IHBvc2l0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRCaWxsYm9hcmQoaW5kZXgpLnBvc2l0aW9uID0gcG9zaXRpb25zW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cC5wcm90b3R5cGUuY291bnRCaWxsYm9hcmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcmRlcmVkQmlsbGJvYXJkcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cC5wcm90b3R5cGUuZ2V0QmlsbGJvYXJkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29yZGVyZWRCaWxsYm9hcmRzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBfLkJpbGxib2FyZEdyb3VwLnByb3RvdHlwZS5yZW1vdmVCaWxsYm9hcmQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRzLnJlbW92ZSh0aGlzLmdldEJpbGxib2FyZChpbmRleCkpO1xyXG4gICAgICAgIHRoaXMuX29yZGVyZWRCaWxsYm9hcmRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2JpbGxib2FyZHMgPSB0aGlzLl9iaWxsYm9hcmRzICYmIHRoaXMuX2JpbGxib2FyZHMucmVtb3ZlQWxsKCkgJiYgdGhpcy5fYmlsbGJvYXJkcy5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgXy5CaWxsYm9hcmRHcm91cC5wcm90b3R5cGUuc2V0T25Ub3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUucHJpbWl0aXZlcy5yYWlzZVRvVG9wKHRoaXMuX2JpbGxib2FyZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLnN0YXJ0RHJhd2luZ01hcmtlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdEJpbGxib2FyZCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnREcmF3aW5nKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzICYmIG1hcmtlcnMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBtb3VzZUhhbmRsZXIgJiYgbW91c2VIYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAgJiYgdG9vbHRpcC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XHJcbiAgICAgICAgdmFyIHZpZXdlciA9IHRoaXMuX3ZpZXdlcjtcclxuXHJcbiAgICAgICAgdmFyIHByaW1pdGl2ZXMgPSBzY2VuZS5wcmltaXRpdmVzO1xyXG4gICAgICAgIHZhciB0b29sdGlwID0gdGhpcy5fdG9vbHRpcDtcclxuXHJcbiAgICAgICAgdmFyIG1hcmtlcnMgPSBuZXcgXy5CaWxsYm9hcmRHcm91cCh0aGlzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdmFyIG1vdXNlSGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIoc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgLy8gTm93IHdhaXQgZm9yIHN0YXJ0XHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAobW92ZW1lbnQucG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LnBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KG1vdmVtZW50LnBvc2l0aW9uLCB2aWV3ZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkQmlsbGJvYXJkKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuc3RvcERyYXdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKGNhcnRlc2lhbiwgX3NlbGYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spO1xyXG5cclxuICAgICAgICBtb3VzZUhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG1vdmVtZW50LmVuZFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KHBvc2l0aW9uLCB2aWV3ZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuc2hvd0F0KHBvc2l0aW9uLCBcIjxwPkNsaWNrIHRvIGFkZCB5b3VyIG1hcmtlci4gUG9zaXRpb24gaXM6IDwvcD5cIiArIGdldERpc3BsYXlMYXRMbmdTdHJpbmcoZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbikpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgb24gdGhlIGdsb2JlIHRvIGFkZCB5b3VyIG1hcmtlci48L3A+XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLk1PVVNFX01PVkUpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfLnByb3RvdHlwZS5zdGFydERyYXdpbmdQb2x5Z29uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAvLyB2YXIgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRTdXJmYWNlT3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5zdGFydERyYXdpbmdQb2x5c2hhcGUodHJ1ZSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUuc3RhcnREcmF3aW5nUG9seWxpbmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIC8vIHZhciBvcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFBvbHlsaW5lT3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5zdGFydERyYXdpbmdQb2x5c2hhcGUoZmFsc2UsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLnN0YXJ0RHJhd2luZ1BvbHlzaGFwZSA9IGZ1bmN0aW9uIChpc1BvbHlnb24sIG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zID0gaXNQb2x5Z29uID8gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFN1cmZhY2VPcHRpb25zKSA6IGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRQb2x5bGluZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0RHJhd2luZyhcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlcyAmJiBwcmltaXRpdmVzLnJlbW92ZShwb2x5KTtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnMgJiYgbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIG1vdXNlSGFuZGxlciAmJiBtb3VzZUhhbmRsZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcCAmJiB0b29sdGlwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgICAgICB2YXIgdmlld2VyID0gdGhpcy5fdmlld2VyO1xyXG4gICAgICAgIHZhciBwcmltaXRpdmVzID0gc2NlbmUucHJpbWl0aXZlcztcclxuICAgICAgICB2YXIgdG9vbHRpcCA9IHRoaXMuX3Rvb2x0aXA7XHJcblxyXG4gICAgICAgIHZhciBtaW5Qb2ludHMgPSBpc1BvbHlnb24gPyAzIDogMjtcclxuICAgICAgICB2YXIgcG9seTtcclxuICAgICAgICBpZiAoaXNQb2x5Z29uKSB7XHJcbiAgICAgICAgICAgIHBvbHkgPSBuZXcgXy5Qb2x5Z29uUHJpbWl0aXZlKG9wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBvbHkgPSBuZXcgXy5Qb2x5bGluZVByaW1pdGl2ZShvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcG9seS5hc3luY2hyb25vdXMgPSBmYWxzZTtcclxuICAgICAgICBwcmltaXRpdmVzLmFkZChwb2x5KTtcclxuXHJcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgIHZhciBtYXJrZXJzID0gbmV3IF8uQmlsbGJvYXJkR3JvdXAodGhpcywgZGVmYXVsdEJpbGxib2FyZCk7XHJcblxyXG4gICAgICAgIHZhciBtb3VzZUhhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKHNjZW5lLmNhbnZhcyk7XHJcblxyXG5cclxuICAgICAgICBtb3VzZUhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBtb3ZlbWVudC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoIDwgbWluUG9pbnRzIC8qKyAyKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FydGVzaWFuID0gb3B0aW9ucy5zdHJhdGVneS5waWNrU3RyYXRlZ3kobW92ZW1lbnQucG9zaXRpb24sIHZpZXdlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc3RvcERyYXdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvdmVybGFwcGluZyBvbmVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwb3NpdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socG9zaXRpb25zLCBfc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1VCTEVfQ0xJQ0spO1xyXG4gICAgICAgIC8vIE5vdyB3YWl0IGZvciBzdGFydFxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShtb3ZlbWVudC5wb3NpdGlvbiwgdmlld2VyKTtcclxuICAgICAgICAgICAgY2FydGVzaWFuID0gZ2V0Q2VzaXVtSGlnaHRaZXJvKGNhcnRlc2lhbik7XHJcblxyXG4gICAgICAgICAgICBpZiAobW92ZW1lbnQucG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKG1vdmVtZW50LnBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goY2FydGVzaWFuLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZChwb3NpdGlvbnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25zLmxlbmd0aCA+PSBtaW5Qb2ludHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9seS5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHkuX2NyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgcG9pbnQgdG8gcG9seWdvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgb25lIHdpbGwgbW92ZSB3aXRoIHRoZSBtb3VzZVxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG1hcmtlciBhdCB0aGUgbmV3IHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmQoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbW92ZW1lbnQuZW5kUG9zaXRpb247XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25zLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gYWRkIGZpcnN0IHBvaW50PC9wPlwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGNhcnRlc2lhbiA9IHNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uLCBlbGxpcHNvaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5waWNrUG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhcnRlc2lhbiA9IGdldENlc2l1bUhpZ2h0WmVybyhjYXJ0ZXNpYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShwb3NpdGlvbiwgdmlld2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBpdCBpcyBzbGlnaHRseSBkaWZmZXJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FydGVzaWFuLnkgKz0gKDEgKyBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FydGVzaWFuLnkgKz0gQ2VzaXVtLk1hdGguRVBTSUxPTjc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID49IG1pblBvaW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9seS5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2x5Ll9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5nZXRCaWxsYm9hcmQocG9zaXRpb25zLmxlbmd0aCAtIDEpLnBvc2l0aW9uID0gY2FydGVzaWFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gYWRkIG5ldyBwb2ludCAoXCIgKyBwb3NpdGlvbnMubGVuZ3RoICsgXCIpPC9wPlwiICsgKHBvc2l0aW9ucy5sZW5ndGggPiBtaW5Qb2ludHMgPyBcIjxwPkRvdWJsZSBjbGljayB0byBmaW5pc2ggZHJhd2luZzwvcD5cIiA6IFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTU9VU0VfTU9WRSk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRFeHRlbnRDb3JuZXJzKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNBcnJheVRvQ2FydGVzaWFuQXJyYXkoW0Nlc2l1bS5SZWN0YW5nbGUubm9ydGh3ZXN0KHZhbHVlKSwgQ2VzaXVtLlJlY3RhbmdsZS5ub3J0aGVhc3QodmFsdWUpLCBDZXNpdW0uUmVjdGFuZ2xlLnNvdXRoZWFzdCh2YWx1ZSksIENlc2l1bS5SZWN0YW5nbGUuc291dGh3ZXN0KHZhbHVlKV0pO1xyXG4gICAgfVxyXG5cclxuICAgIF8ucHJvdG90eXBlLnN0YXJ0RHJhd2luZ0V4dGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0gY29weU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdFN1cmZhY2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFydERyYXdpbmcoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZXMgJiYgcHJpbWl0aXZlcy5yZW1vdmUoZXh0ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hcmtlcnMgJiYgbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIG1vdXNlSGFuZGxlciAmJiBtb3VzZUhhbmRsZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcCAmJiB0b29sdGlwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgICAgICB2YXIgdmlld2VyID0gdGhpcy5fdmlld2VyO1xyXG4gICAgICAgIHZhciBwcmltaXRpdmVzID0gdGhpcy5fc2NlbmUucHJpbWl0aXZlcztcclxuICAgICAgICB2YXIgdG9vbHRpcCA9IHRoaXMuX3Rvb2x0aXA7XHJcblxyXG4gICAgICAgIHZhciBmaXJzdFBvaW50ID0gbnVsbDtcclxuICAgICAgICB2YXIgZXh0ZW50ID0gbnVsbDtcclxuICAgICAgICB2YXIgbWFya2VycyA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBtb3VzZUhhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKHNjZW5lLmNhbnZhcyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUV4dGVudCh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGV4dGVudCA9IG5ldyBfLkV4dGVudFByaW1pdGl2ZSh7ZXh0ZW50OiB2YWx1ZSwgbWF0ZXJpYWw6IG9wdGlvbnMubWF0ZXJpYWwsfSk7XHJcbiAgICAgICAgICAgICAgICBleHRlbnQuYXN5bmNocm9ub3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVzLmFkZChleHRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV4dGVudC5zZXRFeHRlbnQodmFsdWUpO1xyXG4gICAgICAgICAgICBleHRlbnQucmVjdGFuZ2xlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgbWFya2Vyc1xyXG4gICAgICAgICAgICB2YXIgY29ybmVycyA9IGdldEV4dGVudENvcm5lcnModmFsdWUpO1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgaWYgdGhleSBkbyBub3QgeWV0IGV4aXN0XHJcbiAgICAgICAgICAgIGlmIChtYXJrZXJzID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnMgPSBuZXcgXy5CaWxsYm9hcmRHcm91cChfc2VsZiwgZGVmYXVsdEJpbGxib2FyZCk7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoY29ybmVycyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzLnVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMoY29ybmVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5vdyB3YWl0IGZvciBzdGFydFxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKG1vdmVtZW50LnBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5wb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShtb3ZlbWVudC5wb3NpdGlvbiwgdmlld2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FydGVzaWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgcmVjdGFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UG9pbnQgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0RXh0ZW50KGZpcnN0UG9pbnQsIGZpcnN0UG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFeHRlbnQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLnN0b3BEcmF3aW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKGdldEV4dGVudChmaXJzdFBvaW50LCBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY2FydGVzaWFuKSwgX3NlbGYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0RPV04pO1xyXG5cclxuICAgICAgICBtb3VzZUhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oZnVuY3Rpb24gKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG1vdmVtZW50LmVuZFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+Q2xpY2sgdG8gc3RhcnQgZHJhd2luZyByZWN0YW5nbGU8L3A+XCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgY2FydGVzaWFuID0gc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocG9zaXRpb24sIGVsbGlwc29pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcnRlc2lhbiA9IG9wdGlvbnMuc3RyYXRlZ3kucGlja1N0cmF0ZWd5KHBvc2l0aW9uLCB2aWV3ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FydGVzaWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldEV4dGVudChmaXJzdFBvaW50LCBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY2FydGVzaWFuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUV4dGVudCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuc2hvd0F0KHBvc2l0aW9uLCBcIjxwPkRyYWcgdG8gY2hhbmdlIHJlY3RhbmdsZSBleHRlbnQ8L3A+PHA+Q2xpY2sgYWdhaW4gdG8gZmluaXNoIGRyYXdpbmc8L3A+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgXy5wcm90b3R5cGUuc3RhcnREcmF3aW5nQ2lyY2xlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0U3VyZmFjZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0RHJhd2luZyhcclxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYW5VcCgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaXJjbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZXMgJiYgcHJpbWl0aXZlcy5yZW1vdmUoY2lyY2xlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hcmtlcnMgJiYgbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIG1vdXNlSGFuZGxlciAmJiBtb3VzZUhhbmRsZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcCAmJiB0b29sdGlwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgICAgICB2YXIgdmlld2VyID0gdGhpcy5fdmlld2VyO1xyXG4gICAgICAgIHZhciBwcmltaXRpdmVzID0gdGhpcy5fc2NlbmUucHJpbWl0aXZlcztcclxuICAgICAgICB2YXIgdG9vbHRpcCA9IHRoaXMuX3Rvb2x0aXA7XHJcblxyXG4gICAgICAgIHZhciBjaXJjbGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBtYXJrZXJzID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIG1vdXNlSGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIoc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGlja1Bvc2l0aW9uKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChDZXNpdW0uZGVmaW5lZCh2aWV3ZXIuc2NlbmUucGljayhwb3NpdGlvbikpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2VzaXVtSGlnaHRaZXJvKHZpZXdlci5zY2VuZS5waWNrUG9zaXRpb24ocG9zaXRpb24pKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZXNpdW1IaWdodFplcm8odmlld2VyLnNjZW5lLmNhbWVyYS5waWNrRWxsaXBzb2lkKHBvc2l0aW9uKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIE5vdyB3YWl0IGZvciBzdGFydFxyXG4gICAgICAgIG1vdXNlSGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKG1vdmVtZW50LnBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5wb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5waWNrUG9zaXRpb24obW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FydGVzaWFuID0gZ2V0Q2VzaXVtSGlnaHRaZXJvKGNhcnRlc2lhbik7XHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgY2FydGVzaWFuID0gcGlja1Bvc2l0aW9uKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4gPSBvcHRpb25zLnN0cmF0ZWd5LnBpY2tTdHJhdGVneShtb3ZlbWVudC5wb3NpdGlvbiwgdmlld2VyKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2lyY2xlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBjaXJjbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlID0gbmV3IF8uQ2lyY2xlUHJpbWl0aXZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogY2FydGVzaWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmNocm9ub3VzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBvcHRpb25zLm1hdGVyaWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmVzLmFkZChjaXJjbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzID0gbmV3IF8uQmlsbGJvYXJkR3JvdXAoX3NlbGYsIGRlZmF1bHRCaWxsYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoW2NhcnRlc2lhbl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKGNpcmNsZS5nZXRDZW50ZXIoKSwgY2lyY2xlLmdldFJhZGl1cygpLCBfc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc3RvcERyYXdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1dOKTtcclxuXHJcbiAgICAgICAgbW91c2VIYW5kbGVyLnNldElucHV0QWN0aW9uKGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBtb3ZlbWVudC5lbmRQb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaXJjbGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuc2hvd0F0KHBvc2l0aW9uLCBcIjxwPkNsaWNrIHRvIHN0YXJ0IGRyYXdpbmcgdGhlIGNpcmNsZTwvcD5cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYXJ0ZXNpYW4gPSBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgY2FydGVzaWFuID0gc2NlbmUucGlja1Bvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FydGVzaWFuID0gb3B0aW9ucy5zdHJhdGVneS5waWNrU3RyYXRlZ3kocG9zaXRpb24sIHZpZXdlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJ0ZXNpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKGNpcmNsZS5nZXRDZW50ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlLnNldFJhZGl1cyhDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShnZXRDZXNpdW1IaWdodFplcm8oY2lyY2xlLmdldENlbnRlcigpKSwgZ2V0Q2VzaXVtSGlnaHRaZXJvKGNhcnRlc2lhbikpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2lyY2xlLnNldFJhZGl1cyhDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShjaXJjbGUuZ2V0Q2VudGVyKCksIGNhcnRlc2lhbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnVwZGF0ZUJpbGxib2FyZHNQb3NpdGlvbnMoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5zaG93QXQocG9zaXRpb24sIFwiPHA+TW92ZSBtb3VzZSB0byBjaGFuZ2UgY2lyY2xlIHJhZGl1czwvcD48cD5DbGljayBhZ2FpbiB0byBmaW5pc2ggZHJhd2luZzwvcD5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLk1PVVNFX01PVkUpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfLnByb3RvdHlwZS5lbmhhbmNlUHJpbWl0aXZlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGRyYXdIZWxwZXIgPSB0aGlzO1xyXG5cclxuICAgICAgICBDZXNpdW0uQmlsbGJvYXJkLnByb3RvdHlwZS5zZXRFZGl0YWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9lZGl0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgYmlsbGJvYXJkID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBlbmFibGVSb3RhdGlvbihlbmFibGUpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuX3NjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVSb3RhdGUgPSBlbmFibGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldExpc3RlbmVyKGJpbGxib2FyZCwgJ2xlZnREb3duJywgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIC0gc3RhcnQgdGhlIGRyYWcgaGFuZGxlcnMgaGVyZVxyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGhhbmRsZXJzIGZvciBtb3VzZU91dCBhbmQgbGVmdFVwIGZvciB0aGUgYmlsbGJvYXJkIGFuZCBhIG1vdXNlTW92ZVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25EcmFnKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmlsbGJvYXJkLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ2RyYWcnLCBwb3NpdGlvbnM6IHBvc2l0aW9ufSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25EcmFnRW5kKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUm90YXRpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ2RyYWdFbmQnLCBwb3NpdGlvbnM6IHBvc2l0aW9ufSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKGRyYXdIZWxwZXIuX3NjZW5lLmNhbnZhcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FydGVzaWFuID0gZHJhd0hlbHBlci5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQobW92ZW1lbnQuZW5kUG9zaXRpb24sIGVsbGlwc29pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRlc2lhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWcoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQoY2FydGVzaWFuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTU9VU0VfTU9WRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFuZGxlci5zZXRJbnB1dEFjdGlvbihmdW5jdGlvbiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQoZHJhd0hlbHBlci5fc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQobW92ZW1lbnQucG9zaXRpb24sIGVsbGlwc29pZCkpO1xyXG4gICAgICAgICAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfVVApO1xyXG5cclxuICAgICAgICAgICAgICAgIGVuYWJsZVJvdGF0aW9uKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnMoYmlsbGJvYXJkKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDZXNpdW0uRW50aXR5LnByb3RvdHlwZS5zZXRFZGl0YWJsZSA9IGZ1bmN0aW9uIChlZGl0YWJsZSkge1xyXG4gICAgICAgICAgICBpZihlZGl0YWJsZSA9PT0gIGZhbHNlKXtcclxuICAgICAgICAgICAgICAgIHZhciBiaWxsYm9hcmQgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoYmlsbGJvYXJkLCdsZWZ0RG93bicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZVR5cGUgIT09ICdiaWxsYm9hcmQnIHx8IHRoaXMuX2VkaXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRhYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBiaWxsYm9hcmQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVuYWJsZVJvdGF0aW9uKGVuYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZHJhd0hlbHBlci5fc2NlbmUuc2NyZWVuU3BhY2VDYW1lcmFDb250cm9sbGVyLmVuYWJsZVJvdGF0ZSA9IGVuYWJsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2V0TGlzdGVuZXIoYmlsbGJvYXJkLCAnbGVmdERvd24nLCBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBzdGFydCB0aGUgZHJhZyBoYW5kbGVycyBoZXJlXHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgaGFuZGxlcnMgZm9yIG1vdXNlT3V0IGFuZCBsZWZ0VXAgZm9yIHRoZSBiaWxsYm9hcmQgYW5kIGEgbW91c2VNb3ZlXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkRyYWcocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBiaWxsYm9hcmQucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBfc2VsZi5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnZHJhZycsIHBvc2l0aW9uczogcG9zaXRpb259KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkRyYWdFbmQocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVSb3RhdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBfc2VsZi5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnZHJhZ0VuZCcsIHBvc2l0aW9uczogcG9zaXRpb259KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IG5ldyBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIoZHJhd0hlbHBlci5fc2NlbmUuY2FudmFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW4gPSBkcmF3SGVscGVyLl9zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5lbmRQb3NpdGlvbiwgZWxsaXBzb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FydGVzaWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZyhjYXJ0ZXNpYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZChjYXJ0ZXNpYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFKTtcclxuXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLnNldElucHV0QWN0aW9uKGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZChkcmF3SGVscGVyLl9zY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChtb3ZlbWVudC5wb3NpdGlvbiwgZWxsaXBzb2lkKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9VUCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZW5hYmxlUm90YXRpb24oZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBlbmhhbmNlV2l0aExpc3RlbmVycyhiaWxsYm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0SGlnaGxpZ2h0ZWQoaGlnaGxpZ2h0ZWQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IGRyYXdIZWxwZXIuX3NjZW5lO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgbm8gY2hhbmdlXHJcbiAgICAgICAgICAgIC8vIGlmIGFscmVhZHkgaGlnaGxpZ2h0ZWQsIHRoZSBvdXRsaW5lIHBvbHlnb24gd2lsbCBiZSBhdmFpbGFibGVcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2hpZ2hsaWdodGVkICYmIHRoaXMuX2hpZ2hsaWdodGVkID09IGhpZ2hsaWdodGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZGlzYWJsZSBpZiBhbHJlYWR5IGluIGVkaXQgbW9kZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZWRpdE1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9oaWdobGlnaHRlZCA9IGhpZ2hsaWdodGVkO1xyXG4gICAgICAgICAgICAvLyBoaWdobGlnaHQgYnkgY3JlYXRpbmcgYW4gb3V0bGluZSBwb2x5Z29uIG1hdGNoaW5nIHRoZSBwb2x5Z29uIHBvaW50c1xyXG4gICAgICAgICAgICBpZiAoaGlnaGxpZ2h0ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgb3RoZXIgc2hhcGVzIGFyZSBub3QgaGlnaGxpZ2h0ZWRcclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuc2V0SGlnaGxpZ2h0ZWQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJva2VDb2xvciA9IHRoaXMuc3Ryb2tlQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlKENlc2l1bS5Db2xvci5mcm9tQ3NzQ29sb3JTdHJpbmcoJ3doaXRlJyksIHRoaXMuc3Ryb2tlV2lkdGgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0cm9rZUNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdHJva2VTdHlsZSh0aGlzLl9zdHJva2VDb2xvciwgdGhpcy5zdHJva2VXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3Ryb2tlU3R5bGUodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRFZGl0TW9kZShlZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2VkaXRNb2RlID09IGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICAgICAgZHJhd0hlbHBlci5kaXNhYmxlQWxsSGlnaGxpZ2h0cygpO1xyXG4gICAgICAgICAgICAvLyBkaXNwbGF5IG1hcmtlcnNcclxuICAgICAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnNldEVkaXRlZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IGRyYXdIZWxwZXIuX3NjZW5lO1xyXG4gICAgICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbWFya2VycyBhbmQgaGFuZGxlcnMgZm9yIHRoZSBlZGl0aW5nXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNEcmFnQmlsbGJvYXJkID0gdGhpcy5kcmFnQmlsbGJvYXJkPyB0aGlzLmRyYWdCaWxsYm9hcmQ6IGRyYWdCaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNEcmFnSGFsZkJpbGxib2FyZCA9IHRoaXMuZHJhZ0hhbGZCaWxsYm9hcmQ/IHRoaXMuZHJhZ0hhbGZCaWxsYm9hcmQ6IGRyYWdCaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBuZXcgXy5CaWxsYm9hcmRHcm91cChkcmF3SGVscGVyLCB0aGlzRHJhZ0JpbGxib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRNYXJrZXJzID0gbmV3IF8uQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlciwgdGhpc0RyYWdIYWxmQmlsbGJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZnVuY3Rpb24gZm9yIHVwZGF0aW5nIHRoZSBlZGl0IG1hcmtlcnMgYXJvdW5kIGEgY2VydGFpbiBwb2ludFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUhhbGZNYXJrZXJzKGluZGV4LCBwb3NpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBoYWxmIG1hcmtlcnMgYmVmb3JlIGFuZCBhZnRlciB0aGUgaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRJbmRleCA9IGluZGV4IC0gMSA8IDAgPyBwb3NpdGlvbnMubGVuZ3RoIC0gMSA6IGluZGV4IC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXRJbmRleCA8IGVkaXRNYXJrZXJzLmNvdW50QmlsbGJvYXJkcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0TWFya2Vycy5nZXRCaWxsYm9hcmQoZWRpdEluZGV4KS5wb3NpdGlvbiA9IGNhbGN1bGF0ZUhhbGZNYXJrZXJQb3NpdGlvbihlZGl0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdEluZGV4IDwgZWRpdE1hcmtlcnMuY291bnRCaWxsYm9hcmRzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRNYXJrZXJzLmdldEJpbGxib2FyZChlZGl0SW5kZXgpLnBvc2l0aW9uID0gY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKGVkaXRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRWRpdGVkKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnb25FZGl0ZWQnLCBwb3NpdGlvbnM6IF9zZWxmLnBvc2l0aW9uc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU1hcmtlckNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdIYW5kbGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbiAoaW5kZXgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYucG9zaXRpb25zW2luZGV4XSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUhhbGZNYXJrZXJzKGluZGV4LCBfc2VsZi5wb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRG91YmxlQ2xpY2s6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zZWxmLnBvc2l0aW9ucy5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBwb2ludCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYucG9zaXRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5fY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucmVtb3ZlQmlsbGJvYXJkKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRNYXJrZXJzLnJlbW92ZUJpbGxib2FyZChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVIYWxmTWFya2VycyhpbmRleCwgX3NlbGYucG9zaXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfc2VsZi5wb3NpdGlvbnMubGVuZ3RoID4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRvdWJsZSBjbGljayB0byByZW1vdmUgdGhpcyBwb2ludFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYmlsbGJvYXJkcyBhbmQga2VlcCBhbiBvcmRlcmVkIGxpc3Qgb2YgdGhlbSBmb3IgdGhlIHBvbHlnb24gZWRnZXNcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoX3NlbGYucG9zaXRpb25zLCBoYW5kbGVNYXJrZXJDaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbWFya2VycztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBfc2VsZi5wb3NpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ2VzaXVtLkVsbGlwc29pZEdlb2Rlc2ljKGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwb3NpdGlvbnNbaW5kZXhdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocG9zaXRpb25zW2luZGV4IDwgcG9zaXRpb25zLmxlbmd0aCAtIDEgPyBpbmRleCArIDEgOiAwXSkpLmludGVycG9sYXRlVXNpbmdGcmFjdGlvbigwLjUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGFsZlBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IF9zZWxmLnBvc2l0aW9ucy5sZW5ndGggKyAodGhpcy5pc1BvbHlnb24gPyAwIDogLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYWxmUG9zaXRpb25zLnB1c2goY2FsY3VsYXRlSGFsZk1hcmtlclBvc2l0aW9uKGluZGV4KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVFZGl0TWFya2VyQ2hhbmdlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0hhbmRsZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIG5ldyBwb3NpdGlvbiB0byB0aGUgcG9seWdvbiBidXQgbm90IGEgbmV3IG1hcmtlciB5ZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLnBvc2l0aW9ucy5zcGxpY2UodGhpcy5pbmRleCwgMCwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLnBvc2l0aW9uc1t0aGlzLmluZGV4XSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgc2V0cyBvZiBtYWtlcnMgZm9yIGVkaXRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmluc2VydEJpbGxib2FyZCh0aGlzLmluZGV4LCBwb3NpdGlvbiwgaGFuZGxlTWFya2VyQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdE1hcmtlcnMuZ2V0QmlsbGJvYXJkKHRoaXMuaW5kZXggLSAxKS5wb3NpdGlvbiA9IGNhbGN1bGF0ZUhhbGZNYXJrZXJQb3NpdGlvbih0aGlzLmluZGV4IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdE1hcmtlcnMuaW5zZXJ0QmlsbGJvYXJkKHRoaXMuaW5kZXgsIGNhbGN1bGF0ZUhhbGZNYXJrZXJQb3NpdGlvbih0aGlzLmluZGV4KSwgaGFuZGxlRWRpdE1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLl9jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRyYWcgdG8gY3JlYXRlIGEgbmV3IHBvaW50XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRNYXJrZXJzLmFkZEJpbGxib2FyZHMoaGFsZlBvc2l0aW9ucywgaGFuZGxlRWRpdE1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNYXJrZXJzID0gZWRpdE1hcmtlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgaGFuZGxlciBmb3IgY2xpY2tpbmcgaW4gdGhlIGdsb2JlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2xvYmVDbGlja2hhbmRsZXIgPSBuZXcgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRIYW5kbGVyKHNjZW5lLmNhbnZhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2xvYmVDbGlja2hhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpY2tlZE9iamVjdCA9IHNjZW5lLnBpY2sobW92ZW1lbnQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGlja2VkT2JqZWN0ICYmIHBpY2tlZE9iamVjdC5wcmltaXRpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc2V0RWRpdE1vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBvbiB0b3Agb2YgdGhlIHBvbHlnb25cclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNldE9uVG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdE1hcmtlcnMuc2V0T25Ub3AoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNYXJrZXJzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlcnMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNYXJrZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lZGl0TW9kZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5Qb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGUuc2V0RWRpdGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXRFZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9seWxpbmUgPSB0aGlzO1xyXG4gICAgICAgICAgICBwb2x5bGluZS5pc1BvbHlnb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgcG9seWxpbmUuYXN5bmNocm9ub3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBkcmF3SGVscGVyLnJlZ2lzdGVyRWRpdGFibGVTaGFwZShwb2x5bGluZSk7XHJcblxyXG4gICAgICAgICAgICBwb2x5bGluZS5zZXRFZGl0TW9kZSA9IHNldEVkaXRNb2RlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSB0aGlzLndpZHRoO1xyXG5cclxuICAgICAgICAgICAgcG9seWxpbmUuc2V0SGlnaGxpZ2h0ZWQgPSBmdW5jdGlvbiAoaGlnaGxpZ2h0ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgaWYgYWxyZWFkeSBpbiBlZGl0IG1vZGVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lZGl0TW9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChoaWdobGlnaHRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuc2V0SGlnaGxpZ2h0ZWQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXaWR0aChvcmlnaW5hbFdpZHRoICogMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgob3JpZ2luYWxXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBvbHlsaW5lLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDZXNpdW0uRXh0ZW50LmZyb21DYXJ0b2dyYXBoaWNBcnJheShlbGxpcHNvaWQuY2FydGVzaWFuQXJyYXlUb0NhcnRvZ3JhcGhpY0FycmF5KHRoaXMucG9zaXRpb25zKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHBvbHlsaW5lKTtcclxuXHJcbiAgICAgICAgICAgIHBvbHlsaW5lLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLlBvbHlnb25QcmltaXRpdmUucHJvdG90eXBlLnNldEVkaXRhYmxlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvbHlnb24gPSB0aGlzO1xyXG4gICAgICAgICAgICBwb2x5Z29uLmFzeW5jaHJvbm91cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG4gICAgICAgICAgICBkcmF3SGVscGVyLnJlZ2lzdGVyRWRpdGFibGVTaGFwZShwb2x5Z29uKTtcclxuXHJcbiAgICAgICAgICAgIHBvbHlnb24uc2V0RWRpdE1vZGUgPSBzZXRFZGl0TW9kZTtcclxuXHJcbiAgICAgICAgICAgIHBvbHlnb24uc2V0SGlnaGxpZ2h0ZWQgPSBzZXRIaWdobGlnaHRlZDtcclxuXHJcbiAgICAgICAgICAgIGVuaGFuY2VXaXRoTGlzdGVuZXJzKHBvbHlnb24pO1xyXG5cclxuICAgICAgICAgICAgcG9seWdvbi5zZXRFZGl0TW9kZShmYWxzZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5FeHRlbnRQcmltaXRpdmUucHJvdG90eXBlLnNldEVkaXRhYmxlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0RWRpdE1vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGV4dGVudCA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IGRyYXdIZWxwZXIuX3NjZW5lO1xyXG5cclxuICAgICAgICAgICAgZHJhd0hlbHBlci5yZWdpc3RlckVkaXRhYmxlU2hhcGUoZXh0ZW50KTtcclxuICAgICAgICAgICAgZXh0ZW50LmFzeW5jaHJvbm91cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZXh0ZW50LnNldEVkaXRNb2RlID0gZnVuY3Rpb24gKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lZGl0TW9kZSA9PSBlZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuZGlzYWJsZUFsbEhpZ2hsaWdodHMoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnNldEVkaXRlZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG1hcmtlcnMgYW5kIGhhbmRsZXJzIGZvciB0aGUgZWRpdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNEcmFnQmlsbGJvYXJkID0gdGhpcy5kcmFnQmlsbGJvYXJkPyB0aGlzLmRyYWdCaWxsYm9hcmQ6IGRyYWdCaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGlzRHJhZ0hhbGZCaWxsYm9hcmQgPSB0aGlzLmRyYWdIYWxmQmlsbGJvYXJkPyB0aGlzLmRyYWdIYWxmQmlsbGJvYXJkOiBkcmFnQmlsbGJvYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBuZXcgXy5CaWxsYm9hcmRHcm91cChkcmF3SGVscGVyLHRoaXNEcmFnSGFsZkJpbGxib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkVkaXRlZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVudC5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnb25FZGl0ZWQnLCBleHRlbnQ6IGV4dGVudC5leHRlbnR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU1hcmtlckNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnSGFuZGxlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvcm5lciA9IG1hcmtlcnMuZ2V0QmlsbGJvYXJkKChpbmRleCArIDIpICUgNCkucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVudC5zZXRFeHRlbnQoZ2V0RXh0ZW50KGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhjb3JuZXIpLCBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocG9zaXRpb24pKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMudXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyhnZXRFeHRlbnRDb3JuZXJzKGV4dGVudC5leHRlbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiRHJhZyB0byBjaGFuZ2UgdGhlIGNvcm5lcnMgb2YgdGhpcyBleHRlbnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRCaWxsYm9hcmRzKGdldEV4dGVudENvcm5lcnMoZXh0ZW50LmV4dGVudCksIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbWFya2VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgaGFuZGxlciBmb3IgY2xpY2tpbmcgaW4gdGhlIGdsb2JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBzY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIGVkaXQgaWYgcGlja2Vkb2JqZWN0IGlzIGRpZmZlcmVudCBvciBub3QgYW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGlja2VkT2JqZWN0ICYmICFwaWNrZWRPYmplY3QuaXNEZXN0cm95ZWQoKSAmJiBwaWNrZWRPYmplY3QucHJpbWl0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW50LnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW50LnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb24gdG9wIG9mIHRoZSBwb2x5Z29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuc2V0T25Ub3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWFya2VycyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlcnMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlcnMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV4dGVudC5zZXRIaWdobGlnaHRlZCA9IHNldEhpZ2hsaWdodGVkO1xyXG5cclxuICAgICAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnMoZXh0ZW50KTtcclxuXHJcbiAgICAgICAgICAgIGV4dGVudC5zZXRFZGl0TW9kZShmYWxzZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5FbGxpcHNlUHJpbWl0aXZlLnByb3RvdHlwZS5zZXRFZGl0YWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldEVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbGxpcHNlID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHNjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG4gICAgICAgICAgICBlbGxpcHNlLmFzeW5jaHJvbm91cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZHJhd0hlbHBlci5yZWdpc3RlckVkaXRhYmxlU2hhcGUoZWxsaXBzZSk7XHJcblxyXG4gICAgICAgICAgICBlbGxpcHNlLnNldEVkaXRNb2RlID0gZnVuY3Rpb24gKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lZGl0TW9kZSA9PSBlZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuZGlzYWJsZUFsbEhpZ2hsaWdodHMoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnNldEVkaXRlZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbWFya2VycyBhbmQgaGFuZGxlcnMgZm9yIHRoZSBlZGl0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hcmtlcnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc0RyYWdCaWxsYm9hcmQgPSB0aGlzLmRyYWdCaWxsYm9hcmQ/IHRoaXMuZHJhZ0JpbGxib2FyZDogZHJhZ0JpbGxib2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gbmV3IF8uQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlcix0aGlzRHJhZ0JpbGxib2FyZCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFya2VyUG9zaXRpb25zKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENlc2l1bS5TaGFwZXMuY29tcHV0ZUVsbGlwc2VCb3VuZGFyeShlbGxpcHNvaWQsIGVsbGlwc2UuZ2V0Q2VudGVyKCksIGVsbGlwc2UuZ2V0U2VtaU1ham9yQXhpcygpLCBlbGxpcHNlLmdldFNlbWlNaW5vckF4aXMoKSwgZWxsaXBzZS5nZXRSb3RhdGlvbigpICsgTWF0aC5QSSAvIDIsIE1hdGguUEkgLyAyLjApLnNwbGljZSgwLCA0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb25FZGl0ZWQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLmV4ZWN1dGVMaXN0ZW5lcnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvbkVkaXRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBlbGxpcHNlLmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbWlNYWpvckF4aXM6IGVsbGlwc2UuZ2V0U2VtaU1ham9yQXhpcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbWlNaW5vckF4aXM6IGVsbGlwc2UuZ2V0U2VtaU1pbm9yQXhpcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU1hcmtlckNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnSGFuZGxlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gQ2VzaXVtLkNhcnRlc2lhbjMuZGlzdGFuY2UoZWxsaXBzZS5nZXRDZW50ZXIoKSwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsbGlwc2Uuc2V0U2VtaU1ham9yQXhpcyhkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGxpcHNlLnNldFNlbWlNaW5vckF4aXMoZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMudXBkYXRlQmlsbGJvYXJkc1Bvc2l0aW9ucyhnZXRNYXJrZXJQb3NpdGlvbnMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uIChpbmRleCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FZGl0ZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkRyYWcgdG8gY2hhbmdlIHRoZSBleGNlbnRyaWNpdHkgYW5kIHJhZGl1c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoZ2V0TWFya2VyUG9zaXRpb25zKCksIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbWFya2VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgaGFuZGxlciBmb3IgY2xpY2tpbmcgaW4gdGhlIGdsb2JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBzY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwaWNrZWRPYmplY3QgJiYgcGlja2VkT2JqZWN0LnByaW1pdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc2V0RWRpdE1vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvbiB0b3Agb2YgdGhlIHBvbHlnb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zZXRPblRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lZGl0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxsaXBzZS5zZXRIaWdobGlnaHRlZCA9IHNldEhpZ2hsaWdodGVkO1xyXG5cclxuICAgICAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnMoZWxsaXBzZSk7XHJcblxyXG4gICAgICAgICAgICBlbGxpcHNlLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uQ2lyY2xlUHJpbWl0aXZlLnByb3RvdHlwZS5nZXRDaXJjbGVDYXJ0ZXNpYW5Db29yZGluYXRlcyA9IGZ1bmN0aW9uIChncmFudWxhcml0eSkge1xyXG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5KG5ldyBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5KHtcclxuICAgICAgICAgICAgICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyOiB0aGlzLmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiB0aGlzLmdldFJhZGl1cygpLFxyXG4gICAgICAgICAgICAgICAgZ3JhbnVsYXJpdHk6IGdyYW51bGFyaXR5XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMCwgdmFsdWUsIHZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKDsgY291bnQgPCBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcy5sZW5ndGg7IGNvdW50ICs9IDMpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXM7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChuZXcgQ2VzaXVtLkNhcnRlc2lhbjModmFsdWVbY291bnRdLCB2YWx1ZVtjb3VudCArIDFdLCB2YWx1ZVtjb3VudCArIDJdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfLkNpcmNsZVByaW1pdGl2ZS5wcm90b3R5cGUuc2V0RWRpdGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXRFZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHNjZW5lID0gZHJhd0hlbHBlci5fc2NlbmU7XHJcblxyXG4gICAgICAgICAgICBjaXJjbGUuYXN5bmNocm9ub3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBkcmF3SGVscGVyLnJlZ2lzdGVyRWRpdGFibGVTaGFwZShjaXJjbGUpO1xyXG5cclxuICAgICAgICAgICAgY2lyY2xlLnNldEVkaXRNb2RlID0gZnVuY3Rpb24gKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBubyBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lZGl0TW9kZSA9PSBlZGl0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuZGlzYWJsZUFsbEhpZ2hsaWdodHMoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBvdGhlciBzaGFwZXMgYXJlIG5vdCBpbiBlZGl0IG1vZGUgYmVmb3JlIHN0YXJ0aW5nIHRoZSBlZGl0aW5nIG9mIHRoaXMgc2hhcGVcclxuICAgICAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnNldEVkaXRlZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbWFya2VycyBhbmQgaGFuZGxlcnMgZm9yIHRoZSBlZGl0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hcmtlcnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc0RyYWdCaWxsYm9hcmQgPSB0aGlzLmRyYWdCaWxsYm9hcmQ/IHRoaXMuZHJhZ0JpbGxib2FyZDogZHJhZ0JpbGxib2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gbmV3IF8uQmlsbGJvYXJkR3JvdXAoZHJhd0hlbHBlciwgdGhpc0RyYWdCaWxsYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFya2VyUG9zaXRpb25zKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIF9zZWxmLmdldENpcmNsZUNhcnRlc2lhbkNvb3JkaW5hdGVzKENlc2l1bS5NYXRoLlBJX09WRVJfVFdPKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfc2VsZi5nZXRDaXJjbGVDYXJ0ZXNpYW5Db29yZGluYXRlcyhDZXNpdW0uTWF0aC5QSV9PVkVSX1RXTyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRWRpdGVkKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmV4ZWN1dGVMaXN0ZW5lcnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvbkVkaXRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBjaXJjbGUuZ2V0Q2VudGVyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiBjaXJjbGUuZ2V0UmFkaXVzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlTWFya2VyQ2hhbmdlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdIYW5kbGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGUuc2V0UmFkaXVzKENlc2l1bS5DYXJ0ZXNpYW4zLmRpc3RhbmNlKGNpcmNsZS5nZXRDZW50ZXIoKSwgcG9zaXRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy51cGRhdGVCaWxsYm9hcmRzUG9zaXRpb25zKGdldE1hcmtlclBvc2l0aW9ucygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiRHJhZyB0byBjaGFuZ2UgdGhlIHJhZGl1c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZEJpbGxib2FyZHMoZ2V0TWFya2VyUG9zaXRpb25zKCksIGhhbmRsZU1hcmtlckNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJzID0gbWFya2VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgaGFuZGxlciBmb3IgY2xpY2tpbmcgaW4gdGhlIGdsb2JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcihzY2VuZS5jYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbG9iZUNsaWNraGFuZGxlci5zZXRJbnB1dEFjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtb3ZlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWNrZWRPYmplY3QgPSBzY2VuZS5waWNrKG1vdmVtZW50LnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwaWNrZWRPYmplY3QgJiYgcGlja2VkT2JqZWN0LnByaW1pdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc2V0RWRpdE1vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvbiB0b3Agb2YgdGhlIHBvbHlnb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zZXRPblRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lZGl0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXJrZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2Vycy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JlQ2xpY2toYW5kbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWRpdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2lyY2xlLnNldEhpZ2hsaWdodGVkID0gc2V0SGlnaGxpZ2h0ZWQ7XHJcblxyXG4gICAgICAgICAgICBlbmhhbmNlV2l0aExpc3RlbmVycyhjaXJjbGUpO1xyXG5cclxuICAgICAgICAgICAgY2lyY2xlLnNldEVkaXRNb2RlKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIF8uRHJhd0hlbHBlcldpZGdldCA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgZnVuY3Rpb24gXyhkcmF3SGVscGVyLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBjb250YWluZXIgbXVzdCBiZSBzcGVjaWZpZWRcclxuICAgICAgICAgICAgaWYgKCEoQ2VzaXVtLmRlZmluZWQob3B0aW9ucy5jb250YWluZXIpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENlc2l1bS5EZXZlbG9wZXJFcnJvcignQ29udGFpbmVyIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkcmF3T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIC8vIG1hcmtlckljb246IFwiLi9pbWcvZ2x5cGhpY29uc18yNDJfZ29vZ2xlX21hcHMucG5nXCIsXHJcbiAgICAgICAgICAgICAgICAvLyBwb2x5bGluZUljb246IFwiLi9pbWcvZ2x5cGhpY29uc18wOTdfdmVjdG9yX3BhdGhfbGluZS5wbmdcIixcclxuICAgICAgICAgICAgICAgIC8vIHBvbHlnb25JY29uOiBcIi4vaW1nL2dseXBoaWNvbnNfMDk2X3ZlY3Rvcl9wYXRoX3BvbHlnb24ucG5nXCIsXHJcbiAgICAgICAgICAgICAgICAvLyBjaXJjbGVJY29uOiBcIi4vaW1nL2dseXBoaWNvbnNfMDk1X3ZlY3Rvcl9wYXRoX2NpcmNsZS5wbmdcIixcclxuICAgICAgICAgICAgICAgIC8vIGV4dGVudEljb246IFwiLi9pbWcvZ2x5cGhpY29uc18wOTRfdmVjdG9yX3BhdGhfc3F1YXJlLnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYXJJY29uOiBcIi4vaW1nL2dseXBoaWNvbnNfMDY3X2NsZWFuaW5nLnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgbWFya2VySWNvbjogXCIgbWFya2VyXCIsXHJcbiAgICAgICAgICAgICAgICBwb2x5bGluZUljb246IFwiIHBvbHlsaW5lXCIsXHJcbiAgICAgICAgICAgICAgICBwb2x5Z29uSWNvbjogXCIgcG9seWdvblwiLFxyXG4gICAgICAgICAgICAgICAgY2lyY2xlSWNvbjogXCIgY2lyY2xlXCIsXHJcbiAgICAgICAgICAgICAgICBleHRlbnRJY29uOiBcIiBleHRlbnRcIixcclxuICAgICAgICAgICAgICAgIGNsZWFySWNvbjogXCIgY2xlYXJcIixcclxuICAgICAgICAgICAgICAgIHBvbHlsaW5lRHJhd2luZ09wdGlvbnM6IGRlZmF1bHRQb2x5bGluZU9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBwb2x5Z29uRHJhd2luZ09wdGlvbnM6IGRlZmF1bHRQb2x5Z29uT3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIGV4dGVudERyYXdpbmdPcHRpb25zOiBkZWZhdWx0RXh0ZW50T3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIGNpcmNsZURyYXdpbmdPcHRpb25zOiBkZWZhdWx0Q2lyY2xlT3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja1N0cmF0ZWd5OiBvcHRpb25zLnBpY2tTdHJhdGVneSA/IG9wdGlvbnMucGlja1N0cmF0ZWd5IDogZGVmYXVsdFBpY2tTdHJhdGVneVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZmlsbE9wdGlvbnMob3B0aW9ucywgZHJhd09wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHZhciB0b29sYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgICAgIHRvb2xiYXIuY2xhc3NOYW1lID0gXCJ0b29sYmFyXCI7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRvb2xiYXIpO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkSWNvbihpZCwgdXJsLCB0aXRsZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAnYnV0dG9uJyArIHVybDtcclxuICAgICAgICAgICAgICAgIGRpdi50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIC8vIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGl2LmFwcGVuZENoaWxkKHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnSU1HJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBpbWFnZS5zcmMgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICAvLyBzcGFuLmFwcGVuZENoaWxkKGltYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaXY7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IGRyYXdIZWxwZXIuX3NjZW5lO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvcHRpb25zLmJ1dHRvbnMpXHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcIm1hcmtlclwiKSAhPT0gLTEgJiYgYWRkSWNvbignbWFya2VyJywgb3B0aW9ucy5tYXJrZXJJY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhIDJEIG1hcmtlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmNsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2tDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21hcmtlckNsaWNrJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZHJhd0hlbHBlci5zdGFydERyYXdpbmdNYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ21hcmtlckNyZWF0ZWQnLCBwb3NpdGlvbjogcG9zaXRpb259KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiBvcHRpb25zLnN0cmF0ZWd5XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucy5pbmRleE9mKFwicG9seWxpbmVcIikgIT09IC0xICYmIGFkZEljb24oJ3BvbHlsaW5lJywgb3B0aW9ucy5wb2x5bGluZUljb24sICdDbGljayB0byBzdGFydCBkcmF3aW5nIGEgMkQgcG9seWxpbmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwb2x5bGluZUNsaWNrJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZHJhd0hlbHBlci5zdGFydERyYXdpbmdQb2x5bGluZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChwb3NpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ3BvbHlsaW5lQ3JlYXRlZCcsIHBvc2l0aW9uczogcG9zaXRpb25zfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJhdGVneTogb3B0aW9ucy5zdHJhdGVneVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcInBvbHlnb25cIikgIT09IC0xICYmIGFkZEljb24oJ3BvbHlnb24nLCBvcHRpb25zLnBvbHlnb25JY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhIDJEIHBvbHlnb24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwb2x5Z29uQ2xpY2snXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkcmF3SGVscGVyLnN0YXJ0RHJhd2luZ1BvbHlnb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocG9zaXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLmV4ZWN1dGVMaXN0ZW5lcnMoe25hbWU6ICdwb2x5Z29uQ3JlYXRlZCcsIHBvc2l0aW9uczogcG9zaXRpb25zfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJhdGVneTogb3B0aW9ucy5zdHJhdGVneVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcImV4dGVudFwiKSAhPT0gLTEgJiYgYWRkSWNvbignZXh0ZW50Jywgb3B0aW9ucy5leHRlbnRJY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhbiBFeHRlbnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNsaWNrQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdleHRlbnRDbGljaydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGRyYXdIZWxwZXIuc3RhcnREcmF3aW5nRXh0ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGV4dGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5leGVjdXRlTGlzdGVuZXJzKHtuYW1lOiAnZXh0ZW50Q3JlYXRlZCcsIGV4dGVudDogZXh0ZW50fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJhdGVneTogb3B0aW9ucy5zdHJhdGVneVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcImNpcmNsZVwiKSAhPT0gLTEgJiYgYWRkSWNvbignY2lyY2xlJywgb3B0aW9ucy5jaXJjbGVJY29uLCAnQ2xpY2sgdG8gc3RhcnQgZHJhd2luZyBhIENpcmNsZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmNsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2tDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2NpcmNsZUNsaWNrJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZHJhd0hlbHBlci5zdGFydERyYXdpbmdDaXJjbGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoY2VudGVyLCByYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuZXhlY3V0ZUxpc3RlbmVycyh7bmFtZTogJ2NpcmNsZUNyZWF0ZWQnLCBjZW50ZXI6IGNlbnRlciwgcmFkaXVzOiByYWRpdXN9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiBvcHRpb25zLnN0cmF0ZWd5XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBhIGNsZWFyIGJ1dHRvbiBhdCB0aGUgZW5kXHJcbiAgICAgICAgICAgIC8vIGFkZCBhIGRpdmlkZXIgZmlyc3RcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2RpdmlkZXInO1xyXG4gICAgICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMuaW5kZXhPZihcImNsZWFyXCIpICE9PSAtMSAmJlxyXG4gICAgICAgICAgICBhZGRJY29uKCdjbGVhcicsIG9wdGlvbnMuY2xlYXJJY29uLCAnUmVtb3ZlIGFsbCBwcmltaXRpdmVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2xpY2tDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jbGlja0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2xlYXJDbGljaydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjZW5lLnByaW1pdGl2ZXMucmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZW5oYW5jZVdpdGhMaXN0ZW5lcnModGhpcyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiBfO1xyXG5cclxuICAgIH0pKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmlrDlop7lt6XlhbfmoI/ngrnlh7vlm57osINcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJcclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50KX0gb3B0aW9ucy5jbGlja0NhbGxiYWNrIC0gZXZlbnQubmFtZeWMheaLrCR7dG9vbGJhck5hbWV9Q2xpY2tcclxuICAgICAqIEByZXR1cm5zIHtffCp9XHJcbiAgICAgKi9cclxuICAgIF8ucHJvdG90eXBlLmFkZFRvb2xiYXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IGNvcHlPcHRpb25zKG9wdGlvbnMsIHtjb250YWluZXI6IGNvbnRhaW5lcn0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgXy5EcmF3SGVscGVyV2lkZ2V0KHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEV4dGVudChtbiwgbXgpIHtcclxuICAgICAgICB2YXIgZSA9IG5ldyBDZXNpdW0uUmVjdGFuZ2xlKCk7XHJcblxyXG4gICAgICAgIC8vIFJlLW9yZGVyIHNvIHdlc3QgPCBlYXN0IGFuZCBzb3V0aCA8IG5vcnRoXHJcbiAgICAgICAgZS53ZXN0ID0gTWF0aC5taW4obW4ubG9uZ2l0dWRlLCBteC5sb25naXR1ZGUpO1xyXG4gICAgICAgIGUuZWFzdCA9IE1hdGgubWF4KG1uLmxvbmdpdHVkZSwgbXgubG9uZ2l0dWRlKTtcclxuICAgICAgICBlLnNvdXRoID0gTWF0aC5taW4obW4ubGF0aXR1ZGUsIG14LmxhdGl0dWRlKTtcclxuICAgICAgICBlLm5vcnRoID0gTWF0aC5tYXgobW4ubGF0aXR1ZGUsIG14LmxhdGl0dWRlKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFwcHJveCBlcXVhbCAoc2hvdWxkbid0IHJlcXVpcmUgYWJzIGR1ZSB0byByZS1vcmRlcilcclxuICAgICAgICB2YXIgZXBzaWxvbiA9IENlc2l1bS5NYXRoLkVQU0lMT043O1xyXG5cclxuICAgICAgICBpZiAoKGUuZWFzdCAtIGUud2VzdCkgPCBlcHNpbG9uKSB7XHJcbiAgICAgICAgICAgIGUuZWFzdCArPSBlcHNpbG9uICogMi4wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChlLm5vcnRoIC0gZS5zb3V0aCkgPCBlcHNpbG9uKSB7XHJcbiAgICAgICAgICAgIGUubm9ydGggKz0gZXBzaWxvbiAqIDIuMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVUb29sdGlwKGZyYW1lRGl2KSB7XHJcblxyXG4gICAgICAgIHZhciB0b29sdGlwID0gZnVuY3Rpb24gKGZyYW1lRGl2KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSBcInR3aXBzeSByaWdodFwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgICAgIGFycm93LmNsYXNzTmFtZSA9IFwidHdpcHN5LWFycm93XCI7XHJcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChhcnJvdyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJ0d2lwc3ktaW5uZXJcIjtcclxuXHJcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kaXYgPSBkaXY7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgdG8gZnJhbWUgZGl2IGFuZCBkaXNwbGF5IGNvb3JkaW5hdGVzXHJcbiAgICAgICAgICAgIGZyYW1lRGl2LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvb2x0aXAucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXYuc3R5bGUuZGlzcGxheSA9IHZpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdG9vbHRpcC5wcm90b3R5cGUuc2hvd0F0ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAmJiBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aXRsZS5pbm5lckhUTUwgPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5fZGl2LnN0eWxlLmxlZnQgPSBwb3NpdGlvbi54ICsgMTAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLl9kaXYuc3R5bGUudG9wID0gKHBvc2l0aW9uLnkgLSB0aGlzLl9kaXYuY2xpZW50SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvb2x0aXAucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGl0bGUuaW5uZXJIVE1MID0gbWVzc2FnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6Kej5Yaz5ouW5Yqo5YiwdGlw5LiK5pe25a6V5py655qE6Zeu6aKYXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9vbHRpcC5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtZS5fZGl2LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycgJiYgKGNvdW50ID0gKChjb3VudCsrKSAlIDMpKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl9kaXYuc3R5bGUubGVmdCA9IGV2Lm9mZnNldFggKyAyMCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBtZS5fZGl2LnN0eWxlLnRvcCA9IChldi5vZmZzZXRZIC0gbWUuX2Rpdi5jbGllbnRIZWlnaHQgLyAyKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgdG9vbHRpcChmcmFtZURpdik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RGlzcGxheUxhdExuZ1N0cmluZyhjYXJ0b2dyYXBoaWMsIHByZWNpc2lvbikge1xyXG4gICAgICAgIHJldHVybiBjYXJ0b2dyYXBoaWMubG9uZ2l0dWRlLnRvRml4ZWQocHJlY2lzaW9uIHx8IDMpICsgXCIsIFwiICsgY2FydG9ncmFwaGljLmxhdGl0dWRlLnRvRml4ZWQocHJlY2lzaW9uIHx8IDMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb25lKGZyb20sIHRvKSB7XHJcbiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCB8fCB0eXBlb2YgZnJvbSAhPSBcIm9iamVjdFwiKSByZXR1cm4gZnJvbTtcclxuICAgICAgICBpZiAoZnJvbS5jb25zdHJ1Y3RvciAhPSBPYmplY3QgJiYgZnJvbS5jb25zdHJ1Y3RvciAhPSBBcnJheSkgcmV0dXJuIGZyb207XHJcbiAgICAgICAgaWYgKGZyb20uY29uc3RydWN0b3IgPT0gRGF0ZSB8fCBmcm9tLmNvbnN0cnVjdG9yID09IFJlZ0V4cCB8fCBmcm9tLmNvbnN0cnVjdG9yID09IEZ1bmN0aW9uIHx8XHJcbiAgICAgICAgICAgIGZyb20uY29uc3RydWN0b3IgPT0gU3RyaW5nIHx8IGZyb20uY29uc3RydWN0b3IgPT0gTnVtYmVyIHx8IGZyb20uY29uc3RydWN0b3IgPT0gQm9vbGVhbilcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBmcm9tLmNvbnN0cnVjdG9yKGZyb20pO1xyXG5cclxuICAgICAgICB0byA9IHRvIHx8IG5ldyBmcm9tLmNvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gZnJvbSkge1xyXG4gICAgICAgICAgICB0b1tuYW1lXSA9IHR5cGVvZiB0b1tuYW1lXSA9PSBcInVuZGVmaW5lZFwiID8gY2xvbmUoZnJvbVtuYW1lXSwgbnVsbCkgOiB0b1tuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaWxsT3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0T3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHZhciBvcHRpb247XHJcbiAgICAgICAgZm9yIChvcHRpb24gaW4gZGVmYXVsdE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnNbb3B0aW9uXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zW29wdGlvbl0gPSBjbG9uZShkZWZhdWx0T3B0aW9uc1tvcHRpb25dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzaGFsbG93IGNvcHlcclxuICAgIGZ1bmN0aW9uIGNvcHlPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIG5ld09wdGlvbnMgPSBjbG9uZShvcHRpb25zKSwgb3B0aW9uO1xyXG4gICAgICAgIGZvciAob3B0aW9uIGluIGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdPcHRpb25zW29wdGlvbl0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbmV3T3B0aW9uc1tvcHRpb25dID0gY2xvbmUoZGVmYXVsdE9wdGlvbnNbb3B0aW9uXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld09wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXh0ZW5kT3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0T3B0aW9ucykge1xyXG4gICAgICAgIHZhciBuZXdPcHRpb25zID0gY2xvbmUob3B0aW9ucyksIG9wdGlvbjtcclxuICAgICAgICBmb3IgKG9wdGlvbiBpbiBkZWZhdWx0T3B0aW9ucykge1xyXG4gICAgICAgICAgICBuZXdPcHRpb25zW29wdGlvbl0gPSBjbG9uZShkZWZhdWx0T3B0aW9uc1tvcHRpb25dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld09wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0TGlzdGVuZXIocHJpbWl0aXZlLCB0eXBlLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHByaW1pdGl2ZVt0eXBlXSA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHByaW1pdGl2ZSwgdHlwZSkge1xyXG4gICAgICAgIGRlbGV0ZSBwcmltaXRpdmVbdHlwZV07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZW5oYW5jZVdpdGhMaXN0ZW5lcnMoZWxlbWVudCkge1xyXG5cclxuICAgICAgICBlbGVtZW50Ll9saXN0ZW5lcnMgPSB7fTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbbmFtZV0gPSAodGhpcy5fbGlzdGVuZXJzW25hbWVdIHx8IFtdKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdGVuZXJzW25hbWVdLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQuZXhlY3V0ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCwgZGVmYXVsdENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbZXZlbnQubmFtZV0gJiYgdGhpcy5fbGlzdGVuZXJzW2V2ZW50Lm5hbWVdLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKDsgaW5kZXggPCB0aGlzLl9saXN0ZW5lcnNbZXZlbnQubmFtZV0ubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50Lm5hbWVdW2luZGV4XShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blvZPliY3ngrnkvY3nmoTov5HlnLDngrnkvY1cclxuICAgICAqIEBwYXJhbSB7Q2VzaXVtLkNhcnRlc2lhbjN9IGNlc2l1bTNcclxuICAgICAqIEByZXR1cm5zIHtDZXNpdW0uQ2FydGVzaWFuM31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0Q2VzaXVtSGlnaHRaZXJvKGNlc2l1bTMpIHtcclxuICAgICAgICB2YXIgZnJvbUNhcnRlc2lhbiA9IENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbUNhcnRlc2lhbihjZXNpdW0zKTtcclxuICAgICAgICByZXR1cm4gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbVJhZGlhbnMoZnJvbUNhcnRlc2lhbi5sb25naXR1ZGUsIGZyb21DYXJ0ZXNpYW4ubGF0aXR1ZGUsIDApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gXztcclxufSkpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///41\n")},function(module,exports){eval('module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, "loaded", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, "id", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzP2NlZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjQyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRpZiAoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcclxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///42\n')},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvVGhpcmRQYXJ0eS9EcmF3SGVscGVyLmNzcz9lZmE1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjQzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///43\n")}])});