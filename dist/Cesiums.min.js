!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Cesium")):"function"==typeof define&&define.amd?define(["Cesium"],e):"object"==typeof exports?exports.Cesiums=e(require("Cesium")):t.Cesiums=e(t.Cesium)}(window,function(i){return function(i){var n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=i,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist",r(r.s=6)}([function(t,e){t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChoiceHelper=e.DrawHelper=e.Settings=e.OfficialUtils=e.EditableEntity=e.DazzlingLabelEntity=e.eventSystem=e.Cartesian3s=e.Cameras=e.__dirpath=void 0;var n=i(7);Object.defineProperty(e,"Cameras",{enumerable:!0,get:function(){return n.Cameras}});var r=i(4);Object.defineProperty(e,"Cartesian3s",{enumerable:!0,get:function(){return r.Cartesian3s}});var o=i(5);Object.defineProperty(e,"eventSystem",{enumerable:!0,get:function(){return o.eventSystem}});var a=i(9);Object.defineProperty(e,"DazzlingLabelEntity",{enumerable:!0,get:function(){return a.DazzlingLabelEntity}});var s=i(12);Object.defineProperty(e,"EditableEntity",{enumerable:!0,get:function(){return s.EditableEntity}});var l=i(13);Object.defineProperty(e,"Settings",{enumerable:!0,get:function(){return l.Settings}});var c=i(14);Object.defineProperty(e,"ChoiceHelper",{enumerable:!0,get:function(){return c.ChoiceHelper}}),i(15);var u=p(i(3)),d=p(i(16));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}i(18);e.__dirpath=function(){for(var t="",e=document.querySelectorAll("script"),i=0;i<e.length;i++)if(/Cesiums[^\/]*$/.test(e.item(i).src)){t=e.item(i).src;break}return t.match(/(.+)\/(Cesiums.js.*|Cesiums.min.js)/)[1]}(),e.OfficialUtils=u,e.DrawHelper=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getWithDefault=function(t,e){return n(t)?t:e};var n=e.defined=function(t){return null!=t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.computeCirclularFlight=function(t,e,i,n){for(var r=new Cesium.SampledPositionProperty,o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,l=o;l<a;l+=s){var c=Cesium.Math.toRadians(l),u=l-o,d=Cesium.JulianDate.addSeconds(start,u,new Cesium.JulianDate),p=Cesium.Cartesian3.fromDegrees(t+1.5*n*Math.cos(c),e+n*Math.sin(c),i);r.addSample(d,p)}return r},e.computeCirclularFlightPositions=function(t,e,i,n){for(var r=[],o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,l=o;l<a;l+=s){var c=Cesium.Math.toRadians(l),u=Cesium.Cartesian3.fromDegrees(t+1.5*n*Math.cos(c),e+n*Math.sin(c),i);r.push(u)}return r},e.computeCirclularAugle=function(t){for(var e=360*Cesium.Math.nextRandomNumber(),i=e+360,n=[],r=e;r<i;r+=t)n.push(r);return n},e.computeCircle=function(t){for(var e=[],i=0;i<360;i++){var n=Cesium.Math.toRadians(i);e.push(new Cesium.Cartesian2(t*Math.cos(n),t*Math.sin(n)))}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cartesian3s=void 0;var r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0));e.Cartesian3s=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}return r(n,null,[{key:"toRadians",value:function(t){return o.Cartographic.fromCartesian(t)}},{key:"toDegrees",value:function(t){var e=n.toRadians(t);return{height:e.height,latitude:o.Math.toDegrees(e.latitude),longitude:o.Math.toDegrees(e.longitude)}}},{key:"formatHeightPlus",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,i=n.toRadians(t);return o.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+e)}},{key:"formatHeightZero",value:function(t){var e=n.toRadians(t);return o.Cartesian3.fromRadians(e.longitude,e.latitude,0)}},{key:"formatHeight",value:function(t,e){var i=n.toRadians(t);return o.Cartesian3.fromRadians(i.longitude,i.latitude,e)}}]),n}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.eventSystem=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0)),o=i(2),a=i(8);var s=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._init=!1,this._accuracy=t}return n(e,[{key:"setView",value:function(t){return this._init||(this.viewer=t,(0,o.defined)(t)&&(this._init=!0,this.eventBind())),this}},{key:"setAccuracy",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return this._accuracy=t,this}},{key:"eventBind",value:function(){var e=this,t=new r.ScreenSpaceEventHandler(this.viewer.scene.canvas);t.setInputAction(function(t){e.callPrimitiveCallback("leftClick",t.position)},r.ScreenSpaceEventType.LEFT_CLICK),t.setInputAction(function(t){e.callPrimitiveCallback("leftDoubleClick",t.position)},r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.setInputAction(function(t){},r.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(t){e.callPrimitiveCallback("leftUp",t.position)},r.ScreenSpaceEventType.LEFT_UP),t.setInputAction(function(t){e.callPrimitiveCallback("leftDown",t.position)},r.ScreenSpaceEventType.LEFT_DOWN)}},{key:"callPrimitiveCallback",value:function(t,e){var i=this.viewer.scene.pick(e,this._accuracy,this._accuracy);i&&i.primitive&&i.primitive[t]&&i.primitive[t](e),i&&(0,a.typeContaines)(i.id,"Entity")&&i.id[t]&&i.id[t](e)}},{key:"setListener",value:function(t,e,i){(0,o.defined)(t)&&(0,o.defined)(e)&&"function"==typeof i&&(t[e]=i)}},{key:"onLeftClick",value:function(t,e){this.setListener(t,l.LEFT_CLICK,e)}},{key:"onLeftDoubleClick",value:function(t,e){this.setListener(t,l.LEFT_DOUBLE_CLICK,e)}},{key:"onMouseMove",value:function(t,e){this.setListener(t,l.MOUSE_MOVE,e)}},{key:"onLeftUp",value:function(t,e){this.setListener(t,l.LEFT_UP,e)}},{key:"onLeftDown",value:function(t,e){this.setListener(t,l.LEFT_DOWN,e)}}]),e}(),l=Object.freeze({LEFT_CLICK:"leftClick",LEFT_DOUBLE_CLICK:"leftDoubleClick",MOUSE_MOVE:"mouseMove",LEFT_UP:"leftUp",LEFT_DOWN:"leftDown"});e.eventSystem=new s},function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cameras=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),g=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0)),u=i(3),a=(i(1),i(2));e.Cameras=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"getPositionAwayByCamara",value:function(t,e,i){var n=g.Cartesian3.distance(t.position,e,new g.Cartesian3),r=g.Cartesian3.subtract(t.position,e,new g.Cartesian3),o=g.Cartesian3.multiplyByScalar(r,i/n,new g.Cartesian3);return g.Cartesian3.add(e,o,new g.Cartesian3)}},{key:"flyAroundPosition",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.1,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:-45,a=(0,u.computeCirclularAugle)(r),s=0,l=1e3*n/a.length,c=setInterval(function(){t.lookAt(e,new g.HeadingPitchRange(g.Math.toRadians(a[s]),g.Math.toRadians(o),i)),t.lookAtTransform(g.Matrix4.IDENTITY),s=++s%a.length},l);return function(){clearInterval(c),t.lookAtTransform(g.Matrix4.IDENTITY)}}},{key:"flyAt",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=i.heading,r=void 0===n?0:n,o=i.pitch,a=void 0===o?0:o,s=i.range,l=void 0===s?50:s,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};a=g.Math.toRadians(a),r=g.Math.toRadians(r);var d=g.Matrix4.fromRotationTranslation(g.Matrix3.fromHeadingPitchRoll(new g.HeadingPitchRoll(r+Math.PI/2,-a,0))),p=g.Matrix4.multiplyByPoint(d,new g.Cartesian3(l,0,0),new g.Cartesian3),h=g.Transforms.eastNorthUpToFixedFrame(e,g.Ellipsoid.WGS84,new g.Matrix4),f=g.Matrix4.multiplyByPoint(h,p,new g.Cartesian3);t.flyTo({destination:f,orientation:{heading:r,pitch:a,roll:0},complete:c,cancel:u})}},{key:"saveCameraStatus",value:function(t){var e={position:t.position,heading:t.heading,pitch:t.pitch,roll:t.roll},i=[e.position.x.toFixed(2),e.position.y.toFixed(2),e.position.z.toFixed(2),e.heading.toFixed(2),e.pitch.toFixed(2),e.roll.toFixed(2)];return encodeURIComponent(i.join(","))}},{key:"loadCameraStatus",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=arguments[3];try{var r=decodeURIComponent(e).split(",");if(!((0,a.defined)(r)&&6<=r.length))throw"not define position| heading | pitch | roll";var o={destination:{x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])},orientation:{heading:parseFloat(r[3]),pitch:parseFloat(r[4]),roll:parseFloat(r[5])}};i?t.flyTo(o):t.setView(o)}catch(t){console.error(t),"function"==typeof n&&n(t)}}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getType=e.typeContaines=e.isType=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(2);e.isType=function(t,e){return!("object"!==(void 0===t?"undefined":n(t))||!(0,r.defined)(t.constructor))&&t.constructor.toString().match(/^function\s*([^\s(]+)/)[1]===e},e.typeContaines=function(t,e){if("object"===(void 0===t?"undefined":n(t))&&(0,r.defined)(t.constructor)){var i=t.constructor.toString().match(/^function\s*([^\s(]+)/);if((0,r.defined)(i)&&(0,r.defined)(i[1]))return-1!==i[1].indexOf(e)}return!1},e.getType=function(t){if("object"===(void 0===t?"undefined":n(t))&&(0,r.defined)(t.constructor)){var e=t.constructor.toString().match(/^function\s*([^\s(]+)/);if((0,r.defined)(e)&&(0,r.defined)(e[1]))return e[1]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DazzlingLabelEntity=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),y=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0)),v=i(4),m=i(10),r=i(11),b=i(1);e.DazzlingLabelEntity=function(t){function g(i){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.modelColor,n=void 0===e?y.Color.DARKVIOLET:e,r=t.line,o=(r=void 0===r?{}:r).width,a=void 0===o?5:o,s=t.ring,l=(s=void 0===s?{}:s).timePeriod,c=void 0===l?10:l,u=s.relativeSize,d=void 0===u?1:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);var p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,i)),h=(new m.SimpleCosBuilder).setPeriod(c/2).setAmplitude(-.5).setPhase(0).build(),f=y.JulianDate.now();return p.ringEntity=new y.Entity({position:new y.CallbackProperty(function(t,e){return v.Cartesian3s.formatHeight(i.position,(.5+h.calc(y.JulianDate.secondsDifference(y.JulianDate.now(),f)%(c/2)))*v.Cartesian3s.toRadians(i.position).height)},!1),model:{uri:b.__dirpath+"/resources/圆环.glb",scale:new y.CallbackProperty(function(t,e){return y.Cartesian3.distance(i.position,p.viewer.scene.camera.position)*d/340},!1),maximumScale:1,color:n,show:new y.CallbackProperty(function(t,e){return p.selected},!1)},polyline:{positions:[v.Cartesian3s.formatHeightZero(i.position),i.position],width:a,material:n}}),(p.ringEntity.parent=p).initEvent(),p.selected=!1,p}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,r.BaseEntity),n(g,[{key:"setViewer",value:function(t){(this.viewer=t).entities.add(this),t.entities.add(this.ringEntity)}},{key:"removeViewer",value:function(t){t.entities.add(this),t.entities.add(this.ringEntity)}}]),g}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=e.SimpleSin=function(){function n(t,e,i){return o(this,n),this.A=t,this.k=e,this.b=i,this}return r(n,[{key:"calc",value:function(t){return Math.sin(this.k*t+this.b)*this.A}}]),n}(),a=(e.SimpleSinBuilder=function(){function t(){o(this,t)}return r(t,[{key:"setPeriod",value:function(t){return this.k=2*Math.PI/t,this}},{key:"setAmplitude",value:function(t){return this.A=t,this}},{key:"setPhase",value:function(t){return this.b=t,this}},{key:"build",value:function(){return new n(this.A,this.k,this.b)}}]),t}(),e.simpleCos=function(){function n(t,e,i){return o(this,n),this.A=t,this.k=e,this.b=i,this}return r(n,[{key:"calc",value:function(t){return Math.cos(this.k*t+this.b)*this.A}}]),n}());e.SimpleCosBuilder=function(){function t(){o(this,t)}return r(t,[{key:"setPeriod",value:function(t){return this.k=2*Math.PI/t,this}},{key:"setAmplitude",value:function(t){return this.A=t,this}},{key:"setPhase",value:function(t){return this.b=t,this}},{key:"build",value:function(){return new a(this.A,this.k,this.b)}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseEntity=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0)),o=i(5);e.BaseEntity=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Entity),n(e,[{key:"setViewer",value:function(t){t.entities.add(this)}},{key:"removeViewer",value:function(t){t.entities.remove(this)}},{key:"display",value:function(){this.show=!0}},{key:"hide",value:function(){this.show=!1}},{key:"setSelected",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.selected=t}},{key:"cancelSelected",value:function(){this.selected=!1}},{key:"onSelect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._selectedCallback=t}},{key:"onRelease",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._releaseCallback=t}},{key:"initEvent",value:function(){var e=this;o.eventSystem.onLeftClick(this,function(t){"function"==typeof e.onClickCallback&&e.onClickCallback(t)})}},{key:"onClick",value:function(t){this.onClickCallback=t}},{key:"selected",set:function(t){this._selected=t,this.selected?"function"==typeof this._selectedCallback()&&this._selectedCallback():"function"==typeof this._releaseCallback&&this._releaseCallback()},get:function(){return this._selected}}]),e}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditableEntity=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0));e.EditableEntity=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Entity),n(e,[{key:"test",value:function(){console.log("test")}}],[{key:"test2",value:function(){console.log("test2")}}]),e}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0));e.Settings=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"cancelDefaultDbLeftClick",value:function(t){t.cesiumWidget.screenSpaceEventHandler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"cancelTilt",value:function(t){t.scene.screenSpaceCameraController.enableTilt=!1}},{key:"cancelRotate",value:function(t){t.scene.screenSpaceCameraController.enableRotate=!1}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChoiceHelper=n;var u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0)),d=i(1);function n(t){this._cesiumViewer=t.viewer,this.util=new h(this._cesiumViewer),this._scene=this._cesiumViewer.scene,this._drawHelper=new d.DrawHelper(this._cesiumViewer),this._option=t,this._afterClick=t.callbacks.afterClick,this._primitives=[];var e,i,n,r,o,a,s,l=this;if(u.defined(t.toolbar)&&u.defined(t.toolbar.container))this._toolbarContainer=t.toolbar.container,this._toolbar=this._drawHelper.addToolbar(this._toolbarContainer,{buttons:t.toolbar.buttons,clickCallback:function(t){l._afterClick&&l._afterClick(),l.util.getWithDefault(l._primitives,[]).forEach(function(t,e){l._scene.primitives.remove(t)})},pickStrategy:p});else{if(!u.defined(t.dom))return void console.error("传入参数有误！");this._toolbar=this._drawHelper.addToolbar(document.body,{buttons:[]});var c=this._toolbar;t.dom.polygon&&(s=t.dom.polygon.onclick,t.dom.polygon.onclick=function(t){s&&s(t),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingPolygon({callback:function(t,e){c.executeListeners({name:"polygonCreated",positions:t})},strategy:{pickStrategy:p}})}),t.dom.polygon&&(a=t.dom.polyline.onclick,t.dom.polyline.onclick=function(t){a&&a(t),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingPolyline({callback:function(t,e){c.executeListeners({name:"polylineCreated",positions:t})},strategy:{pickStrategy:p}})}),t.dom.marker&&(o=t.dom.marker.onclick,t.dom.marker.onclick=function(t){o&&o(t),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingMarker({callback:function(t,e){c.executeListeners({name:"markerCreated",position:t})},strategy:{pickStrategy:p}})}),t.dom.extent&&(r=t.dom.extent.onclick,t.dom.extent.onclick=function(t){r&&r(t),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingExtent({callback:function(t,e){c.executeListeners({name:"extentCreated",extent:t})},strategy:{pickStrategy:p}})}),t.dom.circle&&(n=t.dom.circle.onclick,t.dom.circle.onclick=function(t){n&&n(t),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingCircle({callback:function(t,e,i){c.executeListeners({name:"circleCreated",center:t,radius:e})},strategy:{pickStrategy:p}})}),t.dom.clear&&(i=t.dom.clear.onclick,t.dom.clear.onclick=function(t){i&&i(t),l._afterClick&&l._afterClick()}),t.dom.cancel&&(e=t.dom.cancel.onclick,t.dom.cancel.onclick=function(t){e&&e(t),l._afterClick&&l._afterClick(),l._drawHelper.stopDrawing()})}this._eventInit()}var p=function(t,e){if(u.defined(e.scene.pick(t))&&e.scene.pickPositionSupported)return e.scene.pickPosition(t);var i=u.Cartographic.fromCartesian(e.scene.camera.pickEllipsoid(t));return u.Cartesian3.fromRadians(i.longitude,i.latitude,0)};function h(t){this._viewer=t,this._ellipsoid=this._viewer.scene.globe._ellipsoid}n.prototype._optionReload=function(){},n.prototype._eventInit=function(){var a=this;a._toolbar.addListener("polygonCreated",function(t){new d.DrawHelper.PolygonPrimitive({positions:t.positions,material:u.Material.fromType("Checkerboard")});console.log(t);var r=[];a.util.getWithDefault(t.positions,[]).forEach(function(t,e){r.push(a.util.Cartesian3ToLatLng(t))}),a._filterExecuter(function(t){var n=[];return a.util.getWithDefault(t,[]).forEach(function(t,e){var i=u.Cartographic.fromCartesian(t.position.getValue(0));a.util._isInPolygon(i,r)&&n.push(t)}),n})}),a._toolbar.addListener("circleCreated",function(o){a._filterExecuter(function(t){var r=[];return a.util.getWithDefault(t,[]).forEach(function(t,e){var i=u.Cartographic.fromCartesian(t.position.getValue(0)),n=u.Cartesian3.fromRadians(i.longitude,i.latitude,0);u.Cartesian3.distance(a.util.getCesiumHightZero(o.center),n)<=o.radius&&r.push(t)}),r})}),a._toolbar.addListener("extentCreated",function(t){var r=t.extent;a._filterExecuter(function(t){var n=[];return a.util.getWithDefault(t,[]).forEach(function(t,e){var i=a.util.Cartesian3ToLatLng(t.position.getValue(0));r.west<=i.longitude&&r.east>=i.longitude&&r.south<=i.latitude&&r.north>=i.latitude&&n.push(t)}),n})}),a._toolbar.addListener("markerCreated",function(t){a._option.callbacks.marker(t.position)})},n.prototype.setOption=function(t){},n.prototype._callBack=function(){},n.prototype._filterExecuter=function(t){var e=this,r=t(e._cesiumViewer.entities.values);e.util.getWithDefault(e._option.callbacks.choice,[]).forEach(function(i,t){var n=[];e.util.getWithDefault(r,[]).forEach(function(t,e){i.filter(t)&&n.push(t)}),i.onChoice(n)})},h.prototype.Cartesian3ToLatLng=function(t){return this._ellipsoid.cartesianToCartographic(t)},h.prototype.Cartesian3ToDegrees=function(t){var e=this._ellipsoid.cartesianToCartographic(t);return{height:e.height,latitude:u.Math.toDegrees(e.latitude),longitude:u.Math.toDegrees(e.longitude)}},h.prototype.getWithDefault=function(t,e){return t||e},h.prototype.getCesiumHightZero=function(t){var e=u.Cartographic.fromCartesian(t);return u.Cartesian3.fromRadians(e.longitude,e.latitude,0)},h.prototype.formatHetightPlusNumber=function(t,e){var i=u.Cartographic.fromCartesian(t);return u.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+e)},h.prototype._isInPolygon=function(t,e){var i,n,r=t.longitude,o=t.latitude,a=0,s=0,l=0,c=0,u=0;if(e.size<3)return!1;for(i=0,n=e.length,a=0;a<n-1;a++)u=a===n-1?(s=e[a].longitude,c=e[a].latitude,l=e[0].longitude,e[0].latitude):(s=e[a].longitude,c=e[a].latitude,l=e[a+1].longitude,e[a+1].latitude),(c<=o&&o<u||u<=o&&o<c)&&0<Math.abs(c-u)&&s-(s-l)*(c-o)/(c-u)<r&&i++;return i%2!=0}},function(t,e,i){},function(t,s,l){"use strict";(function(t){var e,i,n,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}window,r=function(y){var v=y.Ellipsoid.WGS84,l=function(t,e){return e.scene.camera.pickEllipsoid(t)};function m(t){var e,i;this._viewer=t,this._scene=t.scene,this._tooltip=(e=t.container,(i=function(t){var e=document.createElement("DIV");e.className="twipsy right";var i=document.createElement("DIV");i.className="twipsy-arrow",e.appendChild(i);var n=document.createElement("DIV");n.className="twipsy-inner",e.appendChild(n),this._div=e,this._title=n,t.appendChild(e),this.addEvent(),this.setVisible(!1)}).prototype.setVisible=function(t){this._div.style.display=t?"block":"none"},i.prototype.showAt=function(t,e){t&&e&&(this.setVisible(!0),this._title.innerHTML=e)},i.prototype.show=function(t){t&&(this.setVisible(!0),this._title.innerHTML=t)},i.prototype.addEvent=function(){var e=this,i=0;document.body.addEventListener("mousemove",function(t){"block"===e._div.style.display&&0==(i=i++%3)&&(e._div.style.left=t.offsetX+20+"px",e._div.style.top=t.offsetY-e._div.clientHeight/2+"px")})},new i(e)),this._surfaces=[],y.defined(y.ContextLimits)&&(y.ContextLimits._maximumAliasedLineWidth=10),this.initialiseHandlers(),this.enhancePrimitives(),E(this)}m.prototype.initialiseHandlers=function(){var i,n=this._scene,r=this,t=new y.ScreenSpaceEventHandler(n.canvas);function e(t,e){if(1!=r._handlersMuted){var i=n.pick(e);i&&i.primitive&&i.primitive[t]&&i.primitive[t](e),i&&i.id&&"Entity"===i.id.constructor.toString().match(/^function\s*([^\s(]+)/)[1]&&i.id[t]&&i.id[t](e)}}t.setInputAction(function(t){e("leftClick",t.position)},y.ScreenSpaceEventType.LEFT_CLICK),t.setInputAction(function(t){e("leftDoubleClick",t.position)},y.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.setInputAction(function(t){if(1!=r._handlersMuted){var e=n.pick(t.endPosition);!i||e&&i==e.primitive||((!i.isDestroyed||!i.isDestroyed())&&i.mouseOut(t.endPosition),i=null),e&&e.primitive&&((e=e.primitive).mouseOut&&(i=e),e.mouseMove&&e.mouseMove(t.endPosition))}},y.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(t){e("leftUp",t.position)},y.ScreenSpaceEventType.LEFT_UP),t.setInputAction(function(t){e("leftDown",t.position)},y.ScreenSpaceEventType.LEFT_DOWN)},m.prototype.setListener=function(t,e,i){t[e]=i},m.prototype.muteHandlers=function(t){this._handlersMuted=t},m.prototype.registerEditableShape=function(e){var i=this;w(e,"mouseMove",function(t){e.setHighlighted(!0),e._editMode||i._tooltip.showAt(t,"Click to edit this shape")}),w(e,"mouseOut",function(t){e.setHighlighted(!1),i._tooltip.setVisible(!1)}),w(e,"leftClick",function(t){e.setEditMode(!0)})},m.prototype.startDrawing=function(t){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=t,this.muteHandlers(!0)},m.prototype.stopDrawing=function(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1)},m.prototype.disableAllHighlights=function(){this.setHighlighted(void 0)},m.prototype.setHighlighted=function(t){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=t&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=t},m.prototype.disableAllEditMode=function(){this.setEdited(void 0)},m.prototype.setEdited=function(t){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=t};var t=y.Material.fromType(y.Material.ColorType);t.uniforms.color=new y.Color(1,1,0,.5);var e={ellipsoid:y.Ellipsoid.WGS84,textureRotationAngle:0,height:0,asynchronous:!0,show:!0,debugShowBoundingVolume:!1,strategy:{pickStrategy:l}},p=k(e,{appearance:new y.EllipsoidSurfaceAppearance({aboveGround:!1}),material:t,granularity:Math.PI/180,strategy:{pickStrategy:l}}),c=k(e,{}),u=k(e,{}),d=k(e,{}),i=k(p,{rotation:0}),h=k(e,{width:5,geodesic:!0,granularity:1e4,appearance:new y.PolylineMaterialAppearance({aboveGround:!1}),material:t}),n=function(){function t(){}return t.prototype.initialiseOptions=function(t){g(this,t),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0},t.prototype.setAttribute=function(t,e){this[t]=e,this._createPrimitive=!0},t.prototype.getAttribute=function(t){return this[t]},t.prototype.update=function(t,e,i){if(!y.defined(this.ellipsoid))throw new y.DeveloperError("this.ellipsoid must be defined.");if(!y.defined(this.appearance))throw new y.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new y.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||y.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var n=this.getGeometry();if(!n)return;this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy();this._primitive=new y.Primitive({geometryInstances:new y.GeometryInstance({geometry:n,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(this._outlinePolygon=new y.Primitive({geometryInstances:new y.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:y.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new y.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0},lineWidth:Math.min(this.strokeWidth||4)}})}))}var r=this._primitive;r.appearance.material=this.material,r.update(t,e,i),this._outlinePolygon&&this._outlinePolygon.update(t,e,i)}},t.prototype.isDestroyed=function(){return!1},t.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),y.destroyObject(this)},t.prototype.setStrokeStyle=function(t,e){this.strokeColor&&this.strokeColor.equals(t)&&this.strokeWidth==e||(this._createPrimitive=!0,this.strokeColor=t,this.strokeWidth=e)},t}();m.ExtentPrimitive=function(){function t(t){if(!y.defined(t.extent))throw new y.DeveloperError("Extent is required");t=k(t,p),this.initialiseOptions(t),this.setExtent(t.extent)}return(t.prototype=new n).setExtent=function(t){this.setAttribute("extent",t)},t.prototype.getExtent=function(){return this.getAttribute("extent")},t.prototype.getGeometry=function(){if(y.defined(this.extent))return new y.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},t.prototype.getOutlineGeometry=function(){return new y.RectangleOutlineGeometry({rectangle:this.extent})},t}(),m.PolygonPrimitive=function(){function t(t){t=k(t,p),this.initialiseOptions(t),this.isPolygon=!0}return(t.prototype=new n).setPositions=function(t){this.setAttribute("positions",t)},t.prototype.getPositions=function(){return this.getAttribute("positions")},t.prototype.getGeometry=function(){if(y.defined(this.positions)&&!(this.positions.length<3))return y.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},t.prototype.getOutlineGeometry=function(){return y.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})},t}(),m.CirclePrimitive=function(){function t(t){if(!y.defined(t.center)||!y.defined(t.radius))throw new y.DeveloperError("Center and radius are required");t=k(t,p),this.initialiseOptions(t),this.setRadius(t.radius)}return(t.prototype=new n).setCenter=function(t){this.setAttribute("center",t)},t.prototype.setRadius=function(t){this.setAttribute("radius",Math.max(.1,t))},t.prototype.getCenter=function(){return this.getAttribute("center")},t.prototype.getRadius=function(){return this.getAttribute("radius")},t.prototype.getGeometry=function(){if(y.defined(this.center)&&y.defined(this.radius))return new y.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},t.prototype.getOutlineGeometry=function(){return new y.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},t}(),m.EllipsePrimitive=function(){function t(t){if(!(y.defined(t.center)&&y.defined(t.semiMajorAxis)&&y.defined(t.semiMinorAxis)))throw new y.DeveloperError("Center and semi major and semi minor axis are required");t=k(t,i),this.initialiseOptions(t)}return(t.prototype=new n).setCenter=function(t){this.setAttribute("center",t)},t.prototype.setSemiMajorAxis=function(t){t<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",t)},t.prototype.setSemiMinorAxis=function(t){t>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",t)},t.prototype.setRotation=function(t){return this.setAttribute("rotation",t)},t.prototype.getCenter=function(){return this.getAttribute("center")},t.prototype.getSemiMajorAxis=function(){return this.getAttribute("semiMajorAxis")},t.prototype.getSemiMinorAxis=function(){return this.getAttribute("semiMinorAxis")},t.prototype.getRotation=function(){return this.getAttribute("rotation")},t.prototype.getGeometry=function(){var t;if(y.defined(this.center)&&y.defined(this.semiMajorAxis)&&y.defined(this.semiMinorAxis))return new y.EllipseGeometry((a(t={ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle},"ellipsoid",this.ellipsoid),a(t,"granularity",this.granularity),t))},t.prototype.getOutlineGeometry=function(){return new y.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})},t}(),m.PolylinePrimitive=function(){function t(t){t=k(t,h),this.initialiseOptions(t)}return(t.prototype=new n).setPositions=function(t){this.setAttribute("positions",t)},t.prototype.setWidth=function(t){this.setAttribute("width",t)},t.prototype.setGeodesic=function(t){this.setAttribute("geodesic",t)},t.prototype.getPositions=function(){return this.getAttribute("positions")},t.prototype.getWidth=function(){return this.getAttribute("width")},t.prototype.getGeodesic=function(t){return this.getAttribute("geodesic")},t.prototype.getGeometry=function(){if(y.defined(this.positions)&&!(this.positions.length<2))return new y.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})},t}();var f={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0,strategy:{pickStrategy:l}},b={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0};function _(t){return v.cartographicArrayToCartesianArray([y.Rectangle.northwest(t),y.Rectangle.northeast(t),y.Rectangle.southeast(t),y.Rectangle.southwest(t)])}function C(t,e){var i=new y.Rectangle;i.west=Math.min(t.longitude,e.longitude),i.east=Math.max(t.longitude,e.longitude),i.south=Math.min(t.latitude,e.latitude),i.north=Math.max(t.latitude,e.latitude);var n=y.Math.EPSILON7;return i.east-i.west<n&&(i.east+=2*n),i.north-i.south<n&&(i.north+=2*n),i}function r(t,e){if(null==t||"object"!=(void 0===t?"undefined":o(t)))return t;if(t.constructor!=Object&&t.constructor!=Array)return t;if(t.constructor==Date||t.constructor==RegExp||t.constructor==Function||t.constructor==String||t.constructor==Number||t.constructor==Boolean)return new t.constructor(t);for(var i in e=e||new t.constructor,t)e[i]=void 0===e[i]?r(t[i],null):e[i];return e}function g(t,e){var i;for(i in t=t||{},e)void 0===t[i]&&(t[i]=r(e[i]))}function k(t,e){var i,n=r(t);for(i in e)void 0===n[i]&&(n[i]=r(e[i]));return n}function w(t,e,i){t[e]=i}function E(t){t._listeners={},t.addListener=function(t,e){return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this._listeners[t].length},t.executeListeners=function(t,e){if(this._listeners[t.name]&&0<this._listeners[t.name].length)for(var i=0;i<this._listeners[t.name].length;i++)this._listeners[t.name][i](t);else e&&e(t)}}function S(t){var e=y.Cartographic.fromCartesian(t);return y.Cartesian3.fromRadians(e.longitude,e.latitude,0)}return m.prototype.createBillboardGroup=function(t,e,i){var n=new m.BillboardGroup(this,e);return n.addBillboards(t,i),n},(m.BillboardGroup=function(t,e){this._drawHelper=t,this._scene=t._scene,this._options=k(e,f);var i=new y.BillboardCollection;this._scene.primitives.add(i),this._billboards=i,this._orderedBillboards=[]}).prototype.createBillboard=function(t,n){var r=this._billboards.add({show:!0,position:t,pixelOffset:new y.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new y.Cartesian3(0,0,0),horizontalOrigin:y.HorizontalOrigin.CENTER,verticalOrigin:y.VerticalOrigin.CENTER,scale:1,image:this._options.iconUrl,color:new y.Color(1,1,1,1)});if(n){var o=function(t){e.enableRotate=t},a=function(){for(var t=0,e=s._orderedBillboards.length;t<e&&s._orderedBillboards[t]!=r;++t);return t},s=this,e=this._scene.screenSpaceCameraController;if(n.dragHandlers){s=this;w(r,"leftDown",function(t){function i(t){e.destroy(),o(!0),n.dragHandlers.onDragEnd&&n.dragHandlers.onDragEnd(a(),t)}var e=new y.ScreenSpaceEventHandler(s._scene.canvas);e.setInputAction(function(t){var e=s._scene.camera.pickEllipsoid(t.endPosition,v);e?function(t){r.position=t;for(var e=0,i=s._orderedBillboards.length;e<i&&s._orderedBillboards[e]!=r;++e);n.dragHandlers.onDrag&&n.dragHandlers.onDrag(a(),t)}(e):i(e)},y.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){i(s._scene.camera.pickEllipsoid(t.position,v))},y.ScreenSpaceEventType.LEFT_UP),o(!1),n.dragHandlers.onDragStart&&n.dragHandlers.onDragStart(a(),s._scene.camera.pickEllipsoid(t,v))})}n.onDoubleClick&&w(r,"leftDoubleClick",function(t){n.onDoubleClick(a())}),n.onClick&&w(r,"leftClick",function(t){n.onClick(a())}),n.tooltip&&(w(r,"mouseMove",function(t){s._drawHelper._tooltip.showAt(t,n.tooltip())}),w(r,"mouseOut",function(t){s._drawHelper._tooltip.setVisible(!1)}))}return r},m.BillboardGroup.prototype.insertBillboard=function(t,e,i){this._orderedBillboards.splice(t,0,this.createBillboard(e,i))},m.BillboardGroup.prototype.addBillboard=function(t,e){this._orderedBillboards.push(this.createBillboard(t,e))},m.BillboardGroup.prototype.addBillboards=function(t,e){for(var i=0;i<t.length;i++)this.addBillboard(t[i],e)},m.BillboardGroup.prototype.updateBillboardsPositions=function(t){for(var e=0;e<t.length;e++)this.getBillboard(e).position=t[e]},m.BillboardGroup.prototype.countBillboards=function(){return this._orderedBillboards.length},m.BillboardGroup.prototype.getBillboard=function(t){return this._orderedBillboards[t]},m.BillboardGroup.prototype.removeBillboard=function(t){this._billboards.remove(this.getBillboard(t)),this._orderedBillboards.splice(t,1)},m.BillboardGroup.prototype.remove=function(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()},m.BillboardGroup.prototype.setOnTop=function(){this._scene.primitives.raiseToTop(this._billboards)},m.prototype.startDrawingMarker=function(o){o=k(o,f);this.startDrawing(function(){n&&n.remove(),e&&e.destroy(),s&&s.setVisible(!1)});var i=this,t=this._scene,a=this._viewer,s=(t.primitives,this._tooltip),n=new m.BillboardGroup(this,o),e=new y.ScreenSpaceEventHandler(t.canvas);e.setInputAction(function(t){if(null!=t.position){var e=o.strategy.pickStrategy(t.position,a);e&&(n.addBillboard(e),i.stopDrawing(),o.callback(e,i))}},y.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(function(t){var e,i,n=t.endPosition;if(null!=n){var r=o.strategy.pickStrategy(n,a);r?s.showAt(n,"<p>Click to add your marker. Position is: </p>"+((e=v.cartesianToCartographic(r)).longitude.toFixed(i||3)+", "+e.latitude.toFixed(i||3))):s.showAt(n,"<p>Click on the globe to add your marker.</p>")}},y.ScreenSpaceEventType.MOUSE_MOVE)},m.prototype.startDrawingPolygon=function(t){this.startDrawingPolyshape(!0,t)},m.prototype.startDrawingPolyline=function(t){this.startDrawingPolyshape(!1,t)},m.prototype.startDrawingPolyshape=function(t,n){n=k(n,t?p:h),this.startDrawing(function(){a&&a.remove(r),u&&u.remove(),d&&d.destroy(),s&&s.setVisible(!1)});var r,e=this,i=this._scene,o=this._viewer,a=i.primitives,s=this._tooltip,l=t?3:2;(r=t?new m.PolygonPrimitive(n):new m.PolylinePrimitive(n)).asynchronous=!1,a.add(r);var c=[],u=new m.BillboardGroup(this,f),d=new y.ScreenSpaceEventHandler(i.canvas);d.setInputAction(function(t){if(null!=t.position){if(c.length<l)return;if(n.strategy.pickStrategy(t.position,o)&&(e.stopDrawing(),"function"==typeof n.callback)){c.length;n.callback(c,e)}}},y.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),d.setInputAction(function(t){var e=n.strategy.pickStrategy(t.position,o);e=S(e),null!=t.position&&e&&(0==c.length&&(c.push(e.clone()),u.addBillboard(c[0])),c.length>=l&&(r.positions=c,r._createPrimitive=!0),c.push(e),u.addBillboard(e))},y.ScreenSpaceEventType.LEFT_CLICK),d.setInputAction(function(t){var e=t.endPosition;if(null!=e)if(0==c.length)s.showAt(e,"<p>Click to add first point</p>");else{var i=n.strategy.pickStrategy(e,o);i&&(c.pop(),i.y+=y.Math.EPSILON7,c.push(i),c.length>=l&&(r.positions=c,r._createPrimitive=!0),u.getBillboard(c.length-1).position=i,s.showAt(e,"<p>Click to add new point ("+c.length+")</p>"+(c.length>l?"<p>Double click to finish drawing</p>":"")))}},y.ScreenSpaceEventType.MOUSE_MOVE)},m.prototype.startDrawingExtent=function(n){n=k(n,p);this.startDrawing(function(){null!=l&&o&&o.remove(l),c&&c.remove(),e&&e.destroy(),a&&a.setVisible(!1)});var i=this,t=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,l=null,c=null,e=new y.ScreenSpaceEventHandler(t.canvas);function u(t){null==l&&((l=new m.ExtentPrimitive({extent:t,material:n.material})).asynchronous=!1,o.add(l)),l.setExtent(t);var e=_(l.rectangle=t);null==c?(c=new m.BillboardGroup(i,f)).addBillboards(e):c.updateBillboardsPositions(e)}e.setInputAction(function(t){if(null!=t.position){var e=n.strategy.pickStrategy(t.position,r);if(e)if(null==l)u(C(s=v.cartesianToCartographic(e),s));else i.stopDrawing(),"function"==typeof n.callback&&n.callback(C(s,v.cartesianToCartographic(e)))}},y.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(t){var e=t.endPosition;if(null!=e)if(null==l)a.showAt(e,"<p>Click to start drawing rectangle</p>");else{var i=n.strategy.pickStrategy(e,r);if(i)u(C(s,v.cartesianToCartographic(i))),a.showAt(e,"<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>")}},y.ScreenSpaceEventType.MOUSE_MOVE)},m.prototype.startDrawingCircle=function(n){n=k(n,p);this.startDrawing(function(){null!=s&&o&&o.remove(s),l&&l.remove(),e&&e.destroy(),a&&a.setVisible(!1)});var i=this,t=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,l=null,e=new y.ScreenSpaceEventHandler(t.canvas);e.setInputAction(function(t){if(null!=t.position){var e=n.strategy.pickStrategy(t.position,r);e&&(null==s?(s=new m.CirclePrimitive({center:e,radius:0,asynchronous:!1,material:n.material}),o.add(s),(l=new m.BillboardGroup(i,f)).addBillboards([e])):("function"==typeof n.callback&&n.callback(s.getCenter(),s.getRadius(),i),i.stopDrawing()))}},y.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(t){var e=t.endPosition;if(null!=e)if(null==s)a.showAt(e,"<p>Click to start drawing the circle</p>");else{var i=n.strategy.pickStrategy(e,r);i&&(s.setRadius(y.Cartesian3.distance(S(s.getCenter()),S(i))),l.updateBillboardsPositions(i),a.showAt(e,"<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>"))}},y.ScreenSpaceEventType.MOUSE_MOVE)},m.prototype.enhancePrimitives=function(){var g=this;function e(t){g._scene;this._highlighted&&this._highlighted==t||!0!==this._editMode&&((this._highlighted=t)?(g.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(y.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))}function i(t){if(this._editMode!=t)if(g.disableAllHighlights(),t){g.setEdited(this);var i=g._scene,n=this;if(null==this._markers){var r=function(t,e){var i=t-1<0?e.length-1:t-1;i<c.countBillboards()&&(c.getBillboard(i).position=a(i)),(i=t)<c.countBillboards()&&(c.getBillboard(i).position=a(i))},o=function(){n.executeListeners({name:"onEdited",positions:n.positions})},a=function(t){var e=n.positions;return v.cartographicToCartesian(new y.EllipsoidGeodesic(v.cartesianToCartographic(e[t]),v.cartesianToCartographic(e[t<e.length-1?t+1:0])).interpolateUsingFraction(.5))},e=this.dragBillboard?this.dragBillboard:b,s=this.dragHalfBillboard?this.dragHalfBillboard:b,l=new m.BillboardGroup(g,e),c=new m.BillboardGroup(g,s),u={dragHandlers:{onDrag:function(t,e){n.positions[t]=e,r(t,n.positions),n._createPrimitive=!0},onDragEnd:function(t,e){n._createPrimitive=!0,o()}},onDoubleClick:function(t){n.positions.length<4||(n.positions.splice(t,1),n._createPrimitive=!0,l.removeBillboard(t),c.removeBillboard(t),r(t,n.positions),o())},tooltip:function(){if(3<n.positions.length)return"Double click to remove this point"}};l.addBillboards(n.positions,u),this._markers=l;for(var d=[],p=0,h=n.positions.length+(this.isPolygon?0:-1);p<h;p++)d.push(a(p));var f={dragHandlers:{onDragStart:function(t,e){this.index=t+1,n.positions.splice(this.index,0,e),n._createPrimitive=!0},onDrag:function(t,e){n.positions[this.index]=e,n._createPrimitive=!0},onDragEnd:function(t,e){l.insertBillboard(this.index,e,u),c.getBillboard(this.index-1).position=a(this.index-1),c.insertBillboard(this.index,a(this.index),f),n._createPrimitive=!0,o()}},tooltip:function(){return"Drag to create a new point"}};c.addBillboards(d,f),this._editMarkers=c,this._globeClickhandler=new y.ScreenSpaceEventHandler(i.canvas),this._globeClickhandler.setInputAction(function(t){var e=i.pick(t.position);e&&e.primitive||n.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),l.setOnTop(),c.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1}y.Billboard.prototype.setEditable=function(){if(!this._editable){this._editable=!0;var r=this,o=this;w(r,"leftDown",function(t){function n(t){e.destroy(),i(!0),o.executeListeners({name:"dragEnd",positions:t})}var e=new y.ScreenSpaceEventHandler(g._scene.canvas);e.setInputAction(function(t){var e,i=g._scene.camera.pickEllipsoid(t.endPosition,v);i?(e=i,r.position=e,o.executeListeners({name:"drag",positions:e})):n(i)},y.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){n(g._scene.camera.pickEllipsoid(t.position,v))},y.ScreenSpaceEventType.LEFT_UP),i(!1)}),E(r)}function i(t){g._scene.screenSpaceCameraController.enableRotate=t}},y.Entity.prototype.setEditable=function(t){if(!1===t)return delete(r=this)["leftDown"],void(this._editable=!1);if("billboard"===this.modeType&&!this._editable){this._editable=!0;var r,o=this;w(r=this,"leftDown",function(t){function n(t){e.destroy(),i(!0),o.executeListeners({name:"dragEnd",positions:t})}var e=new y.ScreenSpaceEventHandler(g._scene.canvas);e.setInputAction(function(t){var e,i=g._scene.camera.pickEllipsoid(t.endPosition,v);i?(e=i,r.position=e,o.executeListeners({name:"drag",positions:e})):n(i)},y.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){n(g._scene.camera.pickEllipsoid(t.position,v))},y.ScreenSpaceEventType.LEFT_UP),i(!1)}),E(r)}function i(t){g._scene.screenSpaceCameraController.enableRotate=t}},m.PolylinePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var t=this;t.isPolygon=!1,t.asynchronous=!1,g.registerEditableShape(t),t.setEditMode=i;var e=this.width;t.setHighlighted=function(t){!0!==this._editMode&&(t?(g.setHighlighted(this),this.setWidth(2*e)):this.setWidth(e))},t.getExtent=function(){return y.Extent.fromCartographicArray(v.cartesianArrayToCartographicArray(this.positions))},E(t),t.setEditMode(!1)}},m.PolygonPrimitive.prototype.setEditable=function(){var t=this;t.asynchronous=!1;g._scene;g.registerEditableShape(t),t.setEditMode=i,t.setHighlighted=e,E(t),t.setEditMode(!1)},m.ExtentPrimitive.prototype.setEditable=function(){if(!this.setEditMode){var o=this,a=g._scene;g.registerEditableShape(o),o.asynchronous=!1,o.setEditMode=function(t){if(this._editMode!=t)if(g.disableAllHighlights(),t){if(g.setEdited(this),null==this._markers){var e=this.dragBillboard?this.dragBillboard:b,i=this.dragHalfBillboard?this.dragHalfBillboard:b,n=new m.BillboardGroup(e,i),r={dragHandlers:{onDrag:function(t,e){var i=n.getBillboard((t+2)%4).position;o.setExtent(C(v.cartesianToCartographic(i),v.cartesianToCartographic(e))),n.updateBillboardsPositions(_(o.extent))},onDragEnd:function(t,e){o.executeListeners({name:"onEdited",extent:o.extent})}},tooltip:function(){return"Drag to change the corners of this extent"}};n.addBillboards(_(o.extent),r),this._markers=n,this._globeClickhandler=new y.ScreenSpaceEventHandler(a.canvas),this._globeClickhandler.setInputAction(function(t){var e=a.pick(t.position);try{e&&!e.isDestroyed()&&e.primitive||o.setEditMode(!1)}catch(t){o.setEditMode(!1)}},y.ScreenSpaceEventType.LEFT_CLICK),n.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},o.setHighlighted=e,E(o),o.setEditMode(!1)}},m.EllipsePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=g._scene;a.asynchronous=!1,g.registerEditableShape(a),a.setEditMode=function(t){if(this._editMode!=t)if(g.disableAllHighlights(),t){g.setEdited(this);var i=this;if(null==this._markers){var n=function(){return y.Shapes.computeEllipseBoundary(v,a.getCenter(),a.getSemiMajorAxis(),a.getSemiMinorAxis(),a.getRotation()+Math.PI/2,Math.PI/2).splice(0,4)},e=this.dragBillboard?this.dragBillboard:b,r=new m.BillboardGroup(g,e),o={dragHandlers:{onDrag:function(t,e){var i=y.Cartesian3.distance(a.getCenter(),e);t%2==0?a.setSemiMajorAxis(i):a.setSemiMinorAxis(i),r.updateBillboardsPositions(n())},onDragEnd:function(t,e){a.executeListeners({name:"onEdited",center:a.getCenter(),semiMajorAxis:a.getSemiMajorAxis(),semiMinorAxis:a.getSemiMinorAxis(),rotation:0})}},tooltip:function(){return"Drag to change the excentricity and radius"}};r.addBillboards(n(),o),this._markers=r,this._globeClickhandler=new y.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(t){var e=s.pick(t.position);e&&e.primitive||i.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=e,E(a),a.setEditMode(!1)}},m.CirclePrimitive.prototype.getCircleCartesianCoordinates=function(t){for(var e,i=y.CircleOutlineGeometry.createGeometry(new y.CircleOutlineGeometry({ellipsoid:v,center:this.getCenter(),radius:this.getRadius(),granularity:t})),n=0,r=[];n<i.attributes.position.values.length;n+=3)e=i.attributes.position.values,r.push(new y.Cartesian3(e[n],e[n+1],e[n+2]));return r},m.CirclePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=g._scene;a.asynchronous=!1,g.registerEditableShape(a),a.setEditMode=function(t){if(this._editMode!=t)if(g.disableAllHighlights(),t){g.setEdited(this);var i=this;if(null==this._markers){var n=function(){return i.getCircleCartesianCoordinates(y.Math.PI_OVER_TWO)},e=this.dragBillboard?this.dragBillboard:b,r=new m.BillboardGroup(g,e),o={dragHandlers:{onDrag:function(t,e){a.setRadius(y.Cartesian3.distance(a.getCenter(),e)),r.updateBillboardsPositions(n())},onDragEnd:function(t,e){a.executeListeners({name:"onEdited",center:a.getCenter(),radius:a.getRadius()})}},tooltip:function(){return"Drag to change the radius"}};r.addBillboards(n(),o),this._markers=r,this._globeClickhandler=new y.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(t){var e=s.pick(t.position);e&&e.primitive||i.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=e,E(a),a.setEditMode(!1)}}},m.DrawHelperWidget=function(t,e){if(!y.defined(e.container))throw new y.DeveloperError("Container is required");var i={markerIcon:" marker",polylineIcon:" polyline",polygonIcon:" polygon",circleIcon:" circle",extentIcon:" extent",clearIcon:" clear",polylineDrawingOptions:h,polygonDrawingOptions:c,extentDrawingOptions:u,circleDrawingOptions:d,strategy:{pickStrategy:e.pickStrategy?e.pickStrategy:l}};g(e,i);var n=this,o=document.createElement("DIV");function r(t,e,i,n){var r=document.createElement("DIV");return r.className="button"+e,r.title=i,o.appendChild(r),r.onclick=n,r}o.className="toolbar",e.container.appendChild(o);var a=t._scene;-1!==e.buttons.indexOf("marker")&&r(0,e.markerIcon,"Click to start drawing a 2D marker",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"markerClick"}),t.startDrawingMarker({callback:function(t){n.executeListeners({name:"markerCreated",position:t})},strategy:e.strategy})}),-1!==e.buttons.indexOf("polyline")&&r(0,e.polylineIcon,"Click to start drawing a 2D polyline",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"polylineClick"}),t.startDrawingPolyline({callback:function(t){n.executeListeners({name:"polylineCreated",positions:t})},strategy:e.strategy})}),-1!==e.buttons.indexOf("polygon")&&r(0,e.polygonIcon,"Click to start drawing a 2D polygon",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"polygonClick"}),t.startDrawingPolygon({callback:function(t){n.executeListeners({name:"polygonCreated",positions:t})},strategy:e.strategy})}),-1!==e.buttons.indexOf("extent")&&r(0,e.extentIcon,"Click to start drawing an Extent",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"extentClick"}),t.startDrawingExtent({callback:function(t){n.executeListeners({name:"extentCreated",extent:t})},strategy:e.strategy})}),-1!==e.buttons.indexOf("circle")&&r(0,e.circleIcon,"Click to start drawing a Circle",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"circleClick"}),t.startDrawingCircle({callback:function(t,e){n.executeListeners({name:"circleCreated",center:t,radius:e})},strategy:e.strategy})});var s=document.createElement("DIV");s.className="divider",o.appendChild(s),-1!==e.buttons.indexOf("clear")&&r(0,e.clearIcon,"Remove all primitives",function(){"function"==typeof e.clickCallback&&e.clickCallback({name:"clearClick"}),a.primitives.removeAll()}),E(this)},m.prototype.addToolbar=function(t,e){return e=k(e,{container:t}),new m.DrawHelperWidget(this,e)},m},"object"===o(s)&&"object"===o(t)?t.exports=r(l(0)):(i=[l(0)],void 0===(n="function"==typeof(e=r)?e.apply(s,i):e)||(t.exports=n))}).call(this,l(17)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){}])});
//# sourceMappingURL=Cesiums.min.js.map