!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Cesium")):"function"==typeof define&&define.amd?define(["Cesium"],t):"object"==typeof exports?exports.Cesiums=t(require("Cesium")):e.Cesiums=t(e.Cesium)}(window,function(i){return function(i){var n={};function __webpack_require__(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}return __webpack_require__.m=i,__webpack_require__.c=n,__webpack_require__.d=function(e,t,i){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(i,n,function(e){return t[e]}.bind(null,n));return i},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/dist",__webpack_require__(__webpack_require__.s=7)}([function(e,t){e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChoiceHelper=t.DrawHelper=t.cesium1_50Patch=t.Settings=t.OfficialUtils=t.EditableEntity=t.DazzlingLabelEntity=t.EventType=t.eventSystem=t.Cartesian3s=t.Cameras=t.__dirpath=void 0;var n=i(8);Object.defineProperty(t,"Cameras",{enumerable:!0,get:function get(){return n.Cameras}});var r=i(4);Object.defineProperty(t,"Cartesian3s",{enumerable:!0,get:function get(){return r.Cartesian3s}});var o=i(5);Object.defineProperty(t,"eventSystem",{enumerable:!0,get:function get(){return o.eventSystem}}),Object.defineProperty(t,"EventType",{enumerable:!0,get:function get(){return o.EventType}});var a=i(11);Object.defineProperty(t,"DazzlingLabelEntity",{enumerable:!0,get:function get(){return a.DazzlingLabelEntity}});var s=i(14);Object.defineProperty(t,"EditableEntity",{enumerable:!0,get:function get(){return s.EditableEntity}});var l=i(6);Object.defineProperty(t,"Settings",{enumerable:!0,get:function get(){return l.Settings}});var c=i(15);Object.defineProperty(t,"cesium1_50Patch",{enumerable:!0,get:function get(){return c.cesium1_50Patch}});var u=i(16);Object.defineProperty(t,"ChoiceHelper",{enumerable:!0,get:function get(){return u.ChoiceHelper}}),i(17);var d=_interopRequireWildcard(i(3)),p=_interopRequireWildcard(i(18));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i(20);t.__dirpath=function getPathDir(){for(var e="",t=document.querySelectorAll("script"),i=0;i<t.length;i++)if(/Cesiums[^\/]*$/.test(t.item(i).src)){e=t.item(i).src;break}return e.match(/(.+)\/(Cesiums.js.*|Cesiums.min.js)/)[1]}(),t.OfficialUtils=d,t.DrawHelper=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getWithDefault=function getWithDefault(e,t){return n(e)?e:t};var n=t.defined=function defined(e){return null!=e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.computeCirclularFlight=function computeCirclularFlight(e,t,i,n){for(var r=new Cesium.SampledPositionProperty,o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,l=o;l<a;l+=s){var c=Cesium.Math.toRadians(l),u=l-o,d=Cesium.JulianDate.addSeconds(start,u,new Cesium.JulianDate),p=Cesium.Cartesian3.fromDegrees(e+1.5*n*Math.cos(c),t+n*Math.sin(c),i);r.addSample(d,p)}return r},t.computeCirclularFlightPositions=function computeCirclularFlightPositions(e,t,i,n){for(var r=[],o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,l=o;l<a;l+=s){var c=Cesium.Math.toRadians(l),u=Cesium.Cartesian3.fromDegrees(e+1.5*n*Math.cos(c),t+n*Math.sin(c),i);r.push(u)}return r},t.computeCirclularAugle=function computeCirclularAugle(e){for(var t=360*Cesium.Math.nextRandomNumber(),i=t+360,n=[],r=t;r<i;r+=e)n.push(r);return n},t.computeCircle=function computeCircle(e){for(var t=[],i=0;i<360;i++){var n=Cesium.Math.toRadians(i);t.push(new Cesium.Cartesian2(e*Math.cos(n),e*Math.sin(n)))}return t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cartesian3s=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0));t.Cartesian3s=function(){function Cartesian3s(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cartesian3s)}return n(Cartesian3s,null,[{key:"toRadians",value:function toRadians(e){return r.Cartographic.fromCartesian(e)}},{key:"toDegrees",value:function toDegrees(e){var t=Cartesian3s.toRadians(e);return{height:t.height,latitude:r.Math.toDegrees(t.latitude),longitude:r.Math.toDegrees(t.longitude)}}},{key:"formatHeightPlus",value:function formatHeightPlus(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,i=Cartesian3s.toRadians(e);return r.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+t)}},{key:"formatHeightZero",value:function formatHeightZero(e){var t=Cartesian3s.toRadians(e);return r.Cartesian3.fromRadians(t.longitude,t.latitude,0)}},{key:"formatHeight",value:function formatHeight(e,t){var i=Cartesian3s.toRadians(e);return r.Cartesian3.fromRadians(i.longitude,i.latitude,t)}}]),Cartesian3s}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventSystem=t.EventType=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),o=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0)),r=i(2),a=i(9),s=(i(10),i(6));var l=function(){function EventSystem(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventSystem),this._init=!1,this._accuracy=e}return n(EventSystem,[{key:"setView",value:function setView(e){return this._init||(this.viewer=e,(0,r.defined)(e)&&(this._init=!0,this.eventBind())),this}},{key:"setAccuracy",value:function setAccuracy(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return this._accuracy=e,this}},{key:"eventBind",value:function eventBind(){var t=this,i=!1,n=null,r=!0,e=new o.ScreenSpaceEventHandler(this.viewer.scene.canvas);e.setInputAction(function(e){t.callPrimitiveCallback(c.LEFT_CLICK,e.position)},o.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(function(e){t.callPrimitiveCallback(c.LEFT_DOUBLE_CLICK,e.position)},o.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),e.setInputAction(function(e){i?r?(r=!1,t.callPrimitiveCallbackCurrent(n,c.DRAW_START,e.endPosition)):t.callPrimitiveCallbackCurrent(n,c.DRAW,e.endPosition):t.callPrimitiveCallback(c.MOUSE_MOVE,e.endPosition)},o.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(e){i?(i=!1,t.callPrimitiveCallbackCurrent(n,c.DRAW_END,e.position)):t.callPrimitiveCallback(c.LEFT_UP,e.position),s.Settings.enableRotation(t.viewer,!0),n=null},o.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){i=!0,(n=t.callPrimitiveCallback(c.LEFT_DOWN,e.position))&&s.Settings.enableRotation(t.viewer,!1)},o.ScreenSpaceEventType.LEFT_DOWN)}},{key:"callPrimitiveCallback",value:function callPrimitiveCallback(e,t){var i=this.viewer.scene.pick(t,this._accuracy,this._accuracy);return i&&(0,a.typeContaines)(i.id,"Entity")?this.callPrimitiveCallbackCurrent(i.id,e,t):i&&i.primitive?this.callPrimitiveCallbackCurrent(i.primitive,e,t):void 0}},{key:"callPrimitiveCallbackCurrent",value:function callPrimitiveCallbackCurrent(e,t,i){return e[t]&&e[t](i),e}},{key:"setListener",value:function setListener(e,t,i){(0,r.defined)(e)&&(0,r.defined)(t)&&"function"==typeof i&&(e[t]=i)}},{key:"onLeftClick",value:function onLeftClick(e,t){this.setListener(e,c.LEFT_CLICK,t)}},{key:"onLeftDoubleClick",value:function onLeftDoubleClick(e,t){this.setListener(e,c.LEFT_DOUBLE_CLICK,t)}},{key:"onMouseMove",value:function onMouseMove(e,t){this.setListener(e,c.MOUSE_MOVE,t)}},{key:"onLeftUp",value:function onLeftUp(e,t){this.setListener(e,c.LEFT_UP,t)}},{key:"onLeftDown",value:function onLeftDown(e,t){this.setListener(e,c.LEFT_DOWN,t)}},{key:"onDrag",value:function onDrag(e,t){this.setListener(e,c.DRAW,t)}},{key:"onDragEnd",value:function onDragEnd(e,t){this.setListener(e,c.DRAW_END,t)}}]),EventSystem}(),c=t.EventType=Object.freeze({LEFT_CLICK:"leftClick",LEFT_DOUBLE_CLICK:"leftDoubleClick",MOUSE_MOVE:"mouseMove",LEFT_UP:"leftUp",LEFT_DOWN:"leftDown",DRAW_START:"drawStart",DRAW:"draw",DRAW_END:"drawEnd"});t.eventSystem=new l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0));t.Settings=function(){function Settings(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Settings)}return n(Settings,null,[{key:"cancelDefaultDbLeftClick",value:function cancelDefaultDbLeftClick(e){e.cesiumWidget.screenSpaceEventHandler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"cancelTilt",value:function cancelTilt(e){e.scene.screenSpaceCameraController.enableTilt=!1}},{key:"enableRotation",value:function enableRotation(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.scene.screenSpaceCameraController.enableRotate=t}}]),Settings}()},function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cameras=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),g=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0)),u=i(3),a=(i(1),i(2));t.Cameras=function(){function Cameras(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cameras)}return n(Cameras,null,[{key:"getPositionAwayByCamara",value:function getPositionAwayByCamara(e,t,i){var n=g.Cartesian3.distance(e.position,t,new g.Cartesian3),r=g.Cartesian3.subtract(e.position,t,new g.Cartesian3),o=g.Cartesian3.multiplyByScalar(r,i/n,new g.Cartesian3);return g.Cartesian3.add(t,o,new g.Cartesian3)}},{key:"flyAroundPosition",value:function flyAroundPosition(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.1,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:-45,a=(0,u.computeCirclularAugle)(r),s=0,l=1e3*n/a.length,c=setInterval(function(){e.lookAt(t,new g.HeadingPitchRange(g.Math.toRadians(a[s]),g.Math.toRadians(o),i)),e.lookAtTransform(g.Matrix4.IDENTITY),s=++s%a.length},l);return function(){clearInterval(c),e.lookAtTransform(g.Matrix4.IDENTITY)}}},{key:"flyAt",value:function flyAt(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=i.heading,r=void 0===n?0:n,o=i.pitch,a=void 0===o?0:o,s=i.range,l=void 0===s?50:s,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};a=g.Math.toRadians(a),r=g.Math.toRadians(r);var d=g.Matrix4.fromRotationTranslation(g.Matrix3.fromHeadingPitchRoll(new g.HeadingPitchRoll(r+Math.PI/2,-a,0))),p=g.Matrix4.multiplyByPoint(d,new g.Cartesian3(l,0,0),new g.Cartesian3),h=g.Transforms.eastNorthUpToFixedFrame(t,g.Ellipsoid.WGS84,new g.Matrix4),f=g.Matrix4.multiplyByPoint(h,p,new g.Cartesian3);e.flyTo({destination:f,orientation:{heading:r,pitch:a,roll:0},complete:c,cancel:u})}},{key:"saveCameraStatus",value:function saveCameraStatus(e){var t={position:e.position,heading:e.heading,pitch:e.pitch,roll:e.roll},i=[t.position.x.toFixed(2),t.position.y.toFixed(2),t.position.z.toFixed(2),t.heading.toFixed(2),t.pitch.toFixed(2),t.roll.toFixed(2)];return encodeURIComponent(i.join(","))}},{key:"loadCameraStatus",value:function loadCameraStatus(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=arguments[3];try{var r=decodeURIComponent(t).split(",");if(!((0,a.defined)(r)&&6<=r.length))throw"not define position| heading | pitch | roll";var o={destination:{x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])},orientation:{heading:parseFloat(r[3]),pitch:parseFloat(r[4]),roll:parseFloat(r[5])}};i?e.flyTo(o):e.setView(o)}catch(e){console.error(e),"function"==typeof n&&n(e)}}}]),Cameras}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=t.typeContaines=t.isType=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(2);t.isType=function isType(e,t){return!("object"!==(void 0===e?"undefined":n(e))||!(0,r.defined)(e.constructor))&&e.constructor.toString().match(/^function\s*([^\s(]+)/)[1]===t},t.typeContaines=function typeContaines(e,t){if("object"===(void 0===e?"undefined":n(e))&&(0,r.defined)(e.constructor)){var i=e.constructor.toString().match(/^function\s*([^\s(]+)/);if((0,r.defined)(i)&&(0,r.defined)(i[1]))return-1!==i[1].indexOf(t)}return!1},t.getType=function getType(e){if("object"===(void 0===e?"undefined":n(e))&&(0,r.defined)(e.constructor)){var t=e.constructor.toString().match(/^function\s*([^\s(]+)/);if((0,r.defined)(t)&&(0,r.defined)(t[1]))return t[1]}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setListener=function setListener(e,t,i){e[t]=i},t.removeListener=function removeListener(e,t){delete e[t]},t.enhanceWithListeners=function enhanceWithListeners(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&0<this._listeners[e.name].length)for(var i=0;i<this._listeners[e.name].length;i++)this._listeners[e.name][i](e);else t&&t(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DazzlingLabelEntity=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),g=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0)),_=i(4),y=i(12),r=i(13),v=i(1);t.DazzlingLabelEntity=function(e){function DazzlingLabelEntity(i){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.modelColor,n=void 0===t?g.Color.DARKVIOLET:t,r=e.line,o=(r=void 0===r?{}:r).width,a=void 0===o?5:o,s=e.ring,l=(s=void 0===s?{}:s).timePeriod,c=void 0===l?10:l,u=s.relativeSize,d=void 0===u?1:u;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DazzlingLabelEntity);var p=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(DazzlingLabelEntity.__proto__||Object.getPrototypeOf(DazzlingLabelEntity)).call(this,i)),h=(new y.SimpleCosBuilder).setPeriod(c/2).setAmplitude(-.5).setPhase(0).build(),f=g.JulianDate.now();return p.ringEntity=new g.Entity({position:new g.CallbackProperty(function(e,t){return _.Cartesian3s.formatHeight(i.position,(.5+h.calc(g.JulianDate.secondsDifference(g.JulianDate.now(),f)%(c/2)))*_.Cartesian3s.toRadians(i.position).height)},!1),model:{uri:v.__dirpath+"/resources/圆环.glb",scale:new g.CallbackProperty(function(e,t){return g.Cartesian3.distance(i.position,p.viewer.scene.camera.position)*d/340},!1),maximumScale:1,color:n,show:new g.CallbackProperty(function(e,t){return p.selected},!1)},polyline:{positions:[_.Cartesian3s.formatHeightZero(i.position),i.position],width:a,material:n}}),(p.ringEntity.parent=p).initEvent(),p.selected=!1,p}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DazzlingLabelEntity,r.BaseEntity),n(DazzlingLabelEntity,[{key:"setViewer",value:function setViewer(e){(this.viewer=e).entities.add(this),e.entities.add(this.ringEntity)}},{key:"removeViewer",value:function removeViewer(e){e.entities.add(this),e.entities.add(this.ringEntity)}}]),DazzlingLabelEntity}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=t.SimpleSin=function(){function SimpleSin(e,t,i){return _classCallCheck(this,SimpleSin),this.A=e,this.k=t,this.b=i,this}return n(SimpleSin,[{key:"calc",value:function calc(e){return Math.sin(this.k*e+this.b)*this.A}}]),SimpleSin}(),o=(t.SimpleSinBuilder=function(){function SimpleSinBuilder(){_classCallCheck(this,SimpleSinBuilder)}return n(SimpleSinBuilder,[{key:"setPeriod",value:function setPeriod(e){return this.k=2*Math.PI/e,this}},{key:"setAmplitude",value:function setAmplitude(e){return this.A=e,this}},{key:"setPhase",value:function setPhase(e){return this.b=e,this}},{key:"build",value:function build(){return new r(this.A,this.k,this.b)}}]),SimpleSinBuilder}(),t.simpleCos=function(){function simpleCos(e,t,i){return _classCallCheck(this,simpleCos),this.A=e,this.k=t,this.b=i,this}return n(simpleCos,[{key:"calc",value:function calc(e){return Math.cos(this.k*e+this.b)*this.A}}]),simpleCos}());t.SimpleCosBuilder=function(){function SimpleCosBuilder(){_classCallCheck(this,SimpleCosBuilder)}return n(SimpleCosBuilder,[{key:"setPeriod",value:function setPeriod(e){return this.k=2*Math.PI/e,this}},{key:"setAmplitude",value:function setAmplitude(e){return this.A=e,this}},{key:"setPhase",value:function setPhase(e){return this.b=e,this}},{key:"build",value:function build(){return new o(this.A,this.k,this.b)}}]),SimpleCosBuilder}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEntity=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0)),o=i(5);t.BaseEntity=function(e){function BaseEntity(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseEntity),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(BaseEntity.__proto__||Object.getPrototypeOf(BaseEntity)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(BaseEntity,r.Entity),n(BaseEntity,[{key:"setViewer",value:function setViewer(e){e.entities.add(this)}},{key:"removeViewer",value:function removeViewer(e){e.entities.remove(this)}},{key:"display",value:function display(){this.show=!0}},{key:"hide",value:function hide(){this.show=!1}},{key:"setSelected",value:function setSelected(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.selected=e}},{key:"cancelSelected",value:function cancelSelected(){this.selected=!1}},{key:"onSelect",value:function onSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._selectedCallback=e}},{key:"onRelease",value:function onRelease(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._releaseCallback=e}},{key:"initEvent",value:function initEvent(){var t=this;o.eventSystem.onLeftClick(this,function(e){"function"==typeof t.onClickCallback&&t.onClickCallback(e)})}},{key:"onClick",value:function onClick(e){this.onClickCallback=e}},{key:"selected",set:function set(e){this._selected=e,this.selected?"function"==typeof this._selectedCallback()&&this._selectedCallback():"function"==typeof this._releaseCallback&&this._releaseCallback()},get:function get(){return this._selected}}]),BaseEntity}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableEntity=void 0;var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0));t.EditableEntity=function(e){function EditableEntity(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EditableEntity),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(EditableEntity.__proto__||Object.getPrototypeOf(EditableEntity)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(EditableEntity,r.Entity),n(EditableEntity,[{key:"test",value:function test(){console.log("test")}}],[{key:"test2",value:function test2(){console.log("test2")}}]),EditableEntity}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cesium1_50Patch=function cesium1_50Patch(){Object.defineProperties(Cesium.Model.prototype,{_cachedGltf:{set:function set(e){this._vtxf_cachedGltf=e,this._vtxf_cachedGltf&&this._vtxf_cachedGltf._gltf&&function fixGltf(a){if(a.extensionsUsed){var e=a.extensionsUsed.indexOf("KHR_technique_webgl"),t=a.extensionsRequired.indexOf("KHR_technique_webgl");if(-1!==e){a.extensionsRequired.splice(t,1,"KHR_techniques_webgl"),a.extensionsUsed.splice(e,1,"KHR_techniques_webgl"),a.extensions=a.extensions||{},a.extensions.KHR_techniques_webgl={},a.extensions.KHR_techniques_webgl.programs=a.programs,a.extensions.KHR_techniques_webgl.shaders=a.shaders,a.extensions.KHR_techniques_webgl.techniques=a.techniques;var s=a.extensions.KHR_techniques_webgl.techniques;a.materials.forEach(function(e,t){a.materials[t].extensions.KHR_technique_webgl.values=a.materials[t].values,a.materials[t].extensions.KHR_techniques_webgl=a.materials[t].extensions.KHR_technique_webgl;var i=a.materials[t].extensions.KHR_techniques_webgl;for(var n in i.values){var r=s[i.technique].uniforms;for(var o in r)if(r[o]===n){i.values[o]=i.values[n],delete i.values[n];break}}}),s.forEach(function(e){for(var t in e.attributes){var i=e.attributes[t];e.attributes[t]=e.parameters[i]}for(var n in e.uniforms)i=e.uniforms[n],e.uniforms[n]=e.parameters[i]})}}}(this._vtxf_cachedGltf._gltf)},get:function get(){return this._vtxf_cachedGltf}}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChoiceHelper=ChoiceHelper;var u=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(0)),d=i(1);function ChoiceHelper(e){this._cesiumViewer=e.viewer,this.util=new Util(this._cesiumViewer),this._scene=this._cesiumViewer.scene,this._drawHelper=new d.DrawHelper(this._cesiumViewer),this._option=e,this._afterClick=e.callbacks.afterClick,this._primitives=[];var t,i,n,r,o,a,s,l=this;if(u.defined(e.toolbar)&&u.defined(e.toolbar.container))this._toolbarContainer=e.toolbar.container,this._toolbar=this._drawHelper.addToolbar(this._toolbarContainer,{buttons:e.toolbar.buttons,clickCallback:function clickCallback(e){l._afterClick&&l._afterClick(),l.util.getWithDefault(l._primitives,[]).forEach(function(e,t){l._scene.primitives.remove(e)})},pickStrategy:p});else{if(!u.defined(e.dom))return void console.error("传入参数有误！");this._toolbar=this._drawHelper.addToolbar(document.body,{buttons:[]});var c=this._toolbar;e.dom.polygon&&(s=e.dom.polygon.onclick,e.dom.polygon.onclick=function(e){s&&s(e),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingPolygon({callback:function callback(e,t){c.executeListeners({name:"polygonCreated",positions:e})},strategy:{pickStrategy:p}})}),e.dom.polygon&&(a=e.dom.polyline.onclick,e.dom.polyline.onclick=function(e){a&&a(e),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingPolyline({callback:function callback(e,t){c.executeListeners({name:"polylineCreated",positions:e})},strategy:{pickStrategy:p}})}),e.dom.marker&&(o=e.dom.marker.onclick,e.dom.marker.onclick=function(e){o&&o(e),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingMarker({callback:function callback(e,t){c.executeListeners({name:"markerCreated",position:e})},strategy:{pickStrategy:p}})}),e.dom.extent&&(r=e.dom.extent.onclick,e.dom.extent.onclick=function(e){r&&r(e),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingExtent({callback:function callback(e,t){c.executeListeners({name:"extentCreated",extent:e})},strategy:{pickStrategy:p}})}),e.dom.circle&&(n=e.dom.circle.onclick,e.dom.circle.onclick=function(e){n&&n(e),l._afterClick&&l._afterClick(),l._drawHelper.startDrawingCircle({callback:function callback(e,t,i){c.executeListeners({name:"circleCreated",center:e,radius:t})},strategy:{pickStrategy:p}})}),e.dom.clear&&(i=e.dom.clear.onclick,e.dom.clear.onclick=function(e){i&&i(e),l._afterClick&&l._afterClick()}),e.dom.cancel&&(t=e.dom.cancel.onclick,e.dom.cancel.onclick=function(e){t&&t(e),l._afterClick&&l._afterClick(),l._drawHelper.stopDrawing()})}this._eventInit()}var p=function pickStrategy(e,t){if(u.defined(t.scene.pick(e))&&t.scene.pickPositionSupported)return t.scene.pickPosition(e);var i=u.Cartographic.fromCartesian(t.scene.camera.pickEllipsoid(e));return u.Cartesian3.fromRadians(i.longitude,i.latitude,0)};function Util(e){this._viewer=e,this._ellipsoid=this._viewer.scene.globe._ellipsoid}ChoiceHelper.prototype._optionReload=function(){},ChoiceHelper.prototype._eventInit=function(){var a=this;a._toolbar.addListener("polygonCreated",function(e){new d.DrawHelper.PolygonPrimitive({positions:e.positions,material:u.Material.fromType("Checkerboard")});console.log(e);var r=[];a.util.getWithDefault(e.positions,[]).forEach(function(e,t){r.push(a.util.Cartesian3ToLatLng(e))}),a._filterExecuter(function(e){var n=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var i=u.Cartographic.fromCartesian(e.position.getValue(0));a.util._isInPolygon(i,r)&&n.push(e)}),n})}),a._toolbar.addListener("circleCreated",function(o){a._filterExecuter(function(e){var r=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var i=u.Cartographic.fromCartesian(e.position.getValue(0)),n=u.Cartesian3.fromRadians(i.longitude,i.latitude,0);u.Cartesian3.distance(a.util.getCesiumHightZero(o.center),n)<=o.radius&&r.push(e)}),r})}),a._toolbar.addListener("extentCreated",function(e){var r=e.extent;a._filterExecuter(function(e){var n=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var i=a.util.Cartesian3ToLatLng(e.position.getValue(0));r.west<=i.longitude&&r.east>=i.longitude&&r.south<=i.latitude&&r.north>=i.latitude&&n.push(e)}),n})}),a._toolbar.addListener("markerCreated",function(e){a._option.callbacks.marker(e.position)})},ChoiceHelper.prototype.setOption=function(e){},ChoiceHelper.prototype._callBack=function(){},ChoiceHelper.prototype._filterExecuter=function(e){var t=this,r=e(t._cesiumViewer.entities.values);t.util.getWithDefault(t._option.callbacks.choice,[]).forEach(function(i,e){var n=[];t.util.getWithDefault(r,[]).forEach(function(e,t){i.filter(e)&&n.push(e)}),i.onChoice(n)})},Util.prototype.Cartesian3ToLatLng=function(e){return this._ellipsoid.cartesianToCartographic(e)},Util.prototype.Cartesian3ToDegrees=function(e){var t=this._ellipsoid.cartesianToCartographic(e);return{height:t.height,latitude:u.Math.toDegrees(t.latitude),longitude:u.Math.toDegrees(t.longitude)}},Util.prototype.getWithDefault=function(e,t){return e||t},Util.prototype.getCesiumHightZero=function(e){var t=u.Cartographic.fromCartesian(e);return u.Cartesian3.fromRadians(t.longitude,t.latitude,0)},Util.prototype.formatHetightPlusNumber=function(e,t){var i=u.Cartographic.fromCartesian(e);return u.Cartesian3.fromRadians(i.longitude,i.latitude,i.height+t)},Util.prototype._isInPolygon=function(e,t){var i,n,r=e.longitude,o=e.latitude,a=0,s=0,l=0,c=0,u=0;if(t.size<3)return!1;for(i=0,n=t.length,a=0;a<n-1;a++)u=a===n-1?(s=t[a].longitude,c=t[a].latitude,l=t[0].longitude,t[0].latitude):(s=t[a].longitude,c=t[a].latitude,l=t[a+1].longitude,t[a+1].latitude),(c<=o&&o<u||u<=o&&o<c)&&0<Math.abs(c-u)&&s-(s-l)*(c-o)/(c-u)<r&&i++;return i%2!=0}},function(e,t,i){},function(e,s,l){"use strict";(function(i){var n,r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function webpackUniversalModuleDefinition(e,t){"object"===a(s)&&"object"===a(i)?i.exports=t(l(0)):(r=[l(0)],void 0===(o="function"==typeof(n=t)?n.apply(s,r):n)||(i.exports=o))}(window,function(y){var v=y.Ellipsoid.WGS84,s=function defaultPickStrategy(e,t){return t.scene.camera.pickEllipsoid(e)};function _(e){this._viewer=e,this._scene=e.scene,this._tooltip=function createTooltip(e){var t=function tooltip(e){var t=document.createElement("DIV");t.className="twipsy right";var i=document.createElement("DIV");i.className="twipsy-arrow",t.appendChild(i);var n=document.createElement("DIV");n.className="twipsy-inner",t.appendChild(n),this._div=t,this._title=n,e.appendChild(t),this.addEvent(),this.setVisible(!1)};return t.prototype.setVisible=function(e){this._div.style.display=e?"block":"none"},t.prototype.showAt=function(e,t){e&&t&&(this.setVisible(!0),this._title.innerHTML=t)},t.prototype.show=function(e){e&&(this.setVisible(!0),this._title.innerHTML=e)},t.prototype.addEvent=function(){var t=this,i=0;document.body.addEventListener("mousemove",function(e){"block"===t._div.style.display&&0==(i=i++%3)&&(t._div.style.left=e.offsetX+20+"px",t._div.style.top=e.offsetY-t._div.clientHeight/2+"px")})},new t(e)}(e.container),this._surfaces=[],y.defined(y.ContextLimits)&&(y.ContextLimits._maximumAliasedLineWidth=10),this.initialiseHandlers(),this.enhancePrimitives(),enhanceWithListeners(this)}_.prototype.initialiseHandlers=function(){var i,n=this._scene,r=this,e=new y.ScreenSpaceEventHandler(n.canvas);function callPrimitiveCallback(e,t){if(1!=r._handlersMuted){var i=n.pick(t);i&&i.primitive&&i.primitive[e]&&i.primitive[e](t),i&&i.id&&"Entity"===i.id.constructor.toString().match(/^function\s*([^\s(]+)/)[1]&&i.id[e]&&i.id[e](t)}}e.setInputAction(function(e){callPrimitiveCallback("leftClick",e.position)},y.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(function(e){callPrimitiveCallback("leftDoubleClick",e.position)},y.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),e.setInputAction(function(e){if(1!=r._handlersMuted){var t=n.pick(e.endPosition);!i||t&&i==t.primitive||((!i.isDestroyed||!i.isDestroyed())&&i.mouseOut(e.endPosition),i=null),t&&t.primitive&&((t=t.primitive).mouseOut&&(i=t),t.mouseMove&&t.mouseMove(e.endPosition))}},y.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(e){callPrimitiveCallback("leftUp",e.position)},y.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){callPrimitiveCallback("leftDown",e.position)},y.ScreenSpaceEventType.LEFT_DOWN)},_.prototype.setListener=function(e,t,i){e[t]=i},_.prototype.muteHandlers=function(e){this._handlersMuted=e},_.prototype.registerEditableShape=function(t){var i=this;setListener(t,"mouseMove",function(e){t.setHighlighted(!0),t._editMode||i._tooltip.showAt(e,"Click to edit this shape")}),setListener(t,"mouseOut",function(e){t.setHighlighted(!1),i._tooltip.setVisible(!1)}),setListener(t,"leftClick",function(e){t.setEditMode(!0)})},_.prototype.startDrawing=function(e){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=e,this.muteHandlers(!0)},_.prototype.stopDrawing=function(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1)},_.prototype.disableAllHighlights=function(){this.setHighlighted(void 0)},_.prototype.setHighlighted=function(e){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=e&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=e},_.prototype.disableAllEditMode=function(){this.setEdited(void 0)},_.prototype.setEdited=function(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e};var e=y.Material.fromType(y.Material.ColorType);e.uniforms.color=new y.Color(1,1,0,.5);var t={ellipsoid:y.Ellipsoid.WGS84,textureRotationAngle:0,height:0,asynchronous:!0,show:!0,debugShowBoundingVolume:!1,strategy:{pickStrategy:s}},p=copyOptions(t,{appearance:new y.EllipsoidSurfaceAppearance({aboveGround:!1}),material:e,granularity:Math.PI/180,strategy:{pickStrategy:s}}),l=copyOptions(t,{}),c=copyOptions(t,{}),u=copyOptions(t,{}),i=copyOptions(p,{rotation:0}),h=copyOptions(t,{width:5,geodesic:!0,granularity:1e4,appearance:new y.PolylineMaterialAppearance({aboveGround:!1}),material:e}),n=function(){function _(){}return _.prototype.initialiseOptions=function(e){fillOptions(this,e),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0},_.prototype.setAttribute=function(e,t){this[e]=t,this._createPrimitive=!0},_.prototype.getAttribute=function(e){return this[e]},_.prototype.update=function(e,t,i){if(!y.defined(this.ellipsoid))throw new y.DeveloperError("this.ellipsoid must be defined.");if(!y.defined(this.appearance))throw new y.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new y.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||y.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var n=this.getGeometry();if(!n)return;this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy();this._primitive=new y.Primitive({geometryInstances:new y.GeometryInstance({geometry:n,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(this._outlinePolygon=new y.Primitive({geometryInstances:new y.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:y.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new y.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0},lineWidth:Math.min(this.strokeWidth||4)}})}))}var r=this._primitive;r.appearance.material=this.material,r.update(e,t,i),this._outlinePolygon&&this._outlinePolygon.update(e,t,i)}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),y.destroyObject(this)},_.prototype.setStrokeStyle=function(e,t){this.strokeColor&&this.strokeColor.equals(e)&&this.strokeWidth==t||(this._createPrimitive=!0,this.strokeColor=e,this.strokeWidth=t)},_}();_.ExtentPrimitive=function(){function _(e){if(!y.defined(e.extent))throw new y.DeveloperError("Extent is required");e=copyOptions(e,p),this.initialiseOptions(e),this.setExtent(e.extent)}return(_.prototype=new n).setExtent=function(e){this.setAttribute("extent",e)},_.prototype.getExtent=function(){return this.getAttribute("extent")},_.prototype.getGeometry=function(){if(y.defined(this.extent))return new y.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return new y.RectangleOutlineGeometry({rectangle:this.extent})},_}(),_.PolygonPrimitive=function(){function _(e){e=copyOptions(e,p),this.initialiseOptions(e),this.isPolygon=!0}return(_.prototype=new n).setPositions=function(e){this.setAttribute("positions",e)},_.prototype.getPositions=function(){return this.getAttribute("positions")},_.prototype.getGeometry=function(){if(y.defined(this.positions)&&!(this.positions.length<3))return y.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return y.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})},_}(),_.CirclePrimitive=function(){function _(e){if(!y.defined(e.center)||!y.defined(e.radius))throw new y.DeveloperError("Center and radius are required");e=copyOptions(e,p),this.initialiseOptions(e),this.setRadius(e.radius)}return(_.prototype=new n).setCenter=function(e){this.setAttribute("center",e)},_.prototype.setRadius=function(e){this.setAttribute("radius",Math.max(.1,e))},_.prototype.getCenter=function(){return this.getAttribute("center")},_.prototype.getRadius=function(){return this.getAttribute("radius")},_.prototype.getGeometry=function(){if(y.defined(this.center)&&y.defined(this.radius))return new y.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return new y.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},_}(),_.EllipsePrimitive=function(){function _(e){if(!(y.defined(e.center)&&y.defined(e.semiMajorAxis)&&y.defined(e.semiMinorAxis)))throw new y.DeveloperError("Center and semi major and semi minor axis are required");e=copyOptions(e,i),this.initialiseOptions(e)}return(_.prototype=new n).setCenter=function(e){this.setAttribute("center",e)},_.prototype.setSemiMajorAxis=function(e){e<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",e)},_.prototype.setSemiMinorAxis=function(e){e>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",e)},_.prototype.setRotation=function(e){return this.setAttribute("rotation",e)},_.prototype.getCenter=function(){return this.getAttribute("center")},_.prototype.getSemiMajorAxis=function(){return this.getAttribute("semiMajorAxis")},_.prototype.getSemiMinorAxis=function(){return this.getAttribute("semiMinorAxis")},_.prototype.getRotation=function(){return this.getAttribute("rotation")},_.prototype.getGeometry=function(){var e;if(y.defined(this.center)&&y.defined(this.semiMajorAxis)&&y.defined(this.semiMinorAxis))return new y.EllipseGeometry((_defineProperty(e={ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle},"ellipsoid",this.ellipsoid),_defineProperty(e,"granularity",this.granularity),e))},_.prototype.getOutlineGeometry=function(){return new y.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})},_}(),_.PolylinePrimitive=function(){function _(e){e=copyOptions(e,h),this.initialiseOptions(e)}return(_.prototype=new n).setPositions=function(e){this.setAttribute("positions",e)},_.prototype.setWidth=function(e){this.setAttribute("width",e)},_.prototype.setGeodesic=function(e){this.setAttribute("geodesic",e)},_.prototype.getPositions=function(){return this.getAttribute("positions")},_.prototype.getWidth=function(){return this.getAttribute("width")},_.prototype.getGeodesic=function(e){return this.getAttribute("geodesic")},_.prototype.getGeometry=function(){if(y.defined(this.positions)&&!(this.positions.length<2))return new y.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:y.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})},_}();var f={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0,strategy:{pickStrategy:s}},m={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0};function getExtentCorners(e){return v.cartographicArrayToCartesianArray([y.Rectangle.northwest(e),y.Rectangle.northeast(e),y.Rectangle.southeast(e),y.Rectangle.southwest(e)])}function getExtent(e,t){var i=new y.Rectangle;i.west=Math.min(e.longitude,t.longitude),i.east=Math.max(e.longitude,t.longitude),i.south=Math.min(e.latitude,t.latitude),i.north=Math.max(e.latitude,t.latitude);var n=y.Math.EPSILON7;return i.east-i.west<n&&(i.east+=2*n),i.north-i.south<n&&(i.north+=2*n),i}function clone(e,t){if(null==e||"object"!=(void 0===e?"undefined":a(e)))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var i in t=t||new e.constructor,e)t[i]=void 0===t[i]?clone(e[i],null):t[i];return t}function fillOptions(e,t){var i;for(i in e=e||{},t)void 0===e[i]&&(e[i]=clone(t[i]))}function copyOptions(e,t){var i,n=clone(e);for(i in t)void 0===n[i]&&(n[i]=clone(t[i]));return n}function setListener(e,t,i){e[t]=i}function enhanceWithListeners(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&0<this._listeners[e.name].length)for(var i=0;i<this._listeners[e.name].length;i++)this._listeners[e.name][i](e);else t&&t(e)}}function getCesiumHightZero(e){var t=y.Cartographic.fromCartesian(e);return y.Cartesian3.fromRadians(t.longitude,t.latitude,0)}return _.prototype.createBillboardGroup=function(e,t,i){var n=new _.BillboardGroup(this,t);return n.addBillboards(e,i),n},(_.BillboardGroup=function(e,t){this._drawHelper=e,this._scene=e._scene,this._options=copyOptions(t,f);var i=new y.BillboardCollection;this._scene.primitives.add(i),this._billboards=i,this._orderedBillboards=[]}).prototype.createBillboard=function(e,n){var r=this._billboards.add({show:!0,position:e,pixelOffset:new y.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new y.Cartesian3(0,0,0),horizontalOrigin:y.HorizontalOrigin.CENTER,verticalOrigin:y.VerticalOrigin.CENTER,scale:1,image:this._options.iconUrl,color:new y.Color(1,1,1,1)});if(n){var i=function enableRotation(e){t.enableRotate=e},o=function getIndex(){for(var e=0,t=a._orderedBillboards.length;e<t&&a._orderedBillboards[e]!=r;++e);return e},a=this,t=this._scene.screenSpaceCameraController;if(n.dragHandlers){a=this;setListener(r,"leftDown",function(e){function onDragEnd(e){t.destroy(),i(!0),n.dragHandlers.onDragEnd&&n.dragHandlers.onDragEnd(o(),e)}var t=new y.ScreenSpaceEventHandler(a._scene.canvas);t.setInputAction(function(e){var t=a._scene.camera.pickEllipsoid(e.endPosition,v);t?function onDrag(e){r.position=e;for(var t=0,i=a._orderedBillboards.length;t<i&&a._orderedBillboards[t]!=r;++t);n.dragHandlers.onDrag&&n.dragHandlers.onDrag(o(),e)}(t):onDragEnd(t)},y.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(a._scene.camera.pickEllipsoid(e.position,v))},y.ScreenSpaceEventType.LEFT_UP),i(!1),n.dragHandlers.onDragStart&&n.dragHandlers.onDragStart(o(),a._scene.camera.pickEllipsoid(e,v))})}n.onDoubleClick&&setListener(r,"leftDoubleClick",function(e){n.onDoubleClick(o())}),n.onClick&&setListener(r,"leftClick",function(e){n.onClick(o())}),n.tooltip&&(setListener(r,"mouseMove",function(e){a._drawHelper._tooltip.showAt(e,n.tooltip())}),setListener(r,"mouseOut",function(e){a._drawHelper._tooltip.setVisible(!1)}))}return r},_.BillboardGroup.prototype.insertBillboard=function(e,t,i){this._orderedBillboards.splice(e,0,this.createBillboard(t,i))},_.BillboardGroup.prototype.addBillboard=function(e,t){this._orderedBillboards.push(this.createBillboard(e,t))},_.BillboardGroup.prototype.addBillboards=function(e,t){for(var i=0;i<e.length;i++)this.addBillboard(e[i],t)},_.BillboardGroup.prototype.updateBillboardsPositions=function(e){for(var t=0;t<e.length;t++)this.getBillboard(t).position=e[t]},_.BillboardGroup.prototype.countBillboards=function(){return this._orderedBillboards.length},_.BillboardGroup.prototype.getBillboard=function(e){return this._orderedBillboards[e]},_.BillboardGroup.prototype.removeBillboard=function(e){this._billboards.remove(this.getBillboard(e)),this._orderedBillboards.splice(e,1)},_.BillboardGroup.prototype.remove=function(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()},_.BillboardGroup.prototype.setOnTop=function(){this._scene.primitives.raiseToTop(this._billboards)},_.prototype.startDrawingMarker=function(n){n=copyOptions(n,f);this.startDrawing(function(){a&&a.remove(),t&&t.destroy(),o&&o.setVisible(!1)});var i=this,e=this._scene,r=this._viewer,o=(e.primitives,this._tooltip),a=new _.BillboardGroup(this,n),t=new y.ScreenSpaceEventHandler(e.canvas);t.setInputAction(function(e){if(null!=e.position){var t=n.strategy.pickStrategy(e.position,r);t&&(a.addBillboard(t),i.stopDrawing(),n.callback(t,i))}},y.ScreenSpaceEventType.LEFT_CLICK),t.setInputAction(function(e){var t=e.endPosition;if(null!=t){var i=n.strategy.pickStrategy(t,r);i?o.showAt(t,"<p>Click to add your marker. Position is: </p>"+function getDisplayLatLngString(e,t){return e.longitude.toFixed(t||3)+", "+e.latitude.toFixed(t||3)}(v.cartesianToCartographic(i))):o.showAt(t,"<p>Click on the globe to add your marker.</p>")}},y.ScreenSpaceEventType.MOUSE_MOVE)},_.prototype.startDrawingPolygon=function(e){this.startDrawingPolyshape(!0,e)},_.prototype.startDrawingPolyline=function(e){this.startDrawingPolyshape(!1,e)},_.prototype.startDrawingPolyshape=function(e,n){n=copyOptions(n,e?p:h),this.startDrawing(function(){a&&a.remove(r),u&&u.remove(),d&&d.destroy(),s&&s.setVisible(!1)});var r,t=this,i=this._scene,o=this._viewer,a=i.primitives,s=this._tooltip,l=e?3:2;(r=e?new _.PolygonPrimitive(n):new _.PolylinePrimitive(n)).asynchronous=!1,a.add(r);var c=[],u=new _.BillboardGroup(this,f),d=new y.ScreenSpaceEventHandler(i.canvas);d.setInputAction(function(e){if(null!=e.position){if(c.length<l)return;if(n.strategy.pickStrategy(e.position,o)&&(t.stopDrawing(),"function"==typeof n.callback)){c.length;n.callback(c,t)}}},y.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),d.setInputAction(function(e){var t=n.strategy.pickStrategy(e.position,o);t=getCesiumHightZero(t),null!=e.position&&t&&(0==c.length&&(c.push(t.clone()),u.addBillboard(c[0])),c.length>=l&&(r.positions=c,r._createPrimitive=!0),c.push(t),u.addBillboard(t))},y.ScreenSpaceEventType.LEFT_CLICK),d.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(0==c.length)s.showAt(t,"<p>Click to add first point</p>");else{var i=n.strategy.pickStrategy(t,o);i&&(c.pop(),i.y+=y.Math.EPSILON7,c.push(i),c.length>=l&&(r.positions=c,r._createPrimitive=!0),u.getBillboard(c.length-1).position=i,s.showAt(t,"<p>Click to add new point ("+c.length+")</p>"+(c.length>l?"<p>Double click to finish drawing</p>":"")))}},y.ScreenSpaceEventType.MOUSE_MOVE)},_.prototype.startDrawingExtent=function(n){n=copyOptions(n,p);this.startDrawing(function(){null!=l&&o&&o.remove(l),c&&c.remove(),t&&t.destroy(),a&&a.setVisible(!1)});var i=this,e=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,l=null,c=null,t=new y.ScreenSpaceEventHandler(e.canvas);function updateExtent(e){null==l&&((l=new _.ExtentPrimitive({extent:e,material:n.material})).asynchronous=!1,o.add(l)),l.setExtent(e);var t=getExtentCorners(l.rectangle=e);null==c?(c=new _.BillboardGroup(i,f)).addBillboards(t):c.updateBillboardsPositions(t)}t.setInputAction(function(e){if(null!=e.position){var t=n.strategy.pickStrategy(e.position,r);if(t)if(null==l)updateExtent(getExtent(s=v.cartesianToCartographic(t),s));else i.stopDrawing(),"function"==typeof n.callback&&n.callback(getExtent(s,v.cartesianToCartographic(t)))}},y.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==l)a.showAt(t,"<p>Click to start drawing rectangle</p>");else{var i=n.strategy.pickStrategy(t,r);if(i)updateExtent(getExtent(s,v.cartesianToCartographic(i))),a.showAt(t,"<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>")}},y.ScreenSpaceEventType.MOUSE_MOVE)},_.prototype.startDrawingCircle=function(n){n=copyOptions(n,p);this.startDrawing(function cleanUp(){null!=s&&o&&o.remove(s),l&&l.remove(),t&&t.destroy(),a&&a.setVisible(!1)});var i=this,e=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,l=null,t=new y.ScreenSpaceEventHandler(e.canvas);t.setInputAction(function(e){if(null!=e.position){var t=n.strategy.pickStrategy(e.position,r);t&&(null==s?(s=new _.CirclePrimitive({center:t,radius:0,asynchronous:!1,material:n.material}),o.add(s),(l=new _.BillboardGroup(i,f)).addBillboards([t])):("function"==typeof n.callback&&n.callback(s.getCenter(),s.getRadius(),i),i.stopDrawing()))}},y.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==s)a.showAt(t,"<p>Click to start drawing the circle</p>");else{var i=n.strategy.pickStrategy(t,r);i&&(s.setRadius(y.Cartesian3.distance(getCesiumHightZero(s.getCenter()),getCesiumHightZero(i))),l.updateBillboardsPositions(i),a.showAt(t,"<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>"))}},y.ScreenSpaceEventType.MOUSE_MOVE)},_.prototype.enhancePrimitives=function(){var g=this;function setHighlighted(e){g._scene;this._highlighted&&this._highlighted==e||!0!==this._editMode&&((this._highlighted=e)?(g.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(y.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))}function setEditMode(e){if(this._editMode!=e)if(g.disableAllHighlights(),e){g.setEdited(this);var i=g._scene,n=this;if(null==this._markers){var r=function updateHalfMarkers(e,t){var i=e-1<0?t.length-1:e-1;i<c.countBillboards()&&(c.getBillboard(i).position=a(i)),(i=e)<c.countBillboards()&&(c.getBillboard(i).position=a(i))},o=function onEdited(){n.executeListeners({name:"onEdited",positions:n.positions})},a=function calculateHalfMarkerPosition(e){var t=n.positions;return v.cartographicToCartesian(new y.EllipsoidGeodesic(v.cartesianToCartographic(t[e]),v.cartesianToCartographic(t[e<t.length-1?e+1:0])).interpolateUsingFraction(.5))},t=this.dragBillboard?this.dragBillboard:m,s=this.dragHalfBillboard?this.dragHalfBillboard:m,l=new _.BillboardGroup(g,t),c=new _.BillboardGroup(g,s),u={dragHandlers:{onDrag:function onDrag(e,t){n.positions[e]=t,r(e,n.positions),n._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){n._createPrimitive=!0,o()}},onDoubleClick:function onDoubleClick(e){n.positions.length<4||(n.positions.splice(e,1),n._createPrimitive=!0,l.removeBillboard(e),c.removeBillboard(e),r(e,n.positions),o())},tooltip:function tooltip(){if(3<n.positions.length)return"Double click to remove this point"}};l.addBillboards(n.positions,u),this._markers=l;for(var d=[],p=0,h=n.positions.length+(this.isPolygon?0:-1);p<h;p++)d.push(a(p));var f={dragHandlers:{onDragStart:function onDragStart(e,t){this.index=e+1,n.positions.splice(this.index,0,t),n._createPrimitive=!0},onDrag:function onDrag(e,t){n.positions[this.index]=t,n._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){l.insertBillboard(this.index,t,u),c.getBillboard(this.index-1).position=a(this.index-1),c.insertBillboard(this.index,a(this.index),f),n._createPrimitive=!0,o()}},tooltip:function tooltip(){return"Drag to create a new point"}};c.addBillboards(d,f),this._editMarkers=c,this._globeClickhandler=new y.ScreenSpaceEventHandler(i.canvas),this._globeClickhandler.setInputAction(function(e){var t=i.pick(e.position);t&&t.primitive||n.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),l.setOnTop(),c.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1}y.Billboard.prototype.setEditable=function(){if(!this._editable){this._editable=!0;var i=this,n=this;setListener(i,"leftDown",function(e){function onDragEnd(e){t.destroy(),enableRotation(!0),n.executeListeners({name:"dragEnd",positions:e})}var t=new y.ScreenSpaceEventHandler(g._scene.canvas);t.setInputAction(function(e){var t=g._scene.camera.pickEllipsoid(e.endPosition,v);t?function onDrag(e){i.position=e,n.executeListeners({name:"drag",positions:e})}(t):onDragEnd(t)},y.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(g._scene.camera.pickEllipsoid(e.position,v))},y.ScreenSpaceEventType.LEFT_UP),enableRotation(!1)}),enhanceWithListeners(i)}function enableRotation(e){g._scene.screenSpaceCameraController.enableRotate=e}},y.Entity.prototype.setEditable=function(e){if(!1===e)return function removeListener(e,t){delete e[t]}(i=this,"leftDown"),void(this._editable=!1);if("billboard"===this.modeType&&!this._editable){this._editable=!0;var i,n=this;setListener(i=this,"leftDown",function(e){function onDragEnd(e){t.destroy(),enableRotation(!0),n.executeListeners({name:"dragEnd",positions:e})}var t=new y.ScreenSpaceEventHandler(g._scene.canvas);t.setInputAction(function(e){var t=g._scene.camera.pickEllipsoid(e.endPosition,v);t?function onDrag(e){i.position=e,n.executeListeners({name:"drag",positions:e})}(t):onDragEnd(t)},y.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(g._scene.camera.pickEllipsoid(e.position,v))},y.ScreenSpaceEventType.LEFT_UP),enableRotation(!1)}),enhanceWithListeners(i)}function enableRotation(e){g._scene.screenSpaceCameraController.enableRotate=e}},_.PolylinePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var e=this;e.isPolygon=!1,e.asynchronous=!1,g.registerEditableShape(e),e.setEditMode=setEditMode;var t=this.width;e.setHighlighted=function(e){!0!==this._editMode&&(e?(g.setHighlighted(this),this.setWidth(2*t)):this.setWidth(t))},e.getExtent=function(){return y.Extent.fromCartographicArray(v.cartesianArrayToCartographicArray(this.positions))},enhanceWithListeners(e),e.setEditMode(!1)}},_.PolygonPrimitive.prototype.setEditable=function(){var e=this;e.asynchronous=!1;g._scene;g.registerEditableShape(e),e.setEditMode=setEditMode,e.setHighlighted=setHighlighted,enhanceWithListeners(e),e.setEditMode(!1)},_.ExtentPrimitive.prototype.setEditable=function(){if(!this.setEditMode){var o=this,a=g._scene;g.registerEditableShape(o),o.asynchronous=!1,o.setEditMode=function(e){if(this._editMode!=e)if(g.disableAllHighlights(),e){if(g.setEdited(this),null==this._markers){var t=this.dragBillboard?this.dragBillboard:m,i=this.dragHalfBillboard?this.dragHalfBillboard:m,n=new _.BillboardGroup(t,i),r={dragHandlers:{onDrag:function onDrag(e,t){var i=n.getBillboard((e+2)%4).position;o.setExtent(getExtent(v.cartesianToCartographic(i),v.cartesianToCartographic(t))),n.updateBillboardsPositions(getExtentCorners(o.extent))},onDragEnd:function onDragEnd(e,t){!function onEdited(){o.executeListeners({name:"onEdited",extent:o.extent})}()}},tooltip:function tooltip(){return"Drag to change the corners of this extent"}};n.addBillboards(getExtentCorners(o.extent),r),this._markers=n,this._globeClickhandler=new y.ScreenSpaceEventHandler(a.canvas),this._globeClickhandler.setInputAction(function(e){var t=a.pick(e.position);try{t&&!t.isDestroyed()&&t.primitive||o.setEditMode(!1)}catch(e){o.setEditMode(!1)}},y.ScreenSpaceEventType.LEFT_CLICK),n.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},o.setHighlighted=setHighlighted,enhanceWithListeners(o),o.setEditMode(!1)}},_.EllipsePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=g._scene;a.asynchronous=!1,g.registerEditableShape(a),a.setEditMode=function(e){if(this._editMode!=e)if(g.disableAllHighlights(),e){g.setEdited(this);var i=this;if(null==this._markers){var n=function getMarkerPositions(){return y.Shapes.computeEllipseBoundary(v,a.getCenter(),a.getSemiMajorAxis(),a.getSemiMinorAxis(),a.getRotation()+Math.PI/2,Math.PI/2).splice(0,4)},t=this.dragBillboard?this.dragBillboard:m,r=new _.BillboardGroup(g,t),o={dragHandlers:{onDrag:function onDrag(e,t){var i=y.Cartesian3.distance(a.getCenter(),t);e%2==0?a.setSemiMajorAxis(i):a.setSemiMinorAxis(i),r.updateBillboardsPositions(n())},onDragEnd:function onDragEnd(e,t){!function onEdited(){a.executeListeners({name:"onEdited",center:a.getCenter(),semiMajorAxis:a.getSemiMajorAxis(),semiMinorAxis:a.getSemiMinorAxis(),rotation:0})}()}},tooltip:function tooltip(){return"Drag to change the excentricity and radius"}};r.addBillboards(n(),o),this._markers=r,this._globeClickhandler=new y.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(e){var t=s.pick(e.position);t&&t.primitive||i.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=setHighlighted,enhanceWithListeners(a),a.setEditMode(!1)}},_.CirclePrimitive.prototype.getCircleCartesianCoordinates=function(e){for(var t,i=y.CircleOutlineGeometry.createGeometry(new y.CircleOutlineGeometry({ellipsoid:v,center:this.getCenter(),radius:this.getRadius(),granularity:e})),n=0,r=[];n<i.attributes.position.values.length;n+=3)t=i.attributes.position.values,r.push(new y.Cartesian3(t[n],t[n+1],t[n+2]));return r},_.CirclePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=g._scene;a.asynchronous=!1,g.registerEditableShape(a),a.setEditMode=function(e){if(this._editMode!=e)if(g.disableAllHighlights(),e){g.setEdited(this);var i=this;if(null==this._markers){var n=function getMarkerPositions(){return i.getCircleCartesianCoordinates(y.Math.PI_OVER_TWO)},t=this.dragBillboard?this.dragBillboard:m,r=new _.BillboardGroup(g,t),o={dragHandlers:{onDrag:function onDrag(e,t){a.setRadius(y.Cartesian3.distance(a.getCenter(),t)),r.updateBillboardsPositions(n())},onDragEnd:function onDragEnd(e,t){!function onEdited(){a.executeListeners({name:"onEdited",center:a.getCenter(),radius:a.getRadius()})}()}},tooltip:function tooltip(){return"Drag to change the radius"}};r.addBillboards(n(),o),this._markers=r,this._globeClickhandler=new y.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(e){var t=s.pick(e.position);t&&t.primitive||i.setEditMode(!1)},y.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=setHighlighted,enhanceWithListeners(a),a.setEditMode(!1)}}},_.DrawHelperWidget=function _(e,t){if(!y.defined(t.container))throw new y.DeveloperError("Container is required");var i={markerIcon:" marker",polylineIcon:" polyline",polygonIcon:" polygon",circleIcon:" circle",extentIcon:" extent",clearIcon:" clear",polylineDrawingOptions:h,polygonDrawingOptions:l,extentDrawingOptions:c,circleDrawingOptions:u,strategy:{pickStrategy:t.pickStrategy?t.pickStrategy:s}};fillOptions(t,i);var n=this,o=document.createElement("DIV");function addIcon(e,t,i,n){var r=document.createElement("DIV");return r.className="button"+t,r.title=i,o.appendChild(r),r.onclick=n,r}o.className="toolbar",t.container.appendChild(o);var r=e._scene;-1!==t.buttons.indexOf("marker")&&addIcon(0,t.markerIcon,"Click to start drawing a 2D marker",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"markerClick"}),e.startDrawingMarker({callback:function callback(e){n.executeListeners({name:"markerCreated",position:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polyline")&&addIcon(0,t.polylineIcon,"Click to start drawing a 2D polyline",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polylineClick"}),e.startDrawingPolyline({callback:function callback(e){n.executeListeners({name:"polylineCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polygon")&&addIcon(0,t.polygonIcon,"Click to start drawing a 2D polygon",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polygonClick"}),e.startDrawingPolygon({callback:function callback(e){n.executeListeners({name:"polygonCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("extent")&&addIcon(0,t.extentIcon,"Click to start drawing an Extent",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"extentClick"}),e.startDrawingExtent({callback:function callback(e){n.executeListeners({name:"extentCreated",extent:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("circle")&&addIcon(0,t.circleIcon,"Click to start drawing a Circle",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"circleClick"}),e.startDrawingCircle({callback:function callback(e,t){n.executeListeners({name:"circleCreated",center:e,radius:t})},strategy:t.strategy})});var a=document.createElement("DIV");a.className="divider",o.appendChild(a),-1!==t.buttons.indexOf("clear")&&addIcon(0,t.clearIcon,"Remove all primitives",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"clearClick"}),r.primitives.removeAll()}),enhanceWithListeners(this)},_.prototype.addToolbar=function(e,t){return t=copyOptions(t,{container:e}),new _.DrawHelperWidget(this,t)},_})}).call(this,l(19)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){}])});
//# sourceMappingURL=Cesiums.min.js.map